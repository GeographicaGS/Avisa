/*! jQuery v1.8.2 jquery.com | jquery.org/license */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else{d=b}}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function ba(){return !1}function bb(){return !0}function bh(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do{a=a[b]}while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b)){return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return p.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b)){return p.filter(b,d,!c)}b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a)){return}var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;d<e;d++){p.event.add(b,c,h[c][d])}}}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1){return}b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bY(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bW.length;while(e--){b=bW[e]+c;if(b in a){return b}}return d}function bZ(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function b$(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style){continue}e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bZ(c)&&(e[f]=p._data(c,"olddisplay",cc(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style){continue}if(!b||c.style.display==="none"||c.style.display===""){c.style.display=b?e[f]||"":"none"}}return a}function b_(a,b,c){var d=bP.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function ca(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2){c==="margin"&&(f+=p.css(a,c+bV[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bV[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bV[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bV[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bV[e]+"Width"))||0))}return f}function cb(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=bH(a,b);if(d<0||d==null){d=a.style[b]}if(bQ.test(d)){return d}e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+ca(a,b,c||(f?"border":"content"),e)+"px"}function cc(a){if(bS[a]){return bS[a]}var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement){bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close()}b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)}return bS[a]=c,c}function ci(a,b,c,d){var e;if(p.isArray(b)){p.each(b,function(b,e){c||ce.test(a)?d(a,e):ci(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&p.type(b)==="object"){for(e in b){ci(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function cz(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c)){for(;h<i;h++){d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}}}function cA(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cv;for(;j<k&&(l||!h);j++){h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cA(a,c,d,e,h,g)))}return(l||!h)&&!g["*"]&&(h=cA(a,c,d,e,"*",g)),h}function cB(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d])}e&&p.extend(!0,a,e)}function cC(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k){f in d&&(c[k[f]]=d[f])}while(j[0]==="*"){j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"))}if(e){for(f in i){if(i[f]&&i[f].test(e)){j.unshift(f);break}}}if(j[0] in d){g=j[0]}else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g){return g!==j[0]&&j.unshift(g),d[g]}}function cD(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1]){for(c in a.converters){i[c.toLowerCase()]=a.converters[c]}}for(;e=g[++j];){if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c){for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}}if(c!==!0){if(c&&a["throws"]){b=c(b)}else{try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}}}h=e}}return{state:"success",data:b}}function cL(){try{return new a.XMLHttpRequest}catch(b){}}function cM(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cU(){return setTimeout(function(){cN=b},0),cN=p.now()}function cV(a,b){p.each(b,function(b,c){var d=(cT[b]||[]).concat(cT["*"]),e=0,f=d.length;for(;e<f;e++){if(d[e].call(a,b,c)){return}}})}function cW(a,b,c){var d,e=0,f=0,g=cS.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cN||cU(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++){j.tweens[e].run(d)}return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cN||cU(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cX(k,j.opts.specialEasing);for(;e<g;e++){d=cS[e].call(j,a,k,j.opts);if(d){return d}}return cV(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cX(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function cY(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bZ(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),a.nodeType===1&&("height" in b||"width" in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cc(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cP.exec(f)){delete b[d];if(f===(q?"hide":"show")){continue}o.push(d)}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n){p.style(a,b,n[b])}});for(d=0;d<g;d++){e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0))}}}function cZ(a,b,c,d,e){return new cZ.prototype.init(a,b,c,d,e)}function c$(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=bV[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function da(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a){return this}if(a.nodeType){return this.context=this[0]=a,this.length=1,this}if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1]){return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a)}g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2]){return d.find(a)}this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return !c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++){if((a=arguments[i])!=null){for(c in a){d=h[c],e=a[c];if(h===e){continue}k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}}}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady){return}if(!e.body){return setTimeout(p.ready,1)}p.isReady=!0;if(a!==!0&&--p.readyWait>0){return}d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready")},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a)){return !1}try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return !a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string"){return null}b=p.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(w.test(b.replace(y,"@").replace(z,"]").replace(x,""))){return(new Function("return "+b))()}p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string"){return null}try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a){if(c.apply(a[e],d)===!1){break}}}else{for(;f<g;){if(c.apply(a[f++],d)===!1){break}}}}else{if(h){for(e in a){if(c.call(a[e],e,a[e])===!1){break}}}else{for(;f<g;){if(c.call(a[f],f,a[f++])===!1){break}}}}return a},trim:o&&!o.call(" ")?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":(a+"").replace(t,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l){return l.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number"){for(;f<d;f++){a[e++]=c[f]}}else{while(c[f]!==b){a[e++]=c[f++]}}return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++){d=!!b(a[f],f),c!==d&&e.push(a[f])}return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j){for(;h<i;h++){e=c(a[h],h,d),e!=null&&(g[g.length]=e)}}else{for(f in a){e=c(a[f],f,d),e!=null&&(g[g.length]=e)}}return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d){p.access(a,c,k,d[k],1,g,e)}f=1}else{if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c){for(;k<l;k++){c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h)}}f=1}}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete"){setTimeout(p.ready,1)}else{if(e.addEventListener){e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1)}else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}}}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++){if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);e==="function"&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&e!=="string"&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1){i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return !i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return !j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return !!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return a!=null?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++){c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length){return{}}f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent){for(k in {submit:!0,change:!0,focusin:!0}){j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l}}return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i){return}c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a)){return}var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b){return}l||(j?a[h]=l=p.deletedIds.pop()||p.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function"){e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c)}return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a)){return}var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i]){return}if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++){delete d[b[e]]}if(!(c?K:p.isEmptyObject)(d)){return}}}if(!c){delete h[i].data;if(!K(h[i])){return}}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return !b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++){g=f[j].name,g.indexOf("data-")||(g=p.camelCase(g.substring(5)),J(i,g,k[g]))}p._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b){return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k}d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a){return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]}},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--){d=p._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i))}return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a)){return this.each(function(b){p(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++){f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ")}e.className=p.trim(f)}}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a)){return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++){while(d.indexOf(" "+c[f]+" ")>=0){d=d.replace(" "+c[f]+" "," ")}}e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++]){h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>=0){return !0}}return !1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f){return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get" in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d)}return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1){return}e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,f,"value")===b){this.value=f}})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0){return null}c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i){return b}g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2){return}if(e&&p.isFunction(p.fn[c])){return p(a)[c](d)}if(typeof a.getAttribute=="undefined"){return p.prop(a,c,d)}h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&"set" in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d)}return g&&"get" in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++){e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode){p.error("type property can't be changed")}else{if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button")){return L.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2){return}return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set" in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get" in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===""){return a.setAttribute(b,"auto"),c}}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b)){return a.checked=p.inArray(p(a).val(),b)>=0}}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a))){return}d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1){a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events)){return}b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m){p.event.remove(a,h+b[f],c,d,!0)}continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++){q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q))}o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered)){return}s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s]){return}c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h){h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0)}return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1){return}q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode){q.push([k,r]),l=k}l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++){k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply&&o.apply(k,d)===!1&&c.preventDefault()}return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,l,m,n,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=k.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];r[0]=c,c.delegateTarget=this;if(t.preDispatch&&t.preDispatch.call(this,c)===!1){return}if(q&&(!c.button||c.type!=="click")){for(f=c.target;f!=this;f=f.parentNode||this){if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<q;d++){l=o[d],m=l.selector,h[m]===b&&(h[m]=l.needsContext?p(m,this).index(f)>=0:p.find(m,this,null,[f]).length),h[m]&&j.push(l)}j.length&&u.push({elem:f,matches:j})}}}o.length>q&&u.push({elem:this,matches:o.slice(q)});for(d=0;d<u.length&&!c.isPropagationStopped();d++){i=u[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){l=i.matches[e];if(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace)){c.data=l.data,c.handleObj=l,g=((p.event.special[l.origType]||{}).handle||l.handler).apply(i.elem,r),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()))}}}return t.postDispatch&&t.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando]){return a}var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;){c=g[--b],a[c]=d[c]}return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event){a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0}else{return new p.Event(a,b)}},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a){return}a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a){return}a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e)){a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b}return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form")){return !1}p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form")){return !1}p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)})}return !1}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){return p.event.remove(this,"._change"),!V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a){this.on(h,c,d,a[h],f)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=ba}else{if(!e){return this}}return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj){return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if(typeof a=="object"){for(f in a){this.off(f,c,a[f])}return this}if(c===!1||typeof c=="function"){d=c,c=b}return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return p.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bc(a,b,c,d){c=c||[],b=b||r;var e,f,i,j,k=b.nodeType;if(!a||typeof a!="string"){return c}if(k!==1&&k!==9){return[]}i=g(b);if(!i&&!d){if(e=P.exec(a)){if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode){return c}if(f.id===j){return c.push(f),c}}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&h(b,f)&&f.id===j){return c.push(f),c}}}else{if(e[2]){return w.apply(c,x.call(b.getElementsByTagName(a),0)),c}if((j=e[3])&&_&&b.getElementsByClassName){return w.apply(c,x.call(b.getElementsByClassName(j),0)),c}}}}return bp(a.replace(L,"$1"),b,c,d,i)}function bd(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function be(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bf(a){return z(function(b){return b=+b,z(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function bg(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}function bh(a,b){var c,d,f,g,h,i,j,k=C[o][a];if(k){return b?0:k.slice(0)}h=a,i=[],j=e.preFilter;while(h){if(!c||(d=M.exec(h))){d&&(h=h.slice(d[0].length)),i.push(f=[])}c=!1;if(d=N.exec(h)){f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=d[0].replace(L," ")}for(g in e.filter){(d=W[g].exec(h))&&(!j[g]||(d=j[g](d,r,!0)))&&(f.push(c=new q(d.shift())),h=h.slice(c.length),c.type=g,c.matches=d)}if(!c){break}}return b?h.length:h?bc.error(a):C(a,i).slice(0)}function bi(a,b,d){var e=b.dir,f=d&&b.dir==="parentNode",g=u++;return b.first?function(b,c,d){while(b=b[e]){if(f||b.nodeType===1){return a(b,c,d)}}}:function(b,d,h){if(!h){var i,j=t+" "+g+" ",k=j+c;while(b=b[e]){if(f||b.nodeType===1){if((i=b[o])===k){return b.sizset}if(typeof i=="string"&&i.indexOf(j)===0){if(b.sizset){return b}}else{b[o]=k;if(a(b,d,h)){return b.sizset=!0,b}b.sizset=!1}}}}else{while(b=b[e]){if(f||b.nodeType===1){if(a(b,d,h)){return b}}}}}}function bj(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function bk(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++){if(f=a[h]){if(!c||c(f,d,e)){g.push(f),j&&b.push(h)}}}return g}function bl(a,b,c,d,e,f){return d&&!d[o]&&(d=bl(d)),e&&!e[o]&&(e=bl(e,f)),z(function(f,g,h,i){if(f&&e){return}var j,k,l,m=[],n=[],o=g.length,p=f||bo(b||"*",h.nodeType?[h]:h,[],f),q=a&&(f||!b)?bk(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){l=bk(r,n),d(l,[],h,i),j=l.length;while(j--){if(k=l[j]){r[n[j]]=!(q[n[j]]=k)}}}if(f){j=a&&r.length;while(j--){if(k=r[j]){f[m[j]]=!(g[m[j]]=k)}}}else{r=bk(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):w.apply(g,r)}})}function bm(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],i=g?1:0,j=bi(function(a){return a===b},h,!0),k=bi(function(a){return y.call(b,a)>-1},h,!0),m=[function(a,c,d){return !g&&(d||c!==l)||((b=c).nodeType?j(a,c,d):k(a,c,d))}];for(;i<f;i++){if(c=e.relative[a[i].type]){m=[bi(bj(m),c)]}else{c=e.filter[a[i].type].apply(null,a[i].matches);if(c[o]){d=++i;for(;d<f;d++){if(e.relative[a[d].type]){break}}return bl(i>1&&bj(m),i>1&&a.slice(0,i-1).join("").replace(L,"$1"),c,i<d&&bm(a.slice(i,d)),d<f&&bm(a=a.slice(d)),d<f&&a.join(""))}m.push(c)}}return bj(m)}function bn(a,b){var d=b.length>0,f=a.length>0,g=function(h,i,j,k,m){var n,o,p,q=[],s=0,u="0",x=h&&[],y=m!=null,z=l,A=h||f&&e.find.TAG("*",m&&i.parentNode||i),B=t+=z==null?1:Math.E;y&&(l=i!==r&&i,c=g.el);for(;(n=A[u])!=null;u++){if(f&&n){for(o=0;p=a[o];o++){if(p(n,i,j)){k.push(n);break}}y&&(t=B,c=++g.el)}d&&((n=!p&&n)&&s--,h&&x.push(n))}s+=u;if(d&&u!==s){for(o=0;p=b[o];o++){p(x,q,i,j)}if(h){if(s>0){while(u--){!x[u]&&!q[u]&&(q[u]=v.call(k))}}q=bk(q)}w.apply(k,q),y&&!h&&q.length>0&&s+b.length>1&&bc.uniqueSort(k)}return y&&(t=B,l=z),x};return g.el=0,d?z(g):g}function bo(a,b,c,d){var e=0,f=b.length;for(;e<f;e++){bc(a,b[e],c,d)}return c}function bp(a,b,c,d,f){var g,h,j,k,l,m=bh(a),n=m.length;if(!d&&m.length===1){h=m[0]=m[0].slice(0);if(h.length>2&&(j=h[0]).type==="ID"&&b.nodeType===9&&!f&&e.relative[h[1].type]){b=e.find.ID(j.matches[0].replace(V,""),b,f)[0];if(!b){return c}a=a.slice(h.shift().length)}for(g=W.POS.test(a)?-1:h.length-1;g>=0;g--){j=h[g];if(e.relative[k=j.type]){break}if(l=e.find[k]){if(d=l(j.matches[0].replace(V,""),R.test(h[0].type)&&b.parentNode||b,f)){h.splice(g,1),a=d.length&&h.join("");if(!a){return w.apply(c,x.call(d,0)),c}break}}}}return i(a,m)(d,b,f,c,R.test(a)),c}function bq(){}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),q=String,r=a.document,s=r.documentElement,t=0,u=0,v=[].pop,w=[].push,x=[].slice,y=[].indexOf||function(a){var b=0,c=this.length;for(;b<c;b++){if(this[b]===a){return b}}return -1},z=function(a,b){return a[o]=b==null||b,a},A=function(){var a={},b=[];return z(function(c,d){return b.push(c)>e.cacheLength&&delete a[b.shift()],a[c]=d},a)},B=A(),C=A(),D=A(),E="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",G=F.replace("w","w#"),H="([*^$|!~]?=)",I="\\["+E+"*("+F+")"+E+"*(?:"+H+E+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+G+")|)|)"+E+"*\\]",J=":("+F+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+I+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+E+"*((?:-\\d)?\\d*)"+E+"*\\)|)(?=[^-]|$)",L=new RegExp("^"+E+"+|((?:^|[^\\\\])(?:\\\\.)*)"+E+"+$","g"),M=new RegExp("^"+E+"*,"+E+"*"),N=new RegExp("^"+E+"*([\\x20\\t\\r\\n\\f>+~])"+E+"*"),O=new RegExp(J),P=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Q=/^:not/,R=/[\x20\t\r\n\f]*[+~]/,S=/:not\($/,T=/h\d/i,U=/input|select|textarea|button/i,V=/\\(?!\\)/g,W={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),NAME:new RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+J),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+E+"*(even|odd|(([+-]|)(\\d*)n|)"+E+"*(?:([+-]|)"+E+"*(\\d+)|))"+E+"*\\)|)","i"),needsContext:new RegExp("^"+E+"*[>+~]|"+K,"i")},X=function(a){var b=r.createElement("div");try{return a(b)}catch(c){return !1}finally{b=null}},Y=X(function(a){return a.appendChild(r.createComment("")),!a.getElementsByTagName("*").length}),Z=X(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#"}),$=X(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),_=X(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),ba=X(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",s.insertBefore(a,s.firstChild);var b=r.getElementsByName&&r.getElementsByName(o).length===2+r.getElementsByName(o+0).length;return d=!r.getElementById(o),s.removeChild(a),b});try{x.call(s.childNodes,0)[0].nodeType}catch(bb){x=function(a){var b,c=[];for(;b=this[a];a++){c.push(b)}return c}}bc.matches=function(a,b){return bc(a,null,null,b)},bc.matchesSelector=function(a,b){return bc(b,null,null,[a]).length>0},f=bc.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string"){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=f(a)}}else{if(e===3||e===4){return a.nodeValue}}}else{for(;b=a[d];d++){c+=f(b)}}return c},g=bc.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},h=bc.contains=s.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:s.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode){if(b===a){return !0}}return !1},bc.attr=function(a,b){var c,d=g(a);return d||(b=b.toLowerCase()),(c=e.attrHandle[b])?c(a):d||$?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},e=bc.selectors={cacheLength:50,createPseudo:z,match:W,attrHandle:Z?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:d?function(a,b,c){if(typeof b.getElementById!==n&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==n&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:Y?function(a,b){if(typeof b.getElementsByTagName!==n){return b.getElementsByTagName(a)}}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++){d.nodeType===1&&e.push(d)}return e}return c},NAME:ba&&function(a,b){if(typeof b.getElementsByName!==n){return b.getElementsByName(name)}},CLASS:_&&function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c){return b.getElementsByClassName(a)}}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(V,""),a[3]=(a[4]||a[5]||"").replace(V,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||bc.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&bc.error(a[0]),a},PSEUDO:function(a){var b,c;if(W.CHILD.test(a[0])){return null}if(a[3]){a[2]=a[3]}else{if(b=a[4]){O.test(b)&&(c=bh(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b}}return a.slice(0,3)}},filter:{ID:d?function(a){return a=a.replace(V,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(V,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return !0}:(a=a.replace(V,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=B[o][a];return b||(b=B(a,new RegExp("(^|"+E+")"+a+"("+E+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return function(d,e){var f=bc.attr(d,a);return f==null?b==="!=":b?(f+="",b==="="?f===c:b==="!="?f!==c:b==="^="?c&&f.indexOf(c)===0:b==="*="?c&&f.indexOf(c)>-1:b==="$="?c&&f.substr(f.length-c.length)===c:b==="~="?(" "+f+" ").indexOf(c)>-1:b==="|="?f===c||f.substr(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d){return a==="nth"?function(a){var b,e,f=a.parentNode;if(c===1&&d===0){return !0}if(f){e=0;for(b=f.firstChild;b;b=b.nextSibling){if(b.nodeType===1){e++;if(a===b){break}}}}return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling){if(c.nodeType===1){return !1}}if(a==="first"){return !0}c=b;case"last":while(c=c.nextSibling){if(c.nodeType===1){return !1}}return !0}}},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||bc.error("unsupported pseudo: "+a);return d[o]?d(b):d.length>1?(c=[a,a,"",b],e.setFilters.hasOwnProperty(a.toLowerCase())?z(function(a,c){var e,f=d(a,b),g=f.length;while(g--){e=y.call(a,f[g]),a[e]=!(c[e]=f[g])}}):function(a){return d(a,0,c)}):d}},pseudos:{not:z(function(a){var b=[],c=[],d=i(a.replace(L,"$1"));return d[o]?z(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){if(f=g[h]){a[h]=!(b[h]=f)}}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:z(function(a){return function(b){return bc(a,b).length>0}}),contains:z(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return !e.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4){return !1}a=a.nextSibling}return !0},header:function(a){return T.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:bd("radio"),checkbox:bd("checkbox"),file:bd("file"),password:bd("password"),image:bd("image"),submit:be("submit"),reset:be("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return U.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:bf(function(a,b,c){return[0]}),last:bf(function(a,b,c){return[b-1]}),eq:bf(function(a,b,c){return[c<0?c+b:c]}),even:bf(function(a,b,c){for(var d=0;d<b;d+=2){a.push(d)}return a}),odd:bf(function(a,b,c){for(var d=1;d<b;d+=2){a.push(d)}return a}),lt:bf(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;){a.push(d)}return a}),gt:bf(function(a,b,c){for(var d=c<0?c+b:c;++d<b;){a.push(d)}return a})}},j=s.compareDocumentPosition?function(a,b){return a===b?(k=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b){return k=!0,0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h){return bg(a,b)}if(!g){return -1}if(!h){return 1}while(i){e.unshift(i),i=i.parentNode}i=h;while(i){f.unshift(i),i=i.parentNode}c=e.length,d=f.length;for(var j=0;j<c&&j<d;j++){if(e[j]!==f[j]){return bg(e[j],f[j])}}return j===c?bg(a,f[j],-1):bg(e[j],b,1)},[0,0].sort(j),m=!k,bc.uniqueSort=function(a){var b,c=1;k=m,a.sort(j);if(k){for(;b=a[c];c++){b===a[c-1]&&a.splice(c--,1)}}return a},bc.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},i=bc.compile=function(a,b){var c,d=[],e=[],f=D[o][a];if(!f){b||(b=bh(a)),c=b.length;while(c--){f=bm(b[c]),f[o]?d.push(f):e.push(f)}f=D(a,bn(e,d))}return f},r.querySelectorAll&&function(){var a,b=bp,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[":focus"],f=[":active",":focus"],h=s.matchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector||s.msMatchesSelector;X(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+E+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),X(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+E+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=new RegExp(e.join("|")),bp=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a))){var i,j,k=!0,l=o,m=d,n=d.nodeType===9&&a;if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){i=bh(a),(k=d.getAttribute("id"))?l=k.replace(c,"\\$&"):d.setAttribute("id",l),l="[id='"+l+"'] ",j=i.length;while(j--){i[j]=l+i[j].join("")}m=R.test(a)&&d.parentNode||d,n=i.join(",")}if(n){try{return w.apply(f,x.call(m.querySelectorAll(n),0)),f}catch(p){}finally{k||d.removeAttribute("id")}}}return b(a,d,f,g,h)},h&&(X(function(b){a=h.call(b,"div");try{h.call(b,"[test!='']:sizzle"),f.push("!=",J)}catch(c){}}),f=new RegExp(f.join("|")),bc.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!g(b)&&!f.test(c)&&(!e||!e.test(c))){try{var i=h.call(b,c);if(i||a||b.document&&b.document.nodeType!==11){return i}}catch(j){}}return bc(c,null,null,[b]).length>0})}(),e.pseudos.nth=e.pseudos.eq,e.filters=bq.prototype=e.pseudos,e.setFilters=new bq,bc.attr=p.attr,p.find=bc,p.expr=bc.selectors,p.expr[":"]=p.expr.pseudos,p.unique=bc.uniqueSort,p.text=bc.getText,p.isXMLDoc=bc.isXML,p.contains=bc.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string"){return p(a).filter(function(){for(b=0,c=h.length;b<c;b++){if(p.contains(h[b],this)){return !0}}})}g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0){for(e=d;e<g.length;e++){for(f=0;f<d;f++){if(g[f]===g[e]){g.splice(e--,1);break}}}}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++){if(p.contains(this,c[b])){return !0}}})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d))){f.nodeType===1&&e.push(f),f=f[c]}return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a)){return this.each(function(b){p(this).wrapAll(a.call(this,b))})}if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0])){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0])){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++){if(!a||p.filter(a,[c]).length){!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c)}}return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild){a.removeChild(a.firstChild)}}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(bm,""):b}if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j)){return this.each(function(){p(this).domManip(a,c,d)})}if(p.isFunction(j)){return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)})}if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++){d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0))}}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1){return g[b](this[0]),this}for(;e<h;e++){d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d)}return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f){e[f]&&bE(d[f],e[f])}}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f){bD(d[f],e[f])}}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&bA,t=[];if(!b||typeof b.createDocumentFragment=="undefined"){b=e}for(f=0;(h=a[f])!=null;f++){typeof h=="number"&&(h+="");if(!h){continue}if(typeof h=="string"){if(!br.test(h)){h=b.createTextNode(h)}else{s=s||bk(b),l=b.createElement("div"),s.appendChild(l),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--){l=l.lastChild}if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g){p.nodeName(n[g],"tbody")&&!n[g].childNodes.length&&n[g].parentNode.removeChild(n[g])}}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l.parentNode.removeChild(l)}}h.nodeType?t.push(h):p.merge(t,h)}l&&(h=l=s=null);if(!p.support.appendChecked){for(f=0;(h=t[f])!=null;f++){p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG)}}if(c){q=function(a){if(!a.type||bx.test(a.type)){return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)}};for(f=0;(h=t[f])!=null;f++){if(!p.nodeName(h,"script")||!q(h)){c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[f+1,0].concat(r)),f+=r.length)}}}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++){if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events){for(f in c.events){k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle)}}i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^(none|table(?!-c[ea]).+)/,bO=/^margin/,bP=new RegExp("^("+q+")(.*)$","i"),bQ=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bR=new RegExp("^([-+])=("+q+")","i"),bS={},bT={position:"absolute",visibility:"hidden",display:"block"},bU={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],bW=["Webkit","O","Moz","ms"],bX=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return b$(this,!0)},hide:function(){return b$(this)},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bX.apply(this,arguments):this.each(function(){(c?a:bZ(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style){return}var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bY(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b){return h&&"get" in h&&(f=h.get(a,!1,e))!==b?f:j[c]}g=typeof d,g==="string"&&(f=bR.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d)){return}g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set" in h)||(d=h.set(a,d,e))!==b){try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bY(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get" in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bU&&(f=bU[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b){f[e]=a.style[e],a.style[e]=b[e]}d=c.call(a);for(e in b){a.style[e]=f[e]}return d}}),a.getComputedStyle?bH=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],d===""&&!p.contains(b.ownerDocument,b)&&(d=p.style(b,c)),bQ.test(d)&&bO.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bQ.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth===0&&bN.test(bH(a,"display"))?p.swap(a,bT,function(){return cb(a,b,d)}):cb(a,b,d)}},set:function(a,c,d){return b_(a,c,d?ca(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b){return bH(a,"marginRight")}})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bQ.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none"},p.expr.filters.visible=function(a){return !p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bV[d]+b]=e[d]||e[d-2]||e[0]}return f}},bO.test(a)||(p.cssHooks[a+b].set=b_)});var cd=/%20/g,ce=/\[\]$/,cf=/\r?\n/g,cg=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ch=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ch.test(this.nodeName)||cg.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(cf,"\r\n")}}):{name:b.name,value:c.replace(cf,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a)){p.each(a,function(){f(this.name,this.value)})}else{for(d in a){ci(d,a[d],c,f)}}return e.join("&").replace(cd,"+")};var cj,ck,cl=/#.*$/,cm=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,cp=/^\/\//,cq=/\?/,cr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cs=/([?&])_=[^&]*/,ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cu=p.fn.load,cv={},cw={},cx=["*/"]+["*"];try{ck=f.href}catch(cy){ck=e.createElement("a"),ck.href="",ck=ck.href}cj=ct.exec(ck.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&cu){return cu.apply(this,arguments)}if(!this.length){return this}var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cr,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cB(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cB(a,b),a},ajaxSettings:{url:ck,isLocal:cn.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cx},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cz(cv),ajaxTransport:cz(cw),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2){return}v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cC(l,x,f));if(a>=200&&a<300||a===304){l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cD(l,u),y=k.state,s=k.data,t=k.error,k=!t)}else{t=y;if(!y||a){y="error",a<0&&(a=0)}}x.status=a,x.statusText=(c||y)+"",k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cm.exec(e)){f[c[1].toLowerCase()]=c[2]}}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2){for(b in a){r[b]=[r[b],a[b]]}}else{b=a[x.status],x.always(b)}}return this},l.url=((a||l.url)+"").replace(cl,"").replace(cp,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=ct.exec(l.url.toLowerCase())||!1,l.crossDomain=i&&i.join(":")+(i[3]?"":i[1]==="http:"?80:443)!==cj.join(":")+(cj[3]?"":cj[1]==="http:"?80:443)),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cA(cv,l,c,x);if(v===2){return x}j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!co.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cq.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cs,"$1_="+z);l.url=A+(A===l.url?(cq.test(l.url)?"&":"?")+"_="+z:"")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cx+"; q=0.01":""):l.accepts["*"]);for(k in l.headers){x.setRequestHeader(k,l.headers[k])}if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in {success:1,error:1,complete:1}){x[k](l[k])}g=cA(cw,l,c,x);if(!g){y(-1,"No Transport")}else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2){y(-1,B)}else{throw B}}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cE=[],cF=/\?/,cG=/(=)\?(?=&|$)|\?\?/,cH=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cE.pop()||p.expando+"_"+cH++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cG.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cG.test(i);if(c.dataTypes[0]==="jsonp"||l||m){return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cG,"$1"+f):m?c.data=i.replace(cG,"$1"+f):k&&(c.url+=(cF.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cE.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState)){c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")}},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cI,cJ=a.ActiveXObject?function(){for(var a in cI){cI[a](0,1)}}:!1,cK=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&cL()||cM()}:cL,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields){for(h in c.xhrFields){i[h]=c.xhrFields[h]}}c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e){i.setRequestHeader(h,e[h])}}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cJ&&delete cI[g]);if(e){i.readyState!==4&&i.abort()}else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cK,cJ&&(cI||(cI={},p(a).unload(cJ)),cI[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cN,cO,cP=/^(?:toggle|show|hide)$/,cQ=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cR=/queueHooks$/,cS=[cY],cT={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=cQ.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2],d=f[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&h){h=p.css(e.elem,a,!0)||c||1;do{i=i||".5",h=h/i,p.style(e.elem,a,h+d)}while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};p.Animation=p.extend(cW,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++){c=a[d],cT[c]=cT[c]||[],cT[c].unshift(b)}},prefilter:function(a,b){b?cS.unshift(a):cS.push(a)}}),p.Tween=cZ,cZ.prototype={constructor:cZ,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cZ.propHooks[this.prop];return a&&a.get?a.get(this):cZ.propHooks._default.get(this)},run:function(a){var b,c=cZ.propHooks[this.prop];return this.options.duration?this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cZ.propHooks._default.set(this),this}},cZ.prototype.init.prototype=cZ.prototype,cZ.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cZ.propHooks.scrollTop=cZ.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(c$(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bZ).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cW(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c){g[c]&&g[c].stop&&e(g[c])}else{for(c in g){g[c]&&g[c].stop&&cR.test(c)&&e(g[c])}}for(c=f.length;c--;){f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1))}(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:c$("show"),slideUp:c$("hide"),slideToggle:c$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cZ.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cO&&(cO=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cO),cO=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c_=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)})}var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(!l){return}return(d=l.body)===k?p.offset.bodyOffset(k):(c=l.documentElement,p.contains(c,k)?(typeof k.getBoundingClientRect!="undefined"&&(j=k.getBoundingClientRect()),e=da(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using" in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0]){return}var a=this[0],b=this.offsetParent(),c=this.offset(),d=c_.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c_.test(a.nodeName)&&p.css(a,"position")==="static"){a=a.offsetParent}return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=da(a);if(f===b){return g?c in g?g[c]:g.document.documentElement[e]:a[e]}g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);(function(){var b=(typeof Mapea=="object"&&Mapea.singleFile);window.Mapea={_scriptName:(!b)?"Mapea.js":"Mapea.js",_getScriptLocation:function(){var m="";var n=Mapea._scriptName;var h=document.getElementsByTagName("script");for(var k=0,g=h.length;k<g;k++){var o=h[k].getAttribute("src");if(o){var j=o.lastIndexOf(n);var l=o.lastIndexOf("?");if(l<0){l=o.length}if((j>-1)&&(j+n.length==l)){m=o.slice(0,l-n.length);break}}}return m}};window.Mapea.global={};window.Mapea.THEME_PATH=Mapea._getScriptLocation();if(!b){var e=new Array();var f=[];var d=Mapea._getScriptLocation()+"lib/";for(var c=0,a=e.length;c<a;c++){f.push("<script src='"+d+e[c]+"'><\/script>")}document.write(f.join(""))}})();Mapea.VERSION_NUMBER="3.2.0";Mapea.Version={WFS_GET_CAPABILITIES:"1.1.0",WFS_DESCRIBE_FEATURE_TYPE:"1.1.0",WFS_GET_FEATURE:"1.1.0"};Mapea.Tile=OpenLayers.Class({EVENT_TYPES:["loadstart","loadend","reload","unload"],events:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:false,initialize:function(d,a,e,b,c){this.layer=d;this.position=a.clone();this.bounds=e.clone();this.url=b;this.size=c.clone();this.id=OpenLayers.Util.createUniqueID("Tile_");this.events=new OpenLayers.Events(this,null,this.EVENT_TYPES)},unload:function(){if(this.isLoading){this.isLoading=false;this.events.triggerEvent("unload")}},destroy:function(){this.layer=null;this.bounds=null;this.size=null;this.position=null;this.events.destroy();this.events=null},clone:function(a){if(a==null){a=new Mapea.Tile(this.layer,this.position,this.bounds,this.url,this.size)}OpenLayers.Util.applyDefaults(a,this);return a},draw:function(){var a=this.layer.maxExtent;var b=(a&&this.bounds.intersectsBounds(a,false));this.shouldDraw=(b||this.layer.displayOutsideMaxExtent);this.clear();return this.shouldDraw},moveTo:function(b,a,c){if(c==null){c=true}this.bounds=b.clone();this.position=a.clone();if(c){this.draw()}},clear:function(){},getBoundsFromBaseLayer:function(a){var f=OpenLayers.i18n("reprojectDeprecated",{layerName:this.layer.name});OpenLayers.Console.warn(f);var d=this.layer.map.getLonLatFromLayerPx(a);var c=a.clone();c.x+=this.size.w;c.y+=this.size.h;var b=this.layer.map.getLonLatFromLayerPx(c);if(d.lon>b.lon){if(d.lon<0){d.lon=-180-(d.lon+180)}else{b.lon=180+b.lon+180}}var e=new OpenLayers.Bounds(d.lon,b.lat,b.lon,d.lat);return e},showTile:function(){if(this.shouldDraw){this.show()}},show:function(){},hide:function(){},CLASS_NAME:"Mapea.Tile"});Mapea.Tile.Image=OpenLayers.Class(OpenLayers.Tile.Image,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,destroy:function(){if(this.imgDiv){this.clear();this.imgDiv=null;this.frame=null}this.asyncRequestId=null;OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(a){if(this.layer!=this.layer.map.baseLayer&&this.layer.reproject){this.bounds=this.getBoundsFromBaseLayer(this.position)}if(this.isLoading){this._loadEvent="reload"}else{this.isLoading=true;this._loadEvent="loadstart"}this.positionTile();this.renderTile()}else{this.unload()}return a},renderTile:function(){this.layer.div.appendChild(this.getTile());if(this.layer.async){var a=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(b){if(a==this.asyncRequestId){this.url=b;this.initImage()}},this)}else{this.url=this.layer.getURL(this.bounds);this.initImage()}},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var a=this.imgDiv;if(a){OpenLayers.Event.stopObservingElement(a);var b=this.getTile();if(b.parentNode===this.layer.div){this.layer.div.removeChild(b)}this.setImgSrc();if(this.layerAlphaHack===true){a.style.filter=""}OpenLayers.Element.removeClass(a,"olImageLoadError")}this.canvasContext=null},initImage:function(){this.events.triggerEvent(this._loadEvent);var a=this.getImage();if(this.url&&a.getAttribute("src")==this.url){this.onImageLoad()}else{var b=OpenLayers.Function.bind(function(){OpenLayers.Event.stopObservingElement(a);OpenLayers.Event.observe(a,"load",OpenLayers.Function.bind(this.onImageLoad,this));OpenLayers.Event.observe(a,"error",OpenLayers.Function.bind(this.onImageError,this));this.imageReloadAttempts=0;this.setImgSrc(this.url)},this);if(a.getAttribute("src")==this.blankImageUrl){b()}else{OpenLayers.Event.observe(a,"load",b);OpenLayers.Event.observe(a,"error",b);if(this.crossOriginKeyword){a.removeAttribute("crossorigin")}a.src=this.blankImageUrl}}},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(!this.imgDiv||this.isLoading){return}var a;if(this.frame){a=this.frame.cloneNode(false);a.appendChild(this.imgDiv)}else{a=this.imgDiv}this.imgDiv=null;return a},onImageError:function(){var a=this.imgDiv;if(a.src!=null){this.imageReloadAttempts++;if(this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS){this.setImgSrc(this.layer.getURL(this.bounds))}else{OpenLayers.Element.addClass(a,"olImageLoadError");this.events.triggerEvent("loaderror");this.onImageLoad()}}},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var a=document.createElement("canvas");a.width=this.size.w;a.height=this.size.h;this.canvasContext=a.getContext("2d");this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"Mapea.Tile.Image"});Mapea.Control={};Mapea.Format={};Mapea.Layer={};Mapea.Util={};Mapea.Popup={};Mapea.Util.isMobile=((/(android|bb\d+|meego|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)|pocket|psp|series(4|6)0|symbian|treo|windows (ce|phone)|xda|xiino)/i.test(navigator.userAgent||navigator.vendor||window.opera))||(window.location.href.toLowerCase().indexOf("desktoptesting")>-1));Mapea.Util.hasSearchPanel=false;Mapea.Util.hasMobileSearchPanel=false;Mapea.Util.hasLeftPanel=false;Mapea.Util.hasRightPanel=false;Mapea.Util.hasContextsButton=false;Mapea.Util.hasBaseLayer=false;Mapea.Util.hasContextLoaded=false;Mapea.Util.hasInitalContextBtn=false;Mapea.Util.getImagesLocation=function(){return Mapea.ImgPath||(Mapea._getScriptLocation()+"img/")};Mapea.Util.getProxyLocation=function(){var d;var c=Mapea._getScriptLocation();var b=c.lastIndexOf("Componente");var e=window.location.href;var a=e.lastIndexOf("/");if(b!=-1){d=c.substring(0,b)+"proxy"}else{if(a!=-1){d=e.substring(0,a)+"/proxy"}else{d=e+"/proxy"}}return d};Mapea.Util.loadContext=function(b,f,d){var e;var a=new OpenLayers.Ajax.Request(f,{asynchronous:false});if(a){try{e=b.read(a.transport.responseText,{map:d,controls:[new OpenLayers.Control.PanZoomBar()],numZoomLevels:16});e.restrictedExtent=e.maxExtent;window.currentContext=f}catch(c){e=null;Mapea.Util.showErrorMessage("Error al cargar el contexto: "+c+"\n"+a.transport.responseText)}}return e};Mapea.Util.changeContext=function(b,g,d,f){var e=f||window.map||window.sigcMap.map;var a=new OpenLayers.Ajax.Request(g,{asynchronous:false});if(a){try{context=b.read(a.transport.responseText,{context:d,controls:[new OpenLayers.Control.PanZoomBar()],numZoomLevels:6});Mapea.Util.removeLayers(e);e.addLayers(context.layers);e.addExternalLayers()}catch(c){Mapea.Util.showErrorMessage(c)}}};Mapea.Util.removeLayers=function(a){if(a.layers!=null){if(a.layers!=null){for(var b=a.layers.length-1;b>=0;--b){a.removeLayer(a.layers[b],false)}}}};Mapea.Util.unselectFeature=function(b){if(b.feature&&b.feature.layer){var d=b.feature.layer.map;if(d){var e=d.getControlsByClass("OpenLayers.Control.SelectFeature");e=e.concat(d.getControlsByClass("Mapea.Control.SelectFeature"));for(var c=0,a=e.length;c<a;c++){e[c].clickoutFeature(b.feature)}if(d.uniqueSelectFeatureCtrl){d.uniqueSelectFeatureCtrl.clickoutFeature(b.feature)}}}};Mapea.Util.unselectAllFeatures=function(d){var c=d||this.map||window.map||sigcMap.map;var e=c.getControlsByClass("OpenLayers.Control.SelectFeature");e=e.concat(c.getControlsByClass("Mapea.Control.SelectFeature"));for(var b=0,a=e.length;b<a;b++){e[b].unselectAll()}if(c.uniqueSelectFeatureCtrl){c.uniqueSelectFeatureCtrl.unselectAll()}};Mapea.Util.closePopup=function(a){var b=this.map||window.map||map;if(b){Mapea.Util.unselectAllFeatures(b);Mapea.Util.removeAllPopups(b)}};Mapea.Util.removeAllPopups=function(b){while(b.popups.length>0){var a=b.popups[0];if(a){b.removePopup(a);a=null}}};Mapea.Util.featureIconStyle=OpenLayers.Util.applyDefaults({graphicWidth:42,graphicHeight:48,graphicXOffset:-21,graphicYOffset:-45,graphicOpacity:1,cursor:"pointer"},OpenLayers.Feature.Vector.style["default"]);Mapea.Util.newFeatureIconStyle=OpenLayers.Util.applyDefaults({graphicWidth:42,graphicHeight:48,graphicXOffset:-21,graphicYOffset:-45,graphicOpacity:1,cursor:"pointer"},OpenLayers.Feature.Vector.style["default"]);Mapea.Util.userLocationStyle=OpenLayers.Util.applyDefaults({graphicWidth:36,graphicHeight:36,graphicXOffset:-18,graphicYOffset:-32,graphicOpacity:1,cursor:"pointer"},OpenLayers.Feature.Vector.style["default"]);Mapea.Util.drawStyledFeature=function(a,f,b,e){var c=new OpenLayers.Geometry.MultiPoint([new OpenLayers.Geometry.Point(a,f)]);var d=new OpenLayers.Feature.Vector(c,b||{},e||Mapea.Util.featureIconStyle);return d};Mapea.Util.drawStyledMPoint=function(b,a,d){var c=new OpenLayers.Feature.Vector(b,a||{},d||Mapea.Util.featureIconStyle);return c};Mapea.Util.getUrlVars=function(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d};Mapea.Util.getUrlVar=function(b){try{return Mapea.Util.getUrlVars()[b]}catch(a){return null}};Mapea.Util.isLayerSwitcher=function(a){var b=/(.*)layerswitcher(.*)/i;return b.test(a.CLASS_NAME)};Mapea.Util.createImagen=function(c,f,a){var e=Mapea.global.THEME_IMG_PATH+c;var b=f||("MapeaImageDiv"+OpenLayers.Util.createUniqueID());var d=OpenLayers.Util.createAlphaImageDiv(b,null,null,e,a||"absolute");d.style.margin="5px";return d};Mapea.Util.isButton=function(b){var a=/(\w*)\.Control\.Button/i;return a.test(b.CLASS_NAME)};Mapea.Util.isPanel=function(a){var b=/(\w*)\.Control\.Panel/i;return b.test(a.CLASS_NAME)};Mapea.Util.showJQueryDialog=function(c){if(Mapea.global.jQueryCssLoaded&&Mapea.global.mapeaCssLoaded){var g,f;var e="no-close";if(c&&(typeof(c)=="string")){f=function(){jQuery(this).dialog("close")};g="#"+c;e+=" info"}else{f=function(){jQuery(this).remove()};g='<div id="'+OpenLayers.Util.createUniqueID()+'" title="'+c.title+'">';g+="<p>"+c.message+"</p></div>"}if(c.type){e+=" "+c.type}var a=(Mapea.Util.isMobile?0.9:0.4);var d=jQuery(window).width()*a;var b=jQuery(g).dialog({modal:true,width:d,resizable:false,dialogClass:e,open:function(h,j){jQuery(".ui-dialog.no-close").css("z-index","10000");jQuery(".ui-widget-overlay").css("z-index","9999")},buttons:[{text:"OK",click:f}]})}else{if(!Mapea.global.jQueryCssLoaded){Mapea.Util.loadCSSFile(Mapea.global.THEME_JQUERY_PATH,function(){Mapea.global.jQueryCssLoaded=true;Mapea.Util.showJQueryDialog(c)})}else{if(!Mapea.global.mapeaCssLoaded){Mapea.Util.loadCSSFile(Mapea.global.THEME_CSS_PATH,function(){Mapea.global.mapeaCssLoaded=true;Mapea.Util.showJQueryDialog(c)})}}}};Mapea.Util.showErrorMessage=function(a){Mapea.Util.showJQueryDialog({title:"ERROR",message:a,type:"error"})};Mapea.Util.showInfoMessage=function(a){Mapea.Util.showJQueryDialog({title:"Información",message:a,type:"info"})};Mapea.Util.showSuccessMessage=function(a){Mapea.Util.showJQueryDialog({title:"ÉXITO",message:a,type:"success"})};Mapea.Util.isNullOrEmpty=function(b){var a=true;if(b&&(b!=null)){if((typeof b)=="string"){b=OpenLayers.String.trim(b)}a=(b.length===0)}return a};Mapea.Util.appendDivider=function(a){var b=document.createElement("ul");var c=document.createElement("li");OpenLayers.Element.addClass(c,"divider");b.appendChild(c);a.appendChild(b)};Mapea.Util.getMapProjection=function(c){var b=c||this.map||window.map||sigcMap.map;var a=b.getProjection();if((typeof a)!="string"){a=a.projCode}return a};Mapea.Util.objectToTable=function(d,e,f){var b='<table class="mapea-table"><tbody>';if(e){b+='<tr><td class="header" colspan="'+f||0+'">'+e+"</td></tr>"}for(var a in d){var c=d[a];if((typeof c)=="string"){c=OpenLayers.String.trim(c)}if(!c||(c.length==0)){c="-"}b+="<tr><td><b>";b+=a;b+="</b></td><td>";b+=c;b+="</td></tr>"}b+="</tbody></table>";return b};Mapea.Util.parseBoolean=function(d){var b;if(!d){b=false}else{var c=((typeof d)=="boolean");var a=((typeof d)=="string");if(c){b=d}else{if(a){b=/^true$/i.test(d)}else{b=false}}}return b};Mapea.Util.allowDragPropagation=function(h){var f=true;var d=/.*layerswitcher.*/i;var c=/.*mapea.*context.*/i;var g=h.target||h.toElement||h.srcElement||h.element;if(g){var b=jQuery(g);var a=b.parent();var j=b.attr("class");var e=a.attr("class");f=(!d.test(j)&&!d.test(e)&&!c.test(j))}return f};Mapea.Util.isWFS=function(c){var b=false;if(c&&c.CLASS_NAME){var a=/^(OpenLayers|Mapea)\.Layer\.WFS$/;b=a.test(c.CLASS_NAME)}return b};Mapea.Util.getPopupInPixelXY=function(a,l,k,g){var b;if(a.popups.length>0){if(!g){g=0}for(var j=0,d=a.popups.length;j<d;j++){var f=a.popups[j];var n=f.pixelX;var m=f.pixelY;var c=((n!="undefined")&&(m!="undefined"));var h=((n>(l-g))&&(n<(l+g)));var e=((m>(k-g))&&(m<(k+g)));if(c&&h&&e){b=f;break}}}return b};Mapea.Util.getPopupInPixel=function(f,c,e){var d=c.x;var b=c.y;var a=e||Mapea.Control.GetLayersInfo.SHOW_INFO_BUFFER;return Mapea.Util.getPopupInPixelXY(f,d,b,a)};Mapea.Util.loadCSSFile=function(a,g,c){var d=50;var j=c||d;var e=document.createElement("link");e.setAttribute("rel","stylesheet");e.setAttribute("type","text/css");e.setAttribute("mapeastyle","true");e.setAttribute("href",a);if(jQuery.browser.msie){e.onreadystatechange=function(){var k=e.readyState;if(k==="loaded"||k==="complete"){e.onreadystatechange=null;g()}}}else{if(jQuery.browser.mozilla){var b=jQuery('<div class="test-css-load-firefox">').css("display","none");b.appendTo(document);var h=setInterval(function(){if((b.css("height")==="500px")||(a==Mapea.global.THEME_JQUERY_PATH)){b.remove();g();clearInterval(h)}},d)}else{if(jQuery.browser.opera){e.onload=function(){g()}}else{if(jQuery.browser.webkit){var f=document.styleSheets.length;var h=setInterval(function(){var k=document.styleSheets.length;if(k>f){var n=false;for(var m=0;(m<k)&&!n;m++){var l=document.styleSheets[m].href;n=(l==a)}if(n){g();clearInterval(h)}}},d)}}}}document.getElementsByTagName("head")[0].appendChild(e)};Mapea.Util.removeMapeaCSSFiles=function(){jQuery("link[mapeastyle='true']").remove();Mapea.global.jQueryCssLoaded=false;Mapea.global.mapeaCssLoaded=false};Mapea.Util.setThemePaths=function(g){var e,b,h,a;h=window.strDefinedThemes.split(",");a=window.strDefinedThemesUrl.split(",");for(var d=0,c=h.length;d<c;d++){var f=h[d];if(f==g){b=a[d];break}}if(b!=null){e=b}else{e=g}if(e.charAt(e.length-1)!="/"){e+="/"}Mapea.global.THEME_PATH=e;Mapea.global.THEME_JQUERY_PATH=Mapea.global.THEME_PATH+"jquery/jquery.css";Mapea.global.THEME_CSS_PATH=Mapea.global.THEME_PATH+"style.css";Mapea.global.THEME_IMG_PATH=Mapea.global.THEME_PATH+"images/";Mapea.global.THEME_BLANK_IMG_PATH=Mapea.global.THEME_IMG_PATH+"blank.gif";Mapea.Util.featureIconStyle.externalGraphic=Mapea.global.THEME_IMG_PATH+"search/pointer.png";Mapea.Util.newFeatureIconStyle.externalGraphic=Mapea.global.THEME_IMG_PATH+"search/newPointer.png";Mapea.Util.userLocationStyle.externalGraphic=Mapea.global.THEME_IMG_PATH+"search/user.png"};Mapea.Util.resizeAllPanels=function(d){var c=d||window.map||window.sigcMap;if((c.theme!=null)&&c.theme.isLoaded){Mapea.Util.centerSearchDialog();Mapea.Util.relocateHelpCallejero();var b,e,a;if(Mapea.Util.hasLeftPanel){b=jQuery(".left-panel");Mapea.Util.adjustPanel(b,"margin-left")}if(Mapea.Util.hasRightPanel){e=jQuery(".right-panel");Mapea.Util.adjustPanel(e,"margin-right")}Mapea.Util.adjustLayerSwitcher(c);Mapea.Util.adjustZoomControls(c)}};Mapea.Util.adjustPanel=function(d,f){var e=d.find(".maximizeButton");var g=e.outerWidth();var a=d.outerWidth();e.css("height","");var j=d.outerHeight();e.css("height",j);var c=a-g;d.attr("desplace",-c);var h=d.attr("open");if(!h){d.css(f||"margin-left",-c)}if(Mapea.Util.hasMobileGeosearchPanel||Mapea.Util.hasMobileSearchStreetPanel){var b=jQuery(".search-mobile-body").innerHeight();d.css("top",b+6)}};Mapea.Util.adjustLayerSwitcher=function(d){var b=d.getControlsByClass("Mapea.Control.LayerSwitcher");if(b.length>0){var a=b[0];var c=0;if(Mapea.Util.hasMobileGeosearchPanel||Mapea.Util.hasMobileSearchStreetPanel){c+=jQuery(".search-mobile-body").innerHeight()+6}if(Mapea.Util.hasRightPanel){c+=jQuery(".right-panel").innerHeight()}jQuery(a.div).css("top",c)}};Mapea.Util.adjustZoomControls=function(a){var c=0,e=0;if(Mapea.Util.hasLeftPanel){c=jQuery(".left-panel").outerHeight()}if(Mapea.Util.hasMobileSearchPanel||Mapea.Util.hasSearchStreetPanel||Mapea.Util.hasGeosearchPanel){e=jQuery(".search-mobile-maximize").outerHeight()}else{if(Mapea.Util.hasMobileGeosearchPanel||Mapea.Util.hasMobileSearchStreetPanel){e=jQuery(".search-mobile-body").innerHeight();e+=6}}var b=c+e;var j=a.getControlsByClass("Mapea.Control.PanZoomBar");for(var d=0,g=j.length;d<g;d++){jQuery(j[d].div).css("top",b)}var h=a.getControlsByClass("Mapea.Control.PanZoom");for(var d=0,g=h.length;d<g;d++){jQuery(h[d].div).css("top",b)}var f=a.getControlsByClass("OpenLayers.Control.Zoom");for(var d=0,g=f.length;d<g;d++){jQuery(f[d].div).css("top",b)}};Mapea.Util.centerSearchDialog=function(){var a=jQuery(window).height();var c=jQuery(window).width();if(Mapea.Util.hasSearchPanel){var o=jQuery("#mapeaIdSearch").height();if((a<(o+10))&&$.browser.msie){a=document.body.clientHeight}jQuery("#mapeaIdSearch").css("top",a-o);c=c/2;var h=jQuery("#mapeaIdSearch").width();h=h/2;jQuery("#mapeaIdSearch").css("left",c-h);jQuery("#mapeaIdSearch").css("z-index","1900")}else{if(Mapea.Util.hasMobileSearchPanel){var d=jQuery(".search-mobile-maximize").innerWidth();var g=Math.min(Math.ceil(c*0.9),500);var f=g-d;jQuery(".search-mobile").css("width",g).attr("desplace",-f);var p=jQuery(".search-mobile-maximize").attr("open");if(!p){jQuery(".search-mobile").css("margin-left",-f)}var l=jQuery(".search-mobile-body");l.css("width",f);var k=l.innerWidth();var j=k-f;l.css("width",f-j);var b=Math.floor((a*0.9)-180);jQuery(".search-results").css("max-height",b);jQuery("#searchstreet-results").css("height",b);jQuery("#geosearch-results").css("height",b);var n=0;if(Mapea.Util.hasLeftPanel){n=jQuery(".left-panel").outerHeight()}jQuery(".search-mobile").css("top",n)}else{if(Mapea.Util.hasGeosearchPanel){var d=jQuery(".search-mobile-maximize").innerWidth();var g=Math.min(Math.ceil(c*0.9),500);var f=g-d;jQuery(".search-mobile").css("width",g).attr("desplace",-f);var p=jQuery(".search-mobile-maximize").attr("open");if(!p){jQuery(".search-mobile").css("margin-left",-f)}var l=jQuery(".search-mobile-body");l.css("width",f);var k=l.innerWidth();var j=k-f;l.css("width",f-j);var b=Math.floor((a*0.9)-180);jQuery(".search-results").css("max-height",b);jQuery("#searchstreet-results").css("height",b);jQuery("#geosearch-results").css("height",b);var n=0;if(Mapea.Util.hasLeftPanel){n=jQuery(".left-panel").outerHeight()}jQuery(".search-mobile").css("top",n)}else{if(Mapea.Util.hasMobileGeosearchPanel){var e=Mapea.Geosearch.RESULTS_HEADER_BUTTON.outerHeight();var m=(a*0.8)-e;Mapea.Geosearch.GEOSEARCH_CONTAINER.css("max-height",m);if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.STREET_CONTAINER.css("max-height",m);jQuery(".search-mobile.mobile .geosearchstreet-results .ui-tabs-nav li").css("width",(c/2)-2)}}else{if(Mapea.Util.hasSearchStreetPanel){var d=jQuery(".search-mobile-maximize").innerWidth();var g=Math.min(Math.ceil(c*0.9),500);var f=g-d;jQuery(".search-mobile").css("width",g).attr("desplace",-f);var p=jQuery(".search-mobile-maximize").attr("open");if(!p){jQuery(".search-mobile").css("margin-left",-f)}var l=jQuery(".search-mobile-body");l.css("width",f);var k=l.innerWidth();var j=k-f;l.css("width",f-j);var b=Math.floor((a*0.9)-180);jQuery(".search-results").css("max-height",b);jQuery("#searchstreet-results").css("max-height",b);var n=0;if(Mapea.Util.hasLeftPanel){n=jQuery(".left-panel").outerHeight()}jQuery(".search-mobile").css("top",n)}else{if(Mapea.Util.hasMobileSearchStreetPanel){var e=Mapea.SearchStreet.RESULTS_HEADER_BUTTON.outerHeight();var m=(a*0.8)-e;Mapea.SearchStreet.STREET_CONTAINER.css("max-height",m);jQuery(".search-mobile.mobile .geosearchstreet-results .ui-tabs-nav li").css("width","100%")}}}}}}};Mapea.Util.relocateHelpCallejero=function(){if(Mapea.Util.hasSearchPanel){var a=jQuery("#mapeaIdSearch").position().top;var b=jQuery("#mapeaIdSearch").position().left;var c=jQuery("#mapeaIdSearch").css("height");c=c.substring(0,c.length-2);c=+c;jQuery("#helpdiv").css("top",a+c).css("left",b+28)}};Mapea.Util.supportCssProperty=function(f,e){var a=document.body||document.documentElement,d=a.style;if(typeof d=="undefined"){return false}if(typeof d[f]=="string"){return e?f:true}v=["Moz","Webkit","Khtml","O","ms","Icab"],f=f.charAt(0).toUpperCase()+f.substr(1);for(var c=0;c<v.length;c++){if(typeof d[v[c]+f]=="string"){return e?(v[c]+f):true}}};Mapea.Util.getMeasurePathAreaColor=function(c){var a;var b=jQuery('<div style="visibility: hidden;" class="measure-path-area-color">');b.appendTo(jQuery(c.div));a=b.css("color");b.remove();return a};Mapea.Util.buildMobileSearch=function(){$("#mapea-search-mobile").css("display","");$(".search-mobile-maximize").click(function(d){d.preventDefault();var c=$(this).attr("open");if(c){var b=$("#mapea-search-mobile").attr("desplace");b=parseInt(b);$("#mapea-search-mobile").css("margin-left",b);$(this).attr("open",false)}else{$("#mapea-search-mobile").css("margin-left","0px");$(this).attr("open",true);(!Mapea.Util.isMobile&&$("#idInputSearchMobile").focus())}});$("#idBtnSearchMobile").click(function(b){b.preventDefault();onBtnBuscarGeneral(htmlMobileSearchCallback,htmlGeocoderMobileProcessor,htmlMobileSearchCallback,htmlSearchCallejeroMobileProcessor)});$(".clear-btn").click(function(b){b.preventDefault();$("#idInputSearchMobile").val("");$(".search-results").html("");$(".search-results-wrapper").css("display","none");cleanSearchGeneralForm()});$(".search-results-wrapper").removeClass("hide").css("display","none");$(".geosearchstreet-results").css("display","none");$(".clear-btn").css("float","left");$(".search-input-table td:nth-child(3)").addClass("callejero");Autocomplete.init("idInputSearchMobile");if(Mapea.Util.filterLocality){var a=jQuery(".search-form-locality").css("display","block");Mapea.CDA.getLocalityFromCodINE(Mapea.Util.filterLocality,function(b,f){var d=Mapea.Util.beautifyString(b);var c=Mapea.Util.beautifyString(f);var e="Búsquedas en "+d+" ("+c+")";a.html(e)},function(){Mapea.Util.showErrorMessage("El código del municipio '"+Mapea.Util.filterLocality+"' no es válido")})}jQuery(".search-results-header").css("display","none");Mapea.Util.hasMobileSearchPanel=true};Mapea.Util.disableVerticalScroll=function(){if(!Mapea.Util.disabledVerticalScroll){OpenLayers.Event.observe(document,"touchstart",function(a){a.preventDefault();return false});OpenLayers.Event.observe(document,"touchmove",function(a){a.preventDefault();return false});Mapea.Util.disabledVerticalScroll=true}};Mapea.Util.enableVerticalScroll=function(){OpenLayers.Event.stopObservingElement(document);Mapea.Util.disabledVerticalScroll=false};Mapea.Util.beautifyString=function(b){var a;a=b.toLowerCase();a=OpenLayers.String.trim(a);a=a.charAt(0).toUpperCase()+a.slice(1);a=a.replace(/\_/g," ");a=a.replace(/\s+/," ");a=a.replace(/(\s\w)+/g,function(c){return c.toUpperCase()});a=a.replace(/\s+(de|del|las?|el|los?|un|unas?|unos?|y|a|al|en)\s+/ig,function(c){return c.toLowerCase()});return a};Mapea.Util.getClickedPixelFromEvent=function(b){var a={};if(b){if(b.xy){a.x=b.xy.x;a.y=b.xy.y}else{if(b.layerX&&b.layerY){a.x=b.layerX;a.y=b.layerY}else{if(jQuery.browser.msie&&b.x&&b.y){a.x=b.x;a.y=b.y}else{if(jQuery.browser.msie&&b.clientX&&b.clientY){a.x=b.clientX;a.y=b.clientY}else{a.x=b.offsetX;a.y=b.offsetY}}}}}else{if(Mapea.global.lastClickedXY){a.x=Mapea.global.lastClickedXY.x;a.y=Mapea.global.lastClickedXY.y}}return a};Mapea.Map=OpenLayers.Class(OpenLayers.Map,{maxZIndex:0,externalLayers:[],initalContext:null,nLayersMobile:null,leftPanel:null,rightPanel:null,auxLayer:null,lastPopupPosition:null,geosearchUrl:null,parameters:[],theme:null,uniqueSelectFeatureCtrl:null,editingFeature:false,initialize:function(d,a){this.tileSize=new OpenLayers.Size(Mapea.Map.TILE_WIDTH,Mapea.Map.TILE_HEIGHT);this.maxExtent=new OpenLayers.Bounds(-180,-90,180,90);this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15);OpenLayers.Util.extend(this,a);this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_");this.div=OpenLayers.Util.getElement(d);var c=this.div.id+"_OpenLayers_ViewPort";this.viewPortDiv=OpenLayers.Util.createDiv(c,null,null,null,"relative",null,"hidden");this.viewPortDiv.style.width="100%";this.viewPortDiv.style.height="100%";this.viewPortDiv.className="olMapViewport";this.div.appendChild(this.viewPortDiv);this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:true});c=this.id+"_OpenLayers_Container";this.layerContainerDiv=OpenLayers.Util.createDiv(c);this.layerContainerDiv.style.width="100px";this.layerContainerDiv.style.height="100px";this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1;this.viewPortDiv.appendChild(this.layerContainerDiv);this.events=new OpenLayers.Events(this,this.div,this.EVENT_TYPES,this.fallThrough);this.updateSize();if(this.eventListeners instanceof Object){this.events.on(this.eventListeners)}if(OpenLayers.String.contains(navigator.appName,"Microsoft")){this.events.register("resize",this,this.updateSize)}else{this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this);OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)}this.layers=[];if(this.controls==null){if(OpenLayers.Control!=null){this.controls=[new OpenLayers.Control.Navigation(),new OpenLayers.Control.PanZoom(),new OpenLayers.Control.ArgParser(),new OpenLayers.Control.Attribution()]}else{this.controls=[]}}for(var b=0;b<this.controls.length;b++){this.addControlToMap(this.controls[b])}this.popups=[];this.uniqueSelectFeatureCtrl=new Mapea.Control.UniqueSelectFeature([],{clickTolerance:(Mapea.Util.isMobile?10:100),disableMouseDown:!Mapea.Util.isMobile,ratio:2});this.addControls(this.uniqueSelectFeatureCtrl);this.uniqueSelectFeatureCtrl.setMap(this);this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this);OpenLayers.Event.observe(window,"unload",this.unloadDestroy);if(Mapea.Util.isMobile){this.events.on({zoomend:this.checkMobileLayerLimit,scope:this})}},updateSize:function(){if(!this.isEditingFeature()){var c=this.getCurrentSize();if(c&&!isNaN(c.h)&&!isNaN(c.w)){this.events.clearMouseCache();var f=this.getSize();if(f==null){this.size=f=c}if(!c.equals(f)){this.size=c;for(var d=0,b=this.layers.length;d<b;d++){this.layers[d].onMapResize()}var a=this.getCachedCenter();if(this.baseLayer!=null&&a!=null){var e=this.getZoom();this.zoom=null;this.setCenter(a,e)}}}Mapea.Util.resizeAllPanels(this)}},addControl:function(b,a){this.controls.push(b);this.addControlToMap(b,a)},addLayers:function(c,d){for(var b=0,a=c.length;b<a;b++){this.addLayer(c[b],d)}},addLayer:function(a,b){OpenLayers.Map.prototype.addLayer.apply(this,arguments);(Mapea.Util.isMobile&&this.checkMobileLayerLimit());if(b==true){this.externalLayers.push(a)}this.recalculateMaxZIndex()},removeLayer:function(c,f,g){OpenLayers.Map.prototype.removeLayer.apply(this,arguments);if(g==true){var d=-1;for(var b=0,a=this.externalLayers.length;b<a;b++){var e=this.externalLayers[b];if(e.id==c.id){d=b;break}}if(d>-1){this.externalLayers.splice(d,1)}}this.recalculateMaxZIndex()},addControlToMap:function(d,c){d.outsideViewport=(d.div!=null);if(this.displayProjection&&!d.displayProjection){d.displayProjection=this.displayProjection}d.setMap(this);var a=d.draw(c);if(a){if(!d.outsideViewport){a.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length;if(Mapea.Util.isPanel(d)||/(\w*)\.Control\.NavToolBar/i.test(d.CLASS_NAME)){jQuery(a).css("position","")}var b=this.getControlPanel(d);if(b){b.appendChild(a)}else{this.viewPortDiv.appendChild(a)}}}if(d.autoActivate){d.activate()}if(d.autoActivate||a){Mapea.Util.resizeAllPanels(this)}},getControlPanel:function(f){var c;var a=/(MapeaMeasurePanel|MapeaGetFeatureInfo)|((\w*)\.Control\.NavToolbar)/i;var e=/customEditingToolbar/i;var b=Mapea.Util.isPanel(f)?f.displayClass:f.CLASS_NAME;if(a.test(b)){var d=this.getLeftPanel();c=jQuery(d).find(".left-controls").get(0)}else{if(e.test(b)){c=this.getRightPanel()}}return c},getLeftPanel:function(){return this.leftPanel||this.createLeftPanel()},getRightPanel:function(){return this.rightPanel||this.createRightPanel("")},createLeftPanel:function(){this.leftPanel=document.createElement("div");this.leftPanel.id="MapeaLeftPanel_"+this.id;OpenLayers.Element.addClass(this.leftPanel,"left-panel");var b=function(e){var j=$(this.leftPanel).attr("open");var h="MaximizeLeftBtnItemActive";var g="MaximizeLeftBtnItemInactive";if(j){var f=$(this.leftPanel).attr("desplace");var f=parseInt(f);$(this.leftPanel).attr("open",false);$(this.leftPanel).css("margin-left",f);$(this.leftPanel).find("."+h).removeClass(h).addClass(g)}else{$(this.leftPanel).attr("open",true);$(this.leftPanel).css("margin-left","0px");$(this.leftPanel).find("."+g).removeClass(g).addClass(h)}(e&&OpenLayers.Event.stop(e))};var d=new OpenLayers.Control.Button({title:"Mostrar/olcultar herramientas",trigger:OpenLayers.Function.bindAsEventListener(b,this),displayClass:"maximizeButton MaximizeLeftBtn"});var c=new OpenLayers.Control.Panel({id:"maximizeLeftPanelId",displayClass:"MaximizeLeftPanel"});c.addControls([d]);this.addControl(c);this.leftPanel.appendChild(c.div);var a=document.createElement("div");OpenLayers.Element.addClass(a,"left-controls");this.leftPanel.appendChild(a);this.viewPortDiv.appendChild(this.leftPanel);Mapea.Util.hasLeftPanel=true;d.trigger();return this.leftPanel},createRightPanel:function(){this.rightPanel=document.createElement("div");this.rightPanel.id="MapeaRightPanel_"+this.id;OpenLayers.Element.addClass(this.rightPanel,"right-panel");var a=function(l){var d=$(this.rightPanel).attr("open");var j="MaximizeRightBtnItemActive";var m="MaximizeRightBtnItemInactive";if(d){var e=$(this.rightPanel).attr("desplace");e=parseInt(e);$(this.rightPanel).attr("open",false);$(this.rightPanel).css("margin-right",e);if(Mapea.Util.hasContextsButton){$(".mapea-contexts-wrapper").css("right","50px")}$(this.rightPanel).find("."+j).removeClass(j).addClass(m)}else{$(this.rightPanel).css("margin-right","0px");$(this.rightPanel).attr("open",true);if(Mapea.Util.hasContextsButton){var k=$(".right-panel-maximize").width();var h=$(this.rightPanel).width();var f=50;var g=(h-k)+f;$(".mapea-contexts-wrapper").css("right",g)}$(this.rightPanel).find("."+m).removeClass(m).addClass(j)}(l&&OpenLayers.Event.stop(l))};var c=new OpenLayers.Control.Button({title:"Mostrar/olcultar herramientas de edición",trigger:OpenLayers.Function.bindAsEventListener(a,this),displayClass:"maximizeButton MaximizeRightBtn"});var b=new OpenLayers.Control.Panel({id:"maximizeRightPanelId",displayClass:"MaximizeRightPanel"});b.addControls([c]);this.addControl(b);this.rightPanel.appendChild(b.div);this.viewPortDiv.appendChild(this.rightPanel);Mapea.Util.hasRightPanel=true;return this.rightPanel},checkMobileLayerLimit:function(j){if(!Mapea.Util.isMobile){return false}if(this.checkingLayersLimit){return true}var c=this.nMobileLayers||window.nMobileLayers;if(c){var b=this.getLayersBy("visibility",true);var a=true;var h=function(p,l){var k=p.isBaseLayer;var m=(p.inRange&&p.visibility);var n=/(\w+)\.Layer\.WMS/i.test(p.CLASS_NAME);var q=false;var o=(m&&!k&&(n||q));if(!l){o=o&&(!j||!j.CLASS_NAME||(j.id!=p.id))}return o};var d=(j&&h(j,true))?1:0;for(var e=0,g=b.length;e<g;e++){var f=b[e];if(h(f)){if(d>=c){f.setVisibility(false)}d++}}}},isEditingFeature:function(){var a=false;a=(Mapea.Util.isMobile&&this.editingFeature&&(this.popups.length>0));a=(a&&(this.getControlsByClass("Mapea.Control.EditAttributeFeature").length>0));return a},drawCenter:function(c,k,p,m,o){var l=Mapea.Util.parseBoolean(o);this.setCenter(new OpenLayers.LonLat(c,k),p);var d;if(this.hasAuxLayer()){d=this._getAuxLayer();for(var e=0,g=d.features.length;e<g;e++){var h=d.features[e];if(h.centerPin){this.removeFeature(h)}}}var j;if(l===true){j=Mapea.Util.drawStyledFeature(c,k);j.centerPin=true;this.addFeature(j)}if(m){m=OpenLayers.String.trim(m);if(m.length>0){if(l===true){var b=this.getControlsBy("id","selectAuxFeature");if(b.length==0){var f=this.getCenter();var n=OpenLayers.Function.bind(function(){var r=Mapea.Util.getClickedPixelFromEvent(window.event);var s=Mapea.Util.getPopupInPixel(this,r);if(s){var q=s.contentHTML;q+='<div class="popup-info-separator">LABEL</div>';q+=f;s.setContentHTML(q);s.setHeader('<div class="info-header">LABEL</div>');s.show()}else{s=new Mapea.Popup.FramedCloud("popup_feature",f,new OpenLayers.Size(100,50),m,null,true,function(t){t.feature=j;Mapea.Util.unselectFeature(t)});s.setHeader('<div class="info-header">LABEL</div>');s.pixelX=r.x;s.pixelY=r.y;this.addPopup(s)}},this);this.auxLayer.events.register("featureselected",this,n);this.auxLayer.events.register("featureunselected",this,Mapea.Util.closePopup);this.uniqueSelectFeatureCtrl.addLayers(this.auxLayer);this.uniqueSelectFeatureCtrl.clickFeature(j)}}else{var a=new Mapea.Popup.FramedCloud("popup_feature",this.getCenter(),new OpenLayers.Size(100,50),m,null,true);this.addPopup(a)}}}},removeFeature:function(a){this.removeFeatures([a])},removeFeatures:function(a){this._getAuxLayer().removeFeatures(a)},addFeature:function(a){this.addFeatures([a])},addFeatures:function(a){this._getAuxLayer().addFeatures(a)},hasAuxLayer:function(){return(this.auxLayer&&(this.auxLayer!=null))},_getAuxLayer:function(){if(!this.hasAuxLayer()){this.auxLayer=new Mapea.Layer.Vector(Mapea.Map.VECTOR_LAYERS.AUX,{displayInLayerSwitcher:false,ratio:2});this.addLayer(this.auxLayer,true)}return this.auxLayer},destroyAuxFeatures:function(){if(this.hasAuxLayer()){this.auxLayer.destroyFeatures();Mapea.Util.removeAllPopups(this)}},setLimitLayers:function(a){this.nMobileLayers=a},addParameter:function(a){if(/Mapea\.Parameter\.Theme/i.test(a.CLASS_NAME)){this.theme=a}this.parameters.push(a);a.setMap(this)},addExternalLayers:function(){for(var b=0,a=this.externalLayers.length;b<a;b++){var c=this.externalLayers[b];this.addLayer(c)}},destroy:function(){if(this.auxLayer!=null){this.auxLayer.destroyFeatures();this.auxLayer.destroy()}if(this.leftPanel!=null){OpenLayers.Element.remove(this.leftPanel)}if(this.rightPanel!=null){OpenLayers.Element.remove(this.rightPanel)}this.externalLayers.length=0;this.initalContext=null,this.lastPopupPosition=null;OpenLayers.Map.prototype.destroy.apply(this,arguments)},setLayerZIndex:function(c,b){var a;if(c.zIndex){a=c.zIndex}else{a=this.Z_INDEX_BASE[c.isBaseLayer?"BaseLayer":"Overlay"]+b*5}c.setZIndex(a);this.recalculateMaxZIndex()},recalculateMaxZIndex:function(){var c=-1;for(var b=0,a=this.layers.length;b<a;b++){var d=this.layers[b].getZIndex();c=Math.max(c,d)}this.maxZIndex=c},removePopup:function(a){OpenLayers.Util.removeItem(this.popups,a);if(a.div){var b=this.layerContainerDiv;if(Mapea.Util.isMobile){b=this.div.parentNode}try{b.removeChild(a.div)}catch(c){}}a.map=null},pan:function(b,a,c){Mapea.global.userPanned=true;OpenLayers.Map.prototype.pan.apply(this,arguments)},panTo:function(d){if(this.panMethod&&this.getExtent().scale(this.panRatio).containsLonLat(d)){if(!this.panTween){this.panTween=new OpenLayers.Tween(this.panMethod)}var a=this.getCachedCenter();if(d.equals(a)){return}var f=this.getPixelFromLonLat(a);var e=this.getPixelFromLonLat(d);var b={x:e.x-f.x,y:e.y-f.y};var c={x:0,y:0};Mapea.global.userPanned=false;this.panTween.start({x:0,y:0},b,this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(h){var g=h.x-c.x,j=h.y-c.y;this.moveByPx(g,j);c.x=Math.round(h.x);c.y=Math.round(h.y)},this),done:OpenLayers.Function.bind(function(g){if(!Mapea.global.userPanned){this.moveTo(d);this.dragging=false;this.events.triggerEvent("moveend")}},this)}})}else{this.setCenter(d)}},CLASS_NAME:"Mapea.Map"});Mapea.Map.TILE_WIDTH=256;Mapea.Map.TILE_HEIGHT=256;Mapea.Map.VECTOR_LAYERS={AUX:"Capa auxiliar",GPS:"gps"};Mapea.Lang={code:null,defaultCode:"en",getCode:function(){if(!OpenLayers.Lang.code){OpenLayers.Lang.setCode()}return OpenLayers.Lang.code},setCode:function(b){var d;if(!b){b=(OpenLayers.BROWSER_NAME=="msie")?navigator.userLanguage:navigator.language}var c=b.split("-");c[0]=c[0].toLowerCase();if(typeof OpenLayers.Lang[c[0]]=="object"){d=c[0]}if(c[1]){var a=c[0]+"-"+c[1].toUpperCase();if(typeof OpenLayers.Lang[a]=="object"){d=a}}if(!d){OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+c.join("-")+" dictionary, falling back to default language");d=OpenLayers.Lang.defaultCode}OpenLayers.Lang.code=d},translate:function(b,a){if(b=="scale"){b="Scale = 1 : ${scaleDenom}"}return OpenLayers.Lang.translate(b,a)},CLASS_NAME:"Mapea.Lang"};Mapea.i18n=Mapea.Lang.translate;Mapea.SigcMapea=OpenLayers.Class({contexto:"${context}",url:"${urlContext}",title:"${titleContext}",swCallejero:"${swCallejero}",geosearchUrl:"${geosearchUrl}",strDefinedThemes:"${themes}",strDefinedThemesUrl:"${urlThemes}",geosearchbylocationUrl:"${geosearchbylocation}",geosearchDistance:"${geosearchDistance}",arrayRoadsType:null,arrayServicesType:null,arrayStreet:null,arrayLocality:null,arrayLocFromProv:null,arrayOu:null,arrayServices:null,arrayRoads:null,arrayBC:null,arrayAuto:null,layer_style:null,style_blue:null,style_green:null,style_mark:null,callejeroProxy:null,buttons:new Array(),noStringAttributes:new Array(),dateAttributes:new Array(),dateTimeAttributes:new Array(),timeAttributes:new Array(),durationAttributes:new Array(),geomColumn:null,geomColumnDef:false,attributionWfsLayer:new Array(),contextBase:{url:null,title:null},wfsLayers:new Array(),queryableLayers:new Array(),clearUnsavedOper:null,featureInfoGML:false,featureInfoAdded:false,multipleType:false,wmsFullArray:new Array(),listExtentLayers:new Array(),ticket:null,contextButtonsDiv:null,measureDiv:null,contextUrls:new Array(),contextTitles:new Array(),strLon:null,strLat:null,editAttribute:null,schema:null,wfsreq:null,typeN:null,featureNS:null,strFilterfeaturesid:null,layerAux:null,featureT:null,handlerType:null,loadLayerWFST:false,kmlLayers:new Array(),query:false,info:null,hasContextLoaded:false,hasBaseLayer:false,map:null,wmc:null,version:{v:"3.2.0",d:"19/03/2014"},sgcmOptionsDefault:{projectionDefault:"EPSG:23030*m",wmcfileDefault:["callejerocacheado"],layersDefault:null,controlsDefault:["panzoom"],centerDefault:"0,0",zoomDefault:"0",labelDefault:null,bboxDefault:"0,0,0,0",getfeautreinfoDefault:null,maxExtentDefault:null,themeDefault:"default",geosearchbylocationDefault:null,proxyHost:Mapea.Util.getProxyLocation()},sgcmOptions:{projection:null,wmcfile:null,layers:null,controls:null,center:null,zoom:null,label:null,bbox:null,getfeautreinfo:null,maxExtent:null,theme:null,geosearchbylocation:null,proxyHost:null},error:false,sgcmDiv:null,unloadDestroy:null,initialize:function(j){window.strDefinedContexts=this.contexto;window.strDefinedContextsUrl=this.url;window.srtDefinedContextsTile=this.title;window.strDefinedThemes=this.strDefinedThemes;window.strDefinedThemesUrl=this.strDefinedThemesUrl;this.listExtentLayers=new Array();this.contextUrls=new Array();this.contextTitles=new Array();this.sgcmOptions.wmcfile=null;if(typeof(j)=="string"){this.sgcmDiv=OpenLayers.Util.getElement(j);this.sgcmOptions.projection=this.sgcmOptionsDefault.projectionDefault;this.sgcmOptions.wmcfile=this.sgcmOptionsDefault.wmcfileDefault;this.sgcmOptions.layers=this.sgcmOptionsDefault.layersDefault;this.sgcmOptions.controls=this.sgcmOptionsDefault.controlsDefault;this.sgcmOptions.center=this.sgcmOptionsDefault.centerDefault;this.sgcmOptions.zoom=this.sgcmOptionsDefault.zoomDefault;this.sgcmOptions.label=this.sgcmOptionsDefault.labelDefault;this.sgcmOptions.bbox=this.sgcmOptionsDefault.bboxDefault;this.sgcmOptions.getfeautreinfo=this.sgcmOptionsDefault.getfeautreinfoDefault;this.sgcmOptions.theme=this.sgcmOptionsDefault.themeDefault;Mapea.Util.setThemePaths(this.sgcmOptions.theme);this.sgcmOptions.geosearchbylocation=this.sgcmOptionsDefault.geosearchbylocationDefault;this.sgcmOptions.proxyHost=this.sgcmOptionsDefault.proxyHost}else{if(j.div.nodeType&&j.div.nodeType==1){this.sgcmDiv=j.div;if(!this.sgcmDiv.id){this.sgcmDiv.id=OpenLayers.Util.createUniqueID("sigcMapeaDiv_")}}else{this.sgcmDiv=OpenLayers.Util.getElement(j.div)}var z=false;if(j.layers){var J=j.layers.length;for(var K=0;K<J;K++){var c=j.layers[K].split("*");if(c.length==5||c.length==6){c[0]=c[0].toUpperCase();if(c[0].indexOf("WMS")!=-1){if(c[4]&&c[4].toLowerCase()=="false"){z=true;break}}}else{if((c.length==2||c.length==3)&&c[0].indexOf("WMS_FULL")!=-1){z=true;break}}}}if(j.theme){if(typeof j.theme!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro theme debe ser un String y se ha introducido un parámetro tipo: "+typeof j.theme)}else{this.sgcmOptions.theme=j.theme}}else{this.sgcmOptions.theme=this.sgcmOptionsDefault.themeDefault}Mapea.Util.setThemePaths(this.sgcmOptions.theme);if(j.projection){if(typeof j.projection!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro projection debe ser un String y se ha introducido un parámetro tipo: "+typeof j.projection)}else{this.sgcmOptions.projection=j.projection}}else{this.sgcmOptions.projection=this.sgcmOptionsDefault.projectionDefault}if(j.wmcfile){if(!OpenLayers.Util.isArray(j.wmcfile)){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro wmcfile debe ser un Array de String y se ha introducido un parámetro tipo: "+typeof j.wmcfile)}else{if(OpenLayers.Util.isArray(j.wmcfile)&&((j.wmcfile.length==0)||(j.wmcfile.length==1&&j.wmcfile[0]==""))){if(!j.layers||!z){this.sgcmOptions.wmcfile=this.sgcmOptionsDefault.wmcfileDefault}}else{this.sgcmOptions.wmcfile=j.wmcfile}}}else{if(!j.layers||!z){this.sgcmOptions.wmcfile=this.sgcmOptionsDefault.wmcfileDefault}}if(j.layers){if(!OpenLayers.Util.isArray(j.layers)){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro layers debe ser un Array de String y se ha introducido un parámetro tipo: "+typeof j.layers)}else{if(OpenLayers.Util.isArray(j.layers)&&((j.layers.length==0)||(j.layers.length==1&&j.layers[0]==""))){this.sgcmOptions.layers=this.sgcmOptionsDefault.layersDefault}else{this.sgcmOptions.layers=j.layers}}}else{this.sgcmOptions.layers=this.sgcmOptionsDefault.layersDefault}if(j.controls){if(!OpenLayers.Util.isArray(j.controls)){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro controls debe ser un Array de String y se ha introducido un parámetro tipo: "+typeof j.controls)}else{if(OpenLayers.Util.isArray(j.controls)&&((j.controls.length==0)||(j.controls.length==1&&j.controls[0]==""))){this.sgcmOptions.controls=this.sgcmOptionsDefault.controlsDefault}else{this.sgcmOptions.controls=j.controls}}}else{this.sgcmOptions.controls=this.sgcmOptionsDefault.controlsDefault}if(j.center){if(typeof j.center!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro center debe ser un String y se ha introducido un parámetro tipo: "+typeof j.center)}else{this.sgcmOptions.center=j.center}}else{this.sgcmOptions.center=this.sgcmOptionsDefault.centerDefault}if(j.zoom){if(isNaN(j.zoom)){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro zoom debe ser un número válido y se ha introducido el valor: "+j.zoom)}else{this.sgcmOptions.zoom=j.zoom}}else{this.sgcmOptions.zoom=this.sgcmOptionsDefault.zoomDefault}if(j.label){if(typeof j.label!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro label debe ser un String y se ha introducido un parámetro tipo: "+typeof j.label)}else{this.sgcmOptions.label=j.label}}else{this.sgcmOptions.label=this.sgcmOptionsDefault.labelDefault}if(j.bbox){if(typeof j.bbox!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro bbox debe ser un String y se ha introducido un parámetro tipo: "+typeof j.bbox)}else{this.sgcmOptions.bbox=j.bbox}}else{this.sgcmOptions.bbox=this.sgcmOptionsDefault.bboxDefault}if(j.getfeatureinfo){if(typeof j.getfeatureinfo!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro getfeatureinfo debe ser un String y se ha introducido un parámetro tipo: "+typeof j.getfeatureinfo)}else{this.sgcmOptions.getfeatureinfo=j.getfeatureinfo}}else{this.sgcmOptions.getfeatureinfo=this.sgcmOptionsDefault.getfeatureinfoDefault}if(j.geosearchbylocation!=null){if(typeof j.geosearchbylocation!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro geosearchbylocation debe ser un String y se ha introducido un parámetro tipo: "+typeof j.geosearchbylocation)}else{this.sgcmOptions.geosearchbylocation=j.geosearchbylocation}}else{this.sgcmOptions.geosearchbylocation=this.sgcmOptionsDefault.geosearchbylocationDefault}if(j.proxyHost){if(typeof j.proxyHost!="string"){Mapea.Util.showErrorMessage("SigcMapea.constructor: El parámetro proxy debe ser un String y se ha introducido un parámetro tipo: "+typeof j.proxyHost)}else{this.sgcmOptions.proxyHost=j.proxyHost}}else{this.sgcmOptions.proxyHost=this.sgcmOptionsDefault.proxyHost}}OpenLayers.Events.prototype.includeXY=true;OpenLayers.ProxyHost=this.sgcmOptions.proxyHost+"?url=";if(this.sgcmOptions.wmcfile){var h=new Mapea.Parameter.Projection(this.sgcmOptions.projection);var r=new Mapea.Parameter.WMCFile(this.sgcmOptions.wmcfile,this.sgcmDiv.id,h);r.isJSAPI=true;r.setMap();this.map=r.map;this.hasBaseLayer=Mapea.Util.hasBaseLayer;this.hasContextLoaded=Mapea.Util.hasContextLoaded;if(!this.sgcmOptions.maxExtentDefault){var s=this.map.maxExtent;this.listExtentLayers.push(s)}}if(this.sgcmOptions.layers&&!this.error){var h=new Mapea.Parameter.Projection(this.sgcmOptions.projection);if(!this.hasContextLoaded){this.map=new Mapea.Map(this.sgcmDiv.id,{controls:[],units:h.units,maxResolution:"auto",projection:h.srs})}var C=this.sgcmOptions.layers;var J=this.sgcmOptions.layers.length;for(var K=0;K<J;K++){var c=C[K].split("*");if(c.length==5||c.length==6){c[0]=c[0].toUpperCase();if(c[0].indexOf("WMS")!=-1){var o=false;var H=false;if(c[4]){o=c[4].toLowerCase()=="true"}if(!o&&!this.hasBaseLayer){this.hasBaseLayer=true}if(c.length==6){if(c[5].toLowerCase()=="false"){H=true}}var s=getBoundingBoxFromCapabilities(c[2],c[3],h.srs);if(s!=-1){this.listExtentLayers.push(s);var a=new Mapea.Layer.WMS(c[1],c[2],{layers:c[3],transparent:o},{singleTile:H,ratio:1,queryable:this.query});var E={id:a.id,tagname:c[1],url:c[2],name:c[3],transparent:o,tile:H,srs:h.srs};this.queryableLayers.push(E);this.map.addLayer(a,true)}}else{if(c[0].indexOf("KML")!=-1){var d=false;if(c[4].toLowerCase()=="true"||c[4].toLowerCase()=="false"){d=(c[4].toLowerCase()=="true")}var u=c[1];var t=c[2]+c[3]+"&mapeaop=kml";var a=new Mapea.Layer.GML(u,t,{format:Mapea.Format.KML,formatOptions:{extractStyles:true,extractAttributes:d,mainMapProjection:this.map.getProjection(),isBaseLayer:true,transparent:false},ratio:2});this.map.addLayer(a,true);if(d){a.events.register("featureselected",this,onFeatureSelect);a.events.register("featureunselected",this,onFeatureUnselect);this.kmlLayers.push(a)}}else{if(c[0].indexOf("WFST")!=-1){c[4]=c[4].toUpperCase();if(c[4]=="POINT"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Point;this.multipleType=false}else{if(c[4]=="LINE"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Path;this.multipleType=false}else{if(c[4]=="POLYGON"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Polygon;this.multipleType=false}else{if(c[4]=="MPOINT"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Point;this.multipleType=true}else{if(c[4]=="MPOLYGON"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Polygon;this.multipleType=true}else{if(c[4]=="MLINE"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Path;this.multipleType=true}else{Mapea.Util.showErrorMessage("Error: El tipo de capa WFS no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON.");this.error=true}}}}}}this.featureT=c[4];if(c.length>=6){this.layerAux=c[3].substring(c[3].indexOf(":")+1);var l=c[5].split("-");this.strFilterfeaturesid=",featureid: "+this.layerAux+"."+l[0];for(var w=1;w<l.length;w++){this.strFilterfeaturesid=this.strFilterfeaturesid+","+this.layerAux+"."+l[w]}this.strFilterfeaturesid=this.strFilterfeaturesid+"'"}else{this.strFilterfeaturesid=""}var k=c[3].indexOf(":");if(k!=-1){this.typeN=c[3].substring(k+1);this.featureNS=c[3].substring(0,k)}else{this.typeN=c[3]}if(this.loadLayerWFST){this.wfsreq=new Mapea.Util.WFSrequest(c[2],c[3]);this.wfsreq.requestLayers();this.schema=this.wfsreq.getSchema();this.attributionWfsLayer=new Array();var q=new Array();this.dateAttributes=new Array();this.dateTimeAttributes=new Array();this.timeAttributes=new Array();this.durationAttributes=new Array();var L=null;this.geomColumnDef=false;for(K=0;K<this.schema.featureTypes[0].properties.length;K++){L=this.schema.featureTypes[0].properties[K].localType;if(L!="PointPropertyType"&&L!="PolygonPropertyType"&&L!="LineStringPropertyType"&&L!="GeometryPropertyType"&&L!="MultiSurfacePropertyType"&&L!="MultiLineStringPropertyType"){this.attributionWfsLayer.push(this.schema.featureTypes[0].properties[K].name);if(L=="dateTime"){this.dateTimeAttributes.push(this.schema.featureTypes[0].properties[K].name)}else{if(L=="date"){this.dateAttributes.push(this.schema.featureTypes[0].properties[K].name)}else{if(L=="time"){this.timeAttributes.push(this.schema.featureTypes[0].properties[K].name)}else{if(L=="duration"){this.durationAttributes.push(this.schema.featureTypes[0].properties[K].name)}}}}}else{this.geomColumnDef=true;this.geomColumn=this.schema.featureTypes[0].properties[K].name}if(this.schema.featureTypes[0].properties[K].localType=="int"||this.schema.featureTypes[0].properties[K].localType=="float"||this.schema.featureTypes[0].properties[K].localType=="double"||this.schema.featureTypes[0].properties[K].localType=="decimal"||this.schema.featureTypes[0].properties[K].localType=="short"||this.schema.featureTypes[0].properties[K].localType=="byte"||this.schema.featureTypes[0].properties[K].localType=="integer"||this.schema.featureTypes[0].properties[K].localType=="long"||this.schema.featureTypes[0].properties[K].localType=="negativeInteger"||this.schema.featureTypes[0].properties[K].localType=="nonNegativeInteger"||this.schema.featureTypes[0].properties[K].localType=="nonPositiveInteger"||this.schema.featureTypes[0].properties[K].localType=="positiveInteger"||this.schema.featureTypes[0].properties[K].localType=="unsignedLong"||this.schema.featureTypes[0].properties[K].localType=="unsignedInt"||this.schema.featureTypes[0].properties[K].localType=="unsignedShort"||this.schema.featureTypes[0].properties[K].localType=="unsignedByte"){this.noStringAttributes.push(this.schema.featureTypes[0].properties[K].name)}}var s=getBoundingBoxFromCapabilitiesWFS(c[2],c[3],h.srs);if(s!=-1){this.listExtentLayers.push(s)}Mapea.global.wfsLayer=new Mapea.Layer.WFS(c[1],c[2],{typename:this.typeN+this.strFilterfeaturesid,handlerType:this.handlerType,multipleType:this.multipleType},{typename:this.typeN,extractAttributes:true,namespace:this.featureNS});if(s!=-1){this.map.addLayer(Mapea.global.wfsLayer,true)}}}else{Mapea.Util.showErrorMessage("Error: El tipo de layer ("+C[0]+") no está soportado. Consulte los servicios disponibles con action=getServicesAvailable.");this.error=true}}}}else{if((c.length==2||c.length==3)&&c[0].indexOf("WMS_FULL")!=-1){this.hasBaseLayer=true;var H="false";if(c.length==3){if(c[2]=="false"){H="true"}}var I=new Mapea.Util.WMSfull(this.map,c[1]+"&mapeaop=wmsfull");I.setOptions({singleTile:H});var s=I.getBoundingBoxEnvolved(c[1],h.srs);if(s!=-1){this.listExtentLayers.push(s);I.addServiceToMap();this.wmsFullArray.push(I)}}else{if((c.length==4)&&c[0].contains("KML")){var d=false;if(c[3].toLowerCase()=="true"||c[3].toLowerCase()=="false"){d=(c[3].toLowerCase()=="true")}var u=c[1];var t=c[2]+"&mapeaop=kml";var a=new Mapea.Layer.GML(u,t,{format:Mapea.Format.KML,formatOptions:{extractStyles:true,extractAttributes:d,mainMapProjection:this.map.getProjection(),isBaseLayer:true,transparent:false},ratio:2});this.map.addLayer(a,true);if(d){a.events.register("featureselected",this,onFeatureSelect);a.events.register("featureunselected",this,onFeatureUnselect);this.kmlLayers.push(a)}}else{Mapea.Util.showErrorMessage("Error: El formato del layer ("+C[K]+") no se reconoce.");this.error=true}}}}}var A=getMaxExtentEnvolved(this.listExtentLayers);this.map.baseLayer.maxExtent=A;this.map.setOptions({maxExtent:A});this.map.setOptions({restrictedExtent:A});for(K=0;K<this.map.getNumLayers();K++){var c=this.map.layers[K];c.projection=this.map.baseLayer.projection;c.maxExtent=this.map.baseLayer.maxExtent;c.units=this.map.baseLayer.units;c.initResolutions()}this.map.uniqueSelectFeatureCtrl.addLayers(this.kmlLayers);if(this.sgcmOptions.controls&&!this.error){var m=new Mapea.Parameter.Controls(this.sgcmOptions.controls);m.isJSAPI=true;this.map.addParameter(m);if(this.hasBaseLayer){this.map.zoomToMaxExtent()}}if(this.sgcmOptions.getfeatureinfo){this.addGetfeatureinfo(this.sgcmOptions.getfeatureinfo)}this.map.geosearchUrl="${geosearchUrl}";Mapea.Util.resizeAllPanels(this.map);if(!this.error){if(this.sgcmOptions.center&&(this.sgcmOptions.center!=this.sgcmOptionsDefault.centerDefault)){var b;var y=false;var f=this.sgcmOptions.center.split("*");if(f.length==2){b=f[0];y=(OpenLayers.String.trim(f[1].toLowerCase())=="true")}else{if(f.length==1){b=f[0]}else{b="";Mapea.Util.showErrorMessage("El formato del parámetro <b><i>center</i></b> es erróneo")}}var x=b.split(",");if(x.length==2){this.strLon=x[0];this.strLat=x[1];var G=(this.sgcmOptions.label)?(this.sgcmOptions.label):null;var e=((this.sgcmOptions.zoom!=null)&&(this.sgcmOptions.zoom!=this.sgcmOptionsDefault.zoomDefault))?this.sgcmOptions.zoom:null;this.map.drawCenter(this.strLon,this.strLat,e,G,y)}else{Mapea.Util.showErrorMessage("El formato del parámetro <b><i>center</i></b> es erróneo")}}else{if(this.sgcmOptions.label){this.addLabel(this.sgcmOptions.label)}if((this.sgcmOptions.zoom!=null)&&(this.sgcmOptions.zoom!=this.sgcmOptionsDefault.zoomDefault)){this.map.zoomTo(this.sgcmOptions.zoom)}}}if(this.sgcmOptions.bbox!=this.sgcmOptionsDefault.bboxDefault){var g=this.sgcmOptions.bbox.split(",");if(g.length==4){var F=g[0];var B=g[1];var p=g[2];var n=g[3];this.map.zoomToExtent(new OpenLayers.Bounds(F,B,p,n))}}if(this.sgcmOptions.theme){this.setTheme(this.sgcmOptions.theme)}if(this.sgcmOptions.geosearchbylocation!=null){var D=this.sgcmOptions.geosearchbylocation.split("*");this.addGeosearchByLocation(D[0],D[1])}},addControls:function(b){if(!b||b==""){Mapea.Util.showErrorMessage("SigcMapea.addControls: Debe introducir un control.");return}if(!OpenLayers.Util.isArray(b)){Mapea.Util.showErrorMessage("SigcMapea.addControls: El parámetro controls debe ser un Array de String.");return}var d=new Mapea.Parameter.Controls(b);d.isJSAPI=true;this.map.addParameter(d);if(!(this.sgcmOptions.label==null)){var c=this.sgcmOptions.center.split(",");this.strLon=c[0];this.strLat=c[1];var a=new Mapea.Popup.FramedCloud("popup_feature",new OpenLayers.LonLat(c[0],c[1]),new OpenLayers.Size(100,50),this.sgcmOptions.label,null,true);this.map.addPopup(a)}},addLayers:function(e){if(!e||e==""){Mapea.Util.showErrorMessage("SigcMapea.addLayers: Debe introducir, al menos, una capa.");return}if(!OpenLayers.Util.isArray(e)){Mapea.Util.showErrorMessage("SigcMapea.addLayers: El parámetro layers debe ser un Array de String.");return}var b=new Mapea.Parameter.Projection(this.sgcmOptions.projection);var w=b.srs;if(!this.hasBaseLayer){if(projUn.length==2){this.map=new Mapea.Map(this.sgcmDiv.id,{controls:[],units:projUn[1].toLowerCase(),maxResolution:"auto",projection:projUn[0]})}else{this.map=new Mapea.Map(this.sgcmDiv.id,{controls:[],units:"UNDEFINED",maxResolution:"auto",projection:"UNDEFINED"})}}var j=e.length;for(var o=0;o<j;o++){var u=e[o].split("*");if(u.length==5||u.length==6){u[0]=u[0].toUpperCase();if(u[0].indexOf("WMS")!=-1){var f=false;var k=false;if(u[4].toLowerCase()=="true"||u[4].toLowerCase()=="false"){f=u[4].toLowerCase()=="true"}if(!f){if(!this.hasBaseLayer){this.hasBaseLayer=true}}if(u.length==6){if(u[5].toLowerCase()=="false"){k=true}}var p=getBoundingBoxFromCapabilities(u[2],u[3],w);if(p!=-1){this.listExtentLayers.push(p);var h=new Mapea.Layer.WMS(u[1],u[2],{layers:u[3],transparent:f},{singleTile:k,ratio:1,queryable:this.query});var t={id:h.id,tagname:u[1],url:u[2],name:u[3],transparent:f,tile:k,srs:w};this.queryableLayers.push(t);this.map.addLayer(h,true)}}else{if(u[0].indexOf("KML")!=-1){var l=false;if(u[4].toLowerCase()=="true"||u[4].toLowerCase()=="false"){l=(u[4].toLowerCase()=="true")}var g=u[1];var x=u[2]+u[3]+"&mapeaop=kml";var h=new Mapea.Layer.GML(g,x,{format:Mapea.Format.KML,formatOptions:{extractStyles:true,extractAttributes:l,mainMapProjection:this.map.getProjection(),isBaseLayer:true,transparent:false},ratio:2});this.map.addLayer(h,true);if(l){h.events.register("featureselected",this,onFeatureSelect);h.events.register("featureunselected",this,onFeatureUnselect);this.kmlLayers.push(h)}}else{if(u[0].indexOf("WFST")!=-1){u[4]=u[4].toUpperCase();if(u[4]=="POINT"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Point;this.multipleType=false}else{if(u[4]=="LINE"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Path;this.multipleType=false}else{if(u[4]=="POLYGON"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Polygon;this.multipleType=false}else{if(u[4]=="MPOINT"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Point;this.multipleType=true}else{if(u[4]=="MPOLYGON"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Polygon;this.multipleType=true}else{if(u[4]=="MLINE"){this.loadLayerWFST=true;this.handlerType=OpenLayers.Handler.Path;this.multipleType=true}else{Mapea.Util.showErrorMessage("Error: El tipo de capa WFS no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON.");this.error=true}}}}}}this.featureT=u[4];if(u.length>=6){this.layerAux=u[3].substring(u[3].indexOf(":")+1);var a=u[5].split("-");this.strFilterfeaturesid=",featureid: "+this.layerAux+"."+a[0];for(var d=1;d<a.length;d++){this.strFilterfeaturesid=this.strFilterfeaturesid+","+this.layerAux+"."+a[d]}this.strFilterfeaturesid=this.strFilterfeaturesid+"'"}else{this.strFilterfeaturesid=""}var r=u[3].indexOf(":");if(r!=-1){this.typeN=u[3].substring(r+1);this.featureNS=u[3].substring(0,r)}else{this.typeN=u[3]}if(this.loadLayerWFST){this.wfsreq=new Mapea.Util.WFSrequest(u[2],u[3]);this.wfsreq.requestLayers();this.schema=this.wfsreq.getSchema();this.attributionWfsLayer=new Array();var n=new Array();this.dateAttributes=new Array();this.dateTimeAttributes=new Array();this.timeAttributes=new Array();this.durationAttributes=new Array();var c=null;this.geomColumnDef=false;for(o=0;o<this.schema.featureTypes[0].properties.length;o++){c=this.schema.featureTypes[0].properties[o].localType;if(c!="PointPropertyType"&&c!="PolygonPropertyType"&&c!="LineStringPropertyType"&&c!="GeometryPropertyType"&&c!="MultiSurfacePropertyType"&&c!="MultiLineStringPropertyType"){this.attributionWfsLayer.push(this.schema.featureTypes[0].properties[o].name);if(c=="dateTime"){this.dateTimeAttributes.push(this.schema.featureTypes[0].properties[o].name)}else{if(c=="date"){this.dateAttributes.push(this.schema.featureTypes[0].properties[o].name)}else{if(c=="time"){this.timeAttributes.push(this.schema.featureTypes[0].properties[o].name)}else{if(c=="duration"){this.durationAttributes.push(this.schema.featureTypes[0].properties[o].name)}}}}}else{this.geomColumnDef=true;this.geomColumn=this.schema.featureTypes[0].properties[o].name}if(this.schema.featureTypes[0].properties[o].localType=="int"||this.schema.featureTypes[0].properties[o].localType=="float"||this.schema.featureTypes[0].properties[o].localType=="double"||this.schema.featureTypes[0].properties[o].localType=="decimal"||this.schema.featureTypes[0].properties[o].localType=="short"||this.schema.featureTypes[0].properties[o].localType=="byte"||this.schema.featureTypes[0].properties[o].localType=="integer"||this.schema.featureTypes[0].properties[o].localType=="long"||this.schema.featureTypes[0].properties[o].localType=="negativeInteger"||this.schema.featureTypes[0].properties[o].localType=="nonNegativeInteger"||this.schema.featureTypes[0].properties[o].localType=="nonPositiveInteger"||this.schema.featureTypes[0].properties[o].localType=="positiveInteger"||this.schema.featureTypes[0].properties[o].localType=="unsignedLong"||this.schema.featureTypes[0].properties[o].localType=="unsignedInt"||this.schema.featureTypes[0].properties[o].localType=="unsignedShort"||this.schema.featureTypes[0].properties[o].localType=="unsignedByte"){this.noStringAttributes.push(this.schema.featureTypes[0].properties[o].name)}}var p=getBoundingBoxFromCapabilitiesWFS(u[2],u[3],w);if(p!=-1){this.listExtentLayers.push(p)}Mapea.global.wfsLayer=new Mapea.Layer.WFS(u[1],u[2],{typename:this.typeN+this.strFilterfeaturesid,handlerType:this.handlerType,multipleType:this.multipleType},{typename:this.typeN,extractAttributes:true,namespace:this.featureNS});if(p!=-1){this.map.addLayer(Mapea.global.wfsLayer,true)}}}else{Mapea.Util.showErrorMessage("Error: El tipo de layer ("+e[0]+") no está soportado. Consulte los servicios disponibles con action=getServicesAvailable.");this.error=true}}}}else{if((u.length==2||u.length==3)&&u[0].indexOf("WMS_FULL")!=-1){this.hasBaseLayer=true;var k="false";if(u.length==3){if(u[2]=="false"){k="true"}}var m=new Mapea.Util.WMSfull(this.map,u[1]+"&mapeaop=wmsfull");m.setOptions({singleTile:k});var p=m.getBoundingBoxEnvolved(u[1],w);if(p!=-1){this.listExtentLayers.push(p);m.addServiceToMap();this.wmsFullArray.push(m)}}else{if((u.length==4)&&u[0].contains("KML")){var l=false;if(u[3].toLowerCase()=="true"||u[3].toLowerCase()=="false"){l=(u[3].toLowerCase()=="true")}var g=u[1];var x=u[2]+"&mapeaop=kml";var h=new Mapea.Layer.GML(g,x,{format:Mapea.Format.KML,formatOptions:{extractStyles:true,extractAttributes:l,mainMapProjection:this.map.getProjection(),isBaseLayer:true,transparent:false},ratio:2});this.map.addLayer(h,true);if(l){h.events.register("featureselected",this,onFeatureSelect);h.events.register("featureunselected",this,onFeatureUnselect);this.kmlLayers.push(h)}}else{Mapea.Util.showErrorMessage("Error: El formato del layer ("+e[o]+") no se reconoce.");this.error=true}}}}var s=this.map.getExtent();var q=getMaxExtentEnvolved(this.listExtentLayers);this.map.baseLayer.maxExtent=q;this.map.setOptions({maxExtent:q});this.map.setOptions({restrictedExtent:q});for(o=0;o<this.map.getNumLayers();o++){var u=this.map.layers[o];u.projection=this.map.baseLayer.projection;u.maxExtent=this.map.baseLayer.maxExtent;u.units=this.map.baseLayer.units;u.initResolutions()}this.map.zoomToExtent(s);this.map.uniqueSelectFeatureCtrl.addLayers(this.kmlLayers)},addWmcfiles:function(c){if(!c||c==""){Mapea.Util.showErrorMessage("SigcMapea.addWmcfiles: Debe introducir, al menos, un archivo WMC.");return}if(!OpenLayers.Util.isArray(c)){Mapea.Util.showErrorMessage("SigcMapea.addWmcfiles: El parámetro wmcfiles debe ser un Array de String.");return}var b=new Mapea.Parameter.Projection(this.sgcmOptions.projection);var a=new Mapea.Parameter.WMCFile(c,this.sgcmDiv.id,b);a.isJSAPI=true;a.buildInitialContext=true;this.map.addParameter(a)},addLabel:function(c){if(!c||c==""){Mapea.Util.showErrorMessage("SigcMapea.addLabel: Debe introducir el texto a mostrar.");return}this.sgcmOptions.label=c;var b=new Array();if(this.sgcmOptions.center!=this.sgcmOptionsDefault.centerDefault){b=this.sgcmOptions.center.split(",");this.strLon=b[0];this.strLat=b[1]}else{b=this.map.getCenter();this.strLon=b.lon;this.strLat=b.lat}var a=new Mapea.Popup.FramedCloud("popup_feature",new OpenLayers.LonLat(this.strLon,this.strLat),new OpenLayers.Size(100,50),c,null,true);this.map.addPopup(a)},addGeosearchByLocation:function(b,f){var a=b||this.geosearchbylocationUrl;a=OpenLayers.String.trim(a);var e=f||this.geosearchDistance;try{e=parseFloat(e);if(Number.isNaN(e)){Mapea.Util.showErrorMessage("El valor del parámetro distancia '"+f+"' no es un número válido.");return false}}catch(d){Mapea.Util.showErrorMessage("El valor del parámetro distancia '"+f+"' no es un número válido.");return false}var c=new Mapea.Control.GeosearchByLocation(a,{distance:e});this.map.addControl(c)},getOlmap:function(){return this.map},getVersion:function(){return this.version},setBbox:function(d,c,b,a){if(!d||!c||!b||!a){Mapea.Util.showErrorMessage("SigcMapea.setBbox: se deben de especificar xmin, ymin, xmax e ymax para modificar el bbox del mapa")}else{this.sgcmOptions.bbox=d+","+c+","+b+","+a;this.map.zoomToExtent(new OpenLayers.Bounds(d,c,b,a))}},setCenter:function(a,g,e,f){if(!a||!g){Mapea.Util.showErrorMessage("SigcMapea.setCenter: se deben de especificar x e y para modificar el centro del mapa");return}else{if(isNaN(a)||isNaN(g)){Mapea.Util.showErrorMessage("SigcMapea.setCenter: x e y deben ser coordenadas.");return}}this.sgcmOptions.center=a+","+g;this.strLon=a;this.strLat=g;this.sgcmOptions.zoom=e;var b=this.sgcmOptions.center.split(",");if(b.length==2){this.strLon=b[0];this.strLat=b[1];var c=(this.sgcmOptions.label)?(this.sgcmOptions.label):null;var d=(this.sgcmOptions.zoom&&(this.sgcmOptions.zoom!=this.sgcmOptionsDefault.zoomDefault))?this.sgcmOptions.zoom:null;this.map.drawCenter(this.strLon,this.strLat,d,c,f)}},setTicket:function(a){this.ticket=a;OpenLayers.ProxyHost=this.sgcmOptions.proxyHost+"?ticket="+this.ticket+"&url="},addGetfeatureinfo:function(b){if(!b||(b.indexOf("plain")!=-1)){if(this.map.getControlsBy("id","infoPanelId").length>0){var a=this.map.getControlsBy("id","infoPanelId")[0];a.deactivate();this.map.removeControl(a);this.info=new Mapea.Control.GetLayersInfo("text/plain",{title:"Información de las capas",displayClass:"MapeaControlGetLayersInfo"});createInfoPanel_sigc(this.info,this.map,this.featureInfoGML);checkQueriesLayers(this.map,this.info,this.queryableLayers,this.listExtentLayers);this.featureInfoAdded=true}else{this.info=new Mapea.Control.GetLayersInfo("text/plain",{title:"Información de las capas",displayClass:"MapeaControlGetLayersInfo"});createInfoPanel_sigc(this.info,this.map,this.featureInfoGML);checkQueriesLayers(this.map,this.info,this.queryableLayers,this.listExtentLayers);this.featureInfoAdded=true}}else{if(b&&(b.indexOf("gml")!=-1)){if(this.map.getControlsBy("id","infoPanelId").length>0){var a=this.map.getControlsBy("id","infoPanelId")[0];a.deactivate();this.map.removeControl(a);this.info=new Mapea.Control.GetLayersInfo("application/vnd.ogc.gml",{title:"Información de las capas",displayClass:"MapeaControlGetLayersInfo"});createInfoPanel_sigc(this.info,this.map,this.featureInfoGML);checkQueriesLayers(this.map,this.info,this.queryableLayers,this.listExtentLayers);this.featureInfoAdded=true}else{this.info=new Mapea.Control.GetLayersInfo("application/vnd.ogc.gml",{title:"Información de las capas",displayClass:"MapeaControlGetLayersInfo"});createInfoPanel_sigc(this.info,this.map,this.featureInfoGML);checkQueriesLayers(this.map,this.info,this.queryableLayers,this.listExtentLayers);this.featureInfoAdded=true}}else{if(b&&(b.indexOf("html")!=-1)){if(this.map.getControlsBy("id","infoPanelId").length>0){var a=this.map.getControlsBy("id","infoPanelId")[0];a.deactivate();this.map.removeControl(a);this.info=new Mapea.Control.GetLayersInfo("text/html",{title:"Información de las capas",displayClass:"MapeaControlGetLayersInfo"});createInfoPanel_sigc(this.info,this.map,this.featureInfoGML);checkQueriesLayers(this.map,this.info,this.queryableLayers,this.listExtentLayers);this.featureInfoAdded=true}else{this.info=new Mapea.Control.GetLayersInfo("text/html",{title:"Información de las capas",displayClass:"MapeaControlGetLayersInfo"});createInfoPanel_sigc(this.info,this.map,this.featureInfoGML);checkQueriesLayers(this.map,this.info,this.queryableLayers,this.listExtentLayers);this.featureInfoAdded=true}}else{if(b){Mapea.Util.showErrorMessage("El formato solicitado para la información no está disponible. Inténtelo utilizando gml, plain o html.")}}}}},setZoom:function(a){if(a==null){Mapea.Util.showErrorMessage("SigcMapea.setZoom: Debe especificar el nivel de zoom.");return}else{if(isNaN(a)){Mapea.Util.showErrorMessage("SigcMapea.setZoom: Debe especificar un nivel de zoom válido.");return}}this.sgcmOptions.zoom=a;this.map.zoomTo(a)},addEventHandler:function(a,b){if(!a){Mapea.Util.showErrorMessage("SigcMapea.addEventHandler: Debe especificar el tipo de evento a añadir sobre el mapa.");return}else{if(!b){Mapea.Util.showErrorMessage("SigcMapea.addEventHandler: Debe especificar la función de llamada que realizará el evento.");return}else{if(typeof b!="function"){Mapea.Util.showErrorMessage("SigcMapea.addEventHandler: La función introducida no es una función.");return}}}this.map.events.register(a,this.map,b)},getRoadType:function(a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!a;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayRoadsType=null;obtenerTiposViaSigc(a)},getLocalityFromProv:function(a,b){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!b;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayLocFromProv=null;obtenerMunicipiosSigc(a,b)},getServiceType:function(a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!a;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayServicesType=null;obtenerTiposServiciosSigc(a)},searchStreet:function(d,c,e,b,f,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!f;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayStreet=null;obtenerDireccionesSigc(c,e,d,b,f,a)},searchStreetLocProv:function(e,d,f,c,b,g,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!g;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayStreet=null;obtenerDireccionesMunProvSigc(d,f,e,c,b,g,a)},searchService:function(d,c,b,e,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!e;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayServices=null;localizarServiciosSigc(d,c,b,e,a)},searchOrganizationalUnit:function(d,c,b,e,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!e;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayOu=null;localizarSedesSigc(d,c,b,e,a)},searchLocality:function(b,c,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!c;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayLocality=null;localizarNucleosSigc(b,c,a)},searchRoad:function(b,c,d,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!d;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayRoads=null;localizarCarreterasSigc(b,c,d,a)},buscarCallejero:function(c,d,b,a){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!d;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayBC=null;busquedaCallejeroSigc(c,d,b,a)},geosearch:function(d,a,e){var c;if((typeof d)=="string"){c={q:d}}else{c=d}if(!c.srs){c.srs=Mapea.Util.getMapProjection(this.map)}var b=a||this.map.geosearchUrl;Mapea.CDA.geosearch(b,c,null,null,e,function(){Mapea.Util.showErrorMessage("Error al ejecutar la búsqueda: '"+c.q+"'")},this)},autocompletarDireccion:function(c,a,d,b){callejeroProxy=new IMPL_CallejeroService();callejeroProxy.synchronous=!d;callejeroProxy.url=this.sgcmOptions.proxyHost+"?url="+this.swCallejero;this.arrayAuto=null;autocompleterSigc(c,a,d,b)},removeEventHandler:function(a){if(!a){Mapea.Util.showErrorMessage("SigcMapea.removeEventHandler: Debe especificar el tipo de evento a eliminar del mapa.")}this.map.events.remove(a)},setTheme:function(a){var b=new Mapea.Parameter.Theme(a);this.map.addParameter(b)},CLASS_NAME:"Mapea.SigcMapea"});function getQueryable_sigc(h,d,c){h.loadCapabilities(d);var a=h.returnCapabilities();var g=a.layers[0].layers.length;var f=a.layers[0];for(var e=0;e<g;e++){if(f.layers[e].name==c){if(typeof(f.layers[e].layers)=="undefined"){return true}else{for(var b=0;b<f.layers[e].layers.length;b++){if(f.layers[e].layers[b].options.queryable==true){return true}}}return false}else{if(typeof(f.layers[e].layers)!="undefined"){for(var b=0;b<f.layers[e].layers.length;b++){if(f.layers[e].layers[b].name==c){return f.layers[e].layers[b].options.queryable}}}}}}function executeAction(a){for(key in measureControls){var b=measureControls[key];if(a==key){b.activate()}else{b.deactivate()}}var a=document.getElementById("idMeasure");if(a&&(a!=null)){a.innerHTML=""}}function executeDelete(b){var c=b.getControlsBy("id","measurePanelId");if(c.length>0){c[0].controls[0].deactivate();c[0].controls[1].deactivate()}var a=document.getElementById("idMeasure");if(a&&(a!=null)){a.innerHTML=""}c[0].controls[2].deactivate()}function handleMeasurements(f){var g=f.geometry;var b=f.units;var a=f.order;var e=f.measure;var d=document.getElementById("idMeasure");var c="";if(a==1){c+="Longitud: "+e.toFixed(3)+" "+b}else{c+="Superficie: "+e.toFixed(3)+" "+b+"<sup>2</sup>"}d.innerHTML=c}function generaAtributos(e,g,d,j,c,h,b,a){g=[];var j=[];c=[];h=[];b=[];a=[];var f=null;d=false;for(i=0;i<e.featureTypes[0].properties.length;i++){f=e.featureTypes[0].properties[i].localType;if(f!="PointPropertyType"&&f!="PolygonPropertyType"&&f!="LineStringPropertyType"&&f!="GeometryPropertyType"&&f!="MultiSurfacePropertyType"&&f!="MultiLineStringPropertyType"&&f!="SurfacePropertyType"&&f!="GeometryPropertyType"&&f!="GeometryArrayPropertyType"&&f!="MultiGeometryPropertyType"&&f!="MultiPointPropertyType"&&f!="AbstractGeometricAggregateType"&&f!="PointArrayPropertyType"&&f!="CurveArrayPropertyType"&&f!="SolidPropertyType"&&f!="SolidArrayPropertyType"){g.push(e.featureTypes[0].properties[i].name);if(f=="dateTime"){h.push(e.featureTypes[0].properties[i].name)}else{if(f=="date"){c.push(e.featureTypes[0].properties[i].name)}else{if(f=="time"){b.push(e.featureTypes[0].properties[i].name)}else{if(f=="duration"){a.push(e.featureTypes[0].properties[i].name)}}}}}else{this.geomColumnDef=true;geomColumn=e.featureTypes[0].properties[i].name}if(e.featureTypes[0].properties[i].localType=="int"||e.featureTypes[0].properties[i].localType=="float"||e.featureTypes[0].properties[i].localType=="double"||e.featureTypes[0].properties[i].localType=="decimal"||e.featureTypes[0].properties[i].localType=="short"||e.featureTypes[0].properties[i].localType=="byte"||e.featureTypes[0].properties[i].localType=="integer"||e.featureTypes[0].properties[i].localType=="long"||e.featureTypes[0].properties[i].localType=="negativeInteger"||e.featureTypes[0].properties[i].localType=="nonNegativeInteger"||e.featureTypes[0].properties[i].localType=="nonPositiveInteger"||e.featureTypes[0].properties[i].localType=="positiveInteger"||e.featureTypes[0].properties[i].localType=="unsignedLong"||e.featureTypes[0].properties[i].localType=="unsignedInt"||e.featureTypes[0].properties[i].localType=="unsignedShort"||e.featureTypes[0].properties[i].localType=="unsignedByte"){j.push(e.featureTypes[0].properties[i].name)}}}function createInfoPanel_sigc(d,c,a){var e=false;var b;var b=new OpenLayers.Control.Panel({displayClass:"MapeaGetFeatureInfo",id:"infoPanelId"});b.onButtonClick=function(f){var k=(f.buttonElement.className&&(f.buttonElement.className.toLowerCase().indexOf("getlayersinfo")>-1));if(k){var g=c.getControlsByClass("Mapea.Control.GetLayersInfo")[0];if(g.active){g.deactivate()}else{g.activate()}var m=c.getControlsByClass("Mapea.Control.NavToolbar");if(m.length>0){m[0].controls[0].deactivate();m[0].controls[1].deactivate()}var n=c.getControlsBy("id","measurePanelId");if(n.length>0){n[0].controls[0].deactivate();n[0].controls[1].deactivate();document.getElementById("idMeasure").innerHTML=""}var l=c.getControlsBy("id","editPanelId");if(l.length>0){for(var j=0,h=l[0].controls.length;j<h;j++){l[0].controls[j].deactivate()}}}OpenLayers.Event.stop(f?f:window.event)};b.addControls(d);c.addControl(b)}function extendEventButtonFunction(b){if(b!=null){var a=b.getControlsByClass("OpenLayers.Control.NavToolbar");if(a.length>0){OpenLayers.Util.extend(a[0].controls[0],{activate:function(){executeAction("no");if(this.active){return false}if(this.handler){this.handler.activate()}this.active=true;this.events.triggerEvent("activate");return true}});OpenLayers.Util.extend(a[0].controls[1],{activate:function(){executeAction("no");if(this.active){return false}if(this.handler){this.handler.activate()}this.active=true;this.events.triggerEvent("activate");return true}})}}}function createMeasurePanel_sigc(c,a){if(!c){c=OpenLayers.Util.createDiv("idMeasure");c.className="olControlMeasurePosition";c.style.display="none"}var h=a.Z_INDEX_BASE.Control+a.controls.length;c.style.zIndex=h;a.viewPortDiv.appendChild(c);var g=new Mapea.Control.DelMeasure({id:"deleteMeasures",title:"Eliminar medidas",displayClass:"olControlDeleteMeasure"});var d=new OpenLayers.Control.Panel({displayClass:"MapeaMeasurePanel",id:"measurePanelId"});d.onButtonClick=function(w){var u=(w.buttonElement.className&&(w.buttonElement.className.toLowerCase().indexOf("controlmeasuredist")>-1));var s=(w.buttonElement.className&&(w.buttonElement.className.toLowerCase().indexOf("controlmeasureper")>-1));var q=(w.buttonElement.className&&/olcontroldelete(feature|measure)/i.test(w.buttonElement.className));if(!u&&!s&&!q){return true}var o=a.getControlsByClass("Mapea.Control.NavToolbar");if(o.length>0){o[0].controls[0].deactivate();o[0].controls[1].deactivate()}var t=a.getControlsBy("id","infoPanelId");if(t.length>0){t[0].controls[0].deactivate()}var n=a.getControlsBy("id","editPanelId");if(n.length>0){for(var r=0,p=n[0].controls.length;r<p;r++){n[0].controls[r].deactivate()}}OpenLayers.Event.stop(w?w:window.event);if(q){executeDelete(a)}else{var m=(u)?a.getControlsBy("id","measureDist")[0]:a.getControlsBy("id","measurePer")[0];if(m){if(m.active){m.deactivate()}else{m.activate();if(m.id=="measureDist"){executeAction("line")}else{if(m.id=="measurePer"){executeAction("polygon")}}}}}};var e="#5092f4";var l={Point:{pointRadius:6,graphicName:"circle",fillColor:e,fillOpacity:0.3,strokeWidth:3,strokeOpacity:1,strokeColor:e},Line:{strokeWidth:3,strokeOpacity:1,strokeColor:e,strokeDashstyle:"none"},Polygon:{strokeWidth:3,strokeOpacity:1,strokeColor:e,fillColor:e,fillOpacity:0.5}};var b=new OpenLayers.Style();b.addRules([new OpenLayers.Rule({symbolizer:l})]);var f=new OpenLayers.StyleMap({"default":b});measureControls={line:new OpenLayers.Control.Measure(OpenLayers.Handler.Path,{id:"measureDist",displayClass:"olControlMeasureDist",persist:true,handlerOptions:{layerOptions:{styleMap:f,zIndex:a.maxZIndex+1}}}),polygon:new OpenLayers.Control.Measure(OpenLayers.Handler.Polygon,{id:"measurePer",displayClass:"olControlMeasurePer",persist:true,handlerOptions:{layerOptions:{styleMap:f,zIndex:a.maxZIndex+1}}})};var j;for(var k in measureControls){j=measureControls[k];j.events.on({measure:handleMeasurements,measurepartial:handleMeasurements});d.addControls(j)}d.addControls(g);a.addControl(d)}function getMaxExtentEnvolved(j){var b=new Array();var g=new Array();var n=new Array();var f=new Array();for(var h=0;h<j.length;h++){b.push(j[h].left);g.push(j[h].right);n.push(j[h].top);f.push(j[h].bottom)}var p=b.sort(sortNumber);var o=f.sort(sortNumber);var l=g.sort(sortNumber);var e=n.sort(sortNumber);var m=p[0];var d=o[0];var c=l[g.length-1];var k=e[n.length-1];var a=new OpenLayers.Bounds(m,d,c,k);return a}function getBoundingBoxFromCapabilitiesWFS(c,l,e){var m=new Mapea.Util.WFSGetCapabilities("1.1.0");m.loadCapabilities(c);var d=m.returnCapabilities();if(d==null){return -1}else{var h=d.featureTypeList.featureTypes.length;l=l.toUpperCase();var j=d.featureTypeList;for(var f=0;f<h;f++){if(j.featureTypes[f].name.toUpperCase()==l){if(j.featureTypes[f].bbox){var g=new OpenLayers.Projection("EPSG:4326");var a=new OpenLayers.Projection(e);var k=j.featureTypes[f].bbox;var b=k.transform(g,a);return b}else{return -1}}}}}function getBoundingBoxFromCapabilities(g,D,E){var b=new Mapea.Util.ReadMaxExtent(g);b.loadCapabilities(g);var f=b.returnCapabilities();var u=f.layers[0].layers.length;var n=f.layers[0];if(n.name==D){if((n.arraySRS.indexOf(E)==-1)&&(n.arraySRS[0].indexOf(E)==-1)){Mapea.Util.showErrorMessage("La capa "+D+" no se encuentra disponible en: "+E);return -1}if(n.srsArray){var s=n.srsArray.indexOf(E);if(s>-1){return n.bboxArray[s]}else{var c=new OpenLayers.Projection(n.srsArray[0]);var m=new OpenLayers.Projection(E);var r=n.bboxArray[0];var t=r.transform(c,m);return t}}else{var e=getBoundingDataset(n,E);return e}}else{for(var y=0;y<u;y++){if(n.layers[y].name==D){var o=n.layers[y].arraySRS;if(o==undefined){o=n.arraySRS}if((o.indexOf(E)==-1)&&(o[0].indexOf(E)==-1)){Mapea.Util.showErrorMessage("La capa "+D+" no se encuentra disponible en: "+E);return -1}if(typeof(n.layers[y].layers)!="undefined"){var s=false;if(n.layers[y].srsArray){var A=n.layers[y].srsArray.length;for(var w=0;y<A;w++){if(n.layers[y].srsArray[w]==E){s=true;return n.layers[y].bboxArray[w]}}}if(s==false){var p=n.layers[y].layers.length;for(var z=0;z<p;z++){var C=new Array();var q=n.layers[y].layers[z].srsArray;if(q==undefined){q=n.srsArray}var B=q.indexOf(E);if(B>-1){var a=n.layers[y].layers[z].bboxArray;if(a==undefined){a=n.bboxArray}var r=a[B];C.push(r)}else{var c=new OpenLayers.Projection(q[0]);var m=new OpenLayers.Projection(E);var l=n.layers[y].layers[z].bboxArray;if(l==undefined){l=n.bboxArray}var r=l[0];var t=r.transform(c,m);C.push(r)}}var d=getMaxExtentEnvolved(C);return d}}else{var q=n.layers[y].srsArray;if(q==undefined){q=n.srsArray}var B=q.indexOf(E);if(B>-1){var a=n.layers[y].bboxArray;if(a==undefined){a=n.bboxArray}var r=a[B];return r}else{var c=new OpenLayers.Projection(q[0]);var m=new OpenLayers.Projection(E);var l=n.layers[y].bboxArray;if(l==undefined){l=n.bboxArray}var r=l[0];var t=r.transform(c,m);return t}}}else{if(typeof(n.layers[y].layers)!="undefined"){for(var x=0;x<n.layers[y].layers.length;x++){if(n.layers[y].layers[x].name==D){var o=n.layers[y].layers[x].arraySRS;if(o==undefined){o=n.arraySRS}if((o.indexOf(E)==-1)&&(o[0].indexOf(E)==-1)){Mapea.Util.showErrorMessage("La capa "+D+" no se encuentra disponible en: "+E);return -1}var q=n.layers[y].layers[x].srsArray;if(q==undefined){q=n.srsArray}var B=q.indexOf(E);if(B>-1){var a=n.layers[y].layers[x].bboxArray;if(a==undefined){a=n.bboxArray}return a[B]}else{var c=new OpenLayers.Projection(q[0]);var m=new OpenLayers.Projection(E);var l=n.layers[y].layers[x].bboxArray;if(l==undefined){l=n.bboxArray}var r=l[0];var t=r.transform(c,m);return t}}}}}}}}function getBoundingDataset(g,y){var q=g.length;var f=new Array();for(var s=0;s<q;s++){if(typeof(g.layers[s].layers)!="undefined"){var o=false;if(g.layers[s].srsArray){var u=g.layers[s].srsArray.length;for(var r=0;s<u;r++){if(g.layers[s].srsArray[r]==y){o=true;f.push(g.layers[s].bboxArray[r])}}}if(o==false){var l=g.layers[s].layers.length;for(var t=0;t<l;t++){var x=new Array();var n=g.layers[s].layers[t].srsArray;if(n==undefined){n=g.srsArray}var w=n.indexOf(y);if(w>-1){var a=g.layers[s].layers[t].bboxArray;if(a==undefined){a=g.bboxArray}var m=a[w];x.push(m)}else{var b=new OpenLayers.Projection(n[0]);var e=new OpenLayers.Projection(y);var d=g.layers[s].layers[t].bboxArray;if(d==undefined){d=g.bboxArray}var m=d[0];var p=m.transform(b,e);x.push(m)}}var c=getMaxExtentEnvolved(x);f.push(c)}}else{var n=g.layers[s].srsArray;if(n==undefined){n=g.srsArray}var w=n.indexOf(y);if(w>-1){var a=g.layers[s].bboxArray;if(a==undefined){a=g.bboxArray}var m=a[w];f.push(m)}else{var b=new OpenLayers.Projection(n[0]);var e=new OpenLayers.Projection(y);var d=g.layers[s].bboxArray;if(d==undefined){d=g.bboxArray}var m=d[0];var p=m.transform(b,e);f.push(p)}}}var j=getMaxExtentEnvolved(f);return j}function sortNumber(d,c){return d-c}function checkQueriesLayers(a,c,k,l){var j="";for(var d=0;d<k.length;d++){var f=k[d];var g=a.getLayersBy("id",f.id)[0];a.removeLayer(g);j=getQueryable_sigc(c,f.url+"?mapeaop=wmsinfo",f.name);var e=getBoundingBoxFromCapabilities(f.url,f.name,f.srs);if(e!=-1){l.push(e);var h=new Mapea.Layer.WMS(f.tagname,f.url,{layers:f.name,transparent:f.transparent},{singleTile:f.tile,ratio:1,queryable:j});a.addLayer(h,true)}}var b=getMaxExtentEnvolved(l);a.baseLayer.maxExtent=b;a.setOptions({maxExtent:b});a.setOptions({restrictedExtent:b});for(d=0;d<a.getNumLayers();d++){var g=a.layers[d];g.projection=a.baseLayer.projection;g.maxExtent=a.baseLayer.maxExtent;g.units=a.baseLayer.units;g.initResolutions()}a.zoomToMaxExtent()}function asociarContenidos_sigc(){var d=sigcMap.editAttribute.feature;for(var c=0,a=sigcMap.attributionWfsLayer.length;c<a;++c){var f=sigcMap.attributionWfsLayer[c];try{d.attributes[f]=document.getElementById("idInputText_"+f).value}catch(b){}d.state=OpenLayers.State.UPDATE}Mapea.global.wfsLayer.commit();function e(){if(sigcMap.editAttribute!=null){sigcMap.editAttribute.feature.renderIntent="default";sigcMap.editAttribute.feature.layer.drawFeature(sigcMap.editAttribute.feature,sigcMap.editAttribute.feature.renderIntent)}}sigcMap.map.removePopup(d.popup);d.popup.destroy();d.popup=null}function clearUnsavedOperation(){OpenLayers.Function.bind(Mapea.global.wfsLayer.refresh,Mapea.global.wfsLayer)()}function saveEditFeature_sigc(){var b=sigcMap.map.getControlsByClass("Mapea.Control.EditAttributeFeature")[0];var f=b.feature;for(var d=0,a=b.layer.attributes.length;d<a;++d){var g=b.layer.attributes[d].name;try{var e=document.getElementById("idInputText_"+g).value;f.attributes[g]=e}catch(c){}}f.state=OpenLayers.State.UPDATE;b.layer.commit();sigcMap.map.removePopup(f.popup);f.popup.destroy();f.popup=null}Mapea.SigcMapea.TILE_WIDTH=256;Mapea.SigcMapea.TILE_HEIGHT=256;Mapea.Tile.WFS=OpenLayers.Class(OpenLayers.Tile,{features:null,url:null,request:null,initialize:function(d,a,e,b,c){OpenLayers.Tile.prototype.initialize.apply(this,arguments);this.url=b;this.features=[]},destroy:function(){OpenLayers.Tile.prototype.destroy.apply(this,arguments);this.destroyAllFeatures();this.features=null;this.url=null;if(this.request){this.request.abort();this.request=null}},clear:function(){this.destroyAllFeatures()},draw:function(){if(OpenLayers.Tile.prototype.draw.apply(this,arguments)){if(this.isLoading){this.events.triggerEvent("reload")}else{this.isLoading=true;this.events.triggerEvent("loadstart")}this.loadFeaturesForRegion(this.requestSuccess)}},loadFeaturesForRegion:function(b,a){if(this.request){this.request.abort()}this.request=OpenLayers.Request.GET({url:this.url,success:b,failure:a,scope:this})},requestSuccess:function(c){if(this.features){var a=c.responseText;if(!this.checkError(a)){var e=c.responseXML;if(!e||!e.documentElement){e=a}if(this.layer.vectorMode){var f=this.layer.formatObject.read(e);this.layer.addFeatures(f)}else{var b=new OpenLayers.Format.XML();if(typeof e=="string"){e=b.read(e)}var d=b.getElementsByTagNameNS(e,"http://www.opengis.net/gml","featureMember");this.addResults(d)}}}if(this.events){this.events.triggerEvent("loadend")}this.request=null;this.layer.featuresLoaded()},addResults:function(c){for(var b=0;b<c.length;b++){var a=new this.layer.featureClass(this.layer,c[b]);this.features.push(a)}},destroyAllFeatures:function(){while(this.features.length>0){var a=this.features.shift();a.destroy()}},checkError:function(b){var a;var d=/(<error>.*<descripcion>)(.*)(<\/descripcion>.*<\/error>)/i;a=d.test(b);if(a){var c=b.replace(d,"$2");Mapea.Util.showErrorMessage("Un error ocurrió al intentar obtener los features de la capa WFS: "+c)}return a},CLASS_NAME:"Mapea.Tile.WFS"});Mapea.Control.Navigation=OpenLayers.Class(OpenLayers.Control.Navigation,{draw:function(){if(this.handleRightClicks){this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False}var a={click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick};var b={"double":true,stopDouble:true};this.handlers.click=new OpenLayers.Handler.Click(this,a,b);this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask});this.dragPan.draw();this.zoomBox.draw();this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},this.mouseWheelOptions);if(OpenLayers.Control.PinchZoom){this.pinchZoom=new Mapea.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))}},CLASS_NAME:"Mapea.Control.Navigation"});Mapea.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control.PinchZoom,{applyTransform:function(a){var b=this.map.layerContainerDiv.style;b["-moz-transform"]=a;b["-webkit-transform"]=a;b.WebkitTransform=a;b.transform=a},CLASS_NAME:"Mapea.Control.PinchZoom"});Mapea.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control.LayerSwitcher,{layerDivider:null,activeColor:"transparent",map:null,initialize:function(a){OpenLayers.Control.LayerSwitcher.prototype.initialize.apply(this,arguments);this.layerStates=[]},registerEvents:function(){this.events=new OpenLayers.Events(this,this.div,null,true);var a=function(b){OpenLayers.Event.stop(b,true)};this.events.on({touchstart:a,touchmove:a,scope:this})},loadContents:function(){OpenLayers.Element.addClass(this.div,"mapea-layerswitcher");this.layersDiv=document.createElement("div");this.layersDiv.id=this.id+"_LayersDiv";OpenLayers.Element.addClass(this.layersDiv,"mapea-layerswitcher-layerdiv");OpenLayers.Element.addClass(this.layersDiv,"minimized");(Mapea.Util.isMobile&&OpenLayers.Element.addClass(this.layersDiv,"mobile"));this.baseLbl=document.createElement("div");this.baseLbl.innerHTML=OpenLayers.i18n("Capas base");OpenLayers.Element.addClass(this.baseLbl,"mapea-layerswitcher-baselbl");this.baseLayersDiv=document.createElement("div");OpenLayers.Element.addClass(this.baseLayersDiv,"mapea-layerswitcher-baselayers");this.dataLbl=document.createElement("div");this.dataLbl.innerHTML=OpenLayers.i18n("Otras capas");OpenLayers.Element.addClass(this.dataLbl,"mapea-layerswitcher-datalbl");this.dataLayersDiv=document.createElement("div");OpenLayers.Element.addClass(this.dataLayersDiv,"mapea-layerswitcher-datalayers");this.layerDivider=document.createElement("ul");var b=document.createElement("li");OpenLayers.Element.addClass(b,"divider");this.layerDivider.appendChild(b);if(this.ascending){this.layersDiv.appendChild(this.baseLbl);this.layersDiv.appendChild(this.baseLayersDiv);this.layersDiv.appendChild(this.layerDivider);this.layersDiv.appendChild(this.dataLbl);this.layersDiv.appendChild(this.dataLayersDiv)}else{this.layersDiv.appendChild(this.dataLbl);this.layersDiv.appendChild(this.dataLayersDiv);this.layersDiv.appendChild(this.baseLbl);this.layersDiv.appendChild(this.baseLayersDiv)}this.div.appendChild(this.layersDiv);this.maximizeDiv=document.createElement("div");OpenLayers.Element.addClass(this.maximizeDiv,"mapea-layerswitcher-maximize");var a=Mapea.Util.createImagen("blank.gif","Mapea_Control_MaximizeDiv");a.style.margin="";this.maximizeDiv.appendChild(a);OpenLayers.Event.observe(this.maximizeDiv,"mouseover",OpenLayers.Function.bindAsEventListener(this.maximizeControl,this));OpenLayers.Event.observe(this.layersDiv,"mouseout",OpenLayers.Function.bindAsEventListener(this.minimizeControl,this));if(Mapea.Util.isMobile){OpenLayers.Event.observe(this.maximizeDiv,"touchend",OpenLayers.Function.bindAsEventListener(this.maximizeControl,this));OpenLayers.Event.observe(this.map.div,"touchend",OpenLayers.Function.bindAsEventListener(this.minimizeControl,this))}this.div.appendChild(this.maximizeDiv);this.minimizeDiv=document.createElement("div");OpenLayers.Element.addClass(this.minimizeDiv,"mapea-layerswitcher-minimize");this.div.appendChild(this.minimizeDiv);this.registerEvents()},minimizeControl:function(b){if(b){var c=b.toElement||b.relatedTarget||b.target||b.srcElement;var a=jQuery(c).attr("fromlayerswitcher");if(c&&((c.parentNode==this.layersDiv)||(c==this.layersDiv)||(c.parentNode==this.baseLayersDiv)||(c==this.baseLayersDiv)||(c.parentNode==this.dataLayersDiv)||(c==this.dataLayersDiv)||(c.parentNode==this.layerDivider)||(c==this.layerDivider))||a){return true}}OpenLayers.Control.LayerSwitcher.prototype.minimizeControl.apply(this,arguments)},showControls:function(d){this.maximizeDiv.style.display=d?"":"none";this.minimizeDiv.style.display=d?"none":"";var c=$(this.map.viewPortDiv).height();var b=(c<450)?0.85:0.75;var a=d?0:(c*b);jQuery(this.layersDiv).css("height",a);if(d){OpenLayers.Element.addClass(this.layersDiv,"minimized")}else{OpenLayers.Element.removeClass(this.layersDiv,"minimized");if(jQuery.browser.msie){jQuery(this.div).css("width","20em")}}},redraw:function(){if(!this.checkRedraw()){return this.div}this.clearLayersArray("base");this.clearLayersArray("data");var e=false;var p=false;this.layerStates=new Array(this.map.layers.length);for(var g=0;g<this.map.layers.length;g++){var k=this.map.layers[g];this.layerStates[g]={name:k.name,visibility:k.visibility,inRange:k.inRange,id:k.id}}var f=this.map.layers.slice();if(!this.ascending){f.reverse()}for(var g=0;g<f.length;g++){var j=true;var l=document.createElement("img");var k=f[g];var m=k.isBaseLayer;if(k.displayInLayerSwitcher){if(m){p=true;j=false}else{e=true}var o=(m)?(k==this.map.baseLayer):k.getVisibility();var n;if(!m&&Mapea.Util.isMobile){n=document.createElement("div");OpenLayers.Element.addClass(n,"checkbox")}else{n=document.createElement("input");n.type=(m)?"radio":"checkbox"}n.id="input_"+k.name;n.name=(m)?"baseLayers":k.name;n.value=k.name;jQuery(n).attr("fromlayerswitcher",true);n.checked=o;n.defaultChecked=o;if(Mapea.Util.isMobile&&!m&&o){OpenLayers.Element.addClass(n,"checked")}if(!m&&!k.inRange){n.disabled=true;if(Mapea.Util.isMobile){OpenLayers.Element.addClass(n,"disabled")}}var a={inputElem:n,layer:k,layerSwitcher:this,imgLegend:l};OpenLayers.Event.observe(n,"click",OpenLayers.Function.bindAsEventListener(this.onInputClick,a));if(Mapea.Util.isMobile){OpenLayers.Event.observe(n,"touchend",OpenLayers.Function.bindAsEventListener(this.onInputClick,a))}OpenLayers.Event.observe(l,"error",OpenLayers.Function.bind(this.onLegendImgError,a));var c=document.createElement("span");jQuery(c).attr("fromlayerswitcher",true);if(!m&&!k.inRange){OpenLayers.Element.addClass(c,"disabled")}c.innerHTML=k.name;c.style.verticalAlign=(m)?"bottom":"baseline";OpenLayers.Event.observe(c,"click",OpenLayers.Function.bindAsEventListener(this.onInputClick,a));if(Mapea.Util.isMobile){OpenLayers.Event.observe(c,"touchend",OpenLayers.Function.bindAsEventListener(this.onInputClick,a))}var r=document.createElement("br");if(!Mapea.Util.isWFS(k)){if(k.params){if(k.params.ISWMC&&k.params.LAYERLEGEND){l=document.createElement("img");l.id="img_"+k.name;l.src=k.params.LAYERLEGEND.href}else{if(k.params.ISWMC){l=document.createElement("img");l.id="img_"+k.name;l.src=Mapea.global.THEME_BLANK_IMG_PATH}else{var b=k.getFullRequestString({REQUEST:"GetLegendGraphic",LAYER:k.params.LAYERS,FORMAT:"image/png",EXCEPTIONS:"application/vnd.ogc.se_xml",WIDTH:"150"});l=document.createElement("img");l.id="img_"+k.name;l.src=b}}}else{j=false}}else{j=false}var d=(m)?this.baseLayersDiv:this.dataLayersDiv;d.appendChild(n);d.appendChild(c);d.appendChild(r);var q=(m)?this.baseLayers:this.dataLayers;if(j){d.appendChild(l);var h=document.createElement("br");d.appendChild(h);q.push({layer:k,inputElem:n,labelSpan:c,imgLegend:l})}else{q.push({layer:k,inputElem:n,labelSpan:c})}}}this.dataLbl.style.display=(e)?"":"none";this.baseLbl.style.display=(p)?"":"none";this.layerDivider.style.display=(p&&e)?"":"none";return this.div},onLegendImgError:function(a){this.imgLegend.src=Mapea.global.THEME_BLANK_IMG_PATH;OpenLayers.Event.stop(a)},onInputClick:function(d){if(!this.inputElem.disabled){if(this.inputElem.type=="radio"){this.inputElem.checked=true;var a=this.layer;var c=this.layer.map;a.projection=c.baseLayer.projection;a.maxExtent=c.baseLayer.maxExtent;a.units=c.baseLayer.units;this.layer.map.setBaseLayer(a)}else{if(Mapea.Util.isMobile){var b=this.inputElem.checked;(b)?OpenLayers.Element.removeClass(this.inputElem,"checked"):OpenLayers.Element.addClass(this.inputElem,"checked");this.inputElem.checked=!this.inputElem.checked}this.layerSwitcher.updateMap()}if(Mapea.Util.isMobile){this.layer.map.checkMobileLayerLimit(this.layer)}}OpenLayers.Event.stop(d)},destroy:function(){this.layerDivider=null;this.activeColor=null;this.activatedControlsIdx.length=0;OpenLayers.Control.LayerSwitcher.prototype.destroy.apply(this,arguments)},CLASS_NAME:"Mapea.Control.LayerSwitcher"});Mapea.Control.DrawUniqueFeature=OpenLayers.Class(OpenLayers.Control.DrawFeature,{drawFeature:function(c){var b=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);b.fillOpacity=0.4;b.graphicOpacity=1;b.strokeWidth=2;b.strokeColor="#D5006E";b.fillColor="#D5006E";var a=new OpenLayers.Feature.Vector(c,null,b);this.layer.removeFeatures(this.layer.features);this.layer.addFeatures([a]);this.featureAdded(a);this.events.triggerEvent("featureadded",{feature:a})},CLASS_NAME:"Mapea.Control.DrawUniqueFeature"});Mapea.Control.Click=OpenLayers.Class(OpenLayers.Control,{defaultHandlerOptions:{single:true,"double":false,pixelTolerance:0,stopSingle:false,stopDouble:false},initialize:function(a){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions);OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Click(this,{click:this.onClick,dblclick:this.onDblclick},this.handlerOptions)},onClick:function(a){},onDblclick:function(a){},CLASS_NAME:"Mapea.Control.Click"});Mapea.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control.OverviewMap,{createMap:function(){var b=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:false},this.mapOptions);this.ovmap=new Mapea.Map(this.mapDiv,b);OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy);this.ovmap.addLayers(this.layers);this.ovmap.zoomToMaxExtent();this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width"));this.wComp=(this.wComp)?this.wComp:2;this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-bottom-width"));this.hComp=(this.hComp)?this.hComp:2;this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap});this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:true,"double":false,stopSingle:true,stopDouble:true,pixelTolerance:1,map:this.ovmap});this.handlers.click.activate();this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,true);this.rectEvents.register("mouseover",this,function(d){if(!this.handlers.drag.active&&!this.map.dragging){this.handlers.drag.activate()}});this.rectEvents.register("mouseout",this,function(d){if(!this.handlers.drag.dragging){this.handlers.drag.deactivate()}});if(this.ovmap.getProjection()!=this.map.getProjection()){var c=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units;var a=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=c&&a?OpenLayers.INCHES_PER_UNIT[c]/OpenLayers.INCHES_PER_UNIT[a]:1}},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!(this.layers.length>0)){if(this.map.baseLayer){var d=this.map.baseLayer.clone();this.layers=[d]}else{this.map.events.register("changebaselayer",this,this.baseLayerDraw);return this.div}}this.element=document.createElement("div");this.element.className=this.displayClass+"Element";this.element.style.display="none";this.mapDiv=document.createElement("div");this.mapDiv.style.width=this.size.w+"px";this.mapDiv.style.height=this.size.h+"px";this.mapDiv.style.position="relative";this.mapDiv.style.overflow="hidden";this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap");this.extentRectangle=document.createElement("div");this.extentRectangle.style.position="absolute";this.extentRectangle.style.zIndex=1000;this.extentRectangle.className=this.displayClass+"ExtentRectangle";this.mapDiv.appendChild(this.extentRectangle);this.element.appendChild(this.mapDiv);this.div.appendChild(this.element);if(!this.outsideViewport){this.div.className+=" "+this.displayClass+"Container";var b=Mapea.global.THEME_IMG_PATH+"overview-maximize.png";this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,new OpenLayers.Size(18,18),b,"absolute");this.maximizeDiv.style.display="none";this.maximizeDiv.className=this.displayClass+"MaximizeButton";OpenLayers.Event.observe(this.maximizeDiv,"click",OpenLayers.Function.bindAsEventListener(this.maximizeControl,this));this.div.appendChild(this.maximizeDiv);var b=Mapea.global.THEME_IMG_PATH+"overview-minimize.png";this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,new OpenLayers.Size(18,18),b,"absolute");this.minimizeDiv.style.display="none";this.minimizeDiv.className=this.displayClass+"MinimizeButton";OpenLayers.Event.observe(this.minimizeDiv,"click",OpenLayers.Function.bindAsEventListener(this.minimizeControl,this));this.div.appendChild(this.minimizeDiv);var e=["dblclick","mousedown"];for(var c=0,a=e.length;c<a;c++){OpenLayers.Event.observe(this.maximizeDiv,e[c],OpenLayers.Event.stop);OpenLayers.Event.observe(this.minimizeDiv,e[c],OpenLayers.Event.stop)}this.minimizeControl()}else{this.element.style.display=""}if(this.map.getExtent()){this.update()}this.map.events.register("moveend",this,this.update);return this.div},maximizeControl:function(c){var a=jQuery(this.element);var b=a.width();a.css("margin-right",-b);a.css("display","");a.css("margin-right","0px");jQuery(this.div).css("z-index",1100);this.showToggle(false);if(c!=null){OpenLayers.Event.stop(c)}},minimizeControl:function(c){var a=$(".MapeaControlOverviewMapElement");var b=$(".MapeaControlOverviewMap").width();a.css("margin-right",-b);this.showToggle(true);if(c!=null){OpenLayers.Event.stop(c)}},CLASS_NAME:"Mapea.Control.OverviewMap"});Mapea.Control.PanZoom=OpenLayers.Class(OpenLayers.Control.PanZoom,{_addButton:function(f,a,e,d){var c=Mapea.global.THEME_IMG_PATH+a;var b=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+f,e,d,c,"absolute");b.style.cursor="pointer";this.div.appendChild(b);b.action=f;b.className="olButton";this.buttons.push(b);return b},buttonDown:function(a){if(!OpenLayers.Event.isLeftClick(a)){return}switch(this.action){case"panup":this.map.pan(0,-this.getSlideFactor("h"));break;case"pandown":this.map.pan(0,this.getSlideFactor("h"));break;case"panleft":this.map.pan(-this.getSlideFactor("w"),0);break;case"panright":this.map.pan(this.getSlideFactor("w"),0);break;case"zoomin":this.map.zoomIn();break;case"zoomout":this.map.zoomOut();break;case"zoomworld":this.map.zoomToMaxExtent();break}OpenLayers.Event.stop(a)},CLASS_NAME:"Mapea.Control.PanZoom"});Mapea.Control.PanZoomBar=OpenLayers.Class(OpenLayers.Control.PanZoomBar,{_addZoomBar:function(a){var b=Mapea.global.THEME_IMG_PATH+"slider.png";var h=this.id+"_"+this.map.id;var c=this.map.getNumZoomLevels()-1-this.map.getZoom();var d=OpenLayers.Util.createAlphaImageDiv(h,a.add(-1,c*this.zoomStopHeight),{w:20,h:9},b,"absolute");d.style.cursor="move";$(d).find("img").css("position","inherit");this.slider=d;this.sliderEvents=new OpenLayers.Events(this,d,null,true,{includeXY:true});this.sliderEvents.on({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp});var e={w:this.zoomStopWidth,h:this.zoomStopHeight*this.map.getNumZoomLevels()};var f=Mapea.global.THEME_IMG_PATH+"zoombar.png";b;var g=null;if(OpenLayers.Util.alphaHack()){var h=this.id+"_"+this.map.id;g=OpenLayers.Util.createAlphaImageDiv(h,a,{w:e.w,h:this.zoomStopHeight},f,"absolute",null,"crop");g.style.height=e.h+"px"}else{g=OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar"+this.map.id,a,e,f)}g.style.cursor="pointer";g.className="olButton";this.zoombarDiv=g;this.div.appendChild(g);this.startTop=parseInt(g.style.top);this.div.appendChild(d);this.map.events.register("zoomend",this,this.moveZoomBar);a=a.add(0,this.zoomStopHeight*this.map.getNumZoomLevels());return a},_addButton:function(f,a,e,d){var c=Mapea.global.THEME_IMG_PATH+a;var b=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+f,e,d,c,"absolute");b.style.cursor="pointer";this.div.appendChild(b);b.action=f;b.className="olButton";this.buttons.push(b);return b},draw:function(a){var b=OpenLayers.Control.PanZoomBar.prototype.draw.apply(this,arguments);Mapea.Util.resizeAllPanels(this.map);return b},CLASS_NAME:"Mapea.Control.PanZoomBar"});Mapea.Control.DelMeasure=OpenLayers.Class(OpenLayers.Control,{initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a])},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);return this.div},CLASS_NAME:"Mapea.Control.DelMeasure"});Mapea.Control.NavToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);this.addControls([new Mapea.Control.Navigation({dragPanOptions:{enableKinetic:Mapea.Util.isMobile},title:"Desplazarse por el mapa"}),new OpenLayers.Control.ZoomBox({title:"Acercar ventana"})])},draw:function(){var a=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);this.controls[0].activate();return a},onButtonClick:function(m){var k=(m.buttonElement.className&&(m.buttonElement.className.toLowerCase().indexOf("controlnavigation")>-1));var l=(m.buttonElement.className&&(m.buttonElement.className.toLowerCase().indexOf("controlzoombox")>-1));if(k||l){var h=this.map.getControlsByClass("Mapea.Control.Navigation")[0];var c=this.map.getControlsByClass("OpenLayers.Control.ZoomBox")[0];var j=(k)?c:h;var f=(k)?h:c;j.deactivate();if(f.active){f.deactivate()}else{f.activate()}var d=this.map.getControlsBy("id","measurePanelId");if(d.length>0){d[0].controls[0].deactivate();d[0].controls[1].deactivate();executeDelete()}var g=this.map.getControlsBy("id","infoPanelId");if(g.length>0){g[0].controls[0].deactivate()}var a=this.map.getControlsBy("id","editPanelId");if(a.length>0){for(var e=0,b=a[0].controls.length;e<b;e++){a[0].controls[e].deactivate()}}OpenLayers.Event.stop(m?m:window.event)}},CLASS_NAME:"Mapea.Control.NavToolbar"});Mapea.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control.OverviewMap,{createMap:function(){var b=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:false},this.mapOptions);this.ovmap=new Mapea.Map(this.mapDiv,b);OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy);this.ovmap.addLayers(this.layers);this.ovmap.zoomToMaxExtent();this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width"));this.wComp=(this.wComp)?this.wComp:2;this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-bottom-width"));this.hComp=(this.hComp)?this.hComp:2;this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap});this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:true,"double":false,stopSingle:true,stopDouble:true,pixelTolerance:1,map:this.ovmap});this.handlers.click.activate();this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,true);this.rectEvents.register("mouseover",this,function(d){if(!this.handlers.drag.active&&!this.map.dragging){this.handlers.drag.activate()}});this.rectEvents.register("mouseout",this,function(d){if(!this.handlers.drag.dragging){this.handlers.drag.deactivate()}});if(this.ovmap.getProjection()!=this.map.getProjection()){var c=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units;var a=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=c&&a?OpenLayers.INCHES_PER_UNIT[c]/OpenLayers.INCHES_PER_UNIT[a]:1}},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!(this.layers.length>0)){if(this.map.baseLayer){var d=this.map.baseLayer.clone();this.layers=[d]}else{this.map.events.register("changebaselayer",this,this.baseLayerDraw);return this.div}}this.element=document.createElement("div");this.element.className=this.displayClass+"Element";this.element.style.display="none";this.mapDiv=document.createElement("div");this.mapDiv.style.width=this.size.w+"px";this.mapDiv.style.height=this.size.h+"px";this.mapDiv.style.position="relative";this.mapDiv.style.overflow="hidden";this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap");this.extentRectangle=document.createElement("div");this.extentRectangle.style.position="absolute";this.extentRectangle.style.zIndex=1000;this.extentRectangle.className=this.displayClass+"ExtentRectangle";this.mapDiv.appendChild(this.extentRectangle);this.element.appendChild(this.mapDiv);this.div.appendChild(this.element);if(!this.outsideViewport){this.div.className+=" "+this.displayClass+"Container";var b=Mapea.global.THEME_IMG_PATH+"overview-maximize.png";this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,new OpenLayers.Size(18,18),b,"absolute");this.maximizeDiv.style.display="none";this.maximizeDiv.className=this.displayClass+"MaximizeButton";OpenLayers.Event.observe(this.maximizeDiv,"click",OpenLayers.Function.bindAsEventListener(this.maximizeControl,this));this.div.appendChild(this.maximizeDiv);var b=Mapea.global.THEME_IMG_PATH+"overview-minimize.png";this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,new OpenLayers.Size(18,18),b,"absolute");this.minimizeDiv.style.display="none";this.minimizeDiv.className=this.displayClass+"MinimizeButton";OpenLayers.Event.observe(this.minimizeDiv,"click",OpenLayers.Function.bindAsEventListener(this.minimizeControl,this));this.div.appendChild(this.minimizeDiv);var e=["dblclick","mousedown"];for(var c=0,a=e.length;c<a;c++){OpenLayers.Event.observe(this.maximizeDiv,e[c],OpenLayers.Event.stop);OpenLayers.Event.observe(this.minimizeDiv,e[c],OpenLayers.Event.stop)}this.minimizeControl()}else{this.element.style.display=""}if(this.map.getExtent()){this.update()}this.map.events.register("moveend",this,this.update);return this.div},maximizeControl:function(c){var a=jQuery(this.element);var b=a.width();a.css("margin-right",-b);a.css("display","");a.css("margin-right","0px");jQuery(this.div).css("z-index",1100);this.showToggle(false);if(c!=null){OpenLayers.Event.stop(c)}},minimizeControl:function(c){var a=$(".MapeaControlOverviewMapElement");var b=$(".MapeaControlOverviewMap").width();a.css("margin-right",-b);this.showToggle(true);if(c!=null){OpenLayers.Event.stop(c)}},CLASS_NAME:"Mapea.Control.OverviewMap"});Mapea.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control.ModifyFeature,{initialize:function(c,b){OpenLayers.Control.ModifyFeature.prototype.initialize.apply(this,[c,b]);var d=this;var a={geometryTypes:["OpenLayers.Geometry.Point","OpenLayers.Geometry.LineString","OpenLayers.Geometry.MultiLineString","OpenLayers.Geometry.MultiPolygon","OpenLayers.Geometry.Polygon"],snappingOptions:this.snappingOptions,onStart:function(f,e){d.dragStart.apply(d,[f,e])},onDrag:function(f,e){d.dragVertex.apply(d,[f,e])},onComplete:function(e){d.dragComplete.apply(d,[e])}};this.dragControl=new OpenLayers.Control.DragFeature(c,a)},activate:function(){this.map.uniqueSelectFeatureCtrl.deactivate();return OpenLayers.Control.ModifyFeature.prototype.activate.apply(this,arguments)},deactivate:function(){this.map.uniqueSelectFeatureCtrl.activate();return OpenLayers.Control.ModifyFeature.prototype.deactivate.apply(this,arguments)},CLASS_NAME:"Mapea.Control.ModifyFeature"});Mapea.Control.GetLayersInfo=OpenLayers.Class(OpenLayers.Control,{regExs:{msNoResults:/(\s*)returned(\s*)no(\s*)results/i,gsNoResults:/no(\s*)features(\s*)were(\s*)found/i,gsResponse:/^results[\w\s\S]*\'http\:/i,msNewFeature:/feature(\s*)(\w+)(\s*)\:/i,msNewLayer:/^(\w+)_layer$/i,gsNewFeature:/\#newfeature\#/,gsFeatureMember:/^featureMember$/i,msFeatureMember:/^(\w+)_feature$/i,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info\_format/i},numReqLayers:0,isLoadedInfo:false,maxFeatureCount:10,capabilities:null,infoFormat:null,loadingHTML:'<div class="getting-info-text">Obteniendo informaci&oacute;n...</div><div class="getting-info"></div>',formatHTML:"",exceptionFormat:"application/vnd.ogc.se_xml",popup:null,previousPoup:null,initialize:function(b,a){this.infoFormat=b;this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,[a]);this.handler=new OpenLayers.Handler.Click(this,{click:this.loadLayersQueryables})},returnCapabilities:function(){return this.capabilities},loadCapabilities:function(a){var b=OpenLayers.Request.GET({url:a,success:this.loadCapabilitiesSuccess,failure:function(){Mapea.Util.showErrorMessage("GetCapabilities: No se ha podido conectar con el servidor.")},scope:this,params:{service:"WMS",request:"GetCapabilities"},async:false})},loadCapabilitiesSuccess:function(c){var b=new OpenLayers.Format.XML();var a=new Mapea.Format.WMS({layerOptions:{buffer:0}});var e=null;if(c.responseXML==null){Mapea.Util.showErrorMessage("Ha ocurrido un error al obtener el documento GetCapabilities.");return false}var g="UTF-8";var h=/UTF|utf/i;var f=c.responseText;var d=f.search(h);if(d==-1||navigator.appName.indexOf("Explorer")!=-1){g="ISO-8859-1"}if(!c.responseXML.documentElement){e=b.read(c.responseText)}else{e=c.responseXML}this.capabilities=a.read(e,{})},loadLayersQueryables:function(h){var g=[];this.previousPoup=null;var j=window.event||this.handler.evt.xy||Mapea.global.lastClickedXY;if(j){var e=j.layerX||j.offsetX||j.x;var c=j.layerY||j.offsetY||j.y;var d=Mapea.Util.getPopupInPixelXY(this.map,e,c,Mapea.Control.GetLayersInfo.SHOW_INFO_BUFFER);if(d){this.previousPoup=d}}if(!this.previousPoup){Mapea.Util.unselectAllFeatures(this.map);Mapea.Util.removeAllPopups(this.map)}var a=this.map.getNumLayers();for(var b=0;b<a;b++){var f=this.map.layers[b];if(f.queryable&&f.visibility&&f.inRange){g.push(f)}}if(g.length==0){Mapea.Util.showInfoMessage("No existen capas consultables.")}else{this.getInfo(g)}},getInfo:function(f){this.numReqLayers=f.length;this.isLoadedInfo=false;this.formatHTML="";this.createLoadingPopup();for(var e=0;e<f.length;e++){var d=f[e];var c=d.params.LAYERS;try{var h=Math.round(this.handler.down.xy.x);var g=Math.round(this.handler.down.xy.y);var b=d.getFullRequestString({REQUEST:"GetFeatureInfo",EXCEPTIONS:this.exceptionFormat,BBOX:d.map.getExtent().toBBOX(),X:h,Y:g,INFO_FORMAT:this.infoFormat,QUERY_LAYERS:c,FEATURE_COUNT:this.maxFeatureCount,WIDTH:d.map.size.w,HEIGHT:d.map.size.h});b=b+"&mapeaop=wmsinfo";this.loadURL(b,"",this,this.setHTML,null,d.name)}catch(a){if(window.testCoords!=null&&typeof window.testCoords=="function"){window.testCoords(this.handler)}try{var b=d.getFullRequestString({REQUEST:"GetFeatureInfo",EXCEPTIONS:this.exceptionFormat,BBOX:d.map.getExtent().toBBOX(),X:this.handler.first.xy.x,Y:this.handler.first.xy.y,INFO_FORMAT:this.infoFormat,QUERY_LAYERS:c,FEATURE_COUNT:this.maxFeatureCount,WIDTH:d.map.size.w,HEIGHT:d.map.size.h});b=b+"&mapeaop=wmsinfo";if(window.testCoords!=null&&typeof window.testCoords=="function"){window.testCoords(b)}this.loadURL(b,"",this,this.setHTML,null,d.name)}catch(a){if(window.testCoords!=null&&typeof window.testCoords=="function"){window.testCoords("does not work :(")}}}}},setHTML:function(c,f){this.numReqLayers--;var d="";if(this.infoFormat=="text/plain"){if(!this.regExs.msNoResults.test(c.responseText)&&!this.regExs.gsNoResults.test(c.responseText)){var j=c.responseText;if(this.regExs.gsResponse.test(j)){d=this.txtToHtml_Geoserver(j)}else{d=this.txtToHtml_Mapserver(j)}}this.formatHTML+=d}else{if(this.infoFormat=="application/vnd.ogc.gml"){if($.browser.msie){if(/FeatureCollection/i.test($(c.responseText)[1].tagName)){d=this.gmlToHtml_Geoserver_ie(c.responseText)}else{d=this.gmlToHtml_Mapserver_ie(c.responseText)}}else{if(/FeatureCollection/i.test($(c.responseText)[1].tagName)){d=this.gmlToHtml_Geoserver(c.responseText)}else{d=this.gmlToHtml_Mapserver(c.responseText)}}this.formatHTML+=d}else{if(this.infoFormat=="text/html"){var b=function(l){var n="";var m=document.createElement("div");m.innerHTML=c.responseText;var k=m.getElementsByTagName(l);if(k.length>0){n=k[0].innerHTML}n=OpenLayers.String.trim(n);return n};var h="";h+=b("body");h+=b("div");h+=b("table");h+=b("b");h+=b("span");h+=b("input");h+=b("a");h+=b("img");h+=b("p");h+=b("ul");h+=b("li");h=OpenLayers.String.trim(h);if(h.length>0){d=f+":<br/>";d+=c.responseText}else{var a=b("ServiceException");a=$.trim(a);if(a.length>0){if(this.regExs.msUnsupportedFormat.test(a)){d=f+" no soporta html<br/>"}}}this.formatHTML+=d}}}if(d.length>0){this.isLoadedInfo=true;var g='<div class="info-header">'+f+"</div>";if(this.popup){this.popup.setContentHTML(this.formatHTML);this.popup.setHeader(g);this.popup.show()}else{if(this.previousPoup){this.destroyLoadingPopup();var e=this.previousPoup.contentHTML;e+=this.formatHTML;this.previousPoup.setContentHTML(e);this.previousPoup.setHeader(g);this.previousPoup.show()}}}else{if(this.numReqLayers==0&&!this.isLoadedInfo){this.destroyLoadingPopup()}}},loadURL:function(e,g,d,f,c,h){var a=(function(k){OpenLayers.Function.bind(f,this)(k,h)});var j=(f)?a:OpenLayers.nullHandler;var b=(c)?c:OpenLayers.nullHandler;return OpenLayers.Request.GET({url:e,params:g,success:j,failure:b,scope:d})},createLoadingPopup:function(){this.destroyLoadingPopup();if(this.previousPoup){var a=this.previousPoup.contentHTML;a+='<div class="getting-info-container">';a+='<div class="popup-info-separator">Información de la capa</div>';a+=this.loadingHTML;a+="</div>";this.previousPoup.setContentHTML(a);this.previousPoup.show()}else{this.popup=new Mapea.Popup.FramedCloud("popup_info",this.map.getLonLatFromPixel(this.handler.evt.xy),new OpenLayers.Size(400,300),this.loadingHTML,null,true,OpenLayers.Function.bind(Mapea.Util.closePopup,this),this.loadingHTML);this.popup.setSize(new OpenLayers.Size(400,300));this.popup.pixelX=this.handler.evt.xy.x;this.popup.pixelY=this.handler.evt.xy.y;this.map.addPopup(this.popup)}},destroyLoadingPopup:function(){if(this.popup&&this.popup!=null){this.map.removePopup(this.popup);try{this.popup.destroy()}catch(a){}this.popup=null}else{if(this.previousPoup){var b=jQuery('<div class="popup-wrapper">'+this.previousPoup.contentHTML+"</div>");b.find("div.getting-info-container").remove();var c=b.html();this.previousPoup.setContentHTML(c);this.previousPoup.show()}}},gmlToHtml_Geoserver:function(j){var f="";var b=$(j).find("gml\\:featuremember");if(b.length>0){f='<div class="popup-info-separator">Información de la capa</div>';for(var m=0,l=b.length;m<l;m++){var e=b[m];var n=$(e).children();var c=n.children();var g=(n.length>0)?n[0].tagName:"";f+='<table class="mapea-table"><tbody><tr><td class="header" colspan="3">'+this.beautifyString(g)+"</td></tr>";for(var d=0,k=c.length;d<k;d++){var h=c[d];var a=$(h);if(a.length>0){if(this.regExs.gsGeometry.test(a[0].tagName)==false){f+="<tr><td><b>";f+=this.beautifyString(a[0].tagName);f+="</b></td><td>";f+=a.text();f+="</td></tr>"}}}f+="</tbody></table>"}}return f},gmlToHtml_Geoserver_ie:function(j){var f="";var c=$(j)[1];var b=$(c).children();if(b.length>1){f='<div class="popup-info-separator">Información de la capa</div>';for(var n=0,m=b.length;n<m;n++){var o=b[n];if(!this.regExs.msGeometry.test(o.tagName)&&this.regExs.gsFeatureMember.test(o.tagName)){var k=$(o);var g=k.children()[0];f+='<table class="mapea-table"><tbody><tr><td class="header" colspan="3">'+this.beautifyString(g.tagName)+"</td></tr>";var d=$(g).children();for(var e=0,l=d.length;e<l;e++){var h=d[e];var a=$(h);if(a.length>0){if(this.regExs.gsGeometry.test(a[0].tagName)==false){f+="<tr><td><b>";f+=this.beautifyString(a[0].tagName);f+="</b></td><td>";f+=a.text();f+="</td></tr>"}}}f+="</tbody></table>"}}}return f},txtToHtml_Geoserver:function(g){var e=g.replace(/[\w\s\S]*\:(\w*)\'\:[\s\S\w]*/i,"$1");g=g.replace(/[\w\s\S]*\'\:/i,"");g=g.replace(/---(\-*)(\n+)---(\-*)/g,"#newfeature#");var h=g.split("\n");var c='<div class="divinfo"><div class="popup-info-separator">Información de la capa</div>';c+='<table class="mapea-table"><tbody><tr><td class="header" colspan="3">'+this.beautifyString(e)+"</td></tr>";for(var b=0,a=h.length;b<a;b++){var k=h[b].trim();if(k.indexOf("=")!=-1){var d=k.split("=");var f=d[0].trim();var j="-";if(d.length>1){j=d[1].trim();if(j.length==0||j=="null"){j="-"}}if(this.regExs.gsGeometry.test(f)==false){c+="<tr><td><b>";c+=this.beautifyString(f);c+="</b></td><td>";c+=j;c+="</td></tr>"}}else{if(this.regExs.gsNewFeature.test(k)){c+='<tr><td class="header" colspan="3">'+this.beautifyString(e)+"</td></tr>"}}}c+="</tbody></table></div>";return c},gmlToHtml_Mapserver:function(l){var g="";var f=$(l).children();if(f.length>0){for(var p=0,o=f.length;p<o;p++){var h=f[p];var q=$(h);var j=(q.length>0)?q[0].tagName:"";j=j.replace(this.regExs.msNewLayer,"$1");var b=q.children();if(b.length>0){g='<div class="popup-info-separator">Información de la capa</div>';for(var e=0,n=b.length;e<n;e++){g+='<table class="mapea-table"><tbody><tr><td class="header" colspan="3">'+this.beautifyString(j)+"</td></tr>";var r=b[e];var d=$(r).children();for(var c=0,m=d.length;c<m;c++){var k=d[c];var a=$(k);if(a.length>0){if(this.regExs.msGeometry.test(a[0].tagName)==false){g+="<tr><td><b>";g+=this.beautifyString(a[0].tagName);g+="</b></td><td>";g+=a.text();g+="</td></tr>"}}}g+="</tbody></table>"}}}}return g},gmlToHtml_Mapserver_ie:function(f){var c="";var a=false;var d=false;var k=$(f);var e="";if(k.length>3){for(var h=2,g=k.length;h<g;h++){var b=k[h].tagName;if(this.regExs.msNewLayer.test(b)){e=b.replace(this.regExs.msNewLayer,"$1");c='<div class="popup-info-separator">Información de la capa</div>';a=true}else{if(a){if(this.regExs.msFeatureMember.test(b)){if(d){c+="</table>"}c+='<table class="mapea-table"><tbody><tr><td class="header" colspan="3">'+this.beautifyString(e)+"</td></tr>";d=true}else{if(d){var j=k[h+1];if(b&&!/^\/(\w+)$/.test(b)&&!j.tagName){c+="<tr><td><b>";c+=this.beautifyString(b);c+="</b></td><td>";c+=$(j).text();c+="</td></tr>"}}}}}}if(c.length>0){c+="</tbody></table>"}}return c},txtToHtml_Mapserver:function(h){h=h.replace(/[\w\s\S]*(layer)/i,"$1");var f=h.replace(/layer(\s*)\'(\w+)\'[\w\s\S]*/i,"$2");h=h.replace(/layer(\s*)\'(\w+)\'([\w\s\S]*)/i,"$3");h=h.replace(/feature(\s*)(\w*)(\s*)(\:)([\w\s\S]*)/i,"$5");h=h.replace(/\'/g,"");h=h.replace(/\=/g,";");var j=h.split("\n");var d="";var c='<div class="popup-info-separator">Información de la capa</div><table class="mapea-table"><tbody><tr><td class="header" colspan="3">'+this.beautifyString(f)+"</td></tr>";for(var b=0,a=j.length;b<a;b++){var m=j[b].trim();var l=j[b]?j[b].trim():"";var e=m.split(";");var g=e[0].trim();var k="-";if(e.length>1){k=e[1].trim();if(k.length==0){k="-"}}if(g.length>0){if(this.regExs.msNewFeature.test(g)){if((l.length>0)&&!this.regExs.msNewFeature.test(l)){d+='<tr><td class="header" colspan="3">'+this.beautifyString(f)+"</td><td></td></tr>"}}else{d+="<tr><td><b>";d+=this.beautifyString(g);d+="</b></td><td>";d+=k;d+="</td></tr>"}}}if(d.length>0){d=c+d+"</tbody></table>"}return d},beautifyString:function(c){var b=c;if(b){b=OpenLayers.String.trim(b);if(b.length>0){var a=b.indexOf(":");if(a!=-1){a++;b=b.substring(a,b.length)}}}return b},CLASS_NAME:"Mapea.Control.GetLayersInfo"});Mapea.Control.GetLayersInfo.SHOW_INFO_BUFFER=10;Mapea.Control.ClearUnsavedOperations=OpenLayers.Class(OpenLayers.Control,{features_coordx:null,features_coordy:null,features_fids:null,featureT:null,initialize:function(a,b){this.features_coordx=new Array();this.features_coordy=new Array();this.features_fids=new Array();this.layer=a;this.featureT=b},setMap:function(a){this.handler.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},clearOperations:function(a){this.layer.features=[].concat(this.layer.featuresBackup);this.layer.refresh()},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this,arguments)},loadCoord:function(a){if(a=="Modify"&&this.features_coordx.length==0){for(var c=0;c<this.layer.features.length;c++){if(this.layer.features[c].state==null){if(this.featureT=="POINT"){try{this.features_coordx[c]=this.layer.features[c].geometry.components[0].x;this.features_coordy[c]=this.layer.features[c].geometry.components[0].y}catch(d){this.features_coordx[c]=this.layer.features[c].geometry.x;this.features_coordy[c]=this.layer.features[c].geometry.y}}if(this.featureT=="POLYGON"){this.features_coordx[c]=new Array();this.features_coordy[c]=new Array();this.features_fids[c]=new Array();for(var b=0;b<this.layer.features[c].geometry.components[0].components[0].components.length;b++){this.features_coordx[c][b]=this.layer.features[c].geometry.components[0].components[0].components[b].x;this.features_coordy[c][b]=this.layer.features[c].geometry.components[0].components[0].components[b].y;this.features_fids[c][b]=this.layer.features[c].geometry.components[0].components[0].components[b].id}}if(this.featureT=="LINE"){this.features_coordx[c]=new Array();this.features_coordy[c]=new Array();this.features_fids[c]=new Array();for(var b=0;b<this.layer.features[c].geometry.components[0].components.length;b++){this.features_coordx[c][b]=this.layer.features[c].geometry.components[0].components[b].x;this.features_coordy[c][b]=this.layer.features[c].geometry.components[0].components[b].y;this.features_fids[c][b]=this.layer.features[c].geometry.components[0].components[b].id}}}}}else{if(a=="Save"){this.features_coordx=new Array();this.features_coordy=new Array();this.features_fids=new Array();for(var c=0;c<this.layer.features.length;c++){if(this.featureT=="POINT"){try{this.features_coordx[c]=this.layer.features[c].geometry.components[0].x;this.features_coordy[c]=this.layer.features[c].geometry.components[0].y}catch(d){this.features_coordx[c]=this.layer.features[c].geometry.x;this.features_coordy[c]=this.layer.features[c].geometry.y}}if(this.featureT=="POLYGON"){this.features_coordx[c]=new Array();this.features_coordy[c]=new Array();this.features_fids[c]=new Array();if(this.layer.features[c].geometry.CLASS_NAME=="OpenLayers.Geometry.MultiPolygon"){for(var b=0;b<this.layer.features[c].geometry.components[0].components[0].components.length;b++){this.features_coordx[c][b]=this.layer.features[c].geometry.components[0].components[0].components[b].x;this.features_coordy[c][b]=this.layer.features[c].geometry.components[0].components[0].components[b].y;this.features_fids[c][b]=this.layer.features[c].geometry.components[0].components[0].components[b].id}}}if(this.featureT=="LINE"){this.features_coordx[c]=new Array();this.features_coordy[c]=new Array();this.features_fids[c]=new Array();if(this.layer.features[c].geometry.CLASS_NAME=="OpenLayers.Geometry.MultiLineString"){for(var b=0;b<this.layer.features[c].geometry.components[0].components.length;b++){this.features_coordx[c][b]=this.layer.features[c].geometry.components[0].components[b].x;this.features_coordy[c][b]=this.layer.features[c].geometry.components[0].components[b].y;this.features_fids[c][b]=this.layer.features[c].geometry.components[0].components[b].id}}}}}}},CLASS_NAME:"Mapea.Control.ClearUnsavedOperations"});Mapea.Control.DeleteFeature=OpenLayers.Class(OpenLayers.Control,{initialize:function(b,a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.layer=b;this.handler=new Mapea.Handler.Feature(this,b,{click:this.clickFeature})},clickFeature:function(a){if(a.fid==undefined){this.layer.destroyFeatures([a])}else{a.state=OpenLayers.State.DELETE;this.layer.events.triggerEvent("afterfeaturemodified",{feature:a});a.renderIntent="select";this.layer.drawFeature(a)}},setMap:function(a){this.handler.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},activate:function(){this.map.uniqueSelectFeatureCtrl.deactivate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.map.uniqueSelectFeatureCtrl.activate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},CLASS_NAME:"Mapea.Control.DeleteFeature"});Mapea.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control.DrawFeature,{drawFeature:function(c){var a=new OpenLayers.Feature.Vector(c);var b=this.layer.events.triggerEvent("sketchcomplete",{feature:a});if(b!==false){a.layer=this.layer;this.layer.addAttributes(a);this.layer.writer.fillDefaultValues(a);a.state=OpenLayers.State.INSERT;this.layer.addFeatures([a]);this.featureAdded(a);this.events.triggerEvent("featureadded",{feature:a})}},activate:function(){this.map.uniqueSelectFeatureCtrl.deactivate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.map.uniqueSelectFeatureCtrl.activate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},CLASS_NAME:"Mapea.Control.DrawFeature"});Mapea.Control.EditAttributeFeature=OpenLayers.Class(OpenLayers.Control,{feature:null,savingFunctionName:"saveEditFeature",initialize:function(b,a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.layer=b;if(a.savingFunctionName){this.savingFunctionName=a.savingFunctionName}this.layer.events.register("featureselected",this,this.clickFeature);this.layer.events.register("featureunselected",this,this.clickOutFeature)},setMap:function(a){OpenLayers.Control.prototype.setMap.apply(this,arguments)},clickFeature:function(o){this.layer.map.editingFeature=true;if(!this.active){return false}this.feature=o.feature;function m(r,q,p,s){if(r.attachEvent){r.attachEvent(q,s)}else{r.addEventListener(p,s,false)}return r}function e(r,q,p,s){if(r.detachEvent){r.detachEvent(q,s)}else{r.removeEventListener(p,s,false)}return r}var h=0;if(this.feature.fid!=null){this.layer.writer.fillDefaultValues(this.feature);var j='<div class="info-header">Atributos del elemento</div>';var g='<div class="divattrs"><table>';if(!Mapea.Util.isMobile){g+='<tr><td colspan="2" align="center"><i><b>Atributos del elemento</b></i><td></tr>'}for(var f=0,k=this.layer.attributes.length;f<k;++f){var b=this.layer.attributes[f];var l=b.name;var d=b.localType;var c=this.feature.attributes[l];c=c.replace(/\'/g,"&#39;");c=c.replace(/\"/g,"&#34;");g+="<tr><td>"+l+" ("+d+') </td><td><input id="idInputText_'+l+'" type="text" value="'+c+'"></input></td></tr>'}g+='<tr><td colspan=2 align="center"><div class="olControlSaveFeaturesItemInactive olButton editAttribute" title="Guardar atributos" onClick="'+this.savingFunctionName+'()"></div></tr></td>';g+="</table></div>";function n(p){Mapea.Util.removeAllPopups(this.map);this.layer.map.editingFeature=false;if(this.feature&&(this.feature.renderIntent=="select")){this.layer.selectWFSFeature.unselect(this.feature)}}var a=new Mapea.Popup.FramedCloud("popup_feature",this.feature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(400,300),g,null,true,OpenLayers.Function.bind(n,this),j);a.autoSize=false;this.feature.popup=a;this.layer.map.addPopup(a,true)}else{Mapea.Util.showInfoMessage("Debe guardar el elemento previamente.");this.clickOutFeature(this.feature)}},clickOutFeature:function(d){if(d.renderIntent=="select"){this.layer.selectWFSFeature.unselect(d)}if(this.layer.map){var a=this.layer.map.popups;for(var c=0,b=a.length;c<b;c++){this.layer.map.removePopup(a[c])}}this.layer.map.editingFeature=false},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){if(!this.layer.selectWFSFeature.active){this.layer.selectWFSFeature.activate()}this.map.uniqueSelectFeatureCtrl.deactivate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.layer.selectWFSFeature.active){this.layer.selectWFSFeature.deactivate()}this.map.uniqueSelectFeatureCtrl.activate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},commit:function(){for(var c=0,a=this.layer.attributes.length;c<a;++c){var d=this.layer.attributes[c].name;try{this.feature.attributes[d]=document.getElementById("idInputText_"+d).value}catch(b){}}this.feature.state=OpenLayers.State.UPDATE;this.layer.commit()},CLASS_NAME:"Mapea.Control.EditAttributeFeature"});Mapea.Control.Scale=OpenLayers.Class(OpenLayers.Control.Scale,{element:null,initialize:function(b,a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.element=OpenLayers.Util.getElement(b)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!this.element){this.element=document.createElement("div");this.div.appendChild(this.element)}this.map.events.register("moveend",this,this.updateScale);this.updateScale();return this.div},updateScale:function(){var a=this.map.getScale();if(!a){return}if(a>=1000&&a<=950000){a=Math.round(a/1000)*1000}else{if(a>=950000){a=Math.round(a/1000000)*1000000}else{a=Math.round(a)}}this.element.innerHTML=Mapea.i18n("scale",{scaleDenom:a})},CLASS_NAME:"Mapea.Control.Scale"});Mapea.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a])},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!this.eTop){this.div.style.display="block";this.div.style.position="absolute";this.eTop=document.createElement("div");this.eTop.className=this.displayClass+"Top";var a=this.topInUnits.length;this.div.appendChild(this.eTop);if((this.topOutUnits=="")||(this.topInUnits=="")){this.eTop.style.visibility="hidden"}else{this.eTop.style.visibility="visible"}this.eBottom=document.createElement("div");this.eBottom.className=this.displayClass+"Bottom";this.div.appendChild(this.eBottom);if((this.bottomOutUnits=="")||(this.bottomInUnits=="")){this.eBottom.style.visibility="hidden"}else{this.eBottom.style.visibility="visible"}}this.map.events.register("moveend",this,this.update);this.update();return this.div},getBarLen:function(b){var d=parseInt(Math.log(b)/Math.log(10));var a=Math.pow(10,d);var c=parseInt(b/a);var e;if(c>5){e=5}else{if(c>2){e=2}else{e=1}}return e*a},update:function(){var h=this.map.getResolution();if(!h){return}var m=this.map.getUnits();var c=OpenLayers.INCHES_PER_UNIT;var j=this.maxWidth*h*c[m];var a;var d;if(j>100000){a=this.topOutUnits;d=this.bottomOutUnits}else{a=this.topInUnits;d=this.bottomInUnits}var f=j/c[a];var k=j/c[d];var g=this.getBarLen(f);var e=this.getBarLen(k);f=g/c[m]*c[a];k=e/c[m]*c[d];var b=f/h;var l=k/h;if(this.eBottom.style.visibility=="visible"){this.eBottom.style.width=Math.round(l)+"px";this.eBottom.innerHTML=e+" "+d}if(this.eTop.style.visibility=="visible"){this.eTop.style.width=Math.round(b)+"px";this.eTop.innerHTML=g+" "+a}},CLASS_NAME:"Mapea.Control.ScaleLine"});Mapea.Control.StatusLoader=OpenLayers.Class(OpenLayers.Control,{layersLoading:0,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(c){this.map=c;if(this.handler){this.handler.setMap(c)}for(var b=0;b<c.layers.length;b++){var a=c.layers[b];a.events.register("loadstart",this,function(){this.layersLoading++;this.element.style.display="block"});a.events.register("loadend",this,function(){if(this.layersLoading>0){this.layersLoading--}if(this.layersLoading==0){this.element.style.display="none"}})}},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(!this.element){this.element=document.createElement("img");this.element.src=Mapea.Util.getImagesLocation()+"status-loader-loading.gif";this.element.style.display="none";this.div.appendChild(this.element)}return this.div},CLASS_NAME:"Mapea.Control.StatusLoader"});Mapea.Control.WindRose=OpenLayers.Class(OpenLayers.Control,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a])},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);return this.div},CLASS_NAME:"Mapea.Control.WindRose"});Mapea.Control.Geolocate=OpenLayers.Class(OpenLayers.Control.Geolocate,{locationButton:null,locationPanel:null,centerZoom:13,successCallback:OpenLayers.Function.Void,errorCallback:OpenLayers.Function.Void,uncapableCallback:OpenLayers.Function.Void,userLocationStyle:Mapea.Util.userLocationStyle,userFeature:null,initialize:function(a){OpenLayers.Control.Geolocate.prototype.initialize.apply(this,arguments);OpenLayers.Util.extend(this,a);this.events.register("locationupdated",this,this.onSuccess);this.events.register("locationfailed",this,this.onError);this.events.register("locationuncapable",this,this.noSupport)},setMap:function(a){this.locationButton=new OpenLayers.Control.Button({title:"Mostrar mi ubicación",eventListeners:{activate:OpenLayers.Function.bind(this.activate,this),deactivate:OpenLayers.Function.bind(this.deactivate,this)},displayClass:"locationButton",type:OpenLayers.Control.TYPE_TOGGLE});this.locationPanel=new OpenLayers.Control.Panel({id:"locationPanelId",displayClass:"locationPanel"});this.locationPanel.addControls([this.locationButton]);a.addControl(this.locationPanel);OpenLayers.Control.prototype.setMap.apply(this,arguments)},deactivate:function(){Mapea.Util.removeAllPopups(this.map);if(this.userFeature){this.map.removeFeature(this.userFeature)}OpenLayers.Element.removeClass(this.locationButton.panel_div,"locating");OpenLayers.Element.removeClass(this.locationButton.panel_div,this.locationButton.displayClass.replace(/ /g,"")+"ItemActive");OpenLayers.Element.addClass(this.locationButton.panel_div,this.locationButton.displayClass.replace(/ /g,"")+"ItemInactive");this.locationButton.deactivate();return OpenLayers.Control.Geolocate.prototype.deactivate.apply(this,arguments)},activate:function(){OpenLayers.Element.addClass(this.locationButton.panel_div,"locating");return OpenLayers.Control.Geolocate.prototype.activate.apply(this,arguments)},onSuccess:function(b){OpenLayers.Element.removeClass(this.locationButton.panel_div,"locating");if(this.userFeature){this.map.removeFeature(this.userFeature)}this.userFeature=Mapea.Util.drawStyledFeature(b.point.x,b.point.y,{x:b.point.x,y:b.point.y},this.userLocationStyle);this.userFeature.attributes.keywords=["Mi posición"];this.map.addFeature(this.userFeature);var a=new OpenLayers.LonLat(b.point.x,b.point.y);this.map.setCenter(a,this.centerZoom);this.successCallback()},onError:function(a){this.deactivate();Mapea.Util.showErrorMessage("No se ha podido obtener las coordenadas. Asegúrese de tener el GPS o la conexión a internet activa");this.errorCallback()},noSupport:function(a){this.deactivate();Mapea.Util.showErrorMessage("Su navegador no soporta la funcionalidad de localización");this.uncapableCallback()},destroy:function(){OpenLayers.Control.Geolocate.prototype.destroy.apply(this,arguments)},CLASS_NAME:"Mapea.Control.Geolocate"});Mapea.Control.GeosearchByLocation=OpenLayers.Class(Mapea.Control.Geolocate,{geosearchLayer:null,hiddenFields:["_version_","solrid","keywords","geom","score"],geosearchParams:{q:"*:*",rows:100,start:0},geosearchUrl:null,spatialField:"geom",distance:300,wktReader:null,locationButton:null,showResultsButton:null,locationPanel:null,resultsDiv:null,resultsHeadDiv:null,resultsContentDiv:null,initialize:function(a,b){this.geosearchUrl=a;if(!this.geosearchUrl){throw"No se ha especificado la url de geobusquedas"}if(b.distance&&!/\d+/.test(b.distance)){throw'La distancia "'+b.distance+'" no es válida'}var e=a.indexOf("?");if(e!=-1){var c=a.substring(e);var d=OpenLayers.Util.getParameters(c);this.geosearchParams=OpenLayers.Util.applyDefaults(d,this.geosearchParams)}this.wktReader=new OpenLayers.Format.WKT();Mapea.Control.Geolocate.prototype.initialize.apply(this,[b]);OpenLayers.Util.extend(this,b)},setMap:function(e){this.locationButton=new OpenLayers.Control.Button({title:"¿Qué hay cerca de mi posición?",eventListeners:{activate:OpenLayers.Function.bind(this.activate,this),deactivate:OpenLayers.Function.bind(this.deactivate,this)},displayClass:"geosearchLocButton",type:OpenLayers.Control.TYPE_TOGGLE});this.showResultsButton=new OpenLayers.Control.Button({title:"Mostrar lista de resultados",eventListeners:{activate:OpenLayers.Function.bind(this.showResults,this),deactivate:OpenLayers.Function.bind(this.hideResults,this)},displayClass:"geosearchLocResultsButton",type:OpenLayers.Control.TYPE_TOGGLE});this.locationPanel=new OpenLayers.Control.Panel({id:"geosearchbylocationPanelId",displayClass:"geosearchLocPanel"});this.locationPanel.addControls([this.locationButton,this.showResultsButton]);this.resultsDiv=document.createElement("div");OpenLayers.Element.addClass(this.resultsDiv,"location-results");OpenLayers.Element.addClass(this.resultsDiv,"hide");this.resultsHeadDiv=document.createElement("div");OpenLayers.Element.addClass(this.resultsHeadDiv,"head");if(Mapea.Util.isMobile){OpenLayers.Element.addClass(this.resultsDiv,"mobile");OpenLayers.Event.observe(this.resultsHeadDiv,"touchend",OpenLayers.Function.bindAsEventListener(function(f){this.showResultsButton.deactivate();OpenLayers.Event.stop(f);return false},this))}else{var d=document.createElement("div");OpenLayers.Element.addClass(d,"close-btn");OpenLayers.Event.observe(d,"click",OpenLayers.Function.bindAsEventListener(function(f){this.showResultsButton.deactivate();OpenLayers.Event.stop(f);return false},this));this.resultsHeadDiv.appendChild(d)}var c=document.createElement("div");OpenLayers.Element.addClass(c,"back");var b=document.createElement("div");OpenLayers.Element.addClass(b,"icon");var a=document.createElement("div");OpenLayers.Element.addClass(a,"text");a.innerHTML="Resultados";this.resultsHeadDiv.appendChild(c);this.resultsHeadDiv.appendChild(a);this.resultsHeadDiv.appendChild(b);this.resultsContentDiv=document.createElement("div");OpenLayers.Element.addClass(this.resultsContentDiv,"content");e.addControl(this.locationPanel);this.resultsDiv.appendChild(this.resultsHeadDiv);this.resultsDiv.appendChild(this.resultsContentDiv);e.div.parentNode.appendChild(this.resultsDiv);this.geosearchLayer=e.getLayersByClass("Mapea.Layer.Geosearch")[0];if(!this.geosearchLayer){this.geosearchLayer=new Mapea.Layer.Geosearch({geosearchUrl:this.geosearchUrl,hiddenFields:this.hiddenFields},{name:"Puntos de interés",referenceStyle:{display:"none"},areaStyle:{fillColor:"#432FC6",fillOpacity:0.07,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#280862",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3}});e.addLayer(this.geosearchLayer,true)}OpenLayers.Control.prototype.setMap.apply(this,arguments)},deactivate:function(){this.showResultsButton.deactivate();this.geosearchLayer.clear();OpenLayers.Element.removeClass(this.showResultsButton.panel_div,"results");OpenLayers.Element.removeClass(this.locationButton.panel_div,"locating");return Mapea.Control.Geolocate.prototype.deactivate.apply(this,arguments)},onSuccess:function(b){var a=this.wktReader.extractGeometry(b.point);if(Mapea.Util.hasMobileGeosearchPanel||Mapea.Util.hasGeosearchPanel){Mapea.Geosearch.CLEAR_BUTTON.click()}var c=OpenLayers.Util.applyDefaults({sfield:this.spatialField,pt:a,d:this.distance},this.geosearchParams);this.geosearchLayer.search(c,OpenLayers.Function.bind(function(d){this.onSearchSuccess(d,b)},this),OpenLayers.Function.bind(this.onSearchError,this))},onError:function(a){this.locationButton.deactivate();Mapea.Util.showErrorMessage("No se ha podido obtener las coordenadas. Asegúrese de tener el GPS o la conexión a internet activa");this.errorCallback(a)},onSearchSuccess:function(d,a){this.userFeature=Mapea.Util.drawStyledFeature(a.point.x,a.point.y,{x:a.point.x,y:a.point.y},this.userLocationStyle);this.userFeature.attributes.keywords=["Mi posición"];Mapea.Util.removeAllPopups(this.map);if(this.geosearchLayer.hasSpatialResults()){var e="";var h=this.geosearchLayer.spatialFeatures;for(var f=0,b=h.length;f<b;f++){var g=h[f];if(g.centerIcon){e+=Mapea.Geosearch.feature2Html(this.geosearchLayer,g,false)}}jQuery(this.resultsContentDiv).html(e);this.attachEventsToResults();var c=this.geosearchLayer.getResultsBbox();if(c&&(c!=null)){this.map.zoomToExtent(c)}}else{this.geosearchLayer.clear();if(a){var j=new OpenLayers.LonLat(a.point.x,a.point.y);this.map.setCenter(j,this.centerZoom)}}OpenLayers.Element.addClass(this.showResultsButton.panel_div,"results");this.geosearchLayer.addFeatures([this.userFeature]);OpenLayers.Element.removeClass(this.locationButton.panel_div,"locating")},onSearchError:function(a){this.locationButton.deactivate();Mapea.Util.showErrorMessage("Error al procesar la búsqueda por posición")},destroy:function(){if(this.vectorLayer){this.vectorLayer.removeAllFeatures();this.vectorLayer.destroy();this.map.removeLayer(this.vectorLayer,false)}if(this.geosearchLayer){this.geosearchLayer.removeAllFeatures();this.geosearchLayer.destroy();this.map.removeLayer(this.geosearchLayer,false)}OpenLayers.Control.Geolocate.prototype.destroy.apply(this,arguments)},showResults:function(){OpenLayers.Element.removeClass(this.resultsDiv,"hide");var a=jQuery(this.resultsHeadDiv).outerHeight();var c=jQuery(window).height();var b=(c*0.75)-a;jQuery(this.resultsContentDiv).css("max-height",b)},hideResults:function(){jQuery(this.resultsContentDiv).css("max-height",0);OpenLayers.Element.addClass(this.resultsDiv,"hide")},attachEventsToResults:function(){var a=this;jQuery(this.resultsContentDiv).children().each(function(){var b=$(this);if(b.attr("evtAdded")==null){b.attr("evtAdded",true);b.click(function(f){f.preventDefault();var g=$(this).children("#featureId").val();var d=a.geosearchLayer.getFeatureById(g);Mapea.Util.unselectAllFeatures(a.map);a.geosearchLayer.map.uniqueSelectFeatureCtrl.clickFeature(d);if(d.geomFeatureId){var c=a.geosearchLayer.getFeatureById(d.geomFeatureId);a.map.zoomToExtent(c.geometry.bounds)}a.showResultsButton.deactivate()})}})},CLASS_NAME:"Mapea.Control.GeosearchByLocation"});Mapea.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control.TouchNavigation,{draw:function(){var a={click:this.defaultClick,dblclick:this.defaultDblClick};var b=OpenLayers.Util.extend({"double":true,stopDouble:true,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,a,b);this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.dragPan.draw();this.pinchZoom=new Mapea.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},CLASS_NAME:"Mapea.Control.TouchNavigation"});Mapea.Format.KML=OpenLayers.Class(OpenLayers.Format.KML,{mapProjection:"EPSG:4326",initialize:function(a){mapProjection=a.mainMapProjection;this.regExes={trimSpace:(/^\s*|\s*$/g),removeSpace:(/\s*/g),splitSpace:(/\s+/),trimComma:(/\s*,\s*/g),kmlColor:(/(\w{2})(\w{2})(\w{2})(\w{2})/),kmlIconPalette:(/root:\/\/icons\/palette-(\d+)(\.\w+)/),straightBracket:(/\$\[(.*?)\]/g)};OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},parseGeometry:{point:function(d){var c=this.getElementsByTagNameNS(d,this.internalns,"coordinates");var e=[];if(c.length>0){var b=c[0].firstChild.nodeValue;b=b.replace(this.regExes.removeSpace,"");e=b.split(",")}var a=null;if(e.length>1){if(e.length==2){e[2]=null}a=new OpenLayers.Geometry.Point(e[0],e[1],e[2]);a=a.transform(new OpenLayers.Projection("EPSG:4326"),new OpenLayers.Projection(mapProjection))}else{throw"Bad coordinate string: "+b}return a},linestring:function(c,e){var d=this.getElementsByTagNameNS(c,this.internalns,"coordinates");var l=null;if(d.length>0){var b=this.concatChildValues(d[0]);b=b.replace(this.regExes.trimSpace,"");b=b.replace(this.regExes.trimComma,",");var a=b.split(this.regExes.splitSpace);var h=a.length;var k=new Array(h);var j,g;for(var f=0;f<h;++f){j=a[f].split(",");g=j.length;if(g>1){if(j.length==2){j[2]=null}k[f]=new OpenLayers.Geometry.Point(j[0],j[1],j[2]);k[f]=k[f].transform(new OpenLayers.Projection("EPSG:4326"),new OpenLayers.Projection(mapProjection))}else{throw"Bad LineString point coordinates: "+a[f]}}if(h){if(e){l=new OpenLayers.Geometry.LinearRing(k)}else{l=new OpenLayers.Geometry.LineString(k)}}else{throw"Bad LineString coordinates: "+b}}return l},polygon:function(f){var c=this.getElementsByTagNameNS(f,this.internalns,"LinearRing");var g=c.length;var e=new Array(g);if(g>0){var b;for(var d=0,a=c.length;d<a;++d){b=this.parseGeometry.linestring.apply(this,[c[d],true]);if(b){e[d]=b}else{throw"Bad LinearRing geometry: "+d}}}return new OpenLayers.Geometry.Polygon(e)},multigeometry:function(e){var h,g;var f=[];var c=e.childNodes;for(var b=0,a=c.length;b<a;++b){h=c[b];if(h.nodeType==1){var d=(h.prefix)?h.nodeName.split(":")[1]:h.nodeName;var g=this.parseGeometry[d.toLowerCase()];if(g){f.push(g.apply(this,[h]))}}}return new OpenLayers.Geometry.Collection(f)}},CLASS_NAME:"Mapea.Format.KML"});Mapea.Format.WFS=OpenLayers.Class(OpenLayers.Format.WFS,{createFeatureXML:function(f){var c=this.buildGeometryNode(f.geometry);c.setAttribute("srsName",f.layer.projection.getCode());var g=this.createElementNS(this.featureNS,"feature:"+this.geometryName);g.appendChild(c);var b=this.createElementNS(this.featureNS,"feature:"+this.featureName);b.appendChild(g);for(var a in f.attributes){var h=this.createTextNode(f.attributes[a]);var d=a;if(a.search(":")!=-1){d=a.split(":")[1]}var e=this.createElementNS(this.featureNS,"feature:"+d);e.appendChild(h);b.appendChild(e)}return b},update:function(k){this.fillDefaultValues(k);if(!k.fid){OpenLayers.Console.userError(OpenLayers.i18n("noFID"))}var e=this.createElementNS(this.wfsns,"wfs:Update");e.setAttribute("typeName",this.featurePrefix+":"+this.featureName);e.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var h=this.createElementNS(this.wfsns,"wfs:Property");var a=this.createElementNS(this.wfsns,"wfs:Name");var c=this.createTextNode(this.geometryName);a.appendChild(c);h.appendChild(a);var j=this.createElementNS(this.wfsns,"wfs:Value");var d=this.buildGeometryNode(k.geometry);if(k.layer){d.setAttribute("srsName",k.layer.projection.getCode())}j.appendChild(d);h.appendChild(j);e.appendChild(h);for(var g in k.attributes){h=this.createElementNS(this.wfsns,"wfs:Property");a=this.createElementNS(this.wfsns,"wfs:Name");a.appendChild(this.createTextNode(g));h.appendChild(a);j=this.createElementNS(this.wfsns,"wfs:Value");j.appendChild(this.createTextNode(k.attributes[g]));h.appendChild(j);e.appendChild(h)}var f=this.createElementNS(this.ogcns,"ogc:Filter");var b=this.createElementNS(this.ogcns,"ogc:FeatureId");b.setAttribute("fid",k.fid);f.appendChild(b);e.appendChild(f);return e},fillDefaultValues:function(d){if(!d.layer){return}for(var c=0,a=d.layer.attributes.length;c<a;c++){var b=d.layer.attributes[c].name;if((!d.attributes[b])||(d.attributes[b]==null)||(d.attributes[b].length==0)){var e=this.layer.typeOf(b);if(e=="dateTime"){d.attributes[b]="0000-00-00T00:00:00"}else{if(e=="date"){d.attributes[b]="0000-00-00"}else{if(e=="time"){d.attributes[b]="00:00:00"}else{if(e=="duration"){d.attributes[b]="P0Y"}else{if(e=="int"||e=="float"||e=="double"||e=="decimal"||e=="short"||e=="byte"||e=="integer"||e=="long"||e=="negativeInteger"||e=="nonNegativeInteger"||e=="nonPositiveInteger"||e=="positiveInteger"||e=="unsignedLong"||e=="unsignedInt"||e=="unsignedShort"||e=="unsignedByte"){d.attributes[b]=0}else{d.attributes[b]="-"}}}}}}}},write:function(c){var d=this.createElementNS(this.wfsns,"wfs:Transaction");d.setAttribute("version","1.0.0");d.setAttribute("service","WFS");for(var b=0;b<c.length;b++){var a=c[b];if(a.fid&&(a.fid==this.layer.featureSel)){this.updateFeatureFields(a);a.state=OpenLayers.State.UPDATE}switch(a.state){case OpenLayers.State.INSERT:d.appendChild(this.insert(a));break;case OpenLayers.State.UPDATE:d.appendChild(this.update(a));break;case OpenLayers.State.DELETE:d.appendChild(this.remove(a));break}}return OpenLayers.Format.XML.prototype.write.apply(this,[d])},updateFeatureFields:function(e){var b=this.layer.map.getControlsByClass("Mapea.Control.EditAttributeFeature")[0];if(b!=null){for(var d=0,a=b.layer.attributes.length;d<a;++d){var g=b.layer.attributes[d].name;try{var f=document.getElementById("idInputText_"+g).value;e.attributes[g]=f}catch(c){}}}},CLASS_NAME:"Mapea.Format.WFS"});Mapea.Format.WMC=OpenLayers.Class(OpenLayers.Format.WMC,{read:function(e,c){if(typeof e=="string"){e=OpenLayers.Format.XML.prototype.read.apply(this,[e])}var b=e.documentElement;var a=this.version;if(!a){a=b.getAttribute("version");if(!a){a=this.defaultVersion}}if(!this.parser||this.parser.VERSION!=a){var g=Mapea.Format.WMC["v"+a.replace(/\./g,"_")];if(!g){throw"Can't find a WMC parser for version "+a}this.parser=new g(this.options)}var d=this.parser.read(e,c);var f;if(c.map){this.context=d;if(c.map instanceof OpenLayers.Map){f=this.mergeContextToMap(d,c.map)}else{f=this.contextToMap(d,c.map)}}else{f=d}return f},contextToMap:function(a,d){var c=a.units;if(typeof c=="undefined"){c="m"}if(typeof a.tileSize=="undefined"){a.tileSize=new OpenLayers.Size(256,256)}var b=new Mapea.Map(d,{maxExtent:a.maxExtent,projection:a.projection,maxResolution:"auto",units:c,tileSize:a.tileSize,controls:[]});b.addLayers(a.layers);b.setCenter(a.bounds.getCenterLonLat(),b.getZoomForExtent(a.bounds,true));return b},write:function(e,b){if(e.CLASS_NAME=="Mapea.Map"){e=this.toContext(e)}var a=(b&&b.version)||this.version||this.defaultVersion;if(!this.parser||this.parser.VERSION!=a){var d=Mapea.Format.WMC["v"+a.replace(/\./g,"_")];if(!d){throw"Can't find a WMS capabilities parser for version "+a}this.parser=new d(this.options)}var c=this.parser.write(e,b);return c},toContext:function(g){var e={};var f=g.layers;if(g.CLASS_NAME=="Mapea.Map"){var d=g.metadata||{};e.size=g.getSize();e.bounds=g.getExtent();e.projection=g.projection;e.title=g.title;e.keywords=d.keywords;e["abstract"]=d["abstract"];e.logo=d.logo;e.descriptionURL=d.descriptionURL;e.contactInformation=d.contactInformation;e.maxExtent=g.maxExtent}else{OpenLayers.Util.applyDefaults(e,g);if(e.layers!=undefined){delete (e.layers)}}if(e.layersContext==undefined){e.layersContext=[]}if(f!=undefined&&OpenLayers.Util.isArray(f)){for(var c=0,a=f.length;c<a;c++){var b=f[c];if(b instanceof OpenLayers.Layer.WMS){e.layersContext.push(this.layerToContext(b))}}}return e},CLASS_NAME:"Mapea.Format.WMC"});Mapea.Format.WMC.v1=OpenLayers.Class(OpenLayers.Format.WMC.v1,{namespaces:{ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"",getNamespacePrefix:function(a){var b=null;if(a==null){b=this.namespaces[this.defaultPrefix]}else{for(b in this.namespaces){if(this.namespaces[b]==a){break}}}return b},defaultPrefix:"wmc",rootPrefix:null,defaultStyleName:"",defaultStyleTitle:"Default",initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(c){if(typeof c=="string"){c=OpenLayers.Format.XML.prototype.read.apply(this,[c])}var a=c.documentElement;this.rootPrefix=a.prefix;var b={version:a.getAttribute("version")};this.runChildNodes(b,a);return b},runChildNodes:function(e,d){var b=d.childNodes;var a,c,g,j;for(var f=0,h=b.length;f<h;++f){a=b[f];if(a.nodeType==1){g=this.getNamespacePrefix(a.namespaceURI);j=a.nodeName.split(":").pop();c=this["read_"+g+"_"+j];if(c){c.apply(this,[e,a])}}}},read_wmc_General:function(a,b){this.runChildNodes(a,b)},read_wmc_BoundingBox:function(a,b){a.projection=b.getAttribute("SRS");a.bounds=new OpenLayers.Bounds(parseFloat(b.getAttribute("minx")),parseFloat(b.getAttribute("miny")),parseFloat(b.getAttribute("maxx")),parseFloat(b.getAttribute("maxy")))},read_wmc_LayerList:function(a,b){a.layers=[];this.runChildNodes(a,b)},read_wmc_Layer:function(b,c){var d={params:this.layerParams||{},options:{visibility:(c.getAttribute("hidden")!="1"),queryable:(c.getAttribute("queryable")=="1")},formats:[],styles:[]};this.runChildNodes(d,c);d.params.layers=d.name;d.options.maxExtent=d.maxExtent;var a=this.getLayerFromInfo(d);b.layers.push(a)},getLayerFromInfo:function(c){var a=c.options;if(this.layerOptions){OpenLayers.Util.applyDefaults(a,this.layerOptions)}var b=new OpenLayers.Layer.WMS(c.title,c.href,c.params,a);return b},read_wmc_Extension:function(b,a){this.runChildNodes(b,a)},read_ol_units:function(b,a){b.options.units=this.getChildValue(a)},read_ol_maxExtent:function(c,b){var a=new OpenLayers.Bounds(b.getAttribute("minx"),b.getAttribute("miny"),b.getAttribute("maxx"),b.getAttribute("maxy"));c.maxExtent=a},read_ol_transparent:function(b,a){b.params.transparent=this.getChildValue(a)},read_ol_numZoomLevels:function(b,a){b.options.numZoomLevels=parseInt(this.getChildValue(a))},read_ol_opacity:function(b,a){b.options.opacity=parseFloat(this.getChildValue(a))},read_ol_singleTile:function(b,a){b.options.singleTile=(this.getChildValue(a)=="true")},read_ol_isBaseLayer:function(b,a){b.options.isBaseLayer=(this.getChildValue(a)=="true")},read_ol_displayInLayerSwitcher:function(c,b){var a=this.getChildValue(b);if(!Mapea.Util.isNullOrEmpty(a)){a=a.toLowerCase();a=OpenLayers.String.trim(a)}c.options.displayInLayerSwitcher=(a=="true")},read_wmc_Server:function(b,a){b.params.version=a.getAttribute("version");this.runChildNodes(b,a)},read_wmc_FormatList:function(b,a){this.runChildNodes(b,a)},read_wmc_Format:function(c,a){var b=this.getChildValue(a);c.formats.push(b);if(a.getAttribute("current")=="1"){c.params.format=b}},read_wmc_StyleList:function(b,a){this.runChildNodes(b,a)},read_wmc_Style:function(c,b){var a={};this.runChildNodes(a,b);if(b.getAttribute("current")=="1"){if(a.href){c.params.sld=a.href}else{if(a.body){c.params.sld_body=a.body}else{c.params.styles=a.name}}}c.styles.push(a)},read_wmc_SLD:function(a,b){this.runChildNodes(a,b)},read_sld_StyledLayerDescriptor:function(c,b){var a=OpenLayers.Format.XML.prototype.write.apply(this,[b]);c.body=a},read_wmc_OnlineResource:function(b,a){b.href=this.getAttributeNS(a,this.namespaces.xlink,"href")},read_wmc_Name:function(c,b){var a=this.getChildValue(b);if(a){c.name=a}},read_wmc_Title:function(b,a){var c=this.getChildValue(a);if(c){b.title=c}},read_wmc_MetadataURL:function(c,b){var d={};var a=b.getElementsByTagName("OnlineResource");if(a.length>0){this.read_wmc_OnlineResource(d,a[0])}c.options.metadataURL=d.href},read_wmc_Abstract:function(c,b){var a=this.getChildValue(b);if(a){c["abstract"]=a}},read_wmc_LatLonBoundingBox:function(a,b){a.llbbox=[parseFloat(b.getAttribute("minx")),parseFloat(b.getAttribute("miny")),parseFloat(b.getAttribute("maxx")),parseFloat(b.getAttribute("maxy"))]},read_wmc_LegendURL:function(c,d){var b={width:d.getAttribute("width"),height:d.getAttribute("height")};var a=d.getElementsByTagName("OnlineResource");if(a.length>0){this.read_wmc_OnlineResource(b,a[0])}c.legend=b},write:function(c,b){var a=this.createElementDefaultNS("ViewContext");this.setAttributes(a,{version:this.VERSION,id:(b&&typeof b.id=="string")?b.id:OpenLayers.Util.createUniqueID("OpenLayers_Context_")});this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);a.appendChild(this.write_wmc_General(c));a.appendChild(this.write_wmc_LayerList(c));return OpenLayers.Format.XML.prototype.write.apply(this,[a])},createElementDefaultNS:function(c,b,a){var d=this.createElementNS(this.namespaces[this.defaultPrefix],c);if(b){d.appendChild(this.createTextNode(b))}if(a){this.setAttributes(d,a)}return d},setAttributes:function(b,d){var c;for(var a in d){c=d[a].toString();if(c.match(/[A-Z]/)){this.setAttributeNS(b,null,a,c)}else{b.setAttribute(a,c)}}},write_wmc_General:function(a){var c=this.createElementDefaultNS("General");if(a.size){c.appendChild(this.createElementDefaultNS("Window",null,{width:a.size.w,height:a.size.h}))}var b=a.bounds;c.appendChild(this.createElementDefaultNS("BoundingBox",null,{minx:b.left.toPrecision(10),miny:b.bottom.toPrecision(10),maxx:b.right.toPrecision(10),maxy:b.top.toPrecision(10),SRS:a.projection}));c.appendChild(this.createElementDefaultNS("Title",a.title));c.appendChild(this.write_ol_MapExtension(a));return c},write_ol_MapExtension:function(b){var d=this.createElementDefaultNS("Extension");var c=b.maxExtent;if(c){var a=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(a,{minx:c.left.toPrecision(10),miny:c.bottom.toPrecision(10),maxx:c.right.toPrecision(10),maxy:c.top.toPrecision(10)});d.appendChild(a)}return d},write_wmc_LayerList:function(d){var e=this.createElementDefaultNS("LayerList");var c;for(var b=0,a=d.layers.length;b<a;++b){c=d.layers[b];if(c instanceof OpenLayers.Layer.WMS){e.appendChild(this.write_wmc_Layer(c))}}return e},write_wmc_Layer:function(a){var b=this.createElementDefaultNS("Layer",null,{queryable:a.queryable?"1":"0",hidden:a.visibility?"0":"1"});b.appendChild(this.write_wmc_Server(a));b.appendChild(this.createElementDefaultNS("Name",a.params.LAYERS));b.appendChild(this.createElementDefaultNS("Title",a.name));if(a.metadataURL){b.appendChild(this.write_wmc_MetadataURL(a))}b.appendChild(this.write_wmc_FormatList(a));b.appendChild(this.write_wmc_StyleList(a));b.appendChild(this.write_wmc_LayerExtension(a));return b},write_wmc_LayerExtension:function(f){var d=this.createElementDefaultNS("Extension");var a=f.maxExtent;var j=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(j,{minx:a.left.toPrecision(10),miny:a.bottom.toPrecision(10),maxx:a.right.toPrecision(10),maxy:a.top.toPrecision(10)});d.appendChild(j);var c=f.params.TRANSPARENT;if(c){var k=this.createElementNS(this.namespaces.ol,"ol:transparent");k.appendChild(this.createTextNode(c));d.appendChild(k)}var h=["numZoomLevels","units","isBaseLayer","opacity","displayInLayerSwitcher","singleTile"];var b;for(var e=0,g=h.length;e<g;++e){b=this.createOLPropertyNode(f,h[e]);if(b){d.appendChild(b)}}return d},createOLPropertyNode:function(b,c){var a=null;if(b[c]!=null){a=this.createElementNS(this.namespaces.ol,"ol:"+c);a.appendChild(this.createTextNode(b[c].toString()))}return a},write_wmc_Server:function(a){var b=this.createElementDefaultNS("Server");this.setAttributes(b,{service:"OGC:WMS",version:a.params.VERSION});b.appendChild(this.write_wmc_OnlineResource(a.url));return b},write_wmc_MetadataURL:function(a){var b=this.createElementDefaultNS("MetadataURL");b.appendChild(this.write_wmc_OnlineResource(a.metadataURL));return b},write_wmc_FormatList:function(a){var b=this.createElementDefaultNS("FormatList");b.appendChild(this.createElementDefaultNS("Format",a.params.FORMAT,{current:"1"}));return b},write_wmc_StyleList:function(e){var d=this.createElementDefaultNS("StyleList");var c=this.createElementDefaultNS("Style",null,{current:"1"});if(e.params.SLD){var b=this.createElementDefaultNS("SLD");var g=this.write_wmc_OnlineResource(e.params.SLD);b.appendChild(g);c.appendChild(b)}else{if(e.params.SLD_BODY){var b=this.createElementDefaultNS("SLD");var f=e.params.SLD_BODY;var h=OpenLayers.Format.XML.prototype.read.apply(this,[f]);var j=h.documentElement;if(b.ownerDocument&&b.ownerDocument.importNode){j=b.ownerDocument.importNode(j,true)}b.appendChild(j);c.appendChild(b)}else{var a=e.params.STYLES?e.params.STYLES:this.defaultStyleName;c.appendChild(this.createElementDefaultNS("Name",a));c.appendChild(this.createElementDefaultNS("Title",this.defaultStyleTitle))}}d.appendChild(c);return d},write_wmc_OnlineResource:function(a){var b=this.createElementDefaultNS("OnlineResource");this.setAttributeNS(b,this.namespaces.xlink,"xlink:type","simple");this.setAttributeNS(b,this.namespaces.xlink,"xlink:href",a);return b},CLASS_NAME:"Mapea.Format.WMC.v1"});Mapea.Format.WMS=OpenLayers.Class({map:null,defaultVersion:"1.1.1",version:null,layerOptions:null,layerUrl:null,parser:null,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a},read:function(d){if(typeof d=="string"){d=OpenLayers.Format.XML.prototype.read.apply(this,[d])}var c=d.documentElement;var b=this.version;if(!b){b=c.getAttribute("version");if(!b){b=this.defaultVersion}}if(!this.parser||this.parser.VERSION!=b){var e=Mapea.Format.WMS["v"+b.replace(/\./g,"_")];if(!e){throw"Can't find a WMS parser for version "+b}this.parser=new e(this.options)}var a=this.parser.read(d);this.putLayerInfoProperties(a.layers[0],a);return a},putLayerInfoProperties:function(b,a){if(b.layers){for(var c=0;c<b.layers.length;c++){this.putLayerInfoProperties(b.layers[c],a)}}b.capabilities=a},createLayer:function(e){var c=null;if(e.name){var b={LAYERS:e.name,TRANSPARENT:"TRUE"};var d=false;if(this.map.baseLayer==null){d=true}var f={visibility:true,displayInLayerSwitcher:true,isBaseLayer:d,opacity:1};if(this.layerOptions){OpenLayers.Util.applyDefaults(f,this.layerOptions)}var a=e.capabilities.mapurl.href;if(this.layerUrl!=null){a=this.layerUrl}c=new Mapea.Layer.WMS(e.name,a,b,f);if(e.styles.length>0){c.styles=e.styles}c.wmsparams={};c.wmsparams.name=e.name;c.wmsparams.title=e.title;c.wmsparams.description=e.description;c.wmsparams.srs=e.srs;c.wmsparams.bbox=e.bbox;c.wmsparams.latlonbbox=e.latlonbbox;c.wmsparams.isqueryable=e.isqueryable;c.wmsparams.mapurl=e.capabilities.mapurl.href;if(e.capabilities.infourl){c.wmsparams.infourl=e.capabilities.infourl.href}if(e.capabilities.legendurl){c.wmsparams.legendurl=e.capabilities.legendurl.href}}return c},addLayerToMap:function(e,d){var a=this.createLayer(e);if(a&&!a.maxExtent&&d.getProjection()!="EPSG:4326"){a.maxExtent=e.bbox}if(a){d.addLayer(a)}var c=e.layers;if(c){for(var b=0;b<c.length;b++){this.addLayerToMap(c[b],d)}}},mergeMap:function(a,d){var c=a.layers[0].layers;for(var b=0;b<c.length;b++){this.addLayerToMap(c[b],d)}return d},setLayerOptions:function(a){this.layerOptions=a},setLayerUrl:function(a){this.layerUrl=a},CLASS_NAME:"Mapea.Format.WMS"});Mapea.Format.WFSCapabilities=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:"1.1.0",version:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.options=a},read:function(e){if(typeof e=="string"){e=OpenLayers.Format.XML.prototype.read.apply(this,[e])}var c=e.documentElement;var b=this.version;if(!b){b=c.getAttribute("version");if(!b){b=this.defaultVersion}}var d=Mapea.Format.WFSCapabilities["v"+b.replace(/\./g,"_")];if(!d){throw"Can't find a WFS capabilities parser for version "+b}var f=new d(this.options);var a=f.read(e);a.version=b;return a},CLASS_NAME:"Mapea.Format.WFSCapabilities"});Mapea.Format.WFSCapabilities.v1=OpenLayers.Class(Mapea.Format.WFSCapabilities,{initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.options=a},read:function(c){if(typeof c=="string"){c=OpenLayers.Format.XML.prototype.read.apply(this,[c])}var a={};var b=c.documentElement;this.runChildNodes(a,b);return a},runChildNodes:function(g,f){var a="ows:WGS84BoundingBox";var d=f.childNodes;var c,e;for(var b=0;b<d.length;++b){c=d[b];if(c.nodeType==1){if(c.nodeName==a){e=this["read_cap_WGS84BoundingBox"]}else{e=this["read_cap_"+c.nodeName]}if(e){e.apply(this,[g,c])}}}},read_cap_FeatureTypeList:function(c,b){var a={featureTypes:[]};this.runChildNodes(a,b);c.featureTypeList=a},read_cap_FeatureType:function(a,d,b){var c={};this.runChildNodes(c,d);a.featureTypes.push(c)},read_cap_Name:function(c,b){var a=this.getChildValue(b);if(a){c.name=a}},read_cap_Title:function(b,a){var c=this.getChildValue(a);if(c){b.title=c}},read_cap_Abstract:function(c,b){var a=this.getChildValue(b);if(a){c["abstract"]=a}},read_cap_WGS84BoundingBox:function(d,c){var a=null;var g=c.getElementsByTagName("ows:LowerCorner");var e=c.getElementsByTagName("ows:UpperCorner");if($.browser.webkit){g=c.getElementsByTagName("LowerCorner");e=c.getElementsByTagName("UpperCorner")}var j=null;var h=null;if(getBrowserName()=="msie"){j=g[0].text;h=e[0].text;var b=j.split(" ");var f=h.split(" ")}else{j=g[0].textContent;h=e[0].textContent}var b=j.split(" ");var f=h.split(" ");a=new OpenLayers.Bounds(parseFloat(b[0]),parseFloat(b[1]),parseFloat(f[0]),parseFloat(f[1]));d.bbox=a},CLASS_NAME:"Mapea.Format.WFSCapabilities.v1"});Mapea.Format.WFSCapabilities.v1_0_0=OpenLayers.Class(Mapea.Format.WFSCapabilities.v1,{initialize:function(a){Mapea.Format.WFSCapabilities.v1.prototype.initialize.apply(this,[a])},CLASS_NAME:"Mapea.Format.WFSCapabilities.v1_0_0"});Mapea.Format.WFSCapabilities.v1_1_0=OpenLayers.Class(Mapea.Format.WFSCapabilities.v1,{initialize:function(a){Mapea.Format.WFSCapabilities.v1.prototype.initialize.apply(this,[a])},CLASS_NAME:"Mapea.Format.WFSCapabilities.v1_1_0"});Mapea.Format.WMC.v1_1_0=OpenLayers.Class(Mapea.Format.WMC.v1,{initialize:function(a){OpenLayers.Format.WMC.v1_1_0.prototype.initialize.apply(this,[a])},read_sld_MinScaleDenominator:function(b,a){b.options.maxScale=this.getChildValue(a)},write_wmc_Layer:function(b){var c=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[b]);if(b.options.resolutions||b.options.scales||b.options.minResolution||b.options.maxScale){var d=this.createElementNS(this.namespaces.sld,"sld:MinScaleDenominator");d.appendChild(this.createTextNode(b.maxScale.toPrecision(10)));c.insertBefore(d,c.childNodes[3])}if(b.options.resolutions||b.options.scales||b.options.maxResolution||b.options.minScale){var a=this.createElementNS(this.namespaces.sld,"sld:MaxScaleDenominator");a.appendChild(this.createTextNode(b.minScale.toPrecision(10)));c.insertBefore(a,c.childNodes[4])}return c},read_wmc_Layer:function(b,c){var d={params:this.layerParams||{},options:{visibility:(c.getAttribute("hidden")!="1"),queryable:(c.getAttribute("queryable")=="1")},formats:[],styles:[]};this.runChildNodes(d,c);d.params.isWMC="ok";d.params.layers=d.name;d.options.maxExtent=d.maxExtent;var a=this.getLayerFromInfo(d);b.layers.push(a)},getLayerFromInfo:function(c){var a=c.options;if(this.layerOptions){OpenLayers.Util.applyDefaults(a,this.layerOptions)}var b=new Mapea.Layer.WMS(c.title,c.href,c.params,a);return b},read_ol_units:function(b,a){b.units=this.getChildValue(a)},read_ol_tileSize:function(a,b){a.tileSize=new OpenLayers.Size(parseFloat(b.getAttribute("width")),parseFloat(b.getAttribute("height")))},read_ol_groupDisplayLayerSwitcher:function(b,a){b.options.groupDisplayLayerSwitcher=(this.getChildValue(a))},read_ol_orderInsideGroupDisplayLayerSwitcher:function(b,a){b.options.orderInsideGroupDisplayLayerSwitcher=new Number(this.getChildValue(a))},read_sld_MaxScaleDenominator:function(b,a){b.options.minScale=this.getChildValue(a)},read_wmc_Style:function(c,b){var a={};this.runChildNodes(a,b);if(b.getAttribute("current")=="1"){if(a.legend){c.params.layerLegend=a.legend}if(a.href){c.params.sld=a.href}else{if(a.body){c.params.sld_body=a.body}else{c.params.styles=a.name}}}c.styles.push(a)},write_wmc_LayerList:function(d){var e=this.createElementDefaultNS("LayerList");var c;for(var b=0,a=d.layers.length;b<a;++b){c=d.layers[b];if(c instanceof Mapea.Layer.WMS){e.appendChild(this.write_wmc_Layer(c))}}return e},write_wmc_LayerExtension:function(f){var d=this.createElementDefaultNS("Extension");var a=f.maxExtent;var j=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(j,{minx:a.left.toPrecision(10),miny:a.bottom.toPrecision(10),maxx:a.right.toPrecision(10),maxy:a.top.toPrecision(10)});d.appendChild(j);var c=f.params.TRANSPARENT;if(c){var k=this.createElementNS(this.namespaces.ol,"ol:transparent");k.appendChild(this.createTextNode(c));d.appendChild(k)}var h=["numZoomLevels","units","isBaseLayer","opacity","displayInLayerSwitcher","groupDisplayLayerSwitcher","singleTile"];var b;for(var e=0,g=h.length;e<g;++e){b=this.createOLPropertyNode(f,h[e]);if(b){d.appendChild(b)}}return d},CLASS_NAME:"Mapea.Format.WMC.v1_1_0"});Mapea.Format.WMS.v1=OpenLayers.Class(OpenLayers.Format.XML,{defaultStyleName:"",defaultStyleTitle:"Default",arrayS:[],initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(c){if(typeof c=="string"){c=OpenLayers.Format.XML.prototype.read.apply(this,[c])}var b=c.documentElement;this.rootPrefix=b.prefix;var a={version:b.getAttribute("version")};this.runChildNodes(a,b);return a},runChildNodes:function(e,d){var b=d.childNodes;var a,c,g,j;for(var f=0,h=b.length;f<h;++f){a=b[f];if(a.nodeType==1){j=a.nodeName.split(":").pop();c=this["read_wms_"+j];if(c){c.apply(this,[e,a])}}}},read_wms_Layer:function(c,b){var a={params:{},options:{visibility:(b.getAttribute("hidden")!="1"),queryable:(b.getAttribute("queryable")=="1")},formats:[],styles:[]};this.runChildNodes(a,b);if(!c.layers){c.layers=[]}c.layers.push(a)},read_wms_SRS:function(a,b){if(!a.arraySRS){a.arraySRS=[]}if(b.nodeName=="SRS"){a.arraySRS.push(this.getChildValue(b))}},read_wms_CRS:function(a,b){if(!a.arraySRS){a.arraySRS=[]}if(b.nodeName=="CRS"){a.arraySRS.push(this.getChildValue(b))}},read_wms_Service:function(a,b){this.runChildNodes(a,b)},read_wms_Capability:function(a,b){this.runChildNodes(a,b)},read_wms_Request:function(a,b){this.runChildNodes(a,b)},read_wms_GetMap:function(a,b){a.mapurl={};this.runChildNodes(a.mapurl,b)},read_wms_GetFeatureInfo:function(a,b){a.infourl={};this.runChildNodes(a.infourl,b)},read_wms_GetLegendGraphic:function(a,b){a.legendurl={};this.runChildNodes(a.legendurl,b)},read_wms_DCPType:function(b,a){this.runChildNodes(b,a)},read_wms_HTTP:function(b,a){this.runChildNodes(b,a)},read_wms_Get:function(b,a){this.runChildNodes(b,a)},read_wms_BoundingBox:function(d,c){if(!d.srsArray){d.srsArray=[]}if(!d.bboxArray){d.bboxArray=[]}if(!c.getAttribute("SRS")){var b=c.getAttribute("CRS");if(b.indexOf("EPSG")>-1){d.srsArray.push(c.getAttribute("CRS"));d.srs=c.getAttribute("CRS");var a=parseFloat(c.getAttribute("minx"));if(a>=-180&&a<=180){d.bbox=new OpenLayers.Bounds(parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("maxy")),parseFloat(c.getAttribute("maxx")));d.bboxArray.push(new OpenLayers.Bounds(parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("maxy")),parseFloat(c.getAttribute("maxx"))))}else{d.bbox=new OpenLayers.Bounds(parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("maxx")),parseFloat(c.getAttribute("maxy")));d.bboxArray.push(new OpenLayers.Bounds(parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("maxx")),parseFloat(c.getAttribute("maxy"))))}}}else{d.srsArray.push(c.getAttribute("SRS"));d.srs=c.getAttribute("SRS");d.bbox=new OpenLayers.Bounds(parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("maxx")),parseFloat(c.getAttribute("maxy")));d.bboxArray.push(new OpenLayers.Bounds(parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("maxx")),parseFloat(c.getAttribute("maxy"))))}},read_wms_OnlineResource:function(c,b){var a=this.getAttributeNS(b,"http://www.w3.org/1999/xlink","href");c.href=a},read_wms_Name:function(c,b){var a=this.getChildValue(b);c.name=a},read_wms_Title:function(b,a){var c=this.getChildValue(a);b.title=c},read_wms_Abstract:function(c,b){var a=this.getChildValue(b);c.description=a},read_wms_LatLonBoundingBox:function(a,b){a.latlonbbox=new OpenLayers.Bounds(parseFloat(b.getAttribute("minx")),parseFloat(b.getAttribute("miny")),parseFloat(b.getAttribute("maxx")),parseFloat(b.getAttribute("maxy")))},read_wms_Style:function(c,b){var a={};this.runChildNodes(a,b);if(!c.styles){c.styles=[]}c.styles.push(a)},read_wms_LegendURL:function(c,d){var b={width:d.getAttribute("width"),height:d.getAttribute("height")};var a=d.getElementsByTagName("OnlineResource");if(a.length>0){this.read_wms_OnlineResource(b,a[0])}c.legend=b},CLASS_NAME:"Mapea.Format.WMS.v1"});Mapea.Format.WMS.v1_1_1=OpenLayers.Class(Mapea.Format.WMS.v1,{VERSION:"1.1.1",schemaLocation:null,initialize:function(a){Mapea.Format.WMS.v1.prototype.initialize.apply(this,[a])},read_sld_MinScaleDenominator:function(b,a){b.options.maxScale=this.getChildValue(a)},read_sld_MaxScaleDenominator:function(b,a){b.options.minScale=this.getChildValue(a)},CLASS_NAME:"Mapea.Format.WMS.v1_1_1"});Mapea.Format.WMS.v1_3_0=OpenLayers.Class(Mapea.Format.WMS.v1,{VERSION:"1.3.0",schemaLocation:null,initialize:function(a){Mapea.Format.WMS.v1.prototype.initialize.apply(this,[a])},CLASS_NAME:"Mapea.Format.WMS.v1_3_0"});Mapea.Handler=OpenLayers.Class(OpenLayers.Handler,{CLASS_NAME:"Mapea.Handler"});Mapea.Handler.Feature=OpenLayers.Class(OpenLayers.Handler.Feature,{lastXY:null,initialize:function(d,b,c,a){if(Mapea.Util.isMobile){this.EVENTMAP.touchend={"in":"click",out:"clickout"}}OpenLayers.Handler.Feature.prototype.initialize.apply(this,[d,b,c,a])},click:function(a){Mapea.global.lastClickedXY=Mapea.Util.getClickedPixelFromEvent(a);return OpenLayers.Handler.Feature.prototype.click.apply(this,[a])},handle:function(a){if(this.feature&&!this.feature.layer){this.feature=null}var c=a.type;var f=false;var e=!!(this.feature);var d=(c=="click"||c=="dblclick"||c=="touchend");this.feature=this.layer.getFeatureFromEvent(a);if(this.feature&&!this.feature.layer){this.feature=null}if(this.lastFeature&&!this.lastFeature.layer){this.lastFeature=null}if(this.feature){if(c==="touchend"){OpenLayers.Event.stop(a)}var b=(this.feature!=this.lastFeature);if(this.geometryTypeMatches(this.feature)){if(e&&b){if(this.lastFeature){this.triggerCallback(c,"out",[this.lastFeature])}this.triggerCallback(c,"in",[this.feature])}else{if(!e||d){this.triggerCallback(c,"in",[this.feature])}}this.lastFeature=this.feature;f=true}else{if(this.lastFeature&&(e&&b||d)){this.triggerCallback(c,"out",[this.lastFeature])}this.feature=null}}else{if(this.lastFeature&&(e||d)){this.triggerCallback(c,"out",[this.lastFeature])}}return f},touchstart:function(a){if(!OpenLayers.Event.isMultiTouch(a)){this.lastXY=a.xy}},touchend:function(a){if(Mapea.Util.isMobile&&!OpenLayers.Event.isMultiTouch(a)){if(a.xy&&this.lastXY){var c=Math.abs(this.lastXY.x-a.xy.x);var b=Math.abs(this.lastXY.y-a.xy.y);if((c<=this.clickTolerance)&&(b<=this.clickTolerance)){return this.mousedown(a)}}}},CLASS_NAME:"Mapea.Handler.Feature"});Mapea.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.WMS,{groupDisplayLayerSwitcher:"none",orderInsideGroupDisplayLayerSwitcher:0,tileClass:Mapea.Tile.Image,initialize:function(d,c,e,b){var a=[];e=OpenLayers.Util.upperCaseObject(e);a.push(d,c,e,b);OpenLayers.Layer.Grid.prototype.initialize.apply(this,a);OpenLayers.Layer.WMS.prototype.initialize.apply(this,a);OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));if(this.params.TRANSPARENT&&this.params.TRANSPARENT.toString().toLowerCase()=="true"){if((b==null)||(!b.isBaseLayer)){this.isBaseLayer=false}if(this.params.FORMAT=="image/jpeg"){this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"}OpenLayers.Util.getIEVersion=function(){var g="";var f=navigator.userAgent.toLowerCase();if(f.indexOf("msie 6")!=-1){g="msie 6.x"}else{if(f.indexOf("msie 7")!=-1){g="msie 7.x"}else{g="other"}}return g};if((OpenLayers.Util.getIEVersion()=="msie 7.x"||OpenLayers.Util.getIEVersion()=="msie 6.x")&&this.params.FORMAT=="image/png"){this.params.FORMAT="image/gif"}}},destroy:function(){OpenLayers.Layer.WMS.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null){a=new Mapea.Layer.WMS(this.name,this.url,this.params,this.options)}a=OpenLayers.Layer.WMS.prototype.clone.apply(this,[a]);return a},mergeNewParams:function(c){var b=OpenLayers.Util.upperCaseObject(c);var a=[b];return OpenLayers.Layer.WMS.prototype.mergeNewParams.apply(this,a)},getFullRequestString:function(d,b){var a=this.map.getProjectionObject();var c=(a=="none")?null:a;if(parseFloat(this.params.VERSION)>=1.3){this.params.CRS=c}else{this.params.SRS=c}if(typeof this.params.TRANSPARENT=="boolean"){d.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE"}return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},moveTo:function(f,b,g){OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments);f=f||this.map.getExtent();if(f!=null){var e=!this.grid.length||b;var d=this.getTilesBounds();var c=this.map.getResolution();var a=this.getServerResolution(c);if(this.singleTile){if(e||(!g&&!d.containsBounds(f))){if(b&&this.transitionEffect!=="resize"){this.removeBackBuffer()}if(!b||this.transitionEffect==="resize"){this.applyBackBuffer(a)}this.initSingleTile(f)}}else{e=e||!d.intersectsBounds(f,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()});if(c!==a){f=this.map.calculateBounds(null,a);if(e){var h=a/c;this.transformDiv(h)}}else{this.div.style.width="100%";this.div.style.height="100%";this.div.style.left="0%";this.div.style.top="0%"}if(e){if(b&&this.transitionEffect==="resize"){this.applyBackBuffer(a)}this.initGriddedTiles(f)}else{this.moveGriddedTiles()}}}},initGriddedTiles:function(j){this.clearTileQueue();var g=this.map.getSize();var B=Math.ceil(g.h/this.tileSize.h)+Math.max(1,2*this.buffer);var E=Math.ceil(g.w/this.tileSize.w)+Math.max(1,2*this.buffer);var H=this.getTileOrigin();var s=this.getServerResolution();var r=this.calculateGridLayout(j,H,s);var f=Math.round(r.tileoffsetx);var c=Math.round(r.tileoffsety);var l=r.tileoffsetlon;var o=r.tileoffsetlat;var e=r.tilelon;var k=r.tilelat;var A=f;var D=l;var z=0;var a=parseInt(this.map.layerContainerDiv.style.left);var u=parseInt(this.map.layerContainerDiv.style.top);var C=[],F=this.map.getCenter();do{var h=this.grid[z++];if(!h){h=[];this.grid.push(h)}l=D;f=A;var d=0;do{var b=new OpenLayers.Bounds(l,o,l+e,o+k);var n=f;n-=a;var m=c;m-=u;var q=new OpenLayers.Pixel(n,m);var G=h[d++];if(!G){G=this.addTile(b,q);this.addTileMonitoringHooks(G);h.push(G)}else{G.moveTo(b,q,false)}var t=b.getCenterLonLat();C.push({tile:G,distance:Math.pow(t.lon-F.lon,2)+Math.pow(t.lat-F.lat,2)});l+=e;f+=this.tileSize.w}while((l<=j.right+e*this.buffer)||d<E);o-=k;c+=this.tileSize.h}while((o>=j.bottom-k*this.buffer)||z<B);this.removeExcessTiles(z,d);this.gridResolution=this.getServerResolution();C.sort(function(y,x){return y.distance-x.distance});for(var w=0,p=C.length;w<p;++w){C[w].tile.draw()}},addTile:function(c,a){var b=new this.tileClass(this,a,c,null,this.tileSize,this.tileOptions);b.events.register("beforedraw",this,this.queueTileDraw);return b},CLASS_NAME:"Mapea.Layer.WMS"});Mapea.Layer.GML=OpenLayers.Class(OpenLayers.Layer.Vector,{imageIds:[],xmlFormat:null,loaded:false,format:null,formatOptions:null,initialize:function(d,c,b){var a=[];a.push(d,b);OpenLayers.Layer.Vector.prototype.initialize.apply(this,a);this.url=c;this.xmlFormat=new OpenLayers.Format.XML()},setVisibility:function(b,e){OpenLayers.Layer.Vector.prototype.setVisibility.apply(this,arguments);if(this.visibility&&!this.loaded){this.loadGML()}var f=(this.visibility)?"":"none";for(var d=0,a=this.imageIds.length;d<a;d++){var c=this.imageIds[d];jQuery("#"+c).css("display",f)}},moveTo:function(c,a,b){OpenLayers.Layer.Vector.prototype.moveTo.apply(this,arguments);if(this.visibility&&!this.loaded){this.loadGML()}},loadGML:function(){if(!this.loaded){this.events.triggerEvent("loadstart");OpenLayers.Request.GET({url:this.url,success:this.requestSuccess,failure:this.requestFailure,scope:this});this.loaded=true}},setUrl:function(a){this.url=a;this.destroyFeatures();this.loaded=false;this.loadGML()},requestSuccess:function(e){var f=e.responseXML;var a=e.responseText;var c;if(!f||!f.documentElement){f=e.responseText;var g=/^.*<error><descripcion>(.+)<\/descripcion><\/error>$/;if(g.test(f)){c=f.replace(g,"$1")}}else{c=jQuery(f).find("error").find("descripcion").text()}if(c&&c!=""){Mapea.Util.showErrorMessage("Error al cargar capa '"+this.name+"': "+c)}else{var b={};OpenLayers.Util.extend(b,this.formatOptions);if(this.map&&!this.projection.equals(this.map.getProjectionObject())){b.externalProjection=this.projection;b.internalProjection=this.map.getProjectionObject()}var d=this.format?new this.format(b):new OpenLayers.Format.GML(b);this.addFeatures(d.read(f));this.addGroundOverlays(a);this.addScreenOverlays(a);this.events.triggerEvent("loadend")}},requestFailure:function(a){OpenLayers.Console.userError(OpenLayers.i18n("errorLoadingGML",{url:this.url}));this.events.triggerEvent("loadend")},addGroundOverlays:function(e){var d=this.xmlFormat.read(e);var c=d.getElementsByTagName("GroundOverlay");var b=this.map;var a=this;jQuery.each(c,function(g,h){var k=new Object();parentFolder=jQuery(c).parent("Folder").find("name").text();k.href=jQuery(h).find("href").text();k.name=jQuery(h).find("name").text();k.description=jQuery(h).find("description").text();k.north=jQuery(h).find("north").text();k.south=jQuery(h).find("south").text();k.east=jQuery(h).find("east").text();k.west=jQuery(h).find("west").text();k.rotation=jQuery(h).find("rotation").text();k.id=a.generateImageId();var f={opacity:1,isBaseLayer:false,numZoomLevels:20};var j=new OpenLayers.Layer.Image(k.id,k.href,new OpenLayers.Bounds(k.west,k.south,k.east,k.north),new OpenLayers.Size(1,1),f);b.addLayers([j])})},addScreenOverlays:function(e){var d=this.xmlFormat.read(e);var a=d.getElementsByTagName("ScreenOverlay");var c=this.map;var b=this;jQuery.each(a,function(m,w){var t={};parentFolder=jQuery(a).parent("Folder").find("name").text();t.href=jQuery(w).find("href").text();t.name=jQuery(w).find("name").text();var B=t.overlayXY=jQuery(w).find("overlayXY").get(0).getAttribute("x");var n=t.overlayXY=jQuery(w).find("overlayXY").get(0).getAttribute("y");var A=t.overlayXY=jQuery(w).find("screenXY").get(0).getAttribute("x");var k=t.overlayXY=jQuery(w).find("screenXY").get(0).getAttribute("y");var q=t.overlayXY=jQuery(w).find("rotationXY").get(0).getAttribute("x");var D=t.overlayXY=jQuery(w).find("rotationXY").get(0).getAttribute("y");var C=t.overlayXY=jQuery(w).find("size").get(0).getAttribute("x");var s=t.overlayXY=jQuery(w).find("size").get(0).getAttribute("y");var y=t.visibility=jQuery(w).find("visibility").text();var h={opacity:1,isBaseLayer:false,numZoomLevels:20};var l=screen.width;var r=screen.height-(screen.height/7);var g=l*A;if((parseInt(g)-(parseInt(C)/2))<0){g=0}else{if((parseInt(g)+parseInt(C))>l){g=parseInt(l)-parseInt(C)}else{g=parseInt(g)-parseInt(C/2)}}var f=r*k;if(f<0){f=0}else{if((parseInt(f)+parseInt(s))>r){f=parseInt(r)-parseInt(s)}}var F=r/2;if(f<F){f=(parseInt(F)-parseInt(f))+parseInt(F)-parseInt(s)}else{if(f>F){f=(parseInt(F)-(parseInt(f)-parseInt(F)))-parseInt(s);if(f<0){f=0}}}var p=t.href;var x=c.div;var z=$(x).css("width");z=z.substring(0,z.length-2);z=parseInt(z);var G=$(x).css("height");G=G.substring(0,G.length-2);G=parseInt(G);g=parseFloat(A)*z;g=g-(C/2);f=(1-parseFloat(k))*G;var j=new OpenLayers.Pixel(g,f);var u=new OpenLayers.Size(C,s);var E=b.generateImageId();var o=OpenLayers.Util.createAlphaImageDiv(E,j,u,p,"absolute");if(y!="0"){x.appendChild(o);document.getElementById(E).style.zIndex=1006}})},generateImageId:function(){var a=OpenLayers.Util.createUniqueID("overlayImg_");this.imageIds.push(a);return a},CLASS_NAME:"Mapea.Layer.GML"});Mapea.Layer.LayerDraw=OpenLayers.Class({vectorlayer:null,map:null,layer_style:null,style_point:null,style_line:null,style_mark:null,initialize:function(c,b,a){this.vectorlayer=new OpenLayers.Layer.Vector(c,b);if(!a||!this.vectorlayer){Mapea.Util.showErrorMessage("Error al inical el LayerDraw.")}else{this.map=a;this.map.addLayer(this.vectorlayer)}},destroy:function(){this.map.removeLayer(this.vectorlayer,false);this.vectorlayer=null;this.layer_style=null;this.style_point=null;this.style_mark=null},drawmultipoint:function(f){var a=[];var b=f.split(" ");var h=null;var d=null;var c=null;var g=null;this.initolvars();for(var e=0;e<b.length;e++){h=b[e].split(",");d=new OpenLayers.Geometry.Point(h[0],h[1]);a.push(d)}c=new OpenLayers.Geometry.MultiPoint(a);g=new OpenLayers.Feature.Vector(c,null,this.style_point);this.vectorlayer.addFeatures([g])},drawmultiline:function(k){var c=[];var h=null;var e=null;var g=null;var f=null;var d=null;var l=null;this.initolvars();h=k.split("_");for(var a=0;a<h.length;a++){var j=[];e=h[a].split(" ");for(var b=0;b<e.length;b++){g=e[b].split(",");f=new OpenLayers.Geometry.Point(g[0],g[1]);j.push(f)}line=new OpenLayers.Geometry.LineString(j);c.push(line)}d=new OpenLayers.Geometry.MultiLineString(c);l=new OpenLayers.Feature.Vector(d,null,this.style_line);vectorlayer.addFeatures([l])},drawmultipolygon:function(l){var c=[];var m=null;var d=null;var j=null;var e=null;var g=null;var h=null;var f=null;this.initolvars();m=l.split("_");for(var a=0;a<m.length;a++){var k=[];d=m[a].split(" ");for(var b=0;b<d.length;b++){j=d[b].split(",");e=new OpenLayers.Geometry.Point(j[0],j[1]);k.push(e)}linearring=new OpenLayers.Geometry.LinearRing(k);g=new OpenLayers.Geometry.Polygon(linearring);c.push(g)}h=new OpenLayers.Geometry.MultiPolygon(c);f=new OpenLayers.Feature.Vector(h);this.vectorlayer.addFeatures([f])},eraseDraw:function(){this.vectorlayer.destroyFeatures();this.destroy()},initolvars:function(){if(this.layer_style==null){this.layer_style=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);this.layer_style.fillOpacity=0.2;this.layer_style.graphicOpacity=1}if(this.style_point==null){this.style_point=OpenLayers.Util.extend({},this.layer_style);this.style_point.strokeColor="blue";this.style_point.fillColor="blue"}if(this.style_line==null){this.style_line=OpenLayers.Util.extend({},this.layer_style);this.style_line.strokeColor="#00FF00";this.style_line.strokeWidth=3;this.style_line.pointRadius=6}if(this.style_mark==null){this.style_mark=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);this.style_mark.graphicWidth=24;this.style_mark.graphicHeight=20;this.style_mark.graphicXOffset=-(this.style_mark.graphicWidth/2);this.style_mark.graphicYOffset=-this.style_mark.graphicHeight;this.style_mark.externalGraphic="marker.png"}},CLASS_NAME:"Mapea.Layer.LayerDraw"});Mapea.Layer.Vector=OpenLayers.Class(OpenLayers.Layer.Vector,{initialize:function(c,b){OpenLayers.Layer.Vector.prototype.initialize.apply(this,arguments);if(!this.renderer||!this.renderer.supported()){this.assignRenderer()}if(!this.renderer||!this.renderer.supported()){this.renderer=null;this.displayError()}if(!this.styleMap){this.styleMap=new OpenLayers.StyleMap()}this.features=[];this.selectedFeatures=[];this.unrenderedFeatures={};if(this.strategies){for(var d=0,a=this.strategies.length;d<a;d++){this.strategies[d].setLayer(this)}}},addFeatures:function(f,c){var b=[];for(var e=0,a=f.length;e<a;e++){var d=f[e];b.push(d)}OpenLayers.Layer.Vector.prototype.addFeatures.apply(this,[b,c])},addFeaturesReverse:function(b,j){if(!(OpenLayers.Util.isArray(b))){b=[b]}var g=!j||!j.silent;if(g){var a={features:b};var f=this.events.triggerEvent("beforefeaturesadded",a);if(f===false){return}b=a.features}for(var c=0,e=b.length;c<e;c++){if(c!=(b.length-1)){this.renderer.locked=true}else{this.renderer.locked=false}var h=b[c];if(this.geometryType&&!(h.geometry instanceof this.geometryType)){var d=OpenLayers.i18n("componentShouldBe",{geomType:this.geometryType.prototype.CLASS_NAME});throw d}this.features.push(h);h.layer=this;if(!h.style&&this.style){h.style=OpenLayers.Util.extend({},this.style)}if(g){if(this.events.triggerEvent("beforefeatureadded",{feature:h})===false){continue}this.preFeatureInsert(h)}this.drawFeature(h);if(g){this.events.triggerEvent("featureadded",{feature:h});this.onFeatureInsert(h)}}if(g){this.events.triggerEvent("featuresadded",{features:b})}},CLASS_NAME:"Mapea.Layer.Vector"});Mapea.Layer.WFS=OpenLayers.Class(OpenLayers.Layer.WFS,{handlerType:null,multipleType:false,schema:null,attributes:[],selectWFSFeature:null,featureSel:null,DEFAULT_PARAMS:{service:"WFS",version:Mapea.Version.WFS_GET_FEATURE,request:"GetFeature"},initialize:function(d,c,e,b){if(e.handlerType){this.handlerType=e.handlerType}if(e.multipleType){this.multipleType=e.multipleType}b=b||{};if(!b.format){b.format=OpenLayers.Format.WFST}if(b.featureClass||!OpenLayers.Layer.Vector||!OpenLayers.Feature.Vector){this.vectorMode=false}OpenLayers.Util.extend(b,{reportError:false});this.params=OpenLayers.Util.applyDefaults(e,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS));if(!this.formatOptions){this.formatOptions={}}this.formatOptions.extractAttributes=b.extractAttributes;this.formatOptions.version=Mapea.Version.WFS_GET_FEATURE;this.formatOptions.featureType=this.params.typename;this.formatOptions.featureNS=this.params.namespace;var a=[d,b];OpenLayers.Layer.Vector.prototype.initialize.apply(this,a);if(!this.renderer||!this.vectorMode){this.vectorMode=false;if(!b.featureClass){b.featureClass=OpenLayers.Feature.WFS}OpenLayers.Layer.Markers.prototype.initialize.apply(this,a)}if(this.params&&this.params.typename&&!this.options.typename){this.options.typename=this.params.typename}if(!this.options.geometry_column){this.options.geometry_column="G_GEOMETRY"}this.url=c;this.describeFeatureType()},moveTo:function(a,b,p){if(this.vectorMode){OpenLayers.Layer.Vector.prototype.moveTo.apply(this,arguments)}else{OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments)}if(p){return false}if(b){if(this.vectorMode){this.renderer.clear()}}if(this.options.minZoomLevel){OpenLayers.Console.warn(OpenLayers.i18n("minZoomLevelError"));if(this.map.getZoom()<this.options.minZoomLevel){return null}}if(a==null){a=this.map.getExtent()}var o=(this.tile==null);var h=(!o&&!this.tile.bounds.containsBounds(a));if(b||o||(!p&&h)){var c=a.getCenterLonLat();var n=a.getWidth()*this.ratio;var j=a.getHeight()*this.ratio;var l=new OpenLayers.Bounds(c.lon-(n/2),c.lat-(j/2),c.lon+(n/2),c.lat+(j/2));var q=this.map.getSize();q.w=q.w*this.ratio;q.h=q.h*this.ratio;var k=new OpenLayers.LonLat(l.left,l.top);var m=this.map.getLayerPxFromLonLat(k);var d=this.getFullRequestString();var g=null;var e=this.params.filter||this.params.FILTER;if(e){g={FILTER:e}}else{var f=this.params.featureid||this.params.FEATUREID;if(!f){g={BBOX:this.getBBOXParameter(l)}}}if(this.map&&!this.projection.equals(this.map.getProjectionObject())){var r=l.clone();r.transform(this.map.getProjectionObject(),this.projection);if(!e&&!f){g.BBOX=this.getBBOXParameter(r)}}if(g&&g.BBOX&&(g.BBOX.length>0)){d+="&"+OpenLayers.Util.getParameterString(g)}if(!this.tile){this.tile=new Mapea.Tile.WFS(this,m,l,d,q);this.addTileMonitoringHooks(this.tile);this.tile.draw()}else{if(this.vectorMode){this.destroyFeatures();this.renderer.clear()}else{this.clearMarkers()}this.removeTileMonitoringHooks(this.tile);this.tile.destroy();this.tile=null;this.tile=new Mapea.Tile.WFS(this,m,l,d,q);this.addTileMonitoringHooks(this.tile);this.tile.draw()}}},onMapResize:function(){if(this.vectorMode){OpenLayers.Layer.Vector.prototype.onMapResize.apply(this,arguments)}else{OpenLayers.Layer.Markers.prototype.onMapResize.apply(this,arguments)}},display:function(){if(this.vectorMode){OpenLayers.Layer.Vector.prototype.display.apply(this,arguments)}else{OpenLayers.Layer.Markers.prototype.display.apply(this,arguments)}},commit:function(){if(this.selectedFeatures.length>0){this.featureSel=this.selectedFeatures[0].fid}else{this.featureSel=null}var b=this.writer.write(this.features);var a=jQuery(".olControlSaveFeaturesItemInactive")[0];if(a){OpenLayers.Element.addClass(a,"saving")}OpenLayers.Request.POST({url:this.url,data:b,success:function(c){OpenLayers.Element.removeClass(a,"saving");OpenLayers.Function.bind(this.commitSuccess,this)(c)},failure:this.commitFailure,scope:this})},commitSuccess:function(e){var b=e.responseText;var d=jQuery(b);var f=(jQuery.browser.msie?"status":"wfs\\:status");var a=(jQuery.browser.msie?"success":"wfs\\:success");if(d.find(f).find(a).length>0){Mapea.Util.showSuccessMessage("Se ha guardado con éxito")}else{var g=d.find("ServiceException").text().trim();var c=(jQuery.browser.msie?"Message":"wfs\\:Message");if(!g||(g.length==0)){g=d.find(c).text().trim()}Mapea.Util.showErrorMessage(g)}this.refresh()},refresh:function(){if(this.selectWFSFeature){this.selectWFSFeature.unselectAll()}var c=this.map.getControlsByClass("Mapea.Control.EditAttributeFeature");c=c.concat(this.map.getControlsByClass("Mapea.Control.DrawFeature"));c=c.concat(this.map.getControlsByClass("Mapea.Control.DeleteFeature"));c=c.concat(this.map.getControlsByClass("Mapea.Control.ModifyFeature"));for(var b=0,a=c.length;b<a;b++){var d=c[b];if(d&&d.feature){d.feature=null;delete d.feature}}if(this.tile){if(this.vectorMode){this.renderer.clear();this.features.length=0}else{this.clearMarkers();this.markers.length=0}this.tile.draw()}},describeFeatureType:function(){var a=this.options.namespace+":"+this.options.typename;var b=OpenLayers.Request.GET({url:this.url,success:this.onDescribeFeatureTypeSuccess,failure:this.onDescribeFeatureTypeError,scope:this,params:{version:Mapea.Version.WFS_DESCRIBE_FEATURE_TYPE,service:"WFS",request:"DescribeFeatureType",typeName:a},async:false})},onDescribeFeatureTypeSuccess:function(d){var e=new OpenLayers.Format.XML();var c=new OpenLayers.Format.WFSDescribeFeatureType();var g=null;if(d.responseXML==null){Mapea.Util.showErrorMessage("Ha ocurrido un error al obtener el documento DescribeFeatureType.");return false}var b="UTF-8";var a=/UTF|utf/i;var h=d.responseText;var f=h.search(a);if(f==-1||navigator.appName.indexOf("Explorer")!=-1){b="ISO-8859-1"}if(!d.responseXML.documentElement){g=e.read(d.responseText)}else{g=d.responseXML}this.schema=c.read(g);this.featureNS=this.schema.targetNamespace;this.generateAttributes();if(!this.writer){var j={};if(this.map&&!this.projection.equals(this.map.getProjectionObject())){j.externalProjection=this.projection;j.internalProjection=this.map.getProjectionObject()}this.writer=new Mapea.Format.WFS(j,this)}},onDescribeFeatureTypeError:function(){Mapea.Util.showErrorMessage("Error WFS: No se ha podido conectar con el servidor.")},generateAttributes:function(){var a=this.schema.featureTypes[0].properties;for(var c=0,b=a.length;c<b;c++){var d=a[c].localType;if(this.isGeometricType(d)){this.options.geometry_column=a[c].name}else{this.attributes.push(a[c])}}},setMap:function(a){OpenLayers.Layer.WFS.prototype.setMap.apply(this,arguments);this.selectWFSFeature=new Mapea.Control.SelectFeature(Mapea.global.wfsLayer);this.map.addControl(this.selectWFSFeature)},featuresLoaded:function(){},isGeometricType:function(a){a=a.toLowerCase();return((a=="pointpropertytype")||(a=="polygonpropertytype")||(a=="linestringpropertytype")||(a=="geometrypropertytype")||(a=="multisurfacepropertytype")||(a=="multilinestringpropertytype")||(a=="surfacepropertytype")||(a=="geometrypropertytype")||(a=="geometryarraypropertytype")||(a=="multigeometrypropertytype")||(a=="multipointpropertytype")||(a=="abstractgeometricaggregatetype")||(a=="pointarraypropertytype")||(a=="curvearraypropertytype")||(a=="solidpropertytype")||(a=="solidarraypropertytype"))},typeOf:function(b){var e=null;for(var d=0,c=this.attributes.length;d<c;d++){var a=this.attributes[d];if(a.name==b){e=a.localType;break}}return e},addAttributes:function(d){for(var c=0,b=this.attributes.length;c<b;c++){var a=this.attributes[c].name;d.attributes[a]=null}},getFullRequestString:function(c,b){var a=this.projection.getCode()||this.map.getProjection();this.params.srsName=(a=="none")?null:a;return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},getBBOXParameter:function(d){var a;var b=Mapea.Util.getMapProjection(this.map);if(this.projection&&this.projection.projCode){b=this.projection.projCode}var e=this.isVersion110();var c=this.isVersion200();if(this.encodeBBOX){a=d.toBBOX();if(e||c){a+=(","+b)}}else{a=d.toArray();if(e||c){a.push(b)}}return a},isVersion100:function(){var a=false;if(this.params&&(this.params.version||this.params.VERSION)){a=((this.params.version=="1.0.0")||(this.params.VERSION=="1.0.0"))}return a},isVersion110:function(){var a=false;if(this.params&&(this.params.version||this.params.VERSION)){a=((this.params.version=="1.1.0")||(this.params.VERSION=="1.1.0"))}return a},isVersion200:function(b){var a=false;if(this.params&&(this.params.version||this.params.VERSION)){a=((this.params.version=="2.0.0")||(this.params.VERSION=="2.0.0"))}return a},CLASS_NAME:"Mapea.Layer.WFS"});Mapea.Layer.Geosearch=OpenLayers.Class(Mapea.Layer.Vector,{geosearchParams:{wt:"json"},geosearchUrl:null,requestHandler:null,core:null,name:"geosearch",textResults:null,spatialResults:null,referenceResults:null,numFound:0,start:0,rows:0,textFeatures:[],spatialFeatures:[],referenceFeatures:[],referenceAreaFeatures:[],responseFeatures:[],geoFieldName:"geom",WKTReader:null,hiddenFields:[],areaFieldName:"reference",centerIconStyle:Mapea.Util.featureIconStyle,newCenterIconStyle:Mapea.Util.newFeatureIconStyle,resultStyle:{fillColor:"#15A135",fillOpacity:0,hoverFillColor:"white",hoverFillOpacity:0.7,strokeColor:"#087021",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},newResultStyle:{fillColor:"#15A135",fillOpacity:0,hoverFillColor:"white",hoverFillOpacity:0.7,strokeColor:"#087021",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},referenceStyle:{fillColor:"#432FC6",fillOpacity:0.07,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#280862",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},areaStyle:{fillColor:"#FFF042",fillOpacity:0.07,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#FF7700",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},ratio:2,initialize:function(b,a){var c=a||{};if(c.name){this.name=c.name}if(!c.ratio){c.ratio=this.ratio}Mapea.Layer.Vector.prototype.initialize.apply(this,[this.name,c]);OpenLayers.Util.extend(this,b);this.WKTReader=new OpenLayers.Format.WKT()},setMap:function(a){this.geosearchUrl=this.geosearchUrl||a.geosearchUrl;if(this.geosearchUrl==null){throw"no se ha definido la URL de Geosearch"}Mapea.Layer.Vector.prototype.setMap.apply(this,arguments);this.events.register("featureselected",this,this._showPopupFeature);this.events.register("featureunselected",this,this._hidePopupFeature);a.uniqueSelectFeatureCtrl.addLayers(this)},search:function(b,c,f,d){var e;if((typeof b)=="string"){e={q:b}}else{e=b}OpenLayers.Util.extend(this.geosearchParams,e);if(!this.geosearchParams.q){throw"No se ha especificado ninguna consulta"}this.geosearchParams.srs=Mapea.Util.getMapProjection(this.map);var a=d?this._onSuccessAppend:this._onSuccess;if(c&&(c!=null)){a=function(h){d?this._onSuccessAppend(h):this._onSuccess(h);c(h)}}var g=this._onError;if(f&&(f!=null)){g=f}Mapea.CDA.geosearch(this.geosearchUrl,this.geosearchParams,this.core,this.requestHandler,a,g,this)},_onSuccess:function(a){var b=this.geosearchParams;this.clear();OpenLayers.Util.extend(this.geosearchParams,b);this._getResultsFromResponse(a);this._drawResults();this.refresh();this.redraw()},_onSuccessAppend:function(a){this._appendResultsFromResponse(a);this._drawAppendedResults(a);this.refresh();this.redraw()},_onError:function(a){Mapea.Util.showErrorMessage("Ha ocurrido un error al ejecutar la búsqueda")},_getResultsFromResponse:function(a){this.textResults=a.response;this.spatialResults=a.spatial_response;this.referenceResults=a.reference_response},_appendResultsFromResponse:function(a){if(a.response){if(this.textResults){this.textResults.docs=this.textResults.docs.concat(a.response.docs)}else{this.textResults=a.response}}if(a.spatial_response){if(this.spatialResults){this.spatialResults.docs=this.spatialResults.docs.concat(a.spatial_response.docs.docs)}else{this.spatialResults=a.spatial_response}}},_drawResults:function(){if(this.spatialResults&&this.spatialResults.docs&&(this.spatialResults.docs.length>0)){this.numFound=this.spatialResults.numFound;this.start=this.spatialResults.start;this.rows=this.spatialResults.docs.length;this.spatialFeatures=this._documentsToFeatures(this.spatialResults.docs,this.resultStyle,this.centerIconStyle);this._referenceDocumentsToFeatures(this.referenceResults.docs);this.addFeatures(this.spatialFeatures)}else{this.numFound=this.textResults.numFound;this.start=this.textResults.start;this.rows=this.textResults.docs.length;this.textFeatures=this._documentsToFeatures(this.textResults.docs,this.resultStyle,this.centerIconStyle);this.addFeatures(this.textFeatures)}},_drawAppendedResults:function(a){if(a.spatial_response){this.numFound=a.spatial_response.numFound;this.start+=a.spatial_response.docs.length;this.rows=a.spatial_response.docs.length;this.responseFeatures=this._documentsToFeatures(a.spatial_response.docs,this.newResultStyle,this.newCenterIconStyle,true);this.spatialFeatures=this.spatialFeatures?this.spatialFeatures.concat(this.responseFeatures):this.responseFeatures}else{if(a.response){this.numFound=a.response.numFound;this.start+=a.response.docs.length;this.rows=a.response.docs.length;this.responseFeatures=this._documentsToFeatures(a.response.docs,this.newResultStyle,this.newCenterIconStyle,true);this.textFeatures=this.textFeatures?this.textFeatures.concat(this.responseFeatures):this.responseFeatures}}if(this.features){for(var d=0,c=this.features.length;d<c;d++){var b=this.features[d];if(b.centerIcon&&b.newFeature){b.style=this.centerIconStyle;b.newFeature=false}}}this.addFeatures(this.responseFeatures)},_documentsToFeatures:function(h,d,k,a){var b=[];for(var c=0,e=h.length;c<e;c++){var j=h[c];var g=j[this.geoFieldName];var n=this.WKTReader.read(g);if(n&&OpenLayers.Util.isArray(n)){n=n[0]}if(n){n.style={display:"none"};n.attributes=j;n.noPopup=true;b.push(n);var m=n.geometry.getCentroid().x;var l=n.geometry.getCentroid().y;var f=Mapea.Util.drawStyledFeature(m,l,j,k);f.geomFeatureId=n.id;f.centerIcon=true;f.newFeature=a;b.push(f)}}return b},_referenceDocumentsToFeatures:function(e){for(var d=0,a=e.length;d<a;d++){var h=e[d];var g=h[this.geoFieldName];var f=h[this.areaFieldName];var b=this.WKTReader.read(g);var c=this.WKTReader.read(f);if(b&&OpenLayers.Util.isArray(b)){b=b[0]}if(c&&OpenLayers.Util.isArray(c)){c=c[0]}if(b){b.style={display:"none"};b.attributes=h;b.reference=true;this.referenceFeatures.push(b)}if(c){c.style={display:"none"};c.noPopup=true;c.area=true;this.referenceAreaFeatures.push(c)}}this.addFeatures(this.referenceFeatures);this.addFeatures(this.referenceAreaFeatures)},hasSpatialResults:function(){return(this.spatialResults&&this.spatialResults.docs&&(this.spatialResults.docs.length>0))},hideReferences:function(){for(var c=0,b=this.referenceFeatures.length;c<b;c++){var a=this.referenceFeatures[c];a.style={display:"none"}}for(var c=0,b=this.referenceAreaFeatures.length;c<b;c++){var a=this.referenceAreaFeatures[c];a.style={display:"none"}}this.redraw()},showReferences:function(){for(var c=0,b=this.referenceFeatures.length;c<b;c++){var a=this.referenceFeatures[c];a.style=this.referenceStyle}for(var c=0,b=this.referenceAreaFeatures.length;c<b;c++){var a=this.referenceAreaFeatures[c];a.style=this.areaStyle}this.redraw()},_showPopupFeature:function(m){var q=m.feature;if(q.noPopup){return}var p=false;var b='<table class="mapea-table"><tbody>';for(var l in q.attributes){var g=true;for(var d=0,a=this.hiddenFields.length;d<a;d++){var o=this.hiddenFields[d];if(l==o){g=false;break}}if(g){b+="<tr><td><b>";b+=this._beautifyName(l);b+="</b></td><td>";b+=q.attributes[l];b+="</td></tr>";p=true}}if(!p){b+="<tr><td><b>Informaci&oacute;n</b></td><td>";b+="Punto de inter&eacute;s con informaci&oacute;n</br>";b+="espacial pero sin informaci&oacute;n alfanum&eacute;rica";b+="</td></tr>"}b+="</tbody></table>";if(q.geomFeatureId){var j=this.getFeatureById(q.geomFeatureId);j.style=this.resultStyle;this.drawFeature(j)}if(q.geometry){var k;var f=q.attributes.keywords;if(f&&(f.length>0)){k='<div class="geosearch-header">'+f[0]+"</div>"}else{k='<div class="geosearch-header">Punto de interés</div>'}var n=q.geometry.getBounds().getCenterLonLat();var e=Mapea.Util.getClickedPixelFromEvent(window.event);var c=Mapea.Util.getPopupInPixel(this.map,e);if(c){var h=c.contentHTML;h+='<div class="popup-info-separator">Geobúsquedas</div>';h+=b;c.setContentHTML(h);c.show()}else{c=new Mapea.Popup.FramedCloud("popup_feature",n,new OpenLayers.Size(400,300),b,null,true,function(r){r.feature=q;Mapea.Util.unselectFeature(r)},k);c.pixelX=e.x;c.pixelY=e.y;if(c.size==null){c.setSize(c.contentSize)}q.popup=c;this.map.addPopup(c)}}},_hidePopupFeature:function(b){var c=b.feature;if(c.geomFeatureId){var a=this.getFeatureById(c.geomFeatureId);a.style={display:"none"};this.drawFeature(a)}if(this.map){Mapea.Util.removeAllPopups(this.map)}},_beautifyName:function(a){return Mapea.Util.beautifyString(a)},getResultsBbox:function(){var c=[];var g=[];var m=[];var f=[];var d=this.hasSpatialResults()?this.spatialFeatures:this.textFeatures;for(var j=0,e=d.length;j<e;j++){var o=d[j];if(o&&o.geometry){var a=o.geometry.getBounds();if(a){c.push(a.left);g.push(a.right);m.push(a.top);f.push(a.bottom)}}}var b=Math.min.apply(null,c);var l=Math.max.apply(null,g);var k=Math.max.apply(null,m);var n=Math.min.apply(null,f);var h=new OpenLayers.Bounds(b,n,l,k);return h},clear:function(){this.textResults=null;this.spatialResults=null;this.referenceResults=null;this.numFound=0;this.start=0;this.rows=0;this.textFeatures.length=0;this.spatialFeatures.length=0;this.referenceFeatures.length=0;this.referenceAreaFeatures.length=0;this.geosearchParams={wt:"json"};this.destroyFeatures()},CLASS_NAME:"Mapea.Layer.Geosearch"});Mapea.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.FramedCloud,{imageSize:new OpenLayers.Size(676,736),isAlphaImage:false,fixedRelativePosition:false,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,7),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-638,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-638,-632)},{size:new OpenLayers.Size(83,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-687)}]},tr:{offset:new OpenLayers.Pixel(-44,7),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-638,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-638,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-216,-687)}]},bl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-638,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-638,-629)},{size:new OpenLayers.Size(87,35),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-99,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-638,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-638,-629)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-312,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(600,660),jsBlockedMessage:"<br/><br/><i>-- javascript blocked --</i><br/><br/>",scriptRegExp:/(<(\s)*script([^>])*>)+([^<])*(<(\s)*\/(\s)*script([^>])*>)+/gi,evalRegExp:/\+?(\s)*eval(\s)*\(.*\)(\s)*\+?/gi,mobilePopupTop:null,popupHeader:null,closeDiv:null,headerHTML:null,currentState:null,initialize:function(c,h,d,e,g,a,k,j){this.imageSrc=Mapea.global.THEME_IMG_PATH+"popup/cloud-popup-relative.png";var f=e;f=f.replace(this.scriptRegExp,this.jsBlockedMessage);f=f.replace(this.evalRegExp,this.jsBlockedMessage);if(!Mapea.Util.isMobile){var b=[c,h,d,f,g,a,k];OpenLayers.Popup.Framed.prototype.initialize.apply(this,b);this.contentDiv.className=this.contentDisplayClass}else{this.id=c;this.lonlat=h;this.headerHTML=j;this.contentHTML=f;this.anchor=g;this.closeBox=a;this.closeBoxCallback=k;this.size=this.maxSize;this.lonlat=h}},updateRelativePosition:function(){if(!Mapea.Util.isMobile){this.padding=this.positionBlocks[this.relativePosition].padding;if(this.closeDiv){var a=this.getContentDivPadding();this.closeDiv.style.right=(a.right-2)+this.padding.right+"px";this.closeDiv.style.top=(a.top-2)+this.padding.top+"px"}this.updateBlocks()}},setSize:function(a){if(!Mapea.Util.isMobile){var b=new OpenLayers.Size(a.w+16,a.h+5);OpenLayers.Popup.FramedCloud.prototype.setSize.apply(this,[b])}},destroy:function(){if(Mapea.Util.isMobile){OpenLayers.Event.stopObservingElement(this.closeDiv);OpenLayers.Event.stopObservingElement(this.popupHeader)}OpenLayers.Popup.FramedCloud.prototype.destroy.apply(this,arguments)},draw:function(b){if(!Mapea.Util.isMobile){return OpenLayers.Popup.FramedCloud.prototype.draw.apply(this,arguments)}else{if(b==null){if((this.lonlat!=null)&&(this.map!=null)){b=this.map.getLayerPxFromLonLat(this.lonlat)}}this.div=document.createElement("div");OpenLayers.Element.addClass(this.div,"popup-mobile");this.closeDiv=document.createElement("div");OpenLayers.Element.addClass(this.closeDiv,"popup-close");this.div.appendChild(this.closeDiv);this.popupHeader=document.createElement("div");OpenLayers.Element.addClass(this.popupHeader,"popup-header");if(this.headerHTML){this.popupHeader.innerHTML=this.headerHTML}this.div.appendChild(this.popupHeader);this.contentDiv=document.createElement("div");OpenLayers.Element.addClass(this.contentDiv,"popup-body");this.div.appendChild(this.contentDiv);this.setContentHTML();var a=this.closeBoxCallback||function(c){this.hide();OpenLayers.Event.stop(c)};OpenLayers.Event.observe(this.closeDiv,"touchend",OpenLayers.Function.bindAsEventListener(a,this));this.manageCollapsableMobilePopup();jQuery(this.map.div).parent().get(0).appendChild(this.div)}},setContentHTML:function(a){if(!Mapea.Util.isMobile){OpenLayers.Popup.FramedCloud.prototype.setContentHTML.apply(this,arguments)}else{if(a!=null){this.contentHTML=a}if((this.contentDiv!=null)&&(this.contentHTML!=null)&&(this.contentHTML!=this.contentDiv.innerHTML)){this.contentDiv.innerHTML=this.contentHTML}}},manageCollapsableMobilePopup:function(q){var e=jQuery(this.map.viewPortDiv).height();var s=e*0.9;var l=0;var g=e*0.8;var o=e*0.5;var a=e*0.35;var n=e*0.55;var r=e*0.15;var p=0;var b=e*0.9;var f=jQuery(this.div);var j=jQuery(this.contentDiv);var h=jQuery(this.popupHeader);var c=jQuery(this.closeDiv);var d=Math.min(e*0.1);h.css("height",d).children().css("line-height",d+"px");c.css("height",d);if(q){OpenLayers.Event.stopObservingElement(this.popupHeader)}var k;var m;OpenLayers.Event.observe(this.popupHeader,"touchstart",OpenLayers.Function.bindAsEventListener(function(u){if(u.touches&&(u.touches.length>0)){Mapea.Util.disableVerticalScroll();k=u.touches[0].clientY;m=f.offset().top;var t={"-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none",transition:"none"};f.css(t);j.css("height","100%")}},this));OpenLayers.Event.observe(this.popupHeader,"touchmove",OpenLayers.Function.bindAsEventListener(function(t){if(t.touches&&(t.touches.length>0)){var w=(t.touches[0].clientY-k);this.mobilePopupTop=m+w;if(this.boundsContainsPopup(e,d)){var u=this.mobilePopupTop+"px";this.div.style.top=u}else{return false}}},this));OpenLayers.Event.observe(this.popupHeader,"touchend",OpenLayers.Function.bindAsEventListener(function(u){var t={"-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"",transition:""};f.css(t);if(!this.mobilePopupTop){if(m<o){this.collapsePopup(f,j,s,l)}else{this.showHalfPopup(f,j,a,n)}}else{var w=(k>this.mobilePopupTop);if(w){if(this.mobilePopupTop<r){this.showFullPopup(f,j,p,b)}else{if(this.mobilePopupTop<g){this.showHalfPopup(f,j,a,n)}else{this.collapsePopup(f,j,s,l)}}}else{if(this.mobilePopupTop>o){this.collapsePopup(f,j,s,l)}else{if(this.mobilePopupTop>r){this.showHalfPopup(f,j,a,n)}else{this.showFullPopup(f,j,p,b)}}}this.mobilePopupTop=null}Mapea.Util.enableVerticalScroll()},this));if(!this.currentState||(this.currentState==Mapea.Popup.FramedCloud.COLLAPSED)){this.collapsePopup(f,j,s,l)}else{if(this.currentState==Mapea.Popup.FramedCloud.HALF){this.showHalfPopup(f,j,a,n)}else{if(this.currentState==Mapea.Popup.FramedCloud.FULL){this.showFullPopup(f,j,p,b)}}}},boundsContainsPopup:function(e,f){var g=false;var b=this.mobilePopupTop;var d=(this.mobilePopupTop+f);var c=(b>=0);var a=(d<=e);g=(c&&a);return g},collapsePopup:function(c,b,d,a){c.css("top",d);b.css("height",a);this.map.panTo(this.lonlat);this.currentState=Mapea.Popup.FramedCloud.COLLAPSED},showFullPopup:function(b,a,d,c){b.css("top",d);a.css("height",c);this.currentState=Mapea.Popup.FramedCloud.FULL},showHalfPopup:function(c,b,f,a){c.css("top",f);b.css("height",a);var e=this.map.getPixelFromLonLat(this.lonlat);e.y+=f;var d=this.map.getLonLatFromPixel(e);if(this.map.panTween&&this.map.panTween.playing){this.map.panTween.stop()}this.map.panTo(d);this.currentState=Mapea.Popup.FramedCloud.HALF},setHeader:function(a){this.headerHTML=a;if(this.headerHTML&&this.popupHeader&&Mapea.Util.isMobile){this.popupHeader.innerHTML=this.headerHTML}},updatePosition:function(){if(Mapea.Util.isMobile){this.manageCollapsableMobilePopup(true)}else{if((this.lonlat)&&(this.map)){var a=this.map.getLayerPxFromLonLat(this.lonlat);if(a){this.moveTo(a)}}}},CLASS_NAME:"Mapea.Popup.FramedCloud"});Mapea.Popup.FramedCloud.COLLAPSED=0;Mapea.Popup.FramedCloud.HALF=1;Mapea.Popup.FramedCloud.FULL=2;Mapea.Util.WMSfull=OpenLayers.Class({map:null,urlWMS:null,capabilities:null,layerOptions:null,initialize:function(b,a){if(b!=null){this.map=b}if(a!=null){this.urlWMS=a}},destroy:function(){},setMap:function(a){this.map=a},setUrl:function(a){this.url=urlWMS},setOptions:function(a){this.layerOptions=a},loadCapabilities:function(){var a=OpenLayers.Request.GET({url:this.urlWMS,success:this.loadCapabilitiesSuccess,failure:function(){Mapea.Util.showErrorMessage("GetCapabilities: No se ha podido conectar con el servidor.")},scope:this,params:{service:"WMS",request:"GetCapabilities"},async:false})},loadCapabilitiesSuccess:function(c){var b=new OpenLayers.Format.XML();var a=new Mapea.Format.WMS({layerOptions:{buffer:0}});var e=null;if(c.responseXML==null){Mapea.Util.showErrorMessage("Ha ocurrido un error al obtener el documento GetCapabilities.");return false}var g="UTF-8";var h=/UTF|utf/i;var f=c.responseText;var d=f.search(h);if(d==-1||navigator.appName.indexOf("Explorer")!=-1){g="ISO-8859-1"}if(!c.responseXML.documentElement){e=b.read(c.responseText)}else{e=c.responseXML}this.capabilities=a.read(e,{})},addServiceToMap:function(){if(this.urlWMS!=null){this.loadCapabilities()}if(this.map!=null&&this.capabilities!=null){this.addLayers(this.capabilities)}},addLayers:function(){var h=new Mapea.Format.WMS({map:this.map});h.setLayerOptions(this.layerOptions);var b=this.capabilities.layers[0];var e=b.layers;for(var d=0;d<e.length;d++){if(e[d].layers){for(var c=0;c<e[d].layers.length;c++){var a=e[d].layers[c];var g=h.createLayer(a);if(g){var f=a.options.queryable;g.addOptions({queryable:f});g.setVisibility(true);this.map.addLayer(g,true)}}}else{var a=e[d];var g=h.createLayer(a);if(g){var f=a.options.queryable;g.addOptions({queryable:f});g.setVisibility(true);this.map.addLayer(g,true)}}}},getBoundingBoxEnvolved:function(c,d){this.urlWMS=c;if(this.urlWMS!=null){this.loadCapabilities()}var a=-1;if(this.capabilities!=null){var b=new Mapea.Util.WMSGetCapabilities(this.capabilities);var e=b.getBoundingBoxEnvolved(d);if(e!=-1){a=e}}return a},CLASS_NAME:"Mapea.Util.WMSfull"});Mapea.Util.WFSGetCapabilities=OpenLayers.Class({capabilities:null,exceptionFormat:"application/vnd.ogc.se_xml",urlWMS:null,wfsVersion:"1.1.0",initialize:function(a){this.wfsVersion=a||Mapea.Version.WFS_GET_CAPABILITIES},returnCapabilities:function(){return this.capabilities},loadCapabilities:function(a){var b=OpenLayers.Request.GET({url:a,success:this.loadCapabilitiesSuccess,failure:function(){Mapea.Util.showErrorMessage("GetCapabilities: No se ha podido conectar con el servidor.")},scope:this,params:{service:"WFS",request:"GetCapabilities",version:this.wfsVersion},async:false})},loadCapabilitiesSuccess:function(b){var a=new OpenLayers.Format.XML();var d=null;if(b.responseXML==null){Mapea.Util.showErrorMessage("Ha ocurrido un error al obtener el documento GetCapabilities.");this.capabilities=null;return false}var g="UTF-8";var h=/UTF|utf/i;var f=b.responseText;var c=f.search(h);if(c==-1||navigator.appName.indexOf("Explorer")!=-1){g="ISO-8859-1"}if(!b.responseXML.documentElement){d=a.read(b.responseText)}else{d=b.responseXML}var e=new Mapea.Format.WFSCapabilities();this.capabilities=e.read(d)},loadURL:function(d,g,b,e,c){var f=(e)?e:OpenLayers.nullHandler;var a=(c)?c:OpenLayers.nullHandler;return OpenLayers.Request.GET({url:d,params:g,success:f,failure:a,scope:b})},CLASS_NAME:"Mapea.Util.WFSGetCapabilities"});Mapea.Util.WMSGetCapabilities=OpenLayers.Class({capabilities:null,definedSRS:[],initialize:function(a){this.capabilities=a},destroy:function(){this.capabilities=null},getBoundingBoxEnvolved:function(b){var a=-1;if(this.capabilities!=null){var c=this.getExtensions(b);if(c.length>0){a=getMaxExtentEnvolved(c)}}return a},getExtensions:function(d){var e=[];var f=this.getDefinedLayers(this.capabilities.layers);for(var c=0,b=f.length;c<b;c++){var a=this.getBBoxLayer(f[c],d);if(a!=null){e.push(a)}}return e},getBBoxLayerName:function(a,e){a=a.toUpperCase();var f=-1;var h=this.getDefinedLayers(this.capabilities.layers);for(var d=0,c=h.length;(d<c)&&(f==-1);d++){var b=h[d];if(this.hasSameName(b.name,a)){var g=this.getBBoxLayer(b,e);if(g&&(g!=null)){f=g}}}return f},getDefinedLayers:function(g,h,f){var e=[];for(var d=0,c=g.length;d<c;d++){var b=g[d];if(!b.bboxArray){b.bboxArray=h}if(!b.srsArray){b.srsArray=f}this.addDefinedSrs(b.srsArray);this.addDefinedSrs(b.arraySRS);if(b.name){e.push(b)}if(b.layers&&(b.layers.length>0)){var a=this.getDefinedLayers(b.layers,b.bboxArray,b.srsArray);e=e.concat(a)}}return e},getBBoxLayer:function(f,d){var m=null;if(d&&(d!=null)){var c=(this.definedSRS.indexOf(d)!=-1);if(c&&(f.srsArray||f.srs)){var l=f.srsArray.indexOf(d);if(l!=-1){m=f.bboxArray[l]}else{var h,j;if(f.bbox&&f.srs){h=new OpenLayers.Projection(f.srs);j=f.bbox}else{if(f.bboxArray&&(f.bboxArray.length>0)){h=new OpenLayers.Projection(f.srsArray[0]);j=f.bboxArray[0]}else{if(f.layers&&(f.layers.length>0)){for(var e=0,g=f.layers.length;(e<g)&&(m==null);e++){var b=f.layers[e];m=this.getBBoxLayer(b,d)}}}}if(j&&h){var a=new OpenLayers.Projection(d);m=j.transform(h,a)}}}else{var k="La capa <b>"+f.name+"</b> no está disponible en el srs <i>"+d+"</i>.";k+=" Los srs en los que está disponible son:";k+='<ul style="padding-left: 40px;">';for(var e=0,g=this.definedSRS.length;e<g;e++){k+="<li>"+this.definedSRS[e]+"</li>"}k+="</ul>";Mapea.Util.showErrorMessage(k)}}return m},isQueryable:function(b){var a=false;var f=this.getDefinedLayers(this.capabilities.layers);for(var e=0,d=f.length;e<d;e++){var c=f[e];if(this.hasSameName(c.name,b)){a=!(!c.options.queryable)}}return a},hasSameName:function(a,b){b=b.toUpperCase();var e=a.toUpperCase();var d=null;var c=e.indexOf(":");if(c!=-1){d=e.substring(c+1,e.length)}return((e==b)||(d==b))},addDefinedSrs:function(d){if(d&&(d.length>0)){for(var c=0,a=d.length;c<a;c++){var b=d[c];if(this.definedSRS.indexOf(b)==-1){this.definedSRS.push(b)}}}},CLASS_NAME:"Mapea.Util.WMSGetCapabilities"});Mapea.Util.ReadMaxExtent=OpenLayers.Class({capabilities:null,exceptionFormat:"application/vnd.ogc.se_xml",urlWMS:null,initialize:function(a){if(a!=null){this.urlWMS=a}},returnCapabilities:function(){return this.capabilities},loadCapabilities:function(a){var b=OpenLayers.Request.GET({url:a,success:this.loadCapabilitiesSuccess,failure:function(){Mapea.Util.showErrorMessage("GetCapabilities: No se ha podido conectar con el servidor.")},scope:this,params:{service:"WMS",request:"GetCapabilities"},async:false})},loadCapabilitiesSuccess:function(c){var b=new OpenLayers.Format.XML();var a=new Mapea.Format.WMS({layerOptions:{buffer:0}});var e=null;if(c.responseXML==null){Mapea.Util.showErrorMessage("Ha ocurrido un error al obtener el documento GetCapabilities.");return false}var g="UTF-8";var h=/UTF|utf/i;var f=c.responseText;var d=f.search(h);if(d==-1||navigator.appName.indexOf("Explorer")!=-1){g="ISO-8859-1"}if(!c.responseXML.documentElement){e=b.read(c.responseText)}else{e=c.responseXML}this.capabilities=a.read(e,{})},loadURL:function(d,g,b,e,c){var f=(e)?e:OpenLayers.nullHandler;var a=(c)?c:OpenLayers.nullHandler;return OpenLayers.Request.GET({url:d,params:g,success:f,failure:a,scope:b})},CLASS_NAME:"Mapea.Util.ReadMaxExtent"});Mapea.Util.WFSrequest=OpenLayers.Class({urlWFS:null,typeName:null,schema:null,initialize:function(a,b){if(a!=null){this.urlWFS=a}if(b!=null){this.typeName=b}},destroy:function(){},setUrl:function(a){this.url=urlWFS},setType:function(a){this.typeName=a},getSchema:function(){return this.schema},requestLayers:function(){var a=OpenLayers.Request.GET({url:this.urlWFS,success:this.requestLayersSuccess,failure:function(){Mapea.Util.showErrorMessage("Error WFS: No se ha podido conectar con el servidor.")},scope:this,params:{version:"1.1.0",service:"WFS",request:"DescribeFeatureType",typeName:this.typeName},async:false})},requestLayersSuccess:function(b){var a=new OpenLayers.Format.XML();var e=new OpenLayers.Format.WFSDescribeFeatureType();var d=null;if(b.responseXML==null){Mapea.Util.showErrorMessage("Ha ocurrido un error al obtener el documento DescribeFeatureType.");return false}var g="UTF-8";var h=/UTF|utf/i;var f=b.responseText;var c=f.search(h);if(c==-1||navigator.appName.indexOf("Explorer")!=-1){g="ISO-8859-1"}if(!b.responseXML.documentElement){d=a.read(b.responseText)}else{d=b.responseXML;this.schema=e.read(d)}return this.schema},CLASS_NAME:"Mapea.Util.WFSrequest"});Mapea.Util.PrinterMap=OpenLayers.Class({map:null,windowPreview:"",windowOptions:"",legendOptions:"",initialize:function(){var a="toolbar=0,scrollbars=1,resizable =1, menubar=1, status=0, location=0, width=1000, height=700";options=a;legendOptions=this.legendDefaultConfig()},printer:function(g,h,d){if(typeof g=="object"&&typeof h=="string"){map=g;windowPreview=h;if(d!=""){windowOptions=d}var c="";var f="";for(i=0;i<map.getNumLayers();i++){if(map.layers[i].visibility){if(map.layers[i].params){if(map.layers[i].params.SERVICE=="WMS"){c+=map.layers[i].params.LAYERS;f+=map.layers[i].name;if(i!=map.getNumLayers()-1){c+=",";f+=","}}}}}var b=map.getExtent().toBBOX().split(",");var e=new Array(b[0],b[3]);var a=new Array(b[2],b[1]);if(c!=""&&f!=""){window.open(h+"?lr="+a+"&ul="+e+"&strLayersNameVisibles="+c+"&strLayersTitleVisibles="+f+"&strLegendOptions="+legendOptions,"zoom",d)}else{Mapea.Util.showErrorMessage("La lista de capas del mapa est� vac�a.")}}else{Mapea.Util.showErrorMessage("Error en impresi�n")}},setLegendConfig:function(a){if(a!=""){legendOptions=a}},legendDefaultConfig:function(){var a="";for(i=0;i<map.getNumLayers();i++){if(map.layers[i].visibility){if(map.layers[i].params){if(map.layers[i].params.SERVICE=="WMS"){if(map.layers[i].params.LAYERLEGEND){a+="true"}else{a+="false"}if(i!=map.getNumLayers()-1){a+=","}}}}}return a},CLASS_NAME:"Mapea.Util.PrinterMap"});var Proj4js={defaultDatum:"WGS84",transform:function(f,h,e){if(!f.readyToUse){return this.reportError("Proj4js initialization for:"+f.srsCode+" not yet complete"),e}if(!h.readyToUse){return this.reportError("Proj4js initialization for:"+h.srsCode+" not yet complete"),e}if(f.datum&&h.datum&&((f.datum.datum_type==Proj4js.common.PJD_3PARAM||f.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=h.datumCode||(h.datum.datum_type==Proj4js.common.PJD_3PARAM||h.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=f.datumCode)){var g=Proj4js.WGS84;this.transform(f,g,e);f=g}"enu"!=f.axis&&this.adjust_axis(f,!1,e);"longlat"==f.projName?(e.x*=Proj4js.common.D2R,e.y*=Proj4js.common.D2R):(f.to_meter&&(e.x*=f.to_meter,e.y*=f.to_meter),f.inverse(e));f.from_greenwich&&(e.x+=f.from_greenwich);e=this.datum_transform(f.datum,h.datum,e);h.from_greenwich&&(e.x-=h.from_greenwich);"longlat"==h.projName?(e.x*=Proj4js.common.R2D,e.y*=Proj4js.common.R2D):(h.forward(e),h.to_meter&&(e.x/=h.to_meter,e.y/=h.to_meter));"enu"!=h.axis&&this.adjust_axis(h,!0,e);return e},datum_transform:function(e,f,d){if(e.compare_datums(f)||e.datum_type==Proj4js.common.PJD_NODATUM||f.datum_type==Proj4js.common.PJD_NODATUM){return d}if(e.es!=f.es||e.a!=f.a||e.datum_type==Proj4js.common.PJD_3PARAM||e.datum_type==Proj4js.common.PJD_7PARAM||f.datum_type==Proj4js.common.PJD_3PARAM||f.datum_type==Proj4js.common.PJD_7PARAM){e.geodetic_to_geocentric(d),(e.datum_type==Proj4js.common.PJD_3PARAM||e.datum_type==Proj4js.common.PJD_7PARAM)&&e.geocentric_to_wgs84(d),(f.datum_type==Proj4js.common.PJD_3PARAM||f.datum_type==Proj4js.common.PJD_7PARAM)&&f.geocentric_from_wgs84(d),f.geocentric_to_geodetic(d)}return d},adjust_axis:function(r,p,q){for(var o=q.x,n=q.y,m=q.z||0,l,j,k=0;3>k;k++){if(!p||!(2==k&&void 0===q.z)){switch(0==k?(l=o,j="x"):1==k?(l=n,j="y"):(l=m,j="z"),r.axis[k]){case"e":q[j]=l;break;case"w":q[j]=-l;break;case"n":q[j]=l;break;case"s":q[j]=-l;break;case"u":void 0!==q[j]&&(q.z=l);break;case"d":void 0!==q[j]&&(q.z=-l);break;default:return alert("ERROR: unknow axis ("+r.axis[k]+") - check definition of "+r.projName),null}}}return q},reportError:function(){},extend:function(f,h){f=f||{};if(h){for(var e in h){var g=h[e];void 0!==g&&(f[e]=g)}}return f},Class:function(){for(var f=function(){this.initialize.apply(this,arguments)},h={},e,g=0;g<arguments.length;++g){e="function"==typeof arguments[g]?arguments[g].prototype:arguments[g],Proj4js.extend(h,e)}f.prototype=h;return f},bind:function(e,f){var d=Array.prototype.slice.apply(arguments,[2]);return function(){var a=d.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(f,a)}},scriptName:"proj4js-compressed.js",defsLookupService:"http://spatialreference.org/ref",libPath:null,getScriptLocation:function(){if(this.libPath){return this.libPath}for(var h=this.scriptName,m=h.length,g=document.getElementsByTagName("script"),l=0;l<g.length;l++){var k=g[l].getAttribute("src");if(k){var j=k.lastIndexOf(h);if(-1<j&&j+m==k.length){this.libPath=k.slice(0,-m);break}}}return this.libPath||""},loadScript:function(g,k,f,j){var h=document.createElement("script");h.defer=!1;h.type="text/javascript";h.id=g;h.src=g;h.onload=k;h.onerror=f;h.loadCheck=j;/MSIE/.test(navigator.userAgent)&&(h.onreadystatechange=this.checkReadyState);document.getElementsByTagName("head")[0].appendChild(h)},checkReadyState:function(){if("loaded"==this.readyState){if(this.loadCheck()){this.onload()}else{this.onerror()}}}};Proj4js.Proj=Proj4js.Class({readyToUse:!1,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(e,f){this.srsCodeInput=e;this.queue=[];f&&this.queue.push(f);if(0<=e.indexOf("GEOGCS")||0<=e.indexOf("GEOCCS")||0<=e.indexOf("PROJCS")||0<=e.indexOf("LOCAL_CS")){this.parseWKT(e),this.deriveConstants(),this.loadProjCode(this.projName)}else{if(0==e.indexOf("urn:")){var d=e.split(":");if(("ogc"==d[1]||"x-ogc"==d[1])&&"def"==d[2]&&"crs"==d[3]){e=d[4]+":"+d[d.length-1]}}else{0==e.indexOf("http://")&&(d=e.split("#"),d[0].match(/epsg.org/)?e="EPSG:"+d[1]:d[0].match(/RIG.xml/)&&(e="IGNF:"+d[1]))}this.srsCode=e.toUpperCase();0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode);this.loadProjDefinition()}},loadProjDefinition:function(){if(Proj4js.defs[this.srsCode]){this.defsLoaded()}else{var b=Proj4js.getScriptLocation()+"defs/"+this.srsAuth.toUpperCase()+this.srsProjNumber+".js";Proj4js.loadScript(b,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.loadFromService,this),Proj4js.bind(this.checkDefsLoaded,this))}},loadFromService:function(){Proj4js.loadScript(Proj4js.defsLookupService+"/"+this.srsAuth+"/"+this.srsProjNumber+"/proj4js/",Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.defsFailed,this),Proj4js.bind(this.checkDefsLoaded,this))},defsLoaded:function(){this.parseDefs();this.loadProjCode(this.projName)},checkDefsLoaded:function(){return Proj4js.defs[this.srsCode]?!0:!1},defsFailed:function(){Proj4js.reportError("failed to load projection definition for: "+this.srsCode);Proj4js.defs[this.srsCode]=Proj4js.defs.WGS84;this.defsLoaded()},loadProjCode:function(b){if(Proj4js.Proj[b]){this.initTransforms()}else{var d=Proj4js.getScriptLocation()+"projCode/"+b+".js";Proj4js.loadScript(d,Proj4js.bind(this.loadProjCodeSuccess,this,b),Proj4js.bind(this.loadProjCodeFailure,this,b),Proj4js.bind(this.checkCodeLoaded,this,b))}},loadProjCodeSuccess:function(b){Proj4js.Proj[b].dependsOn?this.loadProjCode(Proj4js.Proj[b].dependsOn):this.initTransforms()},loadProjCodeFailure:function(b){Proj4js.reportError("failed to find projection file for: "+b)},checkCodeLoaded:function(b){return Proj4js.Proj[b]?!0:!1},initTransforms:function(){Proj4js.extend(this,Proj4js.Proj[this.projName]);this.init();this.readyToUse=!0;if(this.queue){for(var b;b=this.queue.shift();){b.call(this,this)}}},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(r){if(r=r.match(this.wktRE)){var p=r[1],q=r[2].split(","),o;o="TOWGS84"==p.toUpperCase()?p:q.shift();o=o.replace(/^\"/,"");o=o.replace(/\"$/,"");for(var r=[],n=0,m="",l=0;l<q.length;++l){for(var j=q[l],k=0;k<j.length;++k){"["==j.charAt(k)&&++n,"]"==j.charAt(k)&&--n}m+=j;0===n?(r.push(m),m=""):m+=","}switch(p){case"LOCAL_CS":this.projName="identity";this.localCS=!0;this.srsCode=o;break;case"GEOGCS":this.projName="longlat";this.geocsCode=o;this.srsCode||(this.srsCode=o);break;case"PROJCS":this.srsCode=o;break;case"PROJECTION":this.projName=Proj4js.wktProjections[o];break;case"DATUM":this.datumName=o;break;case"LOCAL_DATUM":this.datumCode="none";break;case"SPHEROID":this.ellps=o;this.a=parseFloat(r.shift());this.rf=parseFloat(r.shift());break;case"PRIMEM":this.from_greenwich=parseFloat(r.shift());break;case"UNIT":this.units=o;this.unitsPerMeter=parseFloat(r.shift());break;case"PARAMETER":p=o.toLowerCase();q=parseFloat(r.shift());switch(p){case"false_easting":this.x0=q;break;case"false_northing":this.y0=q;break;case"scale_factor":this.k0=q;break;case"central_meridian":this.long0=q*Proj4js.common.D2R;break;case"latitude_of_origin":this.lat0=q*Proj4js.common.D2R}break;case"TOWGS84":this.datum_params=r;break;case"AXIS":p=o.toLowerCase();q=r.shift();switch(q){case"EAST":q="e";break;case"WEST":q="w";break;case"NORTH":q="n";break;case"SOUTH":q="s";break;case"UP":q="u";break;case"DOWN":q="d";break;default:q=" "}this.axis||(this.axis="enu");switch(p){case"x":this.axis=q+this.axis.substr(1,2);break;case"y":this.axis=this.axis.substr(0,1)+q+this.axis.substr(2,1);break;case"z":this.axis=this.axis.substr(0,2)+q}}for(l=0;l<r.length;++l){this.parseWKT(r[l])}}},parseDefs:function(){this.defData=Proj4js.defs[this.srsCode];var f,h;if(this.defData){for(var e=this.defData.split("+"),g=0;g<e.length;g++){switch(h=e[g].split("="),f=h[0].toLowerCase(),h=h[1],f.replace(/\s/gi,"")){case"title":this.title=h;break;case"proj":this.projName=h.replace(/\s/gi,"");break;case"units":this.units=h.replace(/\s/gi,"");break;case"datum":this.datumCode=h.replace(/\s/gi,"");break;case"nadgrids":this.nagrids=h.replace(/\s/gi,"");break;case"ellps":this.ellps=h.replace(/\s/gi,"");break;case"a":this.a=parseFloat(h);break;case"b":this.b=parseFloat(h);break;case"rf":this.rf=parseFloat(h);break;case"lat_0":this.lat0=h*Proj4js.common.D2R;break;case"lat_1":this.lat1=h*Proj4js.common.D2R;break;case"lat_2":this.lat2=h*Proj4js.common.D2R;break;case"lat_ts":this.lat_ts=h*Proj4js.common.D2R;break;case"lon_0":this.long0=h*Proj4js.common.D2R;break;case"alpha":this.alpha=parseFloat(h)*Proj4js.common.D2R;break;case"lonc":this.longc=h*Proj4js.common.D2R;break;case"x_0":this.x0=parseFloat(h);break;case"y_0":this.y0=parseFloat(h);break;case"k_0":this.k0=parseFloat(h);break;case"k":this.k0=parseFloat(h);break;case"r_a":this.R_A=!0;break;case"zone":this.zone=parseInt(h,10);break;case"south":this.utmSouth=!0;break;case"towgs84":this.datum_params=h.split(",");break;case"to_meter":this.to_meter=parseFloat(h);break;case"from_greenwich":this.from_greenwich=h*Proj4js.common.D2R;break;case"pm":h=h.replace(/\s/gi,"");this.from_greenwich=Proj4js.PrimeMeridian[h]?Proj4js.PrimeMeridian[h]:parseFloat(h);this.from_greenwich*=Proj4js.common.D2R;break;case"axis":h=h.replace(/\s/gi,""),3==h.length&&-1!="ewnsud".indexOf(h.substr(0,1))&&-1!="ewnsud".indexOf(h.substr(1,1))&&-1!="ewnsud".indexOf(h.substr(2,1))&&(this.axis=h)}}this.deriveConstants()}},deriveConstants:function(){"@null"==this.nagrids&&(this.datumCode="none");if(this.datumCode&&"none"!=this.datumCode){var b=Proj4js.Datum[this.datumCode];b&&(this.datum_params=b.towgs84?b.towgs84.split(","):null,this.ellps=b.ellipse,this.datumName=b.datumName?b.datumName:this.datumCode)}this.a||Proj4js.extend(this,Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84);this.rf&&!this.b&&(this.b=(1-1/this.rf)*this.a);if(0===this.rf||Math.abs(this.a-this.b)<Proj4js.common.EPSLN){this.sphere=!0,this.b=this.a}this.a2=this.a*this.a;this.b2=this.b*this.b;this.es=(this.a2-this.b2)/this.a2;this.e=Math.sqrt(this.es);this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0);this.ep2=(this.a2-this.b2)/this.b2;this.k0||(this.k0=1);this.axis||(this.axis="enu");this.datum=new Proj4js.datum(this)}});Proj4js.Proj.longlat={init:function(){},forward:function(b){return b},inverse:function(b){return b}};Proj4js.Proj.identity=Proj4js.Proj.longlat;Proj4js.defs={WGS84:"+title=long/lat:WGS84 +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=long/lat:WGS84 +proj=longlat +a=6378137.0 +b=6356752.31424518 +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=long/lat:NAD83 +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3875":"+title= Google Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"};Proj4js.defs["EPSG:3785"]=Proj4js.defs["EPSG:3875"];Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3875"];Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3875"];Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3875"];Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:0.7853981633974483,R2D:57.29577951308232,D2R:0.017453292519943295,SEC_TO_RAD:0.00000484813681109536,EPSLN:1e-10,MAX_ITER:20,COS_67P5:0.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SIXTH:0.16666666666666666,RA4:0.04722222222222222,RA6:0.022156084656084655,RV4:0.06944444444444445,RV6:0.04243827160493827,msfnz:function(e,f,d){e*=f;return d/Math.sqrt(1-e*e)},tsfnz:function(e,f,d){d*=e;d=Math.pow((1-d)/(1+d),0.5*e);return Math.tan(0.5*(this.HALF_PI-f))/d},phi2z:function(h,m){for(var g=0.5*h,l,k=this.HALF_PI-2*Math.atan(m),j=0;15>=j;j++){if(l=h*Math.sin(k),l=this.HALF_PI-2*Math.atan(m*Math.pow((1-l)/(1+l),g))-k,k+=l,1e-10>=Math.abs(l)){return k}}alert("phi2z has NoConvergence");return -9999},qsfnz:function(e,f){var d;return 1e-7<e?(d=e*f,(1-e*e)*(f/(1-d*d)-0.5/e*Math.log((1-d)/(1+d)))):2*f},asinz:function(b){1<Math.abs(b)&&(b=1<b?1:-1);return Math.asin(b)},e0fn:function(b){return 1-0.25*b*(1+b/16*(3+1.25*b))},e1fn:function(b){return 0.375*b*(1+0.25*b*(1+0.46875*b))},e2fn:function(b){return 0.05859375*b*b*(1+0.75*b)},e3fn:function(b){return b*b*b*(35/3072)},mlfn:function(g,k,f,j,h){return g*h-k*Math.sin(2*h)+f*Math.sin(4*h)-j*Math.sin(6*h)},srat:function(b,d){return Math.pow((1-b)/(1+b),d)},sign:function(b){return 0>b?-1:1},adjust_lon:function(b){return b=Math.abs(b)<this.PI?b:b-this.sign(b)*this.TWO_PI},adjust_lat:function(b){return b=Math.abs(b)<this.HALF_PI?b:b-this.sign(b)*this.PI},latiso:function(e,f,d){if(Math.abs(f)>this.HALF_PI){return +Number.NaN}if(f==this.HALF_PI){return Number.POSITIVE_INFINITY}if(f==-1*this.HALF_PI){return -1*Number.POSITIVE_INFINITY}d*=e;return Math.log(Math.tan((this.HALF_PI+f)/2))+e*Math.log((1-d)/(1+d))/2},fL:function(b,d){return 2*Math.atan(b*Math.exp(d))-this.HALF_PI},invlatiso:function(g,k){var f=this.fL(1,k),j=0,h=0;do{j=f,h=g*Math.sin(j),f=this.fL(Math.exp(g*Math.log((1+h)/(1-h))/2),k)}while(1e-12<Math.abs(f-j));return f},sinh:function(b){b=Math.exp(b);return(b-1/b)/2},cosh:function(b){b=Math.exp(b);return(b+1/b)/2},tanh:function(b){b=Math.exp(b);return(b-1/b)/(b+1/b)},asinh:function(b){return(0<=b?1:-1)*Math.log(Math.abs(b)+Math.sqrt(b*b+1))},acosh:function(b){return 2*Math.log(Math.sqrt((b+1)/2)+Math.sqrt((b-1)/2))},atanh:function(b){return Math.log((b-1)/(b+1))/2},gN:function(e,f,d){f*=d;return e/Math.sqrt(1-f*f)},pj_enfn:function(e){var f=[];f[0]=this.C00-e*(this.C02+e*(this.C04+e*(this.C06+e*this.C08)));f[1]=e*(this.C22-e*(this.C04+e*(this.C06+e*this.C08)));var d=e*e;f[2]=d*(this.C44-e*(this.C46+e*this.C48));d*=e;f[3]=d*(this.C66-e*this.C68);f[4]=d*e*this.C88;return f},pj_mlfn:function(f,h,e,g){e*=h;h*=h;return g[0]*f-e*(g[1]+h*(g[2]+h*(g[3]+h*g[4])))},pj_inv_mlfn:function(j,p,h){for(var o=1/(1-p),n=j,m=Proj4js.common.MAX_ITER;m;--m){var l=Math.sin(n),k=1-p*l*l,k=(this.pj_mlfn(n,l,Math.cos(n),h)-j)*k*Math.sqrt(k)*o,n=n-k;if(Math.abs(k)<Proj4js.common.EPSLN){return n}}Proj4js.reportError("cass:pj_inv_mlfn: Convergence error");return n},C00:1,C02:0.25,C04:0.046875,C06:0.01953125,C08:0.01068115234375,C22:0.75,C44:0.46875,C46:0.013020833333333334,C48:0.007120768229166667,C66:0.3645833333333333,C68:0.005696614583333333,C88:0.3076171875};Proj4js.datum=Proj4js.Class({initialize:function(b){this.datum_type=Proj4js.common.PJD_WGS84;b.datumCode&&"none"==b.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM);if(b&&b.datum_params){for(var d=0;d<b.datum_params.length;d++){b.datum_params[d]=parseFloat(b.datum_params[d])}if(0!=b.datum_params[0]||0!=b.datum_params[1]||0!=b.datum_params[2]){this.datum_type=Proj4js.common.PJD_3PARAM}if(3<b.datum_params.length&&(0!=b.datum_params[3]||0!=b.datum_params[4]||0!=b.datum_params[5]||0!=b.datum_params[6])){this.datum_type=Proj4js.common.PJD_7PARAM,b.datum_params[3]*=Proj4js.common.SEC_TO_RAD,b.datum_params[4]*=Proj4js.common.SEC_TO_RAD,b.datum_params[5]*=Proj4js.common.SEC_TO_RAD,b.datum_params[6]=b.datum_params[6]/1000000+1}}b&&(this.a=b.a,this.b=b.b,this.es=b.es,this.ep2=b.ep2,this.datum_params=b.datum_params)},compare_datums:function(b){return this.datum_type!=b.datum_type||this.a!=b.a||5e-11<Math.abs(this.es-b.es)?!1:this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==b.datum_params[0]&&this.datum_params[1]==b.datum_params[1]&&this.datum_params[2]==b.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==b.datum_params[0]&&this.datum_params[1]==b.datum_params[1]&&this.datum_params[2]==b.datum_params[2]&&this.datum_params[3]==b.datum_params[3]&&this.datum_params[4]==b.datum_params[4]&&this.datum_params[5]==b.datum_params[5]&&this.datum_params[6]==b.datum_params[6]:this.datum_type==Proj4js.common.PJD_GRIDSHIFT||b.datum_type==Proj4js.common.PJD_GRIDSHIFT?(alert("ERROR: Grid shift transformations are not implemented."),!1):!0},geodetic_to_geocentric:function(j){var o=j.x,h=j.y,n=j.z?j.z:0,m,l,k;if(h<-Proj4js.common.HALF_PI&&h>-1.001*Proj4js.common.HALF_PI){h=-Proj4js.common.HALF_PI}else{if(h>Proj4js.common.HALF_PI&&h<1.001*Proj4js.common.HALF_PI){h=Proj4js.common.HALF_PI}else{if(h<-Proj4js.common.HALF_PI||h>Proj4js.common.HALF_PI){return Proj4js.reportError("geocent:lat out of range:"+h),null}}}o>Proj4js.common.PI&&(o-=2*Proj4js.common.PI);l=Math.sin(h);k=Math.cos(h);m=this.a/Math.sqrt(1-this.es*l*l);h=(m+n)*k*Math.cos(o);o=(m+n)*k*Math.sin(o);n=(m*(1-this.es)+n)*l;j.x=h;j.y=o;j.z=n;return 0},geocentric_to_geodetic:function(A){var y,z,x,w,u,t,r,s,q,p,o=A.x;x=A.y;var n=A.z?A.z:0;y=Math.sqrt(o*o+x*x);z=Math.sqrt(o*o+x*x+n*n);if(1e-12>y/this.a){if(o=0,1e-12>z/this.a){return}}else{o=Math.atan2(x,o)}x=n/z;w=y/z;u=1/Math.sqrt(1-this.es*(2-this.es)*w*w);r=w*(1-this.es)*u;s=x*u;p=0;do{p++,t=this.a/Math.sqrt(1-this.es*s*s),z=y*r+n*s-t*(1-this.es*s*s),t=this.es*t/(t+z),u=1/Math.sqrt(1-t*(2-t)*w*w),t=w*(1-t)*u,u*=x,q=u*r-t*s,r=t,s=u}while(1e-24<q*q&&30>p);y=Math.atan(u/Math.abs(t));A.x=o;A.y=y;A.z=z;return A},geocentric_to_geodetic_noniter:function(r){var p=r.x,q=r.y,o=r.z?r.z:0,n,m,l,j,k,p=parseFloat(p),q=parseFloat(q),o=parseFloat(o);k=!1;if(0!=p){n=Math.atan2(q,p)}else{if(0<q){n=Proj4js.common.HALF_PI}else{if(0>q){n=-Proj4js.common.HALF_PI}else{if(k=!0,n=0,0<o){m=Proj4js.common.HALF_PI}else{if(0>o){m=-Proj4js.common.HALF_PI}else{return}}}}}l=p*p+q*q;p=Math.sqrt(l);q=o*Proj4js.common.AD_C;l=Math.sqrt(q*q+l);q/=l;l=p/l;q=o+this.b*this.ep2*q*q*q;j=p-this.a*this.es*l*l*l;l=Math.sqrt(q*q+j*j);q/=l;l=j/l;j=this.a/Math.sqrt(1-this.es*q*q);o=l>=Proj4js.common.COS_67P5?p/l-j:l<=-Proj4js.common.COS_67P5?p/-l-j:o/q+j*(this.es-1);!1==k&&(m=Math.atan(q/l));r.x=n;r.y=m;r.z=o;return r},geocentric_to_wgs84:function(h){if(this.datum_type==Proj4js.common.PJD_3PARAM){h.x+=this.datum_params[0],h.y+=this.datum_params[1],h.z+=this.datum_params[2]}else{if(this.datum_type==Proj4js.common.PJD_7PARAM){var m=this.datum_params[3],g=this.datum_params[4],l=this.datum_params[5],k=this.datum_params[6],j=k*(l*h.x+h.y-m*h.z)+this.datum_params[1],m=k*(-g*h.x+m*h.y+h.z)+this.datum_params[2];h.x=k*(h.x-l*h.y+g*h.z)+this.datum_params[0];h.y=j;h.z=m}}},geocentric_from_wgs84:function(j){if(this.datum_type==Proj4js.common.PJD_3PARAM){j.x-=this.datum_params[0],j.y-=this.datum_params[1],j.z-=this.datum_params[2]}else{if(this.datum_type==Proj4js.common.PJD_7PARAM){var o=this.datum_params[3],h=this.datum_params[4],n=this.datum_params[5],m=this.datum_params[6],l=(j.x-this.datum_params[0])/m,k=(j.y-this.datum_params[1])/m,m=(j.z-this.datum_params[2])/m;j.x=l+n*k-h*m;j.y=-n*l+k+o*m;j.z=h*l-o*k+m}}}});Proj4js.Point=Proj4js.Class({initialize:function(e,f,d){"object"==typeof e?(this.x=e[0],this.y=e[1],this.z=e[2]||0):"string"==typeof e&&"undefined"==typeof f?(e=e.split(","),this.x=parseFloat(e[0]),this.y=parseFloat(e[1]),this.z=parseFloat(e[2])||0):(this.x=e,this.y=f,this.z=d||0)},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}});Proj4js.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};Proj4js.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};Proj4js.Datum={WGS84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},GGRS87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},NAD83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},NAD27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},OSGB36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}};Proj4js.WGS84=new Proj4js.Proj("WGS84");Proj4js.Datum.OSB36=Proj4js.Datum.OSGB36;Proj4js.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Mercator_1SP:"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm"};Proj4js.Proj.aea={init:function(){Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN?Proj4js.reportError("aeaInitEqualLatitudes"):(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.con=this.t1=this.sin_po,this.ms1=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(f){var h=f.x,e=f.y;this.sin_phi=Math.sin(e);this.cos_phi=Math.cos(e);var e=Proj4js.common.qsfnz(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*e)/this.ns0,g=this.ns0*Proj4js.common.adjust_lon(h-this.long0),h=e*Math.sin(g)+this.x0,e=this.rh-e*Math.cos(g)+this.y0;f.x=h;f.y=e;return f},inverse:function(f){var h,e,g;f.x-=this.x0;f.y=this.rh-f.y+this.y0;0<=this.ns0?(h=Math.sqrt(f.x*f.x+f.y*f.y),e=1):(h=-Math.sqrt(f.x*f.x+f.y*f.y),e=-1);g=0;0!=h&&(g=Math.atan2(e*f.x,e*f.y));e=h*this.ns0/this.a;h=(this.c-e*e)/this.ns0;1e-10<=this.e3?(e=1-0.5*(1-this.es)*Math.log((1-this.e3)/(1+this.e3))/this.e3,e=1e-10<Math.abs(Math.abs(e)-Math.abs(h))?this.phi1z(this.e3,h):0<=h?0.5*Proj4js.common.PI:-0.5*Proj4js.common.PI):e=this.phi1z(this.e3,h);g=Proj4js.common.adjust_lon(g/this.ns0+this.long0);f.x=g;f.y=e;return f},phi1z:function(r,p){var q,o,n,m,l=Proj4js.common.asinz(0.5*p);if(r<Proj4js.common.EPSLN){return l}for(var j=r*r,k=1;25>=k;k++){if(q=Math.sin(l),o=Math.cos(l),n=r*q,m=1-n*n,q=0.5*m*m/o*(p/(1-j)-q/m+0.5/r*Math.log((1-n)/(1+n))),l+=q,1e-7>=Math.abs(q)){return l}}Proj4js.reportError("aea:phi1z:Convergence error");return null}};Proj4js.Proj.sterea={dependsOn:"gauss",init:function(){Proj4js.Proj.gauss.init.apply(this);this.rc?(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative")):Proj4js.reportError("sterea:init:E_ERROR_0")},forward:function(g){var k,f,j,h;g.x=Proj4js.common.adjust_lon(g.x-this.long0);Proj4js.Proj.gauss.forward.apply(this,[g]);k=Math.sin(g.y);f=Math.cos(g.y);j=Math.cos(g.x);h=this.k0*this.R2/(1+this.sinc0*k+this.cosc0*f*j);g.x=h*f*Math.sin(g.x);g.y=h*(this.cosc0*k-this.sinc0*f*j);g.x=this.a*g.x+this.x0;g.y=this.a*g.y+this.y0;return g},inverse:function(g){var k,f,j,h;g.x=(g.x-this.x0)/this.a;g.y=(g.y-this.y0)/this.a;g.x/=this.k0;g.y/=this.k0;(h=Math.sqrt(g.x*g.x+g.y*g.y))?(j=2*Math.atan2(h,this.R2),k=Math.sin(j),f=Math.cos(j),j=Math.asin(f*this.sinc0+g.y*k*this.cosc0/h),k=Math.atan2(g.x*k,h*this.cosc0*f-g.y*this.sinc0*k)):(j=this.phic0,k=0);g.x=k;g.y=j;Proj4js.Proj.gauss.inverse.apply(this,[g]);g.x=Proj4js.common.adjust_lon(g.x+this.long0);return g}};function phi4z(E,C,D,B,A,z,y,w,x){var u,t,s,r,q,p,x=z;for(p=1;15>=p;p++){if(u=Math.sin(x),s=Math.tan(x),w=s*Math.sqrt(1-E*u*u),t=Math.sin(2*x),r=C*x-D*t+B*Math.sin(4*x)-A*Math.sin(6*x),q=C-2*D*Math.cos(2*x)+4*B*Math.cos(4*x)-6*A*Math.cos(6*x),u=2*r+w*(r*r+y)-2*z*(w*r+1),s=E*t*(r*r+y-2*z*r)/(2*w),w=2*(z-r)*(w*q-2/t)-2*q,u/=s+w,x+=u,1e-10>=Math.abs(u)){return x}}Proj4js.reportError("phi4z: No convergence");return null}function e4fn(b){var d;d=1+b;b=1-b;return Math.sqrt(Math.pow(d,d)*Math.pow(b,b))}Proj4js.Proj.poly={init:function(){0==this.lat0&&(this.lat0=90);this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(h){var m,g,l,k,j;l=h.y;g=Proj4js.common.adjust_lon(h.x-this.long0);1e-7>=Math.abs(l)?(j=this.x0+this.a*g,m=this.y0-this.a*this.ml0):(m=Math.sin(l),g=Math.cos(l),l=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,l),k=Proj4js.common.msfnz(this.e,m,g),g=m,j=this.x0+this.a*k*Math.sin(g)/m,m=this.y0+this.a*(l-this.ml0+k*(1-Math.cos(g))/m));h.x=j;h.y=m;return h},inverse:function(e){var f,d;e.x-=this.x0;e.y-=this.y0;f=this.ml0+e.y/this.a;if(1e-7>=Math.abs(f)){f=e.x/this.a+this.long0,d=0}else{f=f*f+e.x/this.a*(e.x/this.a);f=phi4z(this.es,this.e0,this.e1,this.e2,this.e3,this.al,f,void 0,d);if(1!=f){return f}f=Proj4js.common.adjust_lon(Proj4js.common.asinz(NaN*e.x/this.a)/Math.sin(d)+this.long0)}e.x=f;e.y=d;return e}};Proj4js.Proj.equi={init:function(){this.x0||(this.x0=0);this.y0||(this.y0=0);this.lat0||(this.lat0=0);this.long0||(this.long0=0)},forward:function(e){var f=e.y,d=this.x0+this.a*Proj4js.common.adjust_lon(e.x-this.long0)*Math.cos(this.lat0),f=this.y0+this.a*f;this.t1=d;this.t2=Math.cos(this.lat0);e.x=d;e.y=f;return e},inverse:function(e){e.x-=this.x0;e.y-=this.y0;var f=e.y/this.a;Math.abs(f)>Proj4js.common.HALF_PI&&Proj4js.reportError("equi:Inv:DataError");var d=Proj4js.common.adjust_lon(this.long0+e.x/(this.a*Math.cos(this.lat0)));e.x=d;e.y=f}};Proj4js.Proj.merc={init:function(){this.lat_ts&&(this.k0=this.sphere?Math.cos(this.lat_ts):Proj4js.common.msfnz(this.es,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(f){var h=f.x,e=f.y;if(90<e*Proj4js.common.R2D&&-90>e*Proj4js.common.R2D&&180<h*Proj4js.common.R2D&&-180>h*Proj4js.common.R2D){return Proj4js.reportError("merc:forward: llInputOutOfRange: "+h+" : "+e),null}if(Math.abs(Math.abs(e)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN){return Proj4js.reportError("merc:forward: ll2mAtPoles"),null}if(this.sphere){h=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(h-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Proj4js.common.FORTPI+0.5*e))}else{var g=Math.sin(e),e=Proj4js.common.tsfnz(this.e,e,g),h=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(h-this.long0),e=this.y0-this.a*this.k0*Math.log(e)}f.x=h;f.y=e;return f},inverse:function(e){var f=e.x-this.x0,d=e.y-this.y0;if(this.sphere){d=Proj4js.common.HALF_PI-2*Math.atan(Math.exp(-d/this.a*this.k0))}else{if(d=Math.exp(-d/(this.a*this.k0)),d=Proj4js.common.phi2z(this.e,d),-9999==d){return Proj4js.reportError("merc:inverse: lat = -9999"),null}}f=Proj4js.common.adjust_lon(this.long0+f/(this.a*this.k0));e.x=f;e.y=d;return e}};Proj4js.Proj.utm={dependsOn:"tmerc",init:function(){this.zone?(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*Proj4js.common.D2R,this.x0=500000,this.y0=this.utmSouth?10000000:0,this.k0=0.9996,Proj4js.Proj.tmerc.init.apply(this),this.forward=Proj4js.Proj.tmerc.forward,this.inverse=Proj4js.Proj.tmerc.inverse):Proj4js.reportError("utm:init: zone must be specified for UTM")}};Proj4js.Proj.eqdc={init:function(){this.mode||(this.mode=0);this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi);this.ml1=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1);0!=this.mode?(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN&&Proj4js.reportError("eqdc:Init:EqualLatitudes"),this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=Math.abs(this.lat1-this.lat2)>=Proj4js.common.EPSLN?(this.ms1-this.ms2)/(this.ml2-this.ml1):this.sinphi):this.ns=this.sinphi;this.g=this.ml1+this.ms1/this.ns;this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)},forward:function(f){var h=f.x,e=this.a*(this.g-Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,f.y)),g=this.ns*Proj4js.common.adjust_lon(h-this.long0),h=this.x0+e*Math.sin(g),e=this.y0+this.rh-e*Math.cos(g);f.x=h;f.y=e;return f},inverse:function(f){f.x-=this.x0;f.y=this.rh-f.y+this.y0;var h,e;0<=this.ns?(e=Math.sqrt(f.x*f.x+f.y*f.y),h=1):(e=-Math.sqrt(f.x*f.x+f.y*f.y),h=-1);var g=0;0!=e&&(g=Math.atan2(h*f.x,h*f.y));h=this.phi3z(this.g-e/this.a,this.e0,this.e1,this.e2,this.e3);g=Proj4js.common.adjust_lon(this.long0+g/this.ns);f.x=g;f.y=h;return f},phi3z:function(j,p,h,o,n){var m,l;m=j;for(var k=0;15>k;k++){if(l=(j+h*Math.sin(2*m)-o*Math.sin(4*m)+n*Math.sin(6*m))/p-m,m+=l,1e-10>=Math.abs(l)){return m}}Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations");return null}};Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(j){var p=j.y,h=Proj4js.common.adjust_lon(j.x-this.long0),o,n;o=Math.sin(p);var m=Math.cos(p);if(this.sphere){var l=m*Math.sin(h);if(1e-10>Math.abs(Math.abs(l)-1)){return Proj4js.reportError("tmerc:forward: Point projects into infinity"),93}n=0.5*this.a*this.k0*Math.log((1+l)/(1-l));o=Math.acos(m*Math.cos(h)/Math.sqrt(1-l*l));0>p&&(o=-o);p=this.a*this.k0*(o-this.lat0)}else{n=m*h;var h=Math.pow(n,2),m=this.ep2*Math.pow(m,2),l=Math.tan(p),k=Math.pow(l,2);o=1-this.es*Math.pow(o,2);o=this.a/Math.sqrt(o);p=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,p);n=this.k0*o*n*(1+h/6*(1-k+m+h/20*(5-18*k+Math.pow(k,2)+72*m-58*this.ep2)))+this.x0;p=this.k0*(p-this.ml0+o*l*h*(0.5+h/24*(5-k+9*m+4*Math.pow(m,2)+h/30*(61-58*k+Math.pow(k,2)+600*m-330*this.ep2))))+this.y0}j.x=n;j.y=p;return j},inverse:function(y){var w,x,u,t;if(this.sphere){x=Math.exp(y.x/(this.a*this.k0));var s=0.5*(x-1/x);u=this.lat0+y.y/(this.a*this.k0);t=Math.cos(u);w=Math.sqrt((1-t*t)/(1+s*s));x=Proj4js.common.asinz(w);0>u&&(x=-x);w=0==s&&0==t?this.long0:Proj4js.common.adjust_lon(Math.atan2(s,t)+this.long0)}else{var s=y.x-this.x0,r=y.y-this.y0;x=w=(this.ml0+r/this.k0)/this.a;for(t=0;;t++){u=(w+this.e1*Math.sin(2*x)-this.e2*Math.sin(4*x)+this.e3*Math.sin(6*x))/this.e0-x;x+=u;if(Math.abs(u)<=Proj4js.common.EPSLN){break}if(6<=t){return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95}}if(Math.abs(x)<Proj4js.common.HALF_PI){w=Math.sin(x);u=Math.cos(x);var p=Math.tan(x);t=this.ep2*Math.pow(u,2);var r=Math.pow(t,2),q=Math.pow(p,2),o=Math.pow(q,2);w=1-this.es*Math.pow(w,2);var n=this.a/Math.sqrt(w);w=n*(1-this.es)/w;var s=s/(n*this.k0),m=Math.pow(s,2);x-=n*p*m/w*(0.5-m/24*(5+3*q+10*t-4*r-9*this.ep2-m/30*(61+90*q+298*t+45*o-252*this.ep2-3*r)));w=Proj4js.common.adjust_lon(this.long0+s*(1-m/6*(1+2*q+t-m/20*(5-2*t+28*q-3*r+8*this.ep2+24*o)))/u)}else{x=Proj4js.common.HALF_PI*Proj4js.common.sign(r),w=this.long0}}y.x=w;y.y=x;return y}};Proj4js.defs.GOOGLE="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs";Proj4js.defs["EPSG:900913"]=Proj4js.defs.GOOGLE;Proj4js.Proj.gstmerc={init:function(){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);this.lc=this.long0;this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var e=Math.sin(this.lat0),f=Math.asin(e/this.rs),d=Math.sin(f);this.cp=Proj4js.common.latiso(0,f,d)-this.rs*Proj4js.common.latiso(this.e,this.lat0,e);this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*e*e);this.xs=this.x0;this.ys=this.y0-this.n2*f;this.title||(this.title="Gauss Schreiber transverse mercator")},forward:function(f){var h=f.y,e=this.rs*(f.x-this.lc),h=this.cp+this.rs*Proj4js.common.latiso(this.e,h,Math.sin(h)),g=Math.asin(Math.sin(e)/Proj4js.common.cosh(h)),g=Proj4js.common.latiso(0,g,Math.sin(g));f.x=this.xs+this.n2*g;f.y=this.ys+this.n2*Math.atan(Proj4js.common.sinh(h)/Math.cos(e));return f},inverse:function(f){var h=f.x,e=f.y,g=Math.atan(Proj4js.common.sinh((h-this.xs)/this.n2)/Math.cos((e-this.ys)/this.n2)),h=Math.asin(Math.sin((e-this.ys)/this.n2)/Proj4js.common.cosh((h-this.xs)/this.n2)),h=Proj4js.common.latiso(0,h,Math.sin(h));f.x=this.lc+g/this.rs;f.y=Proj4js.common.invlatiso(this.e,(h-this.cp)/this.rs);return f}};Proj4js.Proj.ortho={init:function(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)},forward:function(j){var p,h,o,n,m;h=j.y;o=Proj4js.common.adjust_lon(j.x-this.long0);p=Math.sin(h);h=Math.cos(h);n=Math.cos(o);m=this.sin_p14*p+this.cos_p14*h*n;if(0<m||Math.abs(m)<=Proj4js.common.EPSLN){var l=1*this.a*h*Math.sin(o),k=this.y0+1*this.a*(this.cos_p14*p-this.sin_p14*h*n)}else{Proj4js.reportError("orthoFwdPointError")}j.x=l;j.y=k;return j},inverse:function(g){var k,f,j,h;g.x-=this.x0;g.y-=this.y0;k=Math.sqrt(g.x*g.x+g.y*g.y);k>this.a+1e-7&&Proj4js.reportError("orthoInvDataError");f=Proj4js.common.asinz(k/this.a);j=Math.sin(f);h=Math.cos(f);f=this.long0;Math.abs(k);j=Proj4js.common.asinz(h*this.sin_p14+g.y*j*this.cos_p14/k);k=Math.abs(this.lat0)-Proj4js.common.HALF_PI;Math.abs(k)<=Proj4js.common.EPSLN&&(f=0<=this.lat0?Proj4js.common.adjust_lon(this.long0+Math.atan2(g.x,-g.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-g.x,g.y)));Math.sin(j);g.x=f;g.y=j;return g}};Proj4js.Proj.krovak={init:function(){this.a=6377397.155;this.es=0.006674372230614;this.e=Math.sqrt(this.es);this.lat0||(this.lat0=0.863937979737193);this.long0||(this.long0=0.4334234309119251);this.k0||(this.k0=0.9999);this.s45=0.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq},forward:function(f){var h,e,g;e=f.y;g=Proj4js.common.adjust_lon(f.x-this.long0);h=Math.pow((1+this.e*Math.sin(e))/(1-this.e*Math.sin(e)),this.alfa*this.e/2);h=2*(Math.atan(this.k*Math.pow(Math.tan(e/2+this.s45),this.alfa)/h)-this.s45);e=-g*this.alfa;g=Math.asin(Math.cos(this.ad)*Math.sin(h)+Math.sin(this.ad)*Math.cos(h)*Math.cos(e));h=this.n*Math.asin(Math.cos(h)*Math.sin(e)/Math.cos(g));g=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(g/2+this.s45),this.n);f.y=g*Math.cos(h)/1;f.x=g*Math.sin(h)/1;this.czech&&(f.y*=-1,f.x*=-1);return f},inverse:function(g){var k,f,j;k=g.x;g.x=g.y;g.y=k;this.czech&&(g.y*=-1,g.x*=-1);k=Math.sqrt(g.x*g.x+g.y*g.y);f=Math.atan2(g.y,g.x)/Math.sin(this.s0);j=2*(Math.atan(Math.pow(this.ro0/k,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);k=Math.asin(Math.cos(this.ad)*Math.sin(j)-Math.sin(this.ad)*Math.cos(j)*Math.cos(f));f=Math.asin(Math.cos(j)*Math.sin(f)/Math.cos(k));g.x=this.long0-f/this.alfa;f=k;var h=j=0;do{g.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(k/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),1e-10>Math.abs(f-g.y)&&(j=1),f=g.y,h+=1}while(0==j&&15>h);return 15<=h?(Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations"),null):g}};Proj4js.Proj.somerc={init:function(){var g=this.lat0;this.lambda0=this.long0;var k=Math.sin(g),f=this.a,j=1/this.rf,j=2*j-Math.pow(j,2),h=this.e=Math.sqrt(j);this.R=this.k0*f*Math.sqrt(1-j)/(1-j*Math.pow(k,2));this.alpha=Math.sqrt(1+j/(1-j)*Math.pow(Math.cos(g),4));this.b0=Math.asin(k/this.alpha);this.K=Math.log(Math.tan(Math.PI/4+this.b0/2))-this.alpha*Math.log(Math.tan(Math.PI/4+g/2))+this.alpha*h/2*Math.log((1+h*k)/(1-h*k))},forward:function(f){var h=Math.log(Math.tan(Math.PI/4-f.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(f.y))/(1-this.e*Math.sin(f.y))),e=2*(Math.atan(Math.exp(-this.alpha*(h+e)+this.K))-Math.PI/4),g=this.alpha*(f.x-this.lambda0),h=Math.atan(Math.sin(g)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(g))),e=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(g));f.y=this.R/2*Math.log((1+Math.sin(e))/(1-Math.sin(e)))+this.y0;f.x=this.R*h+this.x0;return f},inverse:function(j){for(var o=(j.x-this.x0)/this.R,h=2*(Math.atan(Math.exp((j.y-this.y0)/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(h)+Math.sin(this.b0)*Math.cos(h)*Math.cos(o)),o=this.lambda0+Math.atan(Math.sin(o)/(Math.cos(this.b0)*Math.cos(o)-Math.sin(this.b0)*Math.tan(h)))/this.alpha,h=0,m=n,l=-1000,k=0;1e-7<Math.abs(m-l);){if(20<++k){Proj4js.reportError("omercFwdInfinity");return}h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2));l=m;m=2*Math.atan(Math.exp(h))-Math.PI/2}j.x=o;j.y=m;return j}};Proj4js.Proj.stere={ssfn_:function(e,f,d){f*=d;return Math.tan(0.5*(Proj4js.common.HALF_PI+e))*Math.pow((1-f)/(1+f),0.5*d)},TOL:1e-8,NITER:8,CONV:1e-10,S_POLE:0,N_POLE:1,OBLIQ:2,EQUIT:3,init:function(){this.phits=this.lat_ts?this.lat_ts:Proj4js.common.HALF_PI;var b=Math.abs(this.lat0);this.mode=Math.abs(b)-Proj4js.common.HALF_PI<Proj4js.common.EPSLN?0>this.lat0?this.S_POLE:this.N_POLE:b>Proj4js.common.EPSLN?this.OBLIQ:this.EQUIT;this.phits=Math.abs(this.phits);if(this.es){var d;switch(this.mode){case this.N_POLE:case this.S_POLE:Math.abs(this.phits-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.akm1=2*this.k0/Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)):(b=Math.sin(this.phits),this.akm1=Math.cos(this.phits)/Proj4js.common.tsfnz(this.e,this.phits,b),b*=this.e,this.akm1/=Math.sqrt(1-b*b));break;case this.EQUIT:this.akm1=2*this.k0;break;case this.OBLIQ:b=Math.sin(this.lat0),d=2*Math.atan(this.ssfn_(this.lat0,b,this.e))-Proj4js.common.HALF_PI,b*=this.e,this.akm1=2*this.k0*Math.cos(this.lat0)/Math.sqrt(1-b*b),this.sinX1=Math.sin(d),this.cosX1=Math.cos(d)}}else{switch(this.mode){case this.OBLIQ:this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0);case this.EQUIT:this.akm1=2*this.k0;break;case this.S_POLE:case this.N_POLE:this.akm1=Math.abs(this.phits-Proj4js.common.HALF_PI)>=Proj4js.common.EPSLN?Math.cos(this.phits)/Math.tan(Proj4js.common.FORTPI-0.5*this.phits):2*this.k0}}},forward:function(r){var p=r.x,p=Proj4js.common.adjust_lon(p-this.long0),q=r.y,o,n;if(this.sphere){var m,l,j;m=Math.sin(q);l=Math.cos(q);j=Math.cos(p);p=Math.sin(p);switch(this.mode){case this.EQUIT:n=1+l*j;n<=Proj4js.common.EPSLN&&Proj4js.reportError("stere:forward:Equit");n=this.akm1/n;o=n*l*p;n*=m;break;case this.OBLIQ:n=1+this.sinph0*m+this.cosph0*l*j;n<=Proj4js.common.EPSLN&&Proj4js.reportError("stere:forward:Obliq");n=this.akm1/n;o=n*l*p;n*=this.cosph0*m-this.sinph0*l*j;break;case this.N_POLE:j=-j,q=-q;case this.S_POLE:Math.abs(q-Proj4js.common.HALF_PI)<this.TOL&&Proj4js.reportError("stere:forward:S_POLE"),n=this.akm1*Math.tan(Proj4js.common.FORTPI+0.5*q),o=p*n,n*=j}}else{j=Math.cos(p);p=Math.sin(p);m=Math.sin(q);var k;if(this.mode==this.OBLIQ||this.mode==this.EQUIT){k=2*Math.atan(this.ssfn_(q,m,this.e)),l=Math.sin(k-Proj4js.common.HALF_PI),k=Math.cos(k)}switch(this.mode){case this.OBLIQ:q=this.akm1/(this.cosX1*(1+this.sinX1*l+this.cosX1*k*j));n=q*(this.cosX1*l-this.sinX1*k*j);o=q*k;break;case this.EQUIT:q=2*this.akm1/(1+k*j);n=q*l;o=q*k;break;case this.S_POLE:q=-q,j=-j,m=-m;case this.N_POLE:o=this.akm1*Proj4js.common.tsfnz(this.e,q,m),n=-o*j}o*=p}r.x=o*this.a+this.x0;r.y=n*this.a+this.y0;return r},inverse:function(r){var p=(r.x-this.x0)/this.a,q=(r.y-this.y0)/this.a,o,n,m,l=o=0,j,k=m=0;if(this.sphere){l=Math.sqrt(p*p+q*q);k=2*Math.atan(l/this.akm1);m=Math.sin(k);k=Math.cos(k);o=0;switch(this.mode){case this.EQUIT:n=Math.abs(l)<=Proj4js.common.EPSLN?0:Math.asin(q*m/l);if(0!=k||0!=p){o=Math.atan2(p*m,k*l)}break;case this.OBLIQ:n=Math.abs(l)<=Proj4js.common.EPSLN?this.phi0:Math.asin(k*this.sinph0+q*m*this.cosph0/l);k-=this.sinph0*Math.sin(n);if(0!=k||0!=p){o=Math.atan2(p*m*this.cosph0,k*l)}break;case this.N_POLE:q=-q;case this.S_POLE:n=Math.abs(l)<=Proj4js.common.EPSLN?this.phi0:Math.asin(this.mode==this.S_POLE?-k:k),o=0==p&&0==q?0:Math.atan2(p,q)}r.x=Proj4js.common.adjust_lon(o+this.long0);r.y=n}else{j=Math.sqrt(p*p+q*q);switch(this.mode){case this.OBLIQ:case this.EQUIT:o=2*Math.atan2(j*this.cosX1,this.akm1);m=Math.cos(o);n=Math.sin(o);l=0==j?Math.asin(m*this.sinX1):Math.asin(m*this.sinX1+q*n*this.cosX1/j);o=Math.tan(0.5*(Proj4js.common.HALF_PI+l));p*=n;q=j*this.cosX1*m-q*this.sinX1*n;k=Proj4js.common.HALF_PI;m=0.5*this.e;break;case this.N_POLE:q=-q;case this.S_POLE:o=-j/this.akm1,l=Proj4js.common.HALF_PI-2*Math.atan(o),k=-Proj4js.common.HALF_PI,m=-0.5*this.e}for(j=this.NITER;j--;l=n){if(n=this.e*Math.sin(l),n=2*Math.atan(o*Math.pow((1+n)/(1-n),m))-k,Math.abs(l-n)<this.CONV){return this.mode==this.S_POLE&&(n=-n),o=0==p&&0==q?0:Math.atan2(p,q),r.x=Proj4js.common.adjust_lon(o+this.long0),r.y=n,r}}}}};Proj4js.Proj.nzmg={iterations:1,init:function(){this.A=[];this.A[1]=0.6399175073;this.A[2]=-0.1358797613;this.A[3]=0.063294409;this.A[4]=-0.02526853;this.A[5]=0.0117879;this.A[6]=-0.0055161;this.A[7]=0.0026906;this.A[8]=-0.001333;this.A[9]=0.00067;this.A[10]=-0.00034;this.B_re=[];this.B_im=[];this.B_re[1]=0.7557853228;this.B_im[1]=0;this.B_re[2]=0.249204646;this.B_im[2]=0.003371507;this.B_re[3]=-0.001541739;this.B_im[3]=0.04105856;this.B_re[4]=-0.10162907;this.B_im[4]=0.01727609;this.B_re[5]=-0.26623489;this.B_im[5]=-0.36249218;this.B_re[6]=-0.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-0.577245789;this.C_im[2]=-0.007809598;this.C_re[3]=0.508307513;this.C_im[3]=-0.112208952;this.C_re[4]=-0.15094762;this.C_im[4]=0.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=0.5185406398;this.D[3]=-0.03333098;this.D[4]=-0.1052906;this.D[5]=-0.0368594;this.D[6]=0.007317;this.D[7]=0.0122;this.D[8]=0.00394;this.D[9]=-0.0013},forward:function(r){for(var p=0.00001*((r.y-this.lat0)/Proj4js.common.SEC_TO_RAD),q=r.x-this.long0,o=1,n=0,m=1;10>=m;m++){o*=p,n+=this.A[m]*o}for(var p=n,o=1,l=0,j=0,k=0,m=1;6>=m;m++){n=o*p-l*q,l=l*p+o*q,o=n,j=j+this.B_re[m]*o-this.B_im[m]*l,k=k+this.B_im[m]*o+this.B_re[m]*l}r.x=k*this.a+this.x0;r.y=j*this.a+this.y0;return r},inverse:function(C){for(var A=(C.y-this.y0)/this.a,B=(C.x-this.x0)/this.a,z=1,y=0,x,w=0,t=0,u=1;6>=u;u++){x=z*A-y*B,y=y*A+z*B,z=x,w=w+this.C_re[u]*z-this.C_im[u]*y,t=t+this.C_im[u]*z+this.C_re[u]*y}for(z=0;z<this.iterations;z++){var s=w,r=t,q;x=A;y=B;for(u=2;6>=u;u++){q=s*w-r*t,r=r*w+s*t,s=q,x+=(u-1)*(this.B_re[u]*s-this.B_im[u]*r),y+=(u-1)*(this.B_im[u]*s+this.B_re[u]*r)}for(var s=1,r=0,p=this.B_re[1],o=this.B_im[1],u=2;6>=u;u++){q=s*w-r*t,r=r*w+s*t,s=q,p+=u*(this.B_re[u]*s-this.B_im[u]*r),o+=u*(this.B_im[u]*s+this.B_re[u]*r)}t=p*p+o*o;w=(x*p+y*o)/t;t=(y*p-x*o)/t}A=w;B=1;w=0;for(u=1;9>=u;u++){B*=A,w+=this.D[u]*B}u=this.lat0+100000*w*Proj4js.common.SEC_TO_RAD;C.x=this.long0+t;C.y=u;return C}};Proj4js.Proj.mill={init:function(){},forward:function(e){var f=e.y,d=this.x0+this.a*Proj4js.common.adjust_lon(e.x-this.long0),f=this.y0+1.25*this.a*Math.log(Math.tan(Proj4js.common.PI/4+f/2.5));e.x=d;e.y=f;return e},inverse:function(e){e.x-=this.x0;e.y-=this.y0;var f=Proj4js.common.adjust_lon(this.long0+e.x/this.a),d=2.5*(Math.atan(Math.exp(0.8*e.y/this.a))-Proj4js.common.PI/4);e.x=f;e.y=d;return e}};Proj4js.Proj.gnom={init:function(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1000*this.a;this.rc=1},forward:function(h){var m,g,l,k,j;g=h.y;l=Proj4js.common.adjust_lon(h.x-this.long0);m=Math.sin(g);g=Math.cos(g);k=Math.cos(l);j=this.sin_p14*m+this.cos_p14*g*k;0<j||Math.abs(j)<=Proj4js.common.EPSLN?(l=this.x0+1*this.a*g*Math.sin(l)/j,m=this.y0+1*this.a*(this.cos_p14*m-this.sin_p14*g*k)/j):(Proj4js.reportError("orthoFwdPointError"),l=this.x0+this.infinity_dist*g*Math.sin(l),m=this.y0+this.infinity_dist*(this.cos_p14*m-this.sin_p14*g*k));h.x=l;h.y=m;return h},inverse:function(g){var k,f,j,h;g.x=(g.x-this.x0)/this.a;g.y=(g.y-this.y0)/this.a;g.x/=this.k0;g.y/=this.k0;(k=Math.sqrt(g.x*g.x+g.y*g.y))?(h=Math.atan2(k,this.rc),f=Math.sin(h),j=Math.cos(h),h=Proj4js.common.asinz(j*this.sin_p14+g.y*f*this.cos_p14/k),k=Math.atan2(g.x*f,k*this.cos_p14*j-g.y*this.sin_p14*f),k=Proj4js.common.adjust_lon(this.long0+k)):(h=this.phic0,k=0);g.x=k;g.y=h;return g}};Proj4js.Proj.sinu={init:function(){this.sphere?(this.n=1,this.es=this.m=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Proj4js.common.pj_enfn(this.es)},forward:function(h){var m,g;m=h.x;g=h.y;m=Proj4js.common.adjust_lon(m-this.long0);if(this.sphere){if(this.m){for(var l=this.n*Math.sin(g),k=Proj4js.common.MAX_ITER;k;--k){var j=(this.m*g+Math.sin(g)-l)/(this.m+Math.cos(g));g-=j;if(Math.abs(j)<Proj4js.common.EPSLN){break}}}else{g=1!=this.n?Math.asin(this.n*Math.sin(g)):g}m=this.a*this.C_x*m*(this.m+Math.cos(g));g*=this.a*this.C_y}else{l=Math.sin(g),k=Math.cos(g),g=this.a*Proj4js.common.pj_mlfn(g,l,k,this.en),m=this.a*m*k/Math.sqrt(1-this.es*l*l)}h.x=m;h.y=g;return h},inverse:function(f){var h,e;f.x-=this.x0;f.y-=this.y0;if(this.sphere){f.y/=this.C_y,h=this.m?Math.asin((this.m*f.y+Math.sin(f.y))/this.n):1!=this.n?Math.asin(Math.sin(f.y)/this.n):f.y,e=f.x/(this.C_x*(this.m+Math.cos(f.y)))}else{h=Proj4js.common.pj_inv_mlfn(f.y/this.a,this.es,this.en);var g=Math.abs(h);g<Proj4js.common.HALF_PI?(g=Math.sin(h),e=this.long0+f.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(h)),e=Proj4js.common.adjust_lon(e)):g-Proj4js.common.EPSLN<Proj4js.common.HALF_PI&&(e=this.long0)}f.x=e;f.y=h;return f}};Proj4js.Proj.vandg={init:function(){this.R=6370997},forward:function(j){var o=j.y,h=Proj4js.common.adjust_lon(j.x-this.long0);Math.abs(o);var n=Proj4js.common.asinz(2*Math.abs(o/Proj4js.common.PI));(Math.abs(h)<=Proj4js.common.EPSLN||Math.abs(Math.abs(o)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)&&Math.tan(0.5*n);var m=0.5*Math.abs(Proj4js.common.PI/h-h/Proj4js.common.PI),l=m*m,k=Math.sin(n),n=Math.cos(n),n=n/(k+n-1),k=n*(2/k-1),k=k*k,l=Proj4js.common.PI*this.R*(m*(n-k)+Math.sqrt(l*(n-k)*(n-k)-(k+l)*(n*n-k)))/(k+l);0>h&&(l=-l);h=this.x0+l;l=Math.abs(l/(Proj4js.common.PI*this.R));o=0<=o?this.y0+Proj4js.common.PI*this.R*Math.sqrt(1-l*l-2*m*l):this.y0-Proj4js.common.PI*this.R*Math.sqrt(1-l*l-2*m*l);j.x=h;j.y=o;return j},inverse:function(r){var p,q,o,n,m,l,j,k;r.x-=this.x0;r.y-=this.y0;k=Proj4js.common.PI*this.R;p=r.x/k;o=r.y/k;n=p*p+o*o;m=-Math.abs(o)*(1+n);q=m-2*o*o+p*p;l=-2*m+1+2*o*o+n*n;k=o*o/l+(2*q*q*q/l/l/l-9*m*q/l/l)/27;j=(m-q*q/3/l)/l;m=2*Math.sqrt(-j/3);k=3*k/j/m;1<Math.abs(k)&&(k=0<=k?1:-1);k=Math.acos(k)/3;q=0<=r.y?(-m*Math.cos(k+Proj4js.common.PI/3)-q/3/l)*Proj4js.common.PI:-(-m*Math.cos(k+Proj4js.common.PI/3)-q/3/l)*Proj4js.common.PI;Math.abs(p);p=Proj4js.common.adjust_lon(this.long0+Proj4js.common.PI*(n-1+Math.sqrt(1+2*(p*p-o*o)+n*n))/2/p);r.x=p;r.y=q;return r}};Proj4js.Proj.cea={init:function(){},forward:function(e){var f=e.y,d=this.x0+this.a*Proj4js.common.adjust_lon(e.x-this.long0)*Math.cos(this.lat_ts),f=this.y0+this.a*Math.sin(f)/Math.cos(this.lat_ts);e.x=d;e.y=f;return e},inverse:function(e){e.x-=this.x0;e.y-=this.y0;var f=Proj4js.common.adjust_lon(this.long0+e.x/this.a/Math.cos(this.lat_ts)),d=Math.asin(e.y/this.a*Math.cos(this.lat_ts));e.x=f;e.y=d;return e}};Proj4js.Proj.eqc={init:function(){this.x0||(this.x0=0);this.y0||(this.y0=0);this.lat0||(this.lat0=0);this.long0||(this.long0=0);this.lat_ts||(this.lat_ts=0);this.title||(this.title="Equidistant Cylindrical (Plate Carre)");this.rc=Math.cos(this.lat_ts)},forward:function(e){var f=e.y,d=Proj4js.common.adjust_lon(e.x-this.long0),f=Proj4js.common.adjust_lat(f-this.lat0);e.x=this.x0+this.a*d*this.rc;e.y=this.y0+this.a*f;return e},inverse:function(b){var d=b.y;b.x=Proj4js.common.adjust_lon(this.long0+(b.x-this.x0)/(this.a*this.rc));b.y=Proj4js.common.adjust_lat(this.lat0+(d-this.y0)/this.a);return b}};Proj4js.Proj.cass={init:function(){this.sphere||(this.en=Proj4js.common.pj_enfn(this.es),this.m0=Proj4js.common.pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},C1:0.16666666666666666,C2:0.008333333333333333,C3:0.041666666666666664,C4:0.3333333333333333,C5:0.06666666666666667,forward:function(g){var k,f,j=g.x,h=g.y,j=Proj4js.common.adjust_lon(j-this.long0);this.sphere?(k=Math.asin(Math.cos(h)*Math.sin(j)),f=Math.atan2(Math.tan(h),Math.cos(j))-this.phi0):(this.n=Math.sin(h),this.c=Math.cos(h),f=Proj4js.common.pj_mlfn(h,this.n,this.c,this.en),this.n=1/Math.sqrt(1-this.es*this.n*this.n),this.tn=Math.tan(h),this.t=this.tn*this.tn,this.a1=j*this.c,this.c*=this.es*this.c/(1-this.es),this.a2=this.a1*this.a1,k=this.n*this.a1*(1-this.a2*this.t*(this.C1-(8-this.t+8*this.c)*this.a2*this.C2)),f-=this.m0-this.n*this.tn*this.a2*(0.5+(5-this.t+6*this.c)*this.a2*this.C3));g.x=this.a*k+this.x0;g.y=this.a*f+this.y0;return g},inverse:function(f){f.x-=this.x0;f.y-=this.y0;var h=f.x/this.a,e=f.y/this.a;if(this.sphere){this.dd=e+this.lat0,e=Math.asin(Math.sin(this.dd)*Math.cos(h)),h=Math.atan2(Math.tan(h),Math.cos(this.dd))}else{var g=Proj4js.common.pj_inv_mlfn(this.m0+e,this.es,this.en);this.tn=Math.tan(g);this.t=this.tn*this.tn;this.n=Math.sin(g);this.r=1/(1-this.es*this.n*this.n);this.n=Math.sqrt(this.r);this.r*=(1-this.es)*this.n;this.dd=h/this.n;this.d2=this.dd*this.dd;e=g-this.n*this.tn/this.r*this.d2*(0.5-(1+3*this.t)*this.d2*this.C3);h=this.dd*(1+this.t*this.d2*(-this.C4+(1+3*this.t)*this.d2*this.C5))/Math.cos(g)}f.x=Proj4js.common.adjust_lon(this.long0+h);f.y=e;return f}};Proj4js.Proj.gauss={init:function(){var b=Math.sin(this.lat0),d=Math.cos(this.lat0),d=d*d;this.rc=Math.sqrt(1-this.es)/(1-this.es*b*b);this.C=Math.sqrt(1+this.es*d*d/(1-this.es));this.phic0=Math.asin(b/this.C);this.ratexp=0.5*this.C*this.e;this.K=Math.tan(0.5*this.phic0+Proj4js.common.FORTPI)/(Math.pow(Math.tan(0.5*this.lat0+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*b,this.ratexp))},forward:function(e){var f=e.x,d=e.y;e.y=2*Math.atan(this.K*Math.pow(Math.tan(0.5*d+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*Math.sin(d),this.ratexp))-Proj4js.common.HALF_PI;e.x=this.C*f;return e},inverse:function(g){for(var k=g.x/this.C,f=g.y,j=Math.pow(Math.tan(0.5*f+Proj4js.common.FORTPI)/this.K,1/this.C),h=Proj4js.common.MAX_ITER;0<h;--h){f=2*Math.atan(j*Proj4js.common.srat(this.e*Math.sin(g.y),-0.5*this.e))-Proj4js.common.HALF_PI;if(1e-14>Math.abs(f-g.y)){break}g.y=f}if(!h){return Proj4js.reportError("gauss:inverse:convergence failed"),null}g.x=k;g.y=f;return g}};Proj4js.Proj.omerc={init:function(){this.mode||(this.mode=0);this.lon1||(this.lon1=0,this.mode=1);this.lon2||(this.lon2=0);this.lat2||(this.lat2=0);var b=1-Math.pow(this.b/this.a,2);Math.sqrt(b);this.sin_p20=Math.sin(this.lat0);this.cos_p20=Math.cos(this.lat0);this.con=1-this.es*this.sin_p20*this.sin_p20;this.com=Math.sqrt(1-b);this.bl=Math.sqrt(1+this.es*Math.pow(this.cos_p20,4)/(1-b));this.al=this.a*this.bl*this.k0*this.com/this.con;Math.abs(this.lat0)<Proj4js.common.EPSLN?this.el=this.d=this.ts=1:(this.ts=Proj4js.common.tsfnz(this.e,this.lat0,this.sin_p20),this.con=Math.sqrt(this.con),this.d=this.bl*this.com/(this.cos_p20*this.con),this.f=0<this.d*this.d-1?0<=this.lat0?this.d+Math.sqrt(this.d*this.d-1):this.d-Math.sqrt(this.d*this.d-1):this.d,this.el=this.f*Math.pow(this.ts,this.bl));0!=this.mode?(this.g=0.5*(this.f-1/this.f),this.gama=Proj4js.common.asinz(Math.sin(this.alpha)/this.d),this.longc-=Proj4js.common.asinz(this.g*Math.tan(this.gama))/this.bl,this.con=Math.abs(this.lat0),this.con>Proj4js.common.EPSLN&&Math.abs(this.con-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(this.singam=Math.sin(this.gama),this.cosgam=Math.cos(this.gama),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.u=0<=this.lat0?this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):-(this.al/this.bl)*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz)):Proj4js.reportError("omerc:Init:DataError")):(this.sinphi=Math.sin(this.at1),this.ts1=Proj4js.common.tsfnz(this.e,this.lat1,this.sinphi),this.sinphi=Math.sin(this.lat2),this.ts2=Proj4js.common.tsfnz(this.e,this.lat2,this.sinphi),this.h=Math.pow(this.ts1,this.bl),this.l=Math.pow(this.ts2,this.bl),this.f=this.el/this.h,this.g=0.5*(this.f-1/this.f),this.j=(this.el*this.el-this.l*this.h)/(this.el*this.el+this.l*this.h),this.p=(this.l-this.h)/(this.l+this.h),this.dlon=this.lon1-this.lon2,this.dlon<-Proj4js.common.PI&&(this.lon2-=2*Proj4js.common.PI),this.dlon>Proj4js.common.PI&&(this.lon2+=2*Proj4js.common.PI),this.dlon=this.lon1-this.lon2,this.longc=0.5*(this.lon1+this.lon2)-Math.atan(this.j*Math.tan(0.5*this.bl*this.dlon)/this.p)/this.bl,this.dlon=Proj4js.common.adjust_lon(this.lon1-this.longc),this.gama=Math.atan(Math.sin(this.bl*this.dlon)/this.g),this.alpha=Proj4js.common.asinz(this.d*Math.sin(this.gama)),Math.abs(this.lat1-this.lat2)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):this.con=Math.abs(this.lat1),this.con<=Proj4js.common.EPSLN||Math.abs(this.con-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):Math.abs(Math.abs(this.lat0)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercInitDataError"),this.singam=Math.sin(this.gam),this.cosgam=Math.cos(this.gam),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.u=0<=this.lat0?this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):-(this.al/this.bl)*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz))},forward:function(h){var m,g,l,k,j;l=h.x;g=h.y;m=Math.sin(g);k=Proj4js.common.adjust_lon(l-this.longc);l=Math.sin(this.bl*k);Math.abs(Math.abs(g)-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(m=Proj4js.common.tsfnz(this.e,g,m),m=this.el/Math.pow(m,this.bl),j=0.5*(m-1/m),m=(j*this.singam-l*this.cosgam)/(0.5*(m+1/m)),g=Math.cos(this.bl*k),1e-7>Math.abs(g)?l=this.al*this.bl*k:(l=this.al*Math.atan((j*this.cosgam+l*this.singam)/g)/this.bl,0>g&&(l+=Proj4js.common.PI*this.al/this.bl))):(m=0<=g?this.singam:-this.singam,l=this.al*g/this.bl);Math.abs(Math.abs(m)-1)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercFwdInfinity");k=0.5*this.al*Math.log((1-m)/(1+m))/this.bl;l-=this.u;m=this.y0+l*this.cosaz-k*this.sinaz;h.x=this.x0+k*this.cosaz+l*this.sinaz;h.y=m;return h},inverse:function(g){var k,f,j,h;g.x-=this.x0;g.y-=this.y0;k=g.x*this.cosaz-g.y*this.sinaz;j=g.y*this.cosaz+g.x*this.sinaz;j+=this.u;f=Math.exp(-this.bl*k/this.al);k=0.5*(f-1/f);f=0.5*(f+1/f);j=Math.sin(this.bl*j/this.al);h=(j*this.cosgam+k*this.singam)/f;Math.abs(Math.abs(h)-1)<=Proj4js.common.EPSLN?(k=this.longc,h=0<=h?Proj4js.common.HALF_PI:-Proj4js.common.HALF_PI):(f=1/this.bl,h=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),f),h=Proj4js.common.phi2z(this.e,h),k=this.longc-Math.atan2(k*this.cosgam-j*this.singam,f)/this.bl,k=Proj4js.common.adjust_lon(k));g.x=k;g.y=h;return g}};Proj4js.Proj.lcc={init:function(){this.lat2||(this.lat2=this.lat0);this.k0||(this.k0=1);if(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN){Proj4js.reportError("lcc:init: Equal Latitudes")}else{var h=this.b/this.a;this.e=Math.sqrt(1-h*h);var h=Math.sin(this.lat1),m=Math.cos(this.lat1),m=Proj4js.common.msfnz(this.e,h,m),g=Proj4js.common.tsfnz(this.e,this.lat1,h),l=Math.sin(this.lat2),k=Math.cos(this.lat2),k=Proj4js.common.msfnz(this.e,l,k),l=Proj4js.common.tsfnz(this.e,this.lat2,l),j=Proj4js.common.tsfnz(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?Math.log(m/k)/Math.log(g/l):h;this.f0=m/(this.ns*Math.pow(g,this.ns));this.rh=this.a*this.f0*Math.pow(j,this.ns);this.title||(this.title="Lambert Conformal Conic")}},forward:function(f){var h=f.x,e=f.y;if(!(90>=e&&-90<=e&&180>=h&&-180<=h)){return Proj4js.reportError("lcc:forward: llInputOutOfRange: "+h+" : "+e),null}var g=Math.abs(Math.abs(e)-Proj4js.common.HALF_PI);if(g>Proj4js.common.EPSLN){e=Proj4js.common.tsfnz(this.e,e,Math.sin(e)),e=this.a*this.f0*Math.pow(e,this.ns)}else{g=e*this.ns;if(0>=g){return Proj4js.reportError("lcc:forward: No Projection"),null}e=0}h=this.ns*Proj4js.common.adjust_lon(h-this.long0);f.x=this.k0*e*Math.sin(h)+this.x0;f.y=this.k0*(this.rh-e*Math.cos(h))+this.y0;return f},inverse:function(h){var m,g,l,k=(h.x-this.x0)/this.k0,j=this.rh-(h.y-this.y0)/this.k0;0<this.ns?(m=Math.sqrt(k*k+j*j),g=1):(m=-Math.sqrt(k*k+j*j),g=-1);l=0;0!=m&&(l=Math.atan2(g*k,g*j));if(0!=m||0<this.ns){if(g=1/this.ns,m=Math.pow(m/(this.a*this.f0),g),m=Proj4js.common.phi2z(this.e,m),-9999==m){return null}}else{m=-Proj4js.common.HALF_PI}l=Proj4js.common.adjust_lon(l/this.ns+this.long0);h.x=l;h.y=m;return h}};Proj4js.Proj.laea={S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var b=Math.abs(this.lat0);this.mode=Math.abs(b-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?0>this.lat0?this.S_POLE:this.N_POLE:Math.abs(b)<Proj4js.common.EPSLN?this.EQUIT:this.OBLIQ;if(0<this.es){switch(this.qp=Proj4js.common.qsfnz(this.e,1),this.mmf=0.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(0.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=0.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(0.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Proj4js.common.qsfnz(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else{this.mode==this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}},forward:function(t){var r,s,q=t.x,p=t.y,q=Proj4js.common.adjust_lon(q-this.long0);if(this.sphere){var o,n,l;l=Math.sin(p);n=Math.cos(p);o=Math.cos(q);switch(this.mode){case this.OBLIQ:case this.EQUIT:s=this.mode==this.EQUIT?1+n*o:1+this.sinph0*l+this.cosph0*n*o;if(s<=Proj4js.common.EPSLN){return Proj4js.reportError("laea:fwd:y less than eps"),null}s=Math.sqrt(2/s);r=s*n*Math.sin(q);s*=this.mode==this.EQUIT?l:this.cosph0*l-this.sinph0*n*o;break;case this.N_POLE:o=-o;case this.S_POLE:if(Math.abs(p+this.phi0)<Proj4js.common.EPSLN){return Proj4js.reportError("laea:fwd:phi < eps"),null}s=Proj4js.common.FORTPI-0.5*p;s=2*(this.mode==this.S_POLE?Math.cos(s):Math.sin(s));r=s*Math.sin(q);s*=o}}else{var m=n=0,k=0;o=Math.cos(q);q=Math.sin(q);l=Math.sin(p);l=Proj4js.common.qsfnz(this.e,l);if(this.mode==this.OBLIQ||this.mode==this.EQUIT){n=l/this.qp,m=Math.sqrt(1-n*n)}switch(this.mode){case this.OBLIQ:k=1+this.sinb1*n+this.cosb1*m*o;break;case this.EQUIT:k=1+m*o;break;case this.N_POLE:k=Proj4js.common.HALF_PI+p;l=this.qp-l;break;case this.S_POLE:k=p-Proj4js.common.HALF_PI,l=this.qp+l}if(Math.abs(k)<Proj4js.common.EPSLN){return Proj4js.reportError("laea:fwd:b < eps"),null}switch(this.mode){case this.OBLIQ:case this.EQUIT:k=Math.sqrt(2/k);s=this.mode==this.OBLIQ?this.ymf*k*(this.cosb1*n-this.sinb1*m*o):(k=Math.sqrt(2/(1+m*o)))*n*this.ymf;r=this.xmf*k*m*q;break;case this.N_POLE:case this.S_POLE:0<=l?(r=(k=Math.sqrt(l))*q,s=o*(this.mode==this.S_POLE?k:-k)):r=s=0}}t.x=this.a*r+this.x0;t.y=this.a*s+this.y0;return t},inverse:function(j){j.x-=this.x0;j.y-=this.y0;var o=j.x/this.a,h=j.y/this.a,n;if(this.sphere){var m=0,l,k=0;l=Math.sqrt(o*o+h*h);n=0.5*l;if(1<n){return Proj4js.reportError("laea:Inv:DataError"),null}n=2*Math.asin(n);if(this.mode==this.OBLIQ||this.mode==this.EQUIT){k=Math.sin(n),m=Math.cos(n)}switch(this.mode){case this.EQUIT:n=Math.abs(l)<=Proj4js.common.EPSLN?0:Math.asin(h*k/l);o*=k;h=m*l;break;case this.OBLIQ:n=Math.abs(l)<=Proj4js.common.EPSLN?this.phi0:Math.asin(m*this.sinph0+h*k*this.cosph0/l);o*=k*this.cosph0;h=(m-Math.sin(n)*this.sinph0)*l;break;case this.N_POLE:h=-h;n=Proj4js.common.HALF_PI-n;break;case this.S_POLE:n-=Proj4js.common.HALF_PI}o=0==h&&(this.mode==this.EQUIT||this.mode==this.OBLIQ)?0:Math.atan2(o,h)}else{n=0;switch(this.mode){case this.EQUIT:case this.OBLIQ:o/=this.dd;h*=this.dd;k=Math.sqrt(o*o+h*h);if(k<Proj4js.common.EPSLN){return j.x=0,j.y=this.phi0,j}l=2*Math.asin(0.5*k/this.rq);m=Math.cos(l);o*=l=Math.sin(l);this.mode==this.OBLIQ?(n=m*this.sinb1+h*l*this.cosb1/k,h=k*this.cosb1*m-h*this.sinb1*l):(n=h*l/k,h=k*m);break;case this.N_POLE:h=-h;case this.S_POLE:n=o*o+h*h;if(!n){return j.x=0,j.y=this.phi0,j}n=1-n/this.qp;this.mode==this.S_POLE&&(n=-n)}o=Math.atan2(o,h);n=this.authlat(Math.asin(n),this.apa)}j.x=Proj4js.common.adjust_lon(this.long0+o);j.y=n;return j},P00:0.3333333333333333,P01:0.17222222222222222,P02:0.10257936507936508,P10:0.06388888888888888,P11:0.0664021164021164,P20:0.016415012942191543,authset:function(e){var f,d=[];d[0]=e*this.P00;f=e*e;d[0]+=f*this.P01;d[1]=f*this.P10;f*=e;d[0]+=f*this.P02;d[1]+=f*this.P11;d[2]=f*this.P20;return d},authlat:function(e,f){var d=e+e;return e+f[0]*Math.sin(d)+f[1]*Math.sin(d+d)+f[2]*Math.sin(d+d+d)}};Proj4js.Proj.aeqd={init:function(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)},forward:function(j){var o=j.x,h,n=Math.sin(j.y),m=Math.cos(j.y),o=Proj4js.common.adjust_lon(o-this.long0),l=Math.cos(o),k=this.sin_p12*n+this.cos_p12*m*l;if(Math.abs(Math.abs(k)-1)<Proj4js.common.EPSLN){if(h=1,0>k){Proj4js.reportError("aeqd:Fwd:PointError");return}}else{h=Math.acos(k),h/=Math.sin(h)}j.x=this.x0+this.a*h*m*Math.sin(o);j.y=this.y0+this.a*h*(this.cos_p12*n-this.sin_p12*m*l);return j},inverse:function(j){j.x-=this.x0;j.y-=this.y0;var o=Math.sqrt(j.x*j.x+j.y*j.y);if(o>2*Proj4js.common.HALF_PI*this.a){Proj4js.reportError("aeqdInvDataError")}else{var h=o/this.a,n=Math.sin(h),h=Math.cos(h),m=this.long0,l;if(Math.abs(o)<=Proj4js.common.EPSLN){l=this.lat0}else{l=Proj4js.common.asinz(h*this.sin_p12+j.y*n*this.cos_p12/o);var k=Math.abs(this.lat0)-Proj4js.common.HALF_PI;Math.abs(k)<=Proj4js.common.EPSLN?m=0<=this.lat0?Proj4js.common.adjust_lon(this.long0+Math.atan2(j.x,-j.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-j.x,j.y)):(k=h-this.sin_p12*Math.sin(l),Math.abs(k)<Proj4js.common.EPSLN&&Math.abs(j.x)<Proj4js.common.EPSLN||(Math.atan2(j.x*n*this.cos_p12,k*o),m=Proj4js.common.adjust_lon(this.long0+Math.atan2(j.x*n*this.cos_p12,k*o))))}j.x=m;j.y=l;return j}}};Proj4js.Proj.moll={init:function(){},forward:function(j){for(var o=j.y,h=Proj4js.common.adjust_lon(j.x-this.long0),n=o,m=Proj4js.common.PI*Math.sin(o),l=0;;l++){var k=-(n+Math.sin(n)-m)/(1+Math.cos(n)),n=n+k;if(Math.abs(k)<Proj4js.common.EPSLN){break}50<=l&&Proj4js.reportError("moll:Fwd:IterationError")}n/=2;Proj4js.common.PI/2-Math.abs(o)<Proj4js.common.EPSLN&&(h=0);o=0.900316316158*this.a*h*Math.cos(n)+this.x0;n=1.4142135623731*this.a*Math.sin(n)+this.y0;j.x=o;j.y=n;return j},inverse:function(e){var f;e.x-=this.x0;f=e.y/(1.4142135623731*this.a);0.999999999999<Math.abs(f)&&(f=0.999999999999);f=Math.asin(f);var d=Proj4js.common.adjust_lon(this.long0+e.x/(0.900316316158*this.a*Math.cos(f)));d<-Proj4js.common.PI&&(d=-Proj4js.common.PI);d>Proj4js.common.PI&&(d=Proj4js.common.PI);f=(2*f+Math.sin(2*f))/Proj4js.common.PI;1<Math.abs(f)&&(f=1);f=Math.asin(f);e.x=d;e.y=f;return e}};Proj4js.defs["EPSG:102757"]="+title=NAD 1983 StatePlane Wyoming West Central FIPS 4903 Feet +proj=tmerc +lat_0=40.5 +lon_0=-108.75 +x_0=600000.0 +y_0=0 +k=0.999938 +a=6378137.0  +b=6356752.3141403 +to_meter=0.3048006096012192";Proj4js.defs["EPSG:102758"]="+title=NAD 1983 StatePlane Wyoming West FIPS 4904 Feet +proj=tmerc +lat_0=40.5  +lon_0=-110.0833333333333 +x_0=800000  +y_0=100000  +k=0.999938 +a=6378137.0 +b=6356752.3141403 +to_meter=0.3048006096012192";Proj4js.defs["EPSG:21781"]="+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs";Proj4js.defs["EPSG:23029"]="+proj=utm +zone=29 +ellps=intl +units=m +no_defs";Proj4js.defs["EPSG:23030"]="+proj=utm +zone=30 +ellps=intl +towgs84=-131,-100.3,-163.4,-1.244,-0.020,-1.144,9.39 +units=m +no_defs";Proj4js.defs["EPSG:25829"]="+proj=utm +zone=29 +ellps=GRS80 +units=m +no_defs";Proj4js.defs["EPSG:25830"]="+proj=utm +zone=30 +ellps=GRS80 +units=m +datum=ETRS89 +no_defs";Proj4js.defs["EPSG:26591"]="+title= Monte Mario (Rome) / Italy zone 1 EPSG:26591 +proj=tmerc +lat_0=0 +lon_0=-3.45233333333333 +from_greenwich=12.45233333333333 +k=0.999600 +x_0=1500000 +y_0=0 +a=6378388.0, +b=6356911.94612795 +units=m";Proj4js.defs.EPSG26912="+title=NAD83 / UTM zone 12N +proj=utm +zone=12 +a=6378137.0 +b=6356752.3141403";Proj4js.defs["EPSG:27200"]="+title=New Zealand Map Grid  +proj=nzmg   +lat_0=-41 +lon_0=173   +x_0=2510000 +y_0=6023150   +ellps=intl +datum=nzgd49 +units=m +no_defs";Proj4js.defs["EPSG:27563"]="+title=NTF (Paris)/Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ";Proj4js.defs["EPSG:32619"]="+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs";Proj4js.defs["EPSG:32628"]="+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs";Proj4js.defs["EPSG:32629"]="+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs";Proj4js.defs["EPSG:32630"]="+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs";Proj4js.defs["EPSG:32719"]="+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs";Proj4js.defs["EPSG:41001"]="+title=simple mercator EPSG:41001 +proj=merc +lat_ts=0 +lon_0=0 +k=1.000000 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m";Proj4js.defs["EPSG:4139"]="+title=Puerto Rico EPSG:4139 (3 param datum shift) +proj=longlat +towgs84 = 11,72,-101,0,0,0,0 +a=6378206.4 +b=6356583.8";Proj4js.defs["EPSG:4181"]="+title=Luxembourg 1930 EPSG:4181 (7 param datum shift) +proj=longlat +towgs84=-193,13.7,-39.3,-0.41,-2.933,2.688,0.43 +a=6378388.0, +b=6356911.94612795";Proj4js.defs["EPSG:42304"]="+title=Atlas of Canada, LCC +proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs";Proj4js.defs["EPSG:4230"]="+proj=longlat +ellps=intl +no_defs";Proj4js.defs["EPSG:4258"]="+proj=longlat +ellps=GRS80 +no_defs";Proj4js.defs["EPSG:4272"]="+title=NZGD49 +proj=longlat +ellps=intl +datum=nzgd49 +no_defs ";Proj4js.defs["EPSG:4302"]="+title=Trinidad 1903 EPSG:4302 (7 param datum shift) +proj=longlat +a=6378293.63683822 +b=6356617.979337744 +towgs84=-61.702,284.488,472.052,0,0,0,0";Proj4js.defs["EPSG:4326"]="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs";Proj4js.defs["EPSG:900913"]="+title= Google Mercator EPSG:900913 +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs";Proj4js.defs["EPSG:3857"]="+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs";var org_apache_cxf_XSI_namespace_uri="http://www.w3.org/2001/XMLSchema-instance";var org_apache_cxf_XSD_namespace_uri="http://www.w3.org/2001/XMLSchema";function cxf_apache_org_util_null_trace(a){}function CxfApacheOrgUtil(){if("function"==typeof(org_apache_cxf_trace)){this.trace=org_apache_cxf_trace.trace;this.trace("Javascript tracing enabled.")}else{this.trace=cxf_apache_org_util_null_trace}}CxfApacheOrgUtil.prototype.ELEMENT_NODE=1;function org_apache_cxf_getNodeLocalName(a){if("localName" in a){return a.localName}else{return a.baseName}}CxfApacheOrgUtil.prototype.getNodeLocalName=org_apache_cxf_getNodeLocalName;function org_apache_cxf_getNamespaceURI(b,c){var a=null;if(b.nodeType==9){return null}else{a=org_apache_cxf_findNamespace(b,c);if(a==null){a=org_apache_cxf_getNamespaceURI(b.parentNode,c)}else{return a}}return a}function org_apache_cxf_findNamespace(d,f){var b=d.attributes;if((b!=null)&&(b.length>0)){for(var a=0;a<b.length;a++){var g=b.item(a).nodeName;var c=org_apache_cxf_getPrefix(b.item(a).nodeName);var e=org_apache_cxf_getLocalName(b.item(a).nodeName);if((f==null)&&(c==null)&&(e=="xmlns")){return b.item(a).nodeValue}else{if((c=="xmlns")&&(e==f)){return b.item(a).nodeValue}}}return null}}function org_apache_cxf_get_node_namespaceURI(a){var b=org_apache_cxf_getPrefix(a.nodeName);return org_apache_cxf_getNamespaceURI(a,b)}CxfApacheOrgUtil.prototype.getElementNamespaceURI=org_apache_cxf_get_node_namespaceURI;function org_apache_cxf_any_ns_matcher(c,b,d,a){this.style=c;this.tns=b;this.nslist=d;this.nextLocalPart=a}org_apache_cxf_any_ns_matcher.ANY="##any";org_apache_cxf_any_ns_matcher.OTHER="##other";org_apache_cxf_any_ns_matcher.LOCAL="##local";org_apache_cxf_any_ns_matcher.LISTED="listed";function org_apache_cxf_any_ns_matcher_match(c,b){switch(this.style){case org_apache_cxf_any_ns_matcher.ANY:return true;case org_apache_cxf_any_ns_matcher.OTHER:return c!=this.tns;case org_apache_cxf_any_ns_matcher.LOCAL:return c==null||c=="";case org_apache_cxf_any_ns_matcher.LISTED:for(var a in this.nslist){var d=this.nslist[a];if(d=="##local"){if((c==null||c=="")&&(this.nextLocalPart!=null&&b!=this.nextLocalPart)){return true}}else{if(d==c){return true}}}return false}}org_apache_cxf_any_ns_matcher.prototype.match=org_apache_cxf_any_ns_matcher_match;function org_apache_cxf_getPrefix(a){var c;var b=a.indexOf(":");if(b==-1){return null}else{return c=a.substring(0,b)}}function org_apache_cxf_getLocalName(a){var c;var b=a.indexOf(":");if(b==-1){return a}else{return c=a.substring(b+1,a.length)}}function org_apache_cxf_element_name_for_trace(a){if(a==null){return"Null"}else{if(a==undefined){return"Undefined"}else{var b="";if(a.namespaceURI!=null&&a.namespaceURI!=""){b=b+"{"+a.namespaceURI+"}"}return b+this.getNodeLocalName(a)}}}CxfApacheOrgUtil.prototype.traceElementName=org_apache_cxf_element_name_for_trace;function org_apache_cxf_escapeXmlEntities(a){if(a==null||a==undefined){return""}else{a=String(a);return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}CxfApacheOrgUtil.prototype.escapeXmlEntities=org_apache_cxf_escapeXmlEntities;function org_apache_cxf_isElementNil(b){if(b==null){throw"null node passed to isElementNil"}if("function"==typeof b.getAttributeNS){var a=b.getAttributeNS("http://www.w3.org/2001/XMLSchema-instance","nil");return a!=null&&a=="true"}else{var a=b.getAttribute("xsi:nil");return a!=null&&a=="true"}}CxfApacheOrgUtil.prototype.isElementNil=org_apache_cxf_isElementNil;function org_apache_cxf_getFirstElementChild(a){if(a==undefined){throw"undefined node to getFirstElementChild"}var b;for(b=a.firstChild;b!=null&&b.nodeType!=this.ELEMENT_NODE;b=b.nextSibling){}return b}CxfApacheOrgUtil.prototype.getFirstElementChild=org_apache_cxf_getFirstElementChild;function org_apache_cxf_getNextElementSibling(a){if(a==undefined){throw"undefined node to getNextElementSibling"}if(a==null){throw"null node to getNextElementSibling"}var b;for(b=a.nextSibling;b!=null&&b.nodeType!=this.ELEMENT_NODE;b=b.nextSibling){}return b}CxfApacheOrgUtil.prototype.getNextElementSibling=org_apache_cxf_getNextElementSibling;function org_apache_cxf_isNodeNamedNS(c,b,a){if(c==undefined){throw"undefined node to isNodeNamedNS"}if(b==""||b==null){if(c.namespaceURI==""||c.namespaceURI==null){return a==org_apache_cxf_getNodeLocalName(c)}else{return false}}else{return b==c.namespaceURI&&a==org_apache_cxf_getNodeLocalName(c)}}CxfApacheOrgUtil.prototype.isNodeNamedNS=org_apache_cxf_isNodeNamedNS;function org_apache_cxf_getNodeText(c){var b="";for(var a=0;a<c.childNodes.length;a++){b=b+c.childNodes[a].nodeValue}return b}CxfApacheOrgUtil.prototype.getNodeText=org_apache_cxf_getNodeText;function org_apache_cxf_begin_soap11_message(a){var b='<?xml version="1.0" encoding="UTF-8"?><soap-env:Envelope xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap-env:Body '+a+">";return b}CxfApacheOrgUtil.prototype.beginSoap11Message=org_apache_cxf_begin_soap11_message;function org_apache_cxf_end_soap11_message(){return"</soap-env:Body></soap-env:Envelope>"}CxfApacheOrgUtil.prototype.endSoap11Message=org_apache_cxf_end_soap11_message;var org_apache_cxf_base64_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function org_apache_cxf_base64_encode64array(d){var a="";var l,j,g;var k,h,f,e;var b=0;do{var c=1;l=j=g=0;l=d[b++];if(b<d.length){j=d[b++];c++}if(b<d.length){g=d[b++];c++}k=l>>2;h=((l&3)<<4)|(j>>4);if(c>1){f=((j&15)<<2)|(g>>6);if(c>2){e=g&63}else{e=64}}else{f=e=64}a=a+org_apache_cxf_base64_keyStr.charAt(k)+org_apache_cxf_base64_keyStr.charAt(h)+org_apache_cxf_base64_keyStr.charAt(f)+org_apache_cxf_base64_keyStr.charAt(e)}while(b<d.length);return a}function org_apache_cxf_base64_encode64Unicode(b){var d=new Array(2+(b.length*2));d[0]=255;d[1]=254;for(var a=0;a<b.length;a++){var e=b.charCodeAt(a);d[2+(a*2)]=e&255;d[3+(a*2)]=(e>>8)&255}return encode64array(d)}function org_apache_cxf_base64_encode64UTF8(b){var e=0;for(var c=0;c<b.length;c++){if(b.charCodeAt(c)<128){++e}else{if(b.charCodeAt(c)<2048){e+=2}else{if(b.charCodeAt(c)<65536){e+=3}else{e+=4}}}}var d=new Array(e);var a=0;for(var c=0;c<b.length;c++){if(b.charCodeAt(c)<128){d[a++]=b.charCodeAt(c)}else{if(b.charCodeAt(c)<2048){d[a++]=((b.charCodeAt(c)>>6)|192);d[a++]=((b.charCodeAt(c)&63)|128)}else{if(b.charCodeAt(c)<65536){d[a++]=((b.charCodeAt(c)>>12)|224);d[a++]=(((b.charCodeAt(c)>>6)&63)|128);d[a++]=((b.charCodeAt(c)&63)|128)}else{d[a++]=((b.charCodeAt(c)>>18)|240);d[a++]=(((b.charCodeAt(c)>>12)&63)|128);d[a++]=(((b.charCodeAt(c)>>6)&63)|128);d[a++]=((b.charCodeAt(c)&63)|128)}}}}return encode64array(d)}function org_apache_cxf_base64_decode64array(c){var a=new Array();var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{j=org_apache_cxf_base64_keyStr.indexOf(c.charAt(b++));g=org_apache_cxf_base64_keyStr.indexOf(c.charAt(b++));e=org_apache_cxf_base64_keyStr.indexOf(c.charAt(b++));d=org_apache_cxf_base64_keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a[a.length]=k;if(e!=64){a[a.length]=h}if(d!=64){a[a.length]=f}}while(b<c.length);return a}var org_apache_cxf_base64_hD="0123456789ABCDEF";function org_apache_cxf_base64_d2h(b){var a=org_apache_cxf_base64_hD.substr(b&15,1);while(b>15){b>>=4;a=org_apache_cxf_base64_hD.substr(b&15,1)+a}return a}function org_apache_cxf_base64_decode64Unicode(e){var b=org_apache_cxf_base64_decode64array(e);var f;var d="";if(b[0]==255&&b[1]==254){f=true}else{if(b[0]==254&&b[1]==255){f=false}else{confirm("Problem with decoding utf-16")}}for(var a=2;a<b.length;a=a+2){var g;if(f){g=(b[a+1]<<8)|b[a]}else{g=(b[a]<<8)|b[a+1]}d=d+String.fromCharCode(g)}return d}function org_apache_cxf_base64_decode64UTF8(b){var a=org_apache_cxf_base64_decode64array(b);var g="";var h=new Array();var f=0;var j;var e;var d;while(f<a.length){j=a[f];if(j<128){g+=String.fromCharCode(j);f++}else{if((j>191)&&(j<224)){e=a[f+1];g+=String.fromCharCode(((j&31)<<6)|(e&63));f+=2}else{e=a[f+1];d=a[f+2];g+=String.fromCharCode(((j&15)<<12)|((e&63)<<6)|(d&63));f+=3}}}return g}var org_apache_cxf_XOP_NS="http://www.w3.org/2004/08/xop/include";function org_apache_cxf_deserialize_MTOM_or_base64(d){var a=this.getFirstElementChild(d);if(a==null){var c=this.getNodeText(d);return org_apache_cxf_base64_decode64UTF8(c)}if(!org_apache_cxf_isNodeNamedNS(a,org_apache_cxf_XOP_NS,"Include")){this.trace("Invalid child element of base64 element");return""}var b=a.getAttribute("href");if(!b){this.trace("missing href for xop:Include");return""}if(b.length<4||b.substr(0,4)!="cid:"){this.trace("Non-cid href in xop:Include: "+b);return""}var f=b.substr(4);var e=this.client.parts[f];if(!e){this.trace("xop:Include href points to missing attachment: "+b);return""}return e.data}CxfApacheOrgUtil.prototype.deserializeBase64orMom=org_apache_cxf_deserialize_MTOM_or_base64;function CxfApacheOrgClient(a){a.trace("Client constructor");this.utils=a;a.client=this;this.mtomparts=[];this.soapAction="";this.messageType="CALL";this.onsuccess=null;this.onerror=null;this.READY_STATE_UNINITIALIZED=0;this.READY_STATE_LOADING=1;this.READY_STATE_LOADED=2;this.READY_STATE_INTERACTIVE=3;this.READY_STATE_DONE=4}var org_apache_cxf_pad_string_PAD_LEFT=0;var org_apache_cxf_pad_string_PAD_RIGHT=1;var org_apache_cxf_pad_string_PAD_BOTH=2;function org_apache_cxf_pad_string(c,b,e,d){var a=new String();b=isNaN(b)?0:b-c.length;e=typeof(e)=="string"?e:" ";if(d==org_apache_cxf_pad_string_PAD_BOTH){c=org_apache_cxf_pad_sring(Math.floor(b/2)+c.length,e,org_apache_cxf_pad_string_PAD_LEFT);return(org_apache_cxf_pad_string(Math.ceil(b/2)+c.length,e,org_apache_cxf_pad_string_PAD_RIGHT))}while((b-=e.length)>0){a+=e}a+=e.substr(0,b+e.length);return(d==org_apache_cxf_pad_string_PAD_LEFT?a.concat(c):c.concat(a))}function org_apache_cxf_random_int(b,a){if(!isFinite(b)){b=0}if(!isFinite(a)){a=1}return Math.floor((Math.random()%1)*(a-b+1)+b)}function org_apache_cxf_random_hex_string(a){var b=org_apache_cxf_random_int(0,Math.pow(16,a)-1);return org_apache_cxf_pad_string(b.toString(16),a,"0",org_apache_cxf_pad_string_PAD_LEFT)}function org_apache_cxf_make_uuid(f){switch((f||"v4").toUpperCase()){case"V4":var d=org_apache_cxf_random_hex_string(8);var c=org_apache_cxf_random_hex_string(4);var e="4"+org_apache_cxf_random_hex_string(3);var b=org_apache_cxf_random_int(0,255);b=((b&~(1<<6))|(1<<7)).toString(16);var a=org_apache_cxf_random_hex_string(2);var g=org_apache_cxf_random_hex_string(12);return(d+"-"+c+"-"+e+"-"+b+a+"-"+g);case"NIL":return"00000000-0000-0000-0000-000000000000"}return null}var ORG_APACHE_CXF_XMLHTTPREQUEST_MS_PROGIDS=new Array("Msxml2.XMLHTTP.7.0","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP");function org_apache_cxf_getXMLHttpRequest(){var a=null;try{a=new XMLHttpRequest();return a}catch(c){}if(window.ActiveXObject!=null){var d=false;for(var b=0;b<ORG_APACHE_CXF_XMLHTTPREQUEST_MS_PROGIDS.length&&!d;b++){try{a=new ActiveXObject(ORG_APACHE_CXF_XMLHTTPREQUEST_MS_PROGIDS[b]);d=true}catch(c){}}if(!d){this.utils.trace("Unable to get any Microsoft XML HttpRequest object.");throw"org_apache_cxf no Microsoft XMLHttpRequest"}}return a}CxfApacheOrgClient.prototype.getXMLHttpRequest=org_apache_cxf_getXMLHttpRequest;var ORG_APACHE_CXF_MTOM_REQUEST_HEADER='Content-Type: application/xop+xml; type="text/xml"; charset=utf-8\r\n';function org_apache_cxf_client_request(c,l,a,n,e){this.utils.trace("request "+c);this.url=c;this.sync=n;this.req=null;if(a){this.method=a}else{if(l){this.method="POST"}else{this.method="GET"}}try{this.req=this.getXMLHttpRequest()}catch(g){this.utils.trace("Error creating XMLHttpRequest: "+g);this.req=null}if(this.req==null){this.utils.trace("Unable to create request object.");throw"ORG_APACHE_CXF_NO_REQUEST_OBJECT"}this.utils.trace("about to open "+this.method+" "+this.url);this.req.open(this.method,this.url,!this.sync);var f;if(this.mtomparts.length>0){var b=org_apache_cxf_make_uuid("v4");f="@_bOuNDaRy_"+b;var p='multipart/related; start-info="text/xml"; type="application/xop+xml"; boundary="'+f+'"';this.req.setRequestHeader("Content-Type",p)}else{this.req.setRequestHeader("Content-Type","text/xml;charset=utf-8")}if(e){for(var j in e){if(e.hasOwnProperty(j)){this.req.setRequestHeader(j,e[j])}}}this.req.setRequestHeader("SOAPAction",this.soapAction);this.req.setRequestHeader("MessageType",this.messageType);var o=this;this.req.onreadystatechange=function(){o.onReadyState()};this.utils.trace("about to send data"+this.method+" "+this.url);var k;if(this.mtomparts.length==0){k=l}else{k="--"+f+"\r\n";k=k+ORG_APACHE_CXF_MTOM_REQUEST_HEADER+"\r\n";k=k+l;for(var m in this.mtomparts){var d=this.mtomparts[m];k+="\r\n\r\n--"+f+"\r\n";k+=d}k+="--"+f+"--\r\n"}this.req.send(k)}CxfApacheOrgClient.prototype.request=org_apache_cxf_client_request;function org_apache_cxf_trim_string(a){return a.replace(/^\s+|\s+$/g,"")}function org_apache_cxf_parse_mime_keyword_value_pairs(c){var b=[];for(var a=1;a<c.length;a=a+1){var g=c[a];var f=g.indexOf("=");if(f!=-1){var e=g.substr(0,f);var d=g.substr(f+1);d=org_apache_cxf_trim_string(d);if(d.charAt(0)=='"'){d=d.substr(1,d.length-2)}if(d.charAt(0)=="'"){d=d.substr(1,d.length-2)}b[org_apache_cxf_trim_string(e.toLowerCase())]=d}}return b}function org_apache_cxf_regexp_escape(b){if(!arguments.callee.sRE){var a=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+a.join("|\\")+")","g")}return b.replace(arguments.callee.sRE,"\\$1")}function org_apache_cxf_parse_multipart_related(){var s=this.req.getResponseHeader("content-type");if(!s){return false}var o=s.split(/\s*;\s*/);var e=o[0].toLowerCase();if(e!="multipart/related"){return false}var u=org_apache_cxf_parse_mime_keyword_value_pairs(o);var r=u.boundary;if(!r){return false}r="--"+r;var l=this.req.responseText;var p=l.split(r);this.parts=[];for(var n=1;n<p.length-1;n++){var t=false;var k=0;var g=p[n];var c=[];nextHeaderLine:for(var b=g.indexOf("\r",k);b!=-1;k=b+1,b=g.indexOf("\r",k)){var a=g.slice(k,b);if(a==""){if(g.charAt(b+1)=="\n"){b++}if(t){break nextHeaderLine}else{continue nextHeaderLine}}t=true;var q=a.indexOf(":");var m=a.slice(0,q).toLowerCase();var h=a.substr(q+1);c[m]=org_apache_cxf_trim_string(h);if(g.charAt(b+1)=="\n"){b++}}var f=new Object();if(g.charAt(k+1)=="\n"){k=k+1}f.data=g.substr(k);f.contentType=c["content-type"];if(n>1){var j=c["content-id"];j=j.substr(1,j.length-2);f.cid=j;this.parts[j]=f}else{var w;if(window.ActiveXObject){w=new ActiveXObject("Microsoft.XMLDOM");w.async="false";w.loadXML(f.data)}else{var d=new DOMParser();w=d.parseFromString(f.data,"text/xml")}this.mpResponseXML=w}}return true}CxfApacheOrgClient.prototype.parseMultipartRelated=org_apache_cxf_parse_multipart_related;function org_apache_cxf_client_onReadyState(){var c=this.req;var b=c.readyState;this.utils.trace("onreadystatechange "+b);if(b==this.READY_STATE_DONE){var a;try{a=c.status}catch(f){this.utils.trace("onreadystatechange DONE ERROR retrieving status (connection error?)");if(this.onerror!=null){this.onerror(f)}return}this.utils.trace("onreadystatechange DONE "+a);if(a==200||a==0){if(this.onsuccess!=null){if(!c.responseXML){if(this.parseMultipartRelated()){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1){var d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(c.responseText);this.onsuccess(this,d);return}else{this.onsuccess(this,this.mpResponseXML);return}}if(this.onerror!=null){this.onerror(this);return}}if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1){var d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(c.responseText);this.onsuccess(this,d)}else{this.onsuccess(this,c.responseXML)}}}else{this.utils.trace("onreadystatechange DONE ERROR "+c.getAllResponseHeaders()+" "+c.statusText+" "+c.responseText);if(this.onerror!=null){this.onerror(this)}}}}CxfApacheOrgClient.prototype.onReadyState=org_apache_cxf_client_onReadyState;function org_apache_cxf_package_mtom(c){var b=org_apache_cxf_make_uuid("v4");var d='<xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:'+b+'" />';var a='Content-Type: text/plain; charset="utf-8";\r\nContent-ID: <'+b+">\r\n\r\n"+c+"\r\n";this.client.mtomparts.push(a);return d}CxfApacheOrgUtil.prototype.packageMtom=org_apache_cxf_package_mtom;function org_apache_cxf_any_holder(c,a,b){this.typeMarker="org_apache_cxf_any_holder";this.namespaceURI=c;this.localName=a;this.qname="{"+c+"}"+a;this.object=b;this.raw=false}function org_apache_cxf_raw_any_holder(a){this.typeMarker="org_apache_cxf_raw_any_holder";this.xml=a;this.raw=true;this.xsiType=false}function org_apache_cxf_raw_typed_any_holder(c,a,b){this.typeMarker="org_apache_cxf_raw_any_holder";this.namespaceURI=c;this.localName=a;this.xml=b;this.raw=true;this.xsiType=true}function org_apache_cxf_get_xsi_type(d){var b=d.attributes;if((b!=null)&&(b.length>0)){for(var a=0;a<b.length;a++){var g=b.item(a).nodeName;var c=org_apache_cxf_getPrefix(b.item(a).nodeName);var e=org_apache_cxf_getLocalName(b.item(a).nodeName);if(e=="type"){var f=org_apache_cxf_getNamespaceURI(d,c);if(f==org_apache_cxf_XSI_namespace_uri){return b.item(a).nodeValue}}}return null}}function org_apache_cxf_deserialize_anyType(k,f){var g=org_apache_cxf_get_xsi_type(f);if(g!=null){var e=org_apache_cxf_getPrefix(g);var d=org_apache_cxf_getLocalName(g);var a=org_apache_cxf_getNamespaceURI(f,e);if(a==org_apache_cxf_XSD_namespace_uri){var c=f.firstChild;if(c==null){return null}var h=c.nodeValue;if(h==null){return null}if(d=="int"||d=="unsignedInt"||d=="long"||d=="unsignedLong"){return parseInt(h)}if(d=="float"||d=="double"){return parseFloat(h)}if(d=="boolean"){return h=="true"}return h}var b="{"+a+"}"+d;var j=k.interfaceObject.globalElementDeserializers[b];if(j!=null){return j(k,f)}}return f}function localizarCarreteras(a,c,b,d){callejeroProxy.localizarCarreterasSrs(function(e){localizarCarreterasResponse(e,d)},errorCallback,a,c,"1","1","-1",b)}function localizarCarreterasResponse(c,g){var b=new Array();var f=c.getElementsByTagName("multiRef");for(var e=0;e<f.length;e++){var a=new road();if(getBrowserName()=="msie"){var d=f[e].childNodes;a.carretera=d[0].text;a.pk=d[1].text;a.provincia=d[2].text;a.x=d[3].text;a.y=d[4].text;b.push(a)}else{var d=f[e].childNodes;a.carretera=d[0].textContent;a.pk=d[1].textContent;a.provincia=d[2].textContent;a.x=d[3].textContent;a.y=d[4].textContent;b.push(a)}}b.sort(compareRoad);(g&&(g(b)))}function obtenerTiposServicios(){callejeroProxy.obtenerTiposServicios(obtenerTiposServiciosResponse,errorCallback)}function obtenerTiposServiciosResponse(b){arrayTiposServicios=new Array();var e=b.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var c=e[d].childNodes;var a=new tipoServicio();if(getBrowserName()=="msie"){a.codigo=c[0].text;a.nombre=c[1].text;arrayTiposServicios.push(a)}else{a.codigo=c[0].textContent;a.nombre=c[1].textContent;arrayTiposServicios.push(a)}}arrayTiposServicios.sort(compareSede)}function obtenerTiposVia(){callejeroProxy.obtenerTiposVia(obtenerTiposViaResponse,errorCallback)}function obtenerTiposViaResponse(a){arrayVias=new Array();var c=a.getElementsByTagName("multiRef");for(var b=0;b<c.length;b++){if(getBrowserName()=="msie"){arrayVias.push(c[b].text)}else{arrayVias.push(c[b].textContent)}}arrayVias.sort()}function localizarNucleos(a,b,c){callejeroProxy.localizarNucleosSrs(function(d){localizarNucleosResponse(d,c)},errorCallback,a,"1","1","-1",b)}function localizarNucleosResponse(a,g){var e=new Array();var d=a.getElementsByTagName("multiRef");for(var c=0;c<d.length;c++){var f=new nucleo();if(getBrowserName()=="msie"){var b=d[c].childNodes;if(b.length==5){f.extent=calculaExtension(a,b[0].attributes[0].text);f.idnucleo=b[1].text;f.municipio=b[2].text;f.nombre=b[3].text;f.tipo=b[4].text;e.push(f)}}else{var b=d[c].childNodes;if(b.length==5){f.extent=calculaExtension(a,b[0].attributes[0].textContent);f.idnucleo=b[1].textContent;f.municipio=b[2].textContent;f.nombre=b[3].textContent;f.tipo=b[4].textContent;e.push(f)}}}e.sort(compareSede);(g&&g(e))}function calculaExtension(b,e){var f="";var d=b.getElementsByTagName("multiRef");for(var c=0;c<d.length;c++){if(getBrowserName()=="msie"){var a="#"+d[c].attributes[0].nodeValue;if(a==e){f=d[c].childNodes[0].text+","+d[c].childNodes[1].text+","+d[c].childNodes[2].text+","+d[c].childNodes[3].text}}else{var a="#"+d[c].attributes[0].nodeValue;if(a==e){f=d[c].childNodes[0].textContent+","+d[c].childNodes[1].textContent+","+d[c].childNodes[2].textContent+","+d[c].childNodes[3].textContent}}}return f}function obtenerMunicipios(a){callejeroProxy.obtenerMunicipios(obtenerMunicipiosResponse,errorCallback,a)}function obtenerMunicipiosResponse(b){arrayMun=new Array();var e=b.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var a=new municipio();if(getBrowserName()=="msie"){var c=e[d].childNodes;a.name=c[2].text;a.codINE=c[0].text;arrayMun.push(a)}else{var c=e[d].childNodes;a.name=c[2].textContent;a.codINE=c[0].textContent;arrayMun.push(a)}}arrayMun.sort(compareMuni)}function obtenerDirecciones(f,c,a,b,d,e){callejeroProxy.geocoderListSrs(function(g){obtenerDireccionesResponse(g,e)},errorCallback,f,c,a,b,d)}function obtenerDireccionesResponse(a,g){var f=[];var e=a.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var c=new address();if(getBrowserName()=="msie"){var b=e[d].childNodes;c.similarity=b[8].text;c.streetName=b[9].text;c.streetNumber=b[10].text;c.streetType=b[11].text;c.coordX=b[0].text;c.coordY=b[1].text;c.rotulo=b[7].text;c.codINE=b[3].text;f.push(c)}else{var b=e[d].childNodes;c.similarity=b[8].textContent;c.streetName=b[9].textContent;c.streetNumber=b[10].textContent;c.streetType=b[11].textContent;c.coordX=b[0].textContent;c.coordY=b[1].textContent;c.rotulo=b[7].textContent;c.codINE=b[3].textContent;f.push(c)}}f.sort(compareSimil);(g&&g(f))}function obtenerDireccionesResponseAsync(a,g){var f=new Array();var e=a.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var c=new address();if(getBrowserName()=="msie"){var b=e[d].childNodes;c.similarity=b[8].text;c.streetName=b[9].text;c.streetNumber=b[10].text;c.streetType=b[11].text;c.coordX=b[0].text;c.coordY=b[1].text;c.rotulo=b[7].text;c.codINE=b[3].text;c.matchLevel=b[6].text;f.push(c)}else{var b=e[d].childNodes;c.similarity=b[8].textContent;c.streetName=b[9].textContent;c.streetNumber=b[10].textContent;c.streetType=b[11].textContent;c.coordX=b[0].textContent;c.coordY=b[1].textContent;c.rotulo=b[7].textContent;c.codINE=b[3].textContent;c.matchLevel=b[6].textContent;f.push(c)}}f.sort(compareSimil);g(f)}function localizarSedes(b,a,c,d,e){callejeroProxy.localizarSedesSrs(function(f){localizarSedesResponse(f,e)},errorCallback,b,a,c,"1","1","-1",d)}function localizarSedesResponse(a,g){var f=new Array();var e=a.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var c=new sede();if(getBrowserName()=="msie"){var b=e[d].childNodes;c.direccion=b[0].text;c.municipio=b[1].text;c.nombre=b[2].text;c.numero=b[3].text;c.organismo=b[4].text;c.unidadorganizativa=b[5].text;c.x=b[6].text;c.y=b[7].text;f.push(c)}else{var b=e[d].childNodes;c.direccion=b[0].textContent;c.municipio=b[1].textContent;c.nombre=b[2].textContent;c.numero=b[3].textContent;c.organismo=b[4].textContent;c.unidadorganizativa=b[5].textContent;c.x=b[6].textContent;c.y=b[7].textContent;f.push(c)}}f.sort(compareSede);(g&&g(f))}function localizarServicios(a,c,b,d,e){callejeroProxy.localizarServiciosSrs(function(f){localizarServiciosResponse(f,e)},errorCallback,a,c,b,"1","1","-1",d)}function localizarServiciosResponse(b,g){var f=new Array();var e=b.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var a=new servicio();if(getBrowserName()=="msie"){var c=e[d].childNodes;a.alias=c[0].text;a.municipio=c[1].text;a.x=c[2].text;a.y=c[3].text;f.push(a)}else{var c=e[d].childNodes;a.alias=c[0].textContent;a.municipio=c[1].textContent;a.x=c[2].textContent;a.y=c[3].textContent;f.push(a)}}f.sort(compareServicios);(g&&(g(f)))}function busquedaGeneral(e,c,a,d,b){var f=function(h){var g=a||busquedaGeneralResponse;g(e,h,c)};callejeroProxy.buscarCallejeroSrsMunicipio(f,function(h,g){Mapea.Util.showErrorMessage(g)},e,d,b)}function busquedaGeneralResponse(n,c,p){var h=function(s,t){var u="";$(s).find(t).each(function(){u=$($(this).children()[0]).text()+","+$($(this).children()[1]).text()+","+$($(this).children()[2]).text()+","+$($(this).children()[3]).text()});return u};var f=[];var g=[];var r=c.getElementsByTagName("multiRef");var m=getBrowserName();var j="";var b=0;if(n.indexOf(",")!=-1){n=n.split(",")[0]}for(var e=0,a=r.length;e<a;e++){var l=r[e].getAttribute("xsi:type");if(l==null){l=r[e].getAttribute("type")}if(l!=null){var k=r[e].childNodes;var q=l.indexOf(":");l=l.substring(q+1,l.length);var d=null;switch(l){case"GeocoderCallejero":d=new address();d.similarity=$(k[10]).text();d.streetName=$(k[11]).text();d.streetNumber=$(k[12]).text();d.streetType=$(k[13]).text();d.coordX=$(k[1]).text();d.coordY=$(k[2]).text();d.rotulo=$(k[9]).text();d.codINE=$(k[4]).text();d.provincia=$(k[0]).text();d.municipio=$(k[5]).text();j=$(k[11]).text();break;case"NucleoCallejero":d=new nucleo();if(k.length==6){d.extent=h(c,$(k[0].attributes[0]).val());d.idnucleo=$(k[1]).text();d.municipio=$(k[2]).text();d.nombre=$(k[3]).text();d.provincia=$(k[4]).text();d.tipo=$(k[5]).text();j=$(k[3]).text();d.similarity=LetterPairSimilarity.calculaParecido(n,j,"","","","")}break;case"PuntoKilometrico":d=new road();d.carretera=$(k[0]).text();d.pk=$(k[1]).text();d.provincia=$(k[2]).text();d.x=$(k[3]).text();d.y=$(k[4]).text();j=$(k[0]).text();d.similarity=LetterPairSimilarity.calculaParecido(n,j,"","","","");break;case"Servicio":d=new servicio();d.alias=$(k[0]).text();d.municipio=$(k[1]).text();d.x=$(k[2]).text();d.y=$(k[3]).text();d.similarity=1;break;case"Sede":d=new sede();d.direccion=$(k[0]).text();d.municipio=$(k[1]).text();d.nombre=$(k[2]).text();d.numero=$(k[3]).text();d.organismo=$(k[4]).text();d.unidadorganizativa=$(k[5]).text();d.x=$(k[6]).text();d.y=$(k[7]).text();j=$(k[2]).text();d.similarity=LetterPairSimilarity.calculaParecido(n,j,"","","","");break}if(d!=null){if(j!=null){var o=LetterPairSimilarity.calculaParecidoContenido(j,n);d.similarity=parseFloat(d.similarity)+o}if(d.similarity>=b){f.push(d)}else{g.push(d)}}}}if(f.length==0){f=new Array().concat(g)}f.sort(compareObj);if(p!=null){p(f)}}function errorCallback(b,a){Mapea.Util.showErrorMessage(a)}function address(){this.streetName="";this.streetNumber="";this.similarity="";this.streetType="";this.coordX="";this.coordY="";this.rotulo="";this.codINE=""}function municipio(){this.name="";this.codINE=""}function sede(){this.direccion="";this.municipio="";this.nombre="";this.numero="";this.organismo="";this.unidadorganizativa="";this.x="";this.y=""}function tipoServicio(){this.codigo="";this.nombre=""}function nucleo(){this.extent="";this.idnucleo="";this.municipio="";this.nombre="";this.tipo=""}function servicio(){this.alias="";this.municipio="";this.x="";this.y=""}function road(){this.carretera="";this.pk="";this.provincia="";this.x="";this.y=""}function compareMuni(d,c){var f=d.name.toLowerCase();var e=c.name.toLowerCase();if(f<e){return -1}if(f>e){return 1}return 0}function compareSede(d,c){var f=d.nombre.toLowerCase();var e=c.nombre.toLowerCase();if(f<e){return -1}if(f>e){return 1}return 0}function compareServicios(d,c){var f=d.alias.toLowerCase();var e=c.alias.toLowerCase();if(f<e){return -1}if(f>e){return 1}return 0}function compareSimil(d,c){var f=c.similarity-d.similarity;if(f==0){var g=d.streetName.toLowerCase();var e=c.streetName.toLowerCase();if(g<e){return -1}if(g>e){return 1}return 0}else{return f}}function compareRoad(d,c){var f=d.carretera.toLowerCase();var e=c.carretera.toLowerCase();if(f<e){return -1}else{if(f>e){return 1}else{return d.pk-c.pk}}}function getBrowserName(){var b="";var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")!=-1){b="opera"}else{if(a.indexOf("msie")!=-1){b="msie"}else{if(a.indexOf("safari")!=-1){b="safari"}else{if(a.indexOf("mozilla")!=-1){if(a.indexOf("firefox")!=-1){b="firefox"}else{b="mozilla"}}}}}return b}var callejeroInitCb=null;function autocompleterSigc(d,b,a,c){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.autocompletarDireccionMunicipio(autocompleterSigcResponse,errorCallback,d,b,c)}function autocompleterSigcResponse(response){var tags=response.getElementsByTagName("autocompletarDireccionMunicipioReturn");sigcMap.arrayAuto=new Array();var browserName=getBrowserName();for(var i=0,nl=tags.length;i<nl;i++){var type=tags[i].getAttribute("xsi:type");if(type==null){type=tags[i].getAttribute("type")}if(type!=null){var ipuntos=type.indexOf(":");type=type.substring(ipuntos+1,type.length);if(type!=null&&type=="string"){var street="";if(browserName=="msie"){street=tags[i].text}else{street=tags[i].textContent}if(street!=null){sigcMap.arrayAuto.push(street)}}}}if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayAuto);callejeroInitCb=null}}function busquedaCallejeroSigc(c,a,b,d){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}sigcMap.querySearch=c;callejeroProxy.buscarCallejeroSrsMunicipio(busquedaCallejeroSigcResponse,errorCallback,c,b,d)}function busquedaCallejeroSigcResponse(response){sigcMap.arrayBC=new Array();var rejects=new Array();var tags=response.getElementsByTagName("multiRef");var browserName=getBrowserName();var querySearchString=sigcMap.querySearch;var similarityString="";var umbral=0;if(window.similarityUmbral!=null){umbral=window.similarityUmbral}if(querySearchString.indexOf(",")!=-1){querySearchString=querySearchString.split(",")[0]}for(var i=0,nl=tags.length;i<nl;i++){var type=tags[i].getAttribute("xsi:type");if(type==null){type=tags[i].getAttribute("type")}if(type!=null){var args=tags[i].childNodes;var ipuntos=type.indexOf(":");type=type.substring(ipuntos+1,type.length);var obj=null;if(browserName=="msie"){switch(type){case"GeocoderCallejero":obj=new address();obj.similarity=args[10].text;obj.streetName=args[11].text;obj.streetNumber=args[12].text;obj.streetType=args[13].text;obj.coordX=args[1].text;obj.coordY=args[2].text;obj.rotulo=args[9].text;obj.codINE=args[4].text;obj.provincia=args[0].text;obj.municipio=args[5].text;similarityString=args[11].text;break;case"NucleoCallejero":obj=new nucleo();if(args.length==6){obj.extent=calculaExtension(response,args[0].attributes[0].text);obj.idnucleo=args[1].text;obj.municipio=args[2].text;obj.nombre=args[3].text;obj.provincia=args[4].text;obj.tipo=args[5].text;similarityString=args[3].text;obj.similarity=LetterPairSimilarity.calculaParecido(querySearchString,similarityString,"","","","")}break;case"PuntoKilometrico":obj=new road();obj.carretera=args[0].text;obj.pk=args[1].text;obj.provincia=args[2].text;obj.x=args[3].text;obj.y=args[4].text;similarityString=args[0].text;obj.similarity=LetterPairSimilarity.calculaParecido(querySearchString,similarityString,"","","","");break;case"Servicio":obj=new servicio();obj.alias=args[0].text;obj.municipio=args[1].text;obj.x=args[2].text;obj.y=args[3].text;obj.similarity=1;break;case"Sede":obj=new sede();obj.direccion=args[0].text;obj.municipio=args[1].text;obj.nombre=args[2].text;obj.numero=args[3].text;obj.organismo=args[4].text;obj.unidadorganizativa=args[5].text;obj.x=args[6].text;obj.y=args[7].text;similarityString=args[2].text;obj.similarity=LetterPairSimilarity.calculaParecido(querySearchString,similarityString,"","","","");break}}else{switch(type){case"GeocoderCallejero":obj=new address();obj.similarity=args[10].textContent;obj.streetName=args[11].textContent;obj.streetNumber=args[12].textContent;obj.streetType=args[13].textContent;obj.coordX=args[1].textContent;obj.coordY=args[2].textContent;obj.rotulo=args[9].textContent;obj.codINE=args[4].textContent;obj.provincia=args[0].textContent;obj.municipio=args[5].textContent;similarityString=args[11].textContent;break;case"NucleoCallejero":obj=new nucleo();if(args.length==6){obj.extent=calculaExtension(response,args[0].attributes[0].textContent);obj.idnucleo=args[1].textContent;obj.municipio=args[2].textContent;obj.nombre=args[3].textContent;obj.provincia=args[4].textContent;obj.tipo=args[5].textContent;similarityString=args[3].textContent;obj.similarity=LetterPairSimilarity.calculaParecido(querySearchString,similarityString,"","","","")}break;case"PuntoKilometrico":obj=new road();obj.carretera=args[0].textContent;obj.pk=args[1].textContent;obj.provincia=args[2].textContent;obj.x=args[3].textContent;obj.y=args[4].textContent;similarityString=args[0].textContent;obj.similarity=LetterPairSimilarity.calculaParecido(querySearchString,similarityString,"","","","");break;case"Servicio":obj=new servicio();obj.alias=args[0].textContent;obj.municipio=args[1].textContent;obj.x=args[2].textContent;obj.y=args[3].textContent;obj.similarity=1;break;case"Sede":obj=new sede();obj.direccion=args[0].textContent;obj.municipio=args[1].textContent;obj.nombre=args[2].textContent;obj.numero=args[3].textContent;obj.organismo=args[4].textContent;obj.unidadorganizativa=args[5].textContent;obj.x=args[6].textContent;obj.y=args[7].textContent;similarityString=args[2].textContent;obj.similarity=LetterPairSimilarity.calculaParecido(querySearchString,similarityString,"","","","");break}}if(obj!=null){if(similarityString!=null){var points=LetterPairSimilarity.calculaParecidoContenido(similarityString,querySearchString);obj.similarity=parseFloat(obj.similarity)+points}if(obj.similarity>=umbral){sigcMap.arrayBC.push(obj)}else{rejects.push(obj)}}}}if(sigcMap.arrayBC.length==0){sigcMap.arrayBC=new Array().concat(rejects)}sigcMap.arrayBC.sort(compareObj);sigcMap.querySearch=null;if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayBC);callejeroInitCb=null}}var geosearchSigc=function(e,a,f,b,c,d,h,g,j){sigcMap.querySearch=e;callejeroProxy.geosearch(function(k){geosearchSigcResponse(k,j)},errorCallback,e,a,f,b,c,d,h,g)};var geosearchSigcResponse=function(a,d){var c={textResults:[],spatialResults:[],referenceResults:[]};var s=$(a);var k=s.find("statusCode");if(k.length>0){c.statusCode=$(k[0]).text()}var h=s.find("spatial");if(h.length>0){c.spatial=($(h[0]).text().trim().toLowerCase()=="true")}var o=s.find("textNumFound");if(o.length>0){c.textNumFound=$(o[0]).text()}var g=s.find("spatialNumFound");if(g.length>0){c.spatialNumFound=$(g[0]).text()}var b=s.find("referenceNumFound");if(b.length>0){c.referenceNumFound=$(b[0]).text()}var n=s.find("textResults");var j=s.find("spatialResults");var e=s.find("referenceResults");var q=[];for(var p=0,r=n.length;p<r;p++){var l=$(n[p]).attr("href");if(l&&(l!=null)&&(l!="")){q.push(l)}}var m=[];for(var p=0,r=j.length;p<r;p++){var l=$(j[p]).attr("href");if(l&&(l!=null)&&(l!="")){m.push(l)}}var f=[];for(var p=0,r=e.length;p<r;p++){var l=$(e[p]).attr("href");if(l&&(l!=null)&&(l!="")){f.push(l)}}c.textResults=getGeodocumentsByHrefs(q,s);c.spatialResults=getGeodocumentsByHrefs(m,s);c.referenceResults=getGeodocumentsByHrefs(f,s);(d&&d.apply(this,[c]))};function getGeodocumentsByHrefs(h,k){var c=[];for(var f=0,b=h.length;f<b;f++){var o={keys:[],values:[],geometric:false};var d=h[f];o.geometric=k.find(d).find("geometric").text();var p=k.find(d).find("fields").attr("href");var n=k.find(p).find("item").find("key");var m=k.find(p).find("item").find("value");for(var g=0,a=n.length;g<a;g++){var l=$(n[g]).text();var j=$(m[g]).text();o.keys.push(l);o.values.push(j)}c.push(o)}return c}function localizarCarreterasSigc(b,d,a,c){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.localizarCarreterasSrs(localizarCarreterasSigcResponse,errorCallback,b,d,"1","1","-1",c)}function localizarCarreterasSigcResponse(response){sigcMap.arrayRoads=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var roadaux=new road();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;roadaux.carretera=args[0].text;roadaux.pk=args[1].text;roadaux.provincia=args[2].text;roadaux.x=args[3].text;roadaux.y=args[4].text;sigcMap.arrayRoads.push(roadaux)}else{var args=nombres[i].childNodes;roadaux.carretera=args[0].textContent;roadaux.pk=args[1].textContent;roadaux.provincia=args[2].textContent;roadaux.x=args[3].textContent;roadaux.y=args[4].textContent;sigcMap.arrayRoads.push(roadaux)}}sigcMap.arrayRoads.sort(compareRoad);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayRoads);callejeroInitCb=null}}function obtenerTiposServiciosSigc(a){callejeroProxy.obtenerTiposServicios(function(b){obtenerTiposServiciosResponseSigc(b,a)},errorCallback)}function obtenerTiposServiciosResponseSigc(b,f){sigcMap.arrayServicesType=new Array();var e=b.getElementsByTagName("multiRef");for(var d=0;d<e.length;d++){var c=e[d].childNodes;var a=new tipoServicio();if(getBrowserName()=="msie"){a.codigo=c[0].text;a.nombre=c[1].text;sigcMap.arrayServicesType.push(a)}else{a.codigo=c[0].textContent;a.nombre=c[1].textContent;sigcMap.arrayServicesType.push(a)}}sigcMap.arrayServicesType.sort(compareSede);(f&&f(sigcMap.arrayServicesType))}function obtenerTiposViaSigc(a){callejeroProxy.obtenerTiposVia(function(b){obtenerTiposViaResponseSigc(b,a)},errorCallback)}function obtenerTiposViaResponseSigc(a,d){sigcMap.arrayRoadsType=new Array();var c=a.getElementsByTagName("multiRef");for(var b=0;b<c.length;b++){if(getBrowserName()=="msie"){sigcMap.arrayRoadsType.push(c[b].text)}else{sigcMap.arrayRoadsType.push(c[b].textContent)}}sigcMap.arrayRoadsType.sort();(d&&d(sigcMap.arrayRoadsType))}function localizarNucleosSigc(b,a,c){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.localizarNucleosSrs(localizarNucleosResponseSigc,errorCallback,b,"1","1","-1",c)}function localizarNucleosResponseSigc(response){sigcMap.arrayLocality=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var nucleop=new nucleo();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;if(args.length==5){nucleop.extent=args[0].text;nucleop.idnucleo=args[1].text;nucleop.municipio=args[2].text;nucleop.nombre=args[3].text;nucleop.tipo=args[4].text;sigcMap.arrayLocality.push(nucleop)}}else{var args=nombres[i].childNodes;if(args.length==5){nucleop.extent=calculaExtension(response,args[0].attributes[0].textContent);nucleop.idnucleo=args[1].textContent;nucleop.municipio=args[2].textContent;nucleop.nombre=args[3].textContent;nucleop.tipo=args[4].textContent;sigcMap.arrayLocality.push(nucleop)}}}sigcMap.arrayLocality.sort(compareSede);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayLocality);callejeroInitCb=null}}function calculaExtension(d,c){var h="";var b=d.getElementsByTagName("multiRef");var g=getBrowserName();var j=c.substring(1,c.length);for(var e=0,a=b.length;e<a;e++){var f="";if(g=="msie"){if(b[e].getAttribute("id")!=null){f=b[e].getAttribute("id")}}else{if(b[e].attributes.id!=null){f=b[e].attributes.id}}if(g=="msie"){if(f==j){h=b[e].childNodes[0].text+","+b[e].childNodes[1].text+","+b[e].childNodes[2].text+","+b[e].childNodes[3].text}}else{if(f.textContent==j){h=b[e].childNodes[0].textContent+","+b[e].childNodes[1].textContent+","+b[e].childNodes[2].textContent+","+b[e].childNodes[3].textContent}}}return h}function obtenerMunicipiosSigc(b,a){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.obtenerMunicipios(obtenerMunicipiosResponseSigc,errorCallback,b)}function obtenerMunicipiosResponseSigc(response){sigcMap.arrayLocFromProv=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var muni=new municipio();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;muni.name=args[2].text;muni.codINE=args[0].text;sigcMap.arrayLocFromProv.push(muni)}else{var args=nombres[i].childNodes;muni.name=args[2].textContent;muni.codINE=args[0].textContent;sigcMap.arrayLocFromProv.push(muni)}}sigcMap.arrayLocFromProv.sort(compareMuni);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayLocFromProv);callejeroInitCb=null}}function obtenerCodINESigc(a,b,c,d){callejeroProxy.obtenerCodINE(a,b,c,d)}function obtenerDireccionesSigc(f,d,b,c,a,e){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.geocoderListSrs(obtenerDireccionesResponseSigc,errorCallback,f,d,b,c,e)}function obtenerDireccionesResponseSigc(response){sigcMap.arrayStreet=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var direccion=new address();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;direccion.similarity=args[8].text;direccion.streetName=args[9].text;direccion.streetNumber=args[10].text;direccion.streetType=args[11].text;direccion.coordX=args[0].text;direccion.coordY=args[1].text;direccion.rotulo=args[7].text;direccion.codINE=args[3].text;sigcMap.arrayStreet.push(direccion)}else{var args=nombres[i].childNodes;direccion.similarity=args[8].textContent;direccion.streetName=args[9].textContent;direccion.streetNumber=args[10].textContent;direccion.streetType=args[11].textContent;direccion.coordX=args[0].textContent;direccion.coordY=args[1].textContent;direccion.rotulo=args[7].textContent;direccion.codINE=args[3].textContent;sigcMap.arrayStreet.push(direccion)}}sigcMap.arrayStreet.sort(compareSimil);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayStreet);callejeroInitCb=null}}function obtenerDireccionesMunProvSigc(g,c,b,f,e,a,d){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.geocoderMunProvSrs(obtenerDireccionesMunProvResponseSigc,errorCallback,g,c,b,f,e,d)}function obtenerDireccionesMunProvResponseSigc(response){sigcMap.arrayStreet=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var direccion=new address();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;direccion.similarity=args[8].text;direccion.streetName=args[9].text;direccion.streetNumber=args[10].text;direccion.streetType=args[11].text;direccion.coordX=args[0].text;direccion.coordY=args[1].text;direccion.rotulo=args[7].text;direccion.codINE=args[3].text;sigcMap.arrayStreet.push(direccion)}else{var args=nombres[i].childNodes;direccion.similarity=args[8].textContent;direccion.streetName=args[9].textContent;direccion.streetNumber=args[10].textContent;direccion.streetType=args[11].textContent;direccion.coordX=args[0].textContent;direccion.coordY=args[1].textContent;direccion.rotulo=args[7].textContent;direccion.codINE=args[3].textContent;sigcMap.arrayStreet.push(direccion)}}sigcMap.arrayStreet.sort(compareSimil);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayStreet);callejeroInitCb=null}}function localizarSedesSigc(c,b,d,a,e){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.localizarSedesSrs(localizarSedesResponseSigc,errorCallback,c,b,d,"1","1","-1",e)}function localizarSedesResponseSigc(response){sigcMap.arrayOu=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var sed=new sede();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;sed.direccion=args[0].text;sed.municipio=args[1].text;sed.nombre=args[2].text;sed.numero=args[3].text;sed.organismo=args[4].text;sed.unidadorganizativa=args[5].text;sed.x=args[6].text;sed.y=args[7].text;sigcMap.arrayOu.push(sed)}else{var args=nombres[i].childNodes;sed.direccion=args[0].textContent;sed.municipio=args[1].textContent;sed.nombre=args[2].textContent;sed.numero=args[3].textContent;sed.organismo=args[4].textContent;sed.unidadorganizativa=args[5].textContent;sed.x=args[6].textContent;sed.y=args[7].textContent;sigcMap.arrayOu.push(sed)}}sigcMap.arrayOu.sort(compareSede);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayOu);callejeroInitCb=null}}function localizarServiciosSigc(b,d,c,a,e){if(a!=null){callejeroInitCb=a}else{callejeroInitCb=null}callejeroProxy.localizarServiciosSrs(localizarServiciosResponseSigc,errorCallback,b,d,c,"1","1","-1",e)}function localizarServiciosResponseSigc(response){sigcMap.arrayServices=new Array();var nombres=response.getElementsByTagName("multiRef");for(var i=0;i<nombres.length;i++){var ser=new servicio();if(getBrowserName()=="msie"){var args=nombres[i].childNodes;ser.alias=args[0].text;ser.municipio=args[1].text;ser.x=args[2].text;ser.y=args[3].text;sigcMap.arrayServices.push(ser)}else{var args=nombres[i].childNodes;ser.alias=args[0].textContent;ser.municipio=args[1].textContent;ser.x=args[2].textContent;ser.y=args[3].textContent;sigcMap.arrayServices.push(ser)}}sigcMap.arrayServices.sort(compareServicios);if(callejeroInitCb!=null){eval(callejeroInitCb)(sigcMap.arrayServices);callejeroInitCb=null}}function errorCallback(b,a){Mapea.Util.showErrorMessage(a)}function address(){this.streetName="";this.streetNumber="";this.similarity="";this.streetType="";this.coordX="";this.coordY="";this.rotulo="";this.codINE="";this.municipio="";this.provincia=""}function municipio(){this.name="";this.codINE="";this.similarity=""}function sede(){this.direccion="";this.municipio="";this.nombre="";this.numero="";this.organismo="";this.unidadorganizativa="";this.x="";this.y="";this.similarity=""}function tipoServicio(){this.codigo="";this.nombre="";this.similarity=""}function nucleo(){this.extent="";this.idnucleo="";this.municipio="";this.nombre="";this.tipo="";this.provincia="";this.similarity=""}function servicio(){this.alias="";this.municipio="";this.x="";this.y="";this.similarity=""}function road(){this.carretera="";this.pk="";this.provincia="";this.x="";this.y="";this.similarity=""}function compareMuni(d,c){var f=d.name.toLowerCase();var e=c.name.toLowerCase();if(f<e){return -1}if(f>e){return 1}return 0}function compareSede(d,c){var f=d.nombre.toLowerCase();var e=c.nombre.toLowerCase();if(f<e){return -1}if(f>e){return 1}return 0}function compareServicios(d,c){var f=d.alias.toLowerCase();var e=c.alias.toLowerCase();if(f<e){return -1}if(f>e){return 1}return 0}function compareSimil(d,c){var f=c.similarity-d.similarity;if(f==0){var g=d.streetName.toLowerCase();var e=c.streetName.toLowerCase();if(g<e){return -1}if(g>e){return 1}return 0}else{return f}}function compareObj(d,c){var f=d.similarity;var e=c.similarity;var h="";var g="";if(d instanceof address){h=d.streetName}else{if(d instanceof servicio){h=d.alias}else{if(d instanceof sede){h=d.nombre}else{if(d instanceof nucleo){h=d.nombre}else{if(d instanceof road){h=d.carretera}}}}}if(c instanceof address){g=c.streetName}else{if(c instanceof servicio){g=c.alias}else{if(c instanceof sede){g=c.nombre}else{if(c instanceof nucleo){g=c.nombre}}}}if(c instanceof road){g=c.carretera}if(f<e){return 1}if(f>e){return -1}if(h<g){return -1}if(h>g){return 1}return 0}function getBrowserName(){var b="";var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")!=-1){b="opera"}else{if(a.indexOf("msie")!=-1){b="msie"}else{if(a.indexOf("safari")!=-1){b="safari"}else{if(a.indexOf("mozilla")!=-1){if(a.indexOf("firefox")!=-1){b="firefox"}else{b="mozilla"}}}}}return b}function TNS3_CallejerosWSException(){this.typeMarker="TNS3_CallejerosWSException"}function TNS3_CallejerosWSException_serialize(d,b,a){var c="";if(b!=null){c=c+"<";c=c+b;if(a){c=c+" "+a}c=c+">"}if(b!=null){c=c+"</";c=c+b;c=c+">"}return c}TNS3_CallejerosWSException.prototype.serialize=TNS3_CallejerosWSException_serialize;function TNS3_CallejerosWSException_deserialize(d,b){var e=new TNS4_CallejerosWSException();d.trace("element: "+d.traceElementName(b));var a=d.getFirstElementChild(b);var c;return e}function IMPL_CallejeroService(){this.jsutils=new CxfApacheOrgUtil();this.jsutils.interfaceObject=this;this.synchronous=false;this.url=null;this.client=null;this.response=null;this.globalElementSerializers=[];this.globalElementDeserializers=[];this.globalElementSerializers["{http://exception.callejero.juntadeandalucia.es}CallejerosWSException"]=TNS3_CallejerosWSException_serialize;this.globalElementDeserializers["{http://exception.callejero.juntadeandalucia.es}CallejerosWSException"]=TNS3_CallejerosWSException_deserialize}function IMPL_getCentralOfficeByBuilding_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getCentralOfficeByBuilding_onsuccess=IMPL_getCentralOfficeByBuilding_op_onsuccess;function IMPL_getCentralOfficeByBuilding_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getCentralOfficeByBuilding_onerror=IMPL_getCentralOfficeByBuilding_op_onerror;function IMPL_getCentralOfficeByBuilding_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.getCentralOfficeByBuildingRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.getCentralOfficeByBuilding_onsuccess(h,j)};this.client.onerror=function(h){a.getCentralOfficeByBuilding_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getCentralOfficeByBuilding=IMPL_getCentralOfficeByBuilding_op;function IMPL_getCentralOfficeByBuildingRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getCentralOfficeByBuilding>";a=a+"<id_building>";a=a+c.escapeXmlEntities(b[0]);a=a+"</id_building>";a=a+"</jns0:getCentralOfficeByBuilding>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getCentralOfficeByBuildingRequest_serializeInput=IMPL_getCentralOfficeByBuildingRequest_serializeInput;function IMPL_getCentralOfficeByBuildingResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var a=TNS1_CentralOfficeModelWS_deserialize(c,b);return a}function IMPL_getAllProvinces_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getAllProvinces_onsuccess=IMPL_getAllProvinces_op_onsuccess;function IMPL_getAllProvinces_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getAllProvinces_onerror=IMPL_getAllProvinces_op_onerror;function IMPL_getAllProvinces_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.getAllProvincesRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.getAllProvinces_onsuccess(h,j)};this.client.onerror=function(h){a.getAllProvinces_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getAllProvinces=IMPL_getAllProvinces_op;function IMPL_getAllProvincesRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getAllProvinces>";a=a+"<orderAsc>";a=a+c.escapeXmlEntities(b[0]);a=a+"</orderAsc>";a=a+"</jns0:getAllProvinces>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getAllProvincesRequest_serializeInput=IMPL_getAllProvincesRequest_serializeInput;function IMPL_getAllProvincesResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_obtenerTiposVia_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.obtenerTiposVia_onsuccess=IMPL_obtenerTiposVia_op_onsuccess;function IMPL_obtenerTiposVia_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.obtenerTiposVia_onerror=IMPL_obtenerTiposVia_op_onerror;function IMPL_obtenerTiposVia_op(b,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(0);e=this.obtenerTiposViaRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(g,h){a.obtenerTiposVia_onsuccess(g,h)};this.client.onerror=function(g){a.obtenerTiposVia_onerror(g)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.obtenerTiposVia=IMPL_obtenerTiposVia_op;function IMPL_obtenerTiposViaRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:obtenerTiposVia>";a=a+"</jns0:obtenerTiposVia>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.obtenerTiposViaRequest_serializeInput=IMPL_obtenerTiposViaRequest_serializeInput;function IMPL_obtenerTiposViaResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_localizarSedesSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.localizarSedesSrs_onsuccess=IMPL_localizarSedesSrs_op_onsuccess;function IMPL_localizarSedesSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.localizarSedesSrs_onerror=IMPL_localizarSedesSrs_op_onerror;function IMPL_localizarSedesSrs_op(b,g,n,a,c,j,e,l,d){this.client=new CxfApacheOrgClient(this.jsutils);var f=null;var k=new Array(7);k[0]=n;k[1]=a;k[2]=c;k[3]=j;k[4]=e;k[5]=l;k[6]=d;f=this.localizarSedesSrsRequest_serializeInput(this.jsutils,k);this.client.user_onsuccess=b;this.client.user_onerror=g;var m=this;this.client.onsuccess=function(o,p){m.localizarSedesSrs_onsuccess(o,p)};this.client.onerror=function(o){m.localizarSedesSrs_onerror(o)};var h=[];h.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,f,null,this.synchronous,h)}IMPL_CallejeroService.prototype.localizarSedesSrs=IMPL_localizarSedesSrs_op;function IMPL_localizarSedesSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:localizarSedesSrs>";a=a+"<codine>";a=a+c.escapeXmlEntities(b[0]);a=a+"</codine>";a=a+"<cadenaBusqueda>";a=a+c.escapeXmlEntities(b[1]);a=a+"</cadenaBusqueda>";a=a+"<codProv>";a=a+c.escapeXmlEntities(b[2]);a=a+"</codProv>";a=a+"<cantidadRegistros>";a=a+c.escapeXmlEntities(b[3]);a=a+"</cantidadRegistros>";a=a+"<pagina>";a=a+c.escapeXmlEntities(b[4]);a=a+"</pagina>";a=a+"<total>";a=a+c.escapeXmlEntities(b[5]);a=a+"</total>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[6]);a=a+"</srs>";a=a+"</jns0:localizarSedesSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.localizarSedesSrsRequest_serializeInput=IMPL_localizarSedesSrsRequest_serializeInput;function IMPL_localizarSedesSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getParentsOrganizationalUnit_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getParentsOrganizationalUnit_onsuccess=IMPL_getParentsOrganizationalUnit_op_onsuccess;function IMPL_getParentsOrganizationalUnit_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getParentsOrganizationalUnit_onerror=IMPL_getParentsOrganizationalUnit_op_onerror;function IMPL_getParentsOrganizationalUnit_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.getParentsOrganizationalUnitRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.getParentsOrganizationalUnit_onsuccess(h,j)};this.client.onerror=function(h){a.getParentsOrganizationalUnit_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getParentsOrganizationalUnit=IMPL_getParentsOrganizationalUnit_op;function IMPL_getParentsOrganizationalUnitRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getParentsOrganizationalUnit>";a=a+"<id_uo>";a=a+c.escapeXmlEntities(b[0]);a=a+"</id_uo>";a=a+"</jns0:getParentsOrganizationalUnit>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getParentsOrganizationalUnitRequest_serializeInput=IMPL_getParentsOrganizationalUnitRequest_serializeInput;function IMPL_getParentsOrganizationalUnitResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_comprobarTipoCarretera_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.comprobarTipoCarretera_onsuccess=IMPL_comprobarTipoCarretera_op_onsuccess;function IMPL_comprobarTipoCarretera_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.comprobarTipoCarretera_onerror=IMPL_comprobarTipoCarretera_op_onerror;function IMPL_comprobarTipoCarretera_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.comprobarTipoCarreteraRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.comprobarTipoCarretera_onsuccess(h,j)};this.client.onerror=function(h){a.comprobarTipoCarretera_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.comprobarTipoCarretera=IMPL_comprobarTipoCarretera_op;function IMPL_comprobarTipoCarreteraRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:comprobarTipoCarretera>";a=a+"<tipoCarretera>";a=a+c.escapeXmlEntities(b[0]);a=a+"</tipoCarretera>";a=a+"</jns0:comprobarTipoCarretera>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.comprobarTipoCarreteraRequest_serializeInput=IMPL_comprobarTipoCarreteraRequest_serializeInput;function IMPL_comprobarTipoCarreteraResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_obtenerMunicipios_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.obtenerMunicipios_onsuccess=IMPL_obtenerMunicipios_op_onsuccess;function IMPL_obtenerMunicipios_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.obtenerMunicipios_onerror=IMPL_obtenerMunicipios_op_onerror;function IMPL_obtenerMunicipios_op(b,c,f){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=f;e=this.obtenerMunicipiosRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.obtenerMunicipios_onsuccess(h,j)};this.client.onerror=function(h){a.obtenerMunicipios_onerror(h)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,g)}IMPL_CallejeroService.prototype.obtenerMunicipios=IMPL_obtenerMunicipios_op;function IMPL_obtenerMunicipiosRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:obtenerMunicipios>";a=a+"<codprov>";a=a+c.escapeXmlEntities(b[0]);a=a+"</codprov>";a=a+"</jns0:obtenerMunicipios>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.obtenerMunicipiosRequest_serializeInput=IMPL_obtenerMunicipiosRequest_serializeInput;function IMPL_obtenerMunicipiosResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getBuildingSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getBuildingSrs_onsuccess=IMPL_getBuildingSrs_op_onsuccess;function IMPL_getBuildingSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getBuildingSrs_onerror=IMPL_getBuildingSrs_op_onerror;function IMPL_getBuildingSrs_op(c,k,d,e,j,a,p,b,h,o,f){this.client=new CxfApacheOrgClient(this.jsutils);var g=null;var m=new Array(9);m[0]=d;m[1]=e;m[2]=j;m[3]=a;m[4]=p;m[5]=b;m[6]=h;m[7]=o;m[8]=f;g=this.getBuildingSrsRequest_serializeInput(this.jsutils,m);this.client.user_onsuccess=c;this.client.user_onerror=k;var n=this;this.client.onsuccess=function(q,r){n.getBuildingSrs_onsuccess(q,r)};this.client.onerror=function(q){n.getBuildingSrs_onerror(q)};var l=[];l.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,g,null,this.synchronous,l)}IMPL_CallejeroService.prototype.getBuildingSrs=IMPL_getBuildingSrs_op;function IMPL_getBuildingSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getBuildingSrs>";a=a+"<nombre_via>";a=a+c.escapeXmlEntities(b[0]);a=a+"</nombre_via>";a=a+"<provincia>";a=a+c.escapeXmlEntities(b[1]);a=a+"</provincia>";a=a+"<num_portal>";a=a+c.escapeXmlEntities(b[2]);a=a+"</num_portal>";a=a+"<tipo_via>";a=a+c.escapeXmlEntities(b[3]);a=a+"</tipo_via>";a=a+"<nombre>";a=a+c.escapeXmlEntities(b[4]);a=a+"</nombre>";a=a+"<municipio>";a=a+c.escapeXmlEntities(b[5]);a=a+"</municipio>";a=a+"<distrito_postal>";a=a+c.escapeXmlEntities(b[6]);a=a+"</distrito_postal>";a=a+"<letra_portal>";a=a+c.escapeXmlEntities(b[7]);a=a+"</letra_portal>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[8]);a=a+"</srs>";a=a+"</jns0:getBuildingSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getBuildingSrsRequest_serializeInput=IMPL_getBuildingSrsRequest_serializeInput;function IMPL_getBuildingSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_geocoderListSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.geocoderListSrs_onsuccess=IMPL_geocoderListSrs_op_onsuccess;function IMPL_geocoderListSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.geocoderListSrs_onerror=IMPL_geocoderListSrs_op_onerror;function IMPL_geocoderListSrs_op(b,f,k,a,d,j,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var h=new Array(5);h[0]=k;h[1]=a;h[2]=d;h[3]=j;h[4]=c;e=this.geocoderListSrsRequest_serializeInput(this.jsutils,h);this.client.user_onsuccess=b;this.client.user_onerror=f;var l=this;this.client.onsuccess=function(m,n){l.geocoderListSrs_onsuccess(m,n)};this.client.onerror=function(m){l.geocoderListSrs_onerror(m)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,g)}IMPL_CallejeroService.prototype.geocoderListSrs=IMPL_geocoderListSrs_op;function IMPL_geocoderListSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:geocoderListSrs>";a=a+"<streetname>";a=a+c.escapeXmlEntities(b[0]);a=a+"</streetname>";a=a+"<streetnumber>";a=a+c.escapeXmlEntities(b[1]);a=a+"</streetnumber>";a=a+"<streettype>";a=a+c.escapeXmlEntities(b[2]);a=a+"</streettype>";a=a+"<locality>";a=a+c.escapeXmlEntities(b[3]);a=a+"</locality>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[4]);a=a+"</srs>";a=a+"</jns0:geocoderListSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.geocoderListSrsRequest_serializeInput=IMPL_geocoderListSrsRequest_serializeInput;function IMPL_geocoderListSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_buscarCallejeroSrsMunicipio_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.buscarCallejeroSrsMunicipio_onsuccess=IMPL_buscarCallejeroSrsMunicipio_op_onsuccess;function IMPL_buscarCallejeroSrsMunicipio_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.buscarCallejeroSrsMunicipio_onerror=IMPL_buscarCallejeroSrsMunicipio_op_onerror;function IMPL_buscarCallejeroSrsMunicipio_op(a,d,g,j,b){this.client=new CxfApacheOrgClient(this.jsutils);var c=null;var f=new Array(3);f[0]=g;f[1]=j;f[2]=b;c=this.buscarCallejeroSrsMunicipioRequest_serializeInput(this.jsutils,f);this.client.user_onsuccess=a;this.client.user_onerror=d;var h=this;this.client.onsuccess=function(k,l){h.buscarCallejeroSrsMunicipio_onsuccess(k,l)};this.client.onerror=function(k){h.buscarCallejeroSrsMunicipio_onerror(k)};var e=[];e.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,c,null,this.synchronous,e)}IMPL_CallejeroService.prototype.buscarCallejeroSrsMunicipio=IMPL_buscarCallejeroSrsMunicipio_op;function IMPL_buscarCallejeroSrsMunicipioRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:buscarCallejeroSrsMunicipio>";a=a+"<query>";a=a+c.escapeXmlEntities(b[0]);a=a+"</query>";a=a+"<codine>";a=a+c.escapeXmlEntities(b[1]);a=a+"</codine>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[2]);a=a+"</srs>";a=a+"</jns0:buscarCallejeroSrsMunicipio>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.buscarCallejeroSrsMunicipioRequest_serializeInput=IMPL_buscarCallejeroSrsMunicipioRequest_serializeInput;function IMPL_buscarCallejeroSrsMunicipioResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_geocoderMunProvSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.geocoderMunProvSrs_onsuccess=IMPL_geocoderMunProvSrs_op_onsuccess;function IMPL_geocoderMunProvSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.geocoderMunProvSrs_onerror=IMPL_geocoderMunProvSrs_op_onerror;function IMPL_geocoderMunProvSrs_op(c,h,l,a,f,b,d,e){this.client=new CxfApacheOrgClient(this.jsutils);var g=null;var k=new Array(6);k[0]=l;k[1]=a;k[2]=f;k[3]=b;k[4]=d;k[5]=e;g=this.geocoderMunProvSrsRequest_serializeInput(this.jsutils,k);this.client.user_onsuccess=c;this.client.user_onerror=h;var m=this;this.client.onsuccess=function(n,o){m.geocoderMunProvSrs_onsuccess(n,o)};this.client.onerror=function(n){m.geocoderMunProvSrs_onerror(n)};var j=[];j.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,g,null,this.synchronous,j)}IMPL_CallejeroService.prototype.geocoderMunProvSrs=IMPL_geocoderMunProvSrs_op;function IMPL_geocoderMunProvSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:geocoderMunProvSrs>";a=a+"<streetname>";a=a+c.escapeXmlEntities(b[0]);a=a+"</streetname>";a=a+"<streetnumber>";a=a+c.escapeXmlEntities(b[1]);a=a+"</streetnumber>";a=a+"<streettype>";a=a+c.escapeXmlEntities(b[2]);a=a+"</streettype>";a=a+"<municipio>";a=a+c.escapeXmlEntities(b[3]);a=a+"</municipio>";a=a+"<provincia>";a=a+c.escapeXmlEntities(b[4]);a=a+"</provincia>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[5]);a=a+"</srs>";a=a+"</jns0:geocoderMunProvSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.geocoderMunProvSrsRequest_serializeInput=IMPL_geocoderMunProvSrsRequest_serializeInput;function IMPL_geocoderMunProvSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_localizarCarreterasSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.localizarCarreterasSrs_onsuccess=IMPL_localizarCarreterasSrs_op_onsuccess;function IMPL_localizarCarreterasSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.localizarCarreterasSrs_onerror=IMPL_localizarCarreterasSrs_op_onerror;function IMPL_localizarCarreterasSrs_op(b,f,a,m,h,d,k,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var j=new Array(6);j[0]=a;j[1]=m;j[2]=h;j[3]=d;j[4]=k;j[5]=c;e=this.localizarCarreterasSrsRequest_serializeInput(this.jsutils,j);this.client.user_onsuccess=b;this.client.user_onerror=f;var l=this;this.client.onsuccess=function(n,o){l.localizarCarreterasSrs_onsuccess(n,o)};this.client.onerror=function(n){l.localizarCarreterasSrs_onerror(n)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,g)}IMPL_CallejeroService.prototype.localizarCarreterasSrs=IMPL_localizarCarreterasSrs_op;function IMPL_localizarCarreterasSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:localizarCarreterasSrs>";a=a+"<cadenaBusqueda>";a=a+c.escapeXmlEntities(b[0]);a=a+"</cadenaBusqueda>";a=a+"<pK>";a=a+c.escapeXmlEntities(b[1]);a=a+"</pK>";a=a+"<cantidadRegistros>";a=a+c.escapeXmlEntities(b[2]);a=a+"</cantidadRegistros>";a=a+"<pagina>";a=a+c.escapeXmlEntities(b[3]);a=a+"</pagina>";a=a+"<total>";a=a+c.escapeXmlEntities(b[4]);a=a+"</total>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[5]);a=a+"</srs>";a=a+"</jns0:localizarCarreterasSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.localizarCarreterasSrsRequest_serializeInput=IMPL_localizarCarreterasSrsRequest_serializeInput;function IMPL_localizarCarreterasSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getAllTypeOrganitazionalUnit_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getAllTypeOrganitazionalUnit_onsuccess=IMPL_getAllTypeOrganitazionalUnit_op_onsuccess;function IMPL_getAllTypeOrganitazionalUnit_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getAllTypeOrganitazionalUnit_onerror=IMPL_getAllTypeOrganitazionalUnit_op_onerror;function IMPL_getAllTypeOrganitazionalUnit_op(b,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(0);e=this.getAllTypeOrganitazionalUnitRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(g,h){a.getAllTypeOrganitazionalUnit_onsuccess(g,h)};this.client.onerror=function(g){a.getAllTypeOrganitazionalUnit_onerror(g)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getAllTypeOrganitazionalUnit=IMPL_getAllTypeOrganitazionalUnit_op;function IMPL_getAllTypeOrganitazionalUnitRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getAllTypeOrganitazionalUnit>";a=a+"</jns0:getAllTypeOrganitazionalUnit>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getAllTypeOrganitazionalUnitRequest_serializeInput=IMPL_getAllTypeOrganitazionalUnitRequest_serializeInput;function IMPL_getAllTypeOrganitazionalUnitResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getTypeOrganitazionalUnit_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getTypeOrganitazionalUnit_onsuccess=IMPL_getTypeOrganitazionalUnit_op_onsuccess;function IMPL_getTypeOrganitazionalUnit_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getTypeOrganitazionalUnit_onerror=IMPL_getTypeOrganitazionalUnit_op_onerror;function IMPL_getTypeOrganitazionalUnit_op(b,d,c){this.client=new CxfApacheOrgClient(this.jsutils);var f=null;var e=new Array(1);e[0]=c;f=this.getTypeOrganitazionalUnitRequest_serializeInput(this.jsutils,e);this.client.user_onsuccess=b;this.client.user_onerror=d;var a=this;this.client.onsuccess=function(h,j){a.getTypeOrganitazionalUnit_onsuccess(h,j)};this.client.onerror=function(h){a.getTypeOrganitazionalUnit_onerror(h)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,f,null,this.synchronous,g)}IMPL_CallejeroService.prototype.getTypeOrganitazionalUnit=IMPL_getTypeOrganitazionalUnit_op;function IMPL_getTypeOrganitazionalUnitRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getTypeOrganitazionalUnit>";a=a+"<id_tipo>";a=a+c.escapeXmlEntities(b[0]);a=a+"</id_tipo>";a=a+"</jns0:getTypeOrganitazionalUnit>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getTypeOrganitazionalUnitRequest_serializeInput=IMPL_getTypeOrganitazionalUnitRequest_serializeInput;function IMPL_getTypeOrganitazionalUnitResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_geosearch_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.geosearch_onsuccess=IMPL_geosearch_op_onsuccess;function IMPL_geosearch_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.geosearch_onerror=IMPL_geosearch_op_onerror;function IMPL_geosearch_op(b,j,n,a,f,c,d,e,m,h){this.client=new CxfApacheOrgClient(this.jsutils);var g=null;var l=new Array(8);l[0]=n;l[1]=a;l[2]=f;l[3]=c;l[4]=d;l[5]=e;l[6]=m;l[7]=h;g=this.geosearchRequest_serializeInput(this.jsutils,l);this.client.user_onsuccess=b;this.client.user_onerror=j;var o=this;this.client.onsuccess=function(p,q){o.geosearch_onsuccess(p,q)};this.client.onerror=function(p){o.geosearch_onerror(p)};var k=[];k.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,g,null,this.synchronous,k)}IMPL_CallejeroService.prototype.geosearch=IMPL_geosearch_op;function IMPL_geosearchRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:geosearch>";a=a+"<query>";a=a+c.escapeXmlEntities(b[0]);a=a+"</query>";a=a+"<start>";a=a+c.escapeXmlEntities(b[1]);a=a+"</start>";a=a+"<limit>";a=a+c.escapeXmlEntities(b[2]);a=a+"</limit>";a=a+"<core>";a=a+c.escapeXmlEntities(b[3]);a=a+"</core>";a=a+"<requestHandler>";a=a+c.escapeXmlEntities(b[4]);a=a+"</requestHandler>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[5]);a=a+"</srs>";a=a+"<locality>";a=a+c.escapeXmlEntities(b[6]);a=a+"</locality>";a=a+"<threshold>";a=a+c.escapeXmlEntities(b[7]);a=a+"</threshold>";a=a+"</jns0:geosearch>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.geosearchRequest_serializeInput=IMPL_geosearchRequest_serializeInput;function IMPL_geosearchResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var a=TNS1_GeosearchResult_deserialize(c,b);return a}function IMPL_normalizar_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.normalizar_onsuccess=IMPL_normalizar_op_onsuccess;function IMPL_normalizar_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.normalizar_onerror=IMPL_normalizar_op_onerror;function IMPL_normalizar_op(b,d,c){this.client=new CxfApacheOrgClient(this.jsutils);var f=null;var e=new Array(1);e[0]=c;f=this.normalizarRequest_serializeInput(this.jsutils,e);this.client.user_onsuccess=b;this.client.user_onerror=d;var a=this;this.client.onsuccess=function(h,j){a.normalizar_onsuccess(h,j)};this.client.onerror=function(h){a.normalizar_onerror(h)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,f,null,this.synchronous,g)}IMPL_CallejeroService.prototype.normalizar=IMPL_normalizar_op;function IMPL_normalizarRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:normalizar>";a=a+"<cadena>";a=a+c.escapeXmlEntities(b[0]);a=a+"</cadena>";a=a+"</jns0:normalizar>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.normalizarRequest_serializeInput=IMPL_normalizarRequest_serializeInput;function IMPL_normalizarResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var a=TNS1_Address_deserialize(c,b);return a}function IMPL_getOrganitazionalUnit_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getOrganitazionalUnit_onsuccess=IMPL_getOrganitazionalUnit_op_onsuccess;function IMPL_getOrganitazionalUnit_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getOrganitazionalUnit_onerror=IMPL_getOrganitazionalUnit_op_onerror;function IMPL_getOrganitazionalUnit_op(d,g,b,l,a,e,c){this.client=new CxfApacheOrgClient(this.jsutils);var f=null;var j=new Array(5);j[0]=b;j[1]=l;j[2]=a;j[3]=e;j[4]=c;f=this.getOrganitazionalUnitRequest_serializeInput(this.jsutils,j);this.client.user_onsuccess=d;this.client.user_onerror=g;var k=this;this.client.onsuccess=function(m,n){k.getOrganitazionalUnit_onsuccess(m,n)};this.client.onerror=function(m){k.getOrganitazionalUnit_onerror(m)};var h=[];h.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,f,null,this.synchronous,h)}IMPL_CallejeroService.prototype.getOrganitazionalUnit=IMPL_getOrganitazionalUnit_op;function IMPL_getOrganitazionalUnitRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getOrganitazionalUnit>";a=a+"<id_tipo>";a=a+c.escapeXmlEntities(b[0]);a=a+"</id_tipo>";a=a+"<nombre>";a=a+c.escapeXmlEntities(b[1]);a=a+"</nombre>";a=a+"<id_padre>";a=a+c.escapeXmlEntities(b[2]);a=a+"</id_padre>";a=a+"<provincia>";a=a+c.escapeXmlEntities(b[3]);a=a+"</provincia>";a=a+"<municipio>";a=a+c.escapeXmlEntities(b[4]);a=a+"</municipio>";a=a+"</jns0:getOrganitazionalUnit>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getOrganitazionalUnitRequest_serializeInput=IMPL_getOrganitazionalUnitRequest_serializeInput;function IMPL_getOrganitazionalUnitResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_comprobarCodIne_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.comprobarCodIne_onsuccess=IMPL_comprobarCodIne_op_onsuccess;function IMPL_comprobarCodIne_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.comprobarCodIne_onerror=IMPL_comprobarCodIne_op_onerror;function IMPL_comprobarCodIne_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.comprobarCodIneRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.comprobarCodIne_onsuccess(h,j)};this.client.onerror=function(h){a.comprobarCodIne_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.comprobarCodIne=IMPL_comprobarCodIne_op;function IMPL_comprobarCodIneRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:comprobarCodIne>";a=a+"<codigo>";a=a+c.escapeXmlEntities(b[0]);a=a+"</codigo>";a=a+"</jns0:comprobarCodIne>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.comprobarCodIneRequest_serializeInput=IMPL_comprobarCodIneRequest_serializeInput;function IMPL_comprobarCodIneResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_geocoderInversoSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.geocoderInversoSrs_onsuccess=IMPL_geocoderInversoSrs_op_onsuccess;function IMPL_geocoderInversoSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.geocoderInversoSrs_onerror=IMPL_geocoderInversoSrs_op_onerror;function IMPL_geocoderInversoSrs_op(a,d,h,g,b){this.client=new CxfApacheOrgClient(this.jsutils);var c=null;var f=new Array(3);f[0]=h;f[1]=g;f[2]=b;c=this.geocoderInversoSrsRequest_serializeInput(this.jsutils,f);this.client.user_onsuccess=a;this.client.user_onerror=d;var j=this;this.client.onsuccess=function(k,l){j.geocoderInversoSrs_onsuccess(k,l)};this.client.onerror=function(k){j.geocoderInversoSrs_onerror(k)};var e=[];e.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,c,null,this.synchronous,e)}IMPL_CallejeroService.prototype.geocoderInversoSrs=IMPL_geocoderInversoSrs_op;function IMPL_geocoderInversoSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:geocoderInversoSrs>";a=a+"<x>";a=a+c.escapeXmlEntities(b[0]);a=a+"</x>";a=a+"<y>";a=a+c.escapeXmlEntities(b[1]);a=a+"</y>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[2]);a=a+"</srs>";a=a+"</jns0:geocoderInversoSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.geocoderInversoSrsRequest_serializeInput=IMPL_geocoderInversoSrsRequest_serializeInput;function IMPL_geocoderInversoSrsResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var a=TNS1_GeocoderResult_deserialize(c,b);return a}function IMPL_localizarServiciosSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.localizarServiciosSrs_onsuccess=IMPL_localizarServiciosSrs_op_onsuccess;function IMPL_localizarServiciosSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.localizarServiciosSrs_onerror=IMPL_localizarServiciosSrs_op_onerror;function IMPL_localizarServiciosSrs_op(a,f,m,n,b,h,d,k,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var j=new Array(7);j[0]=m;j[1]=n;j[2]=b;j[3]=h;j[4]=d;j[5]=k;j[6]=c;e=this.localizarServiciosSrsRequest_serializeInput(this.jsutils,j);this.client.user_onsuccess=a;this.client.user_onerror=f;var l=this;this.client.onsuccess=function(o,p){l.localizarServiciosSrs_onsuccess(o,p)};this.client.onerror=function(o){l.localizarServiciosSrs_onerror(o)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,g)}IMPL_CallejeroService.prototype.localizarServiciosSrs=IMPL_localizarServiciosSrs_op;function IMPL_localizarServiciosSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:localizarServiciosSrs>";a=a+"<codine>";a=a+c.escapeXmlEntities(b[0]);a=a+"</codine>";a=a+"<codTipoServicio>";a=a+c.escapeXmlEntities(b[1]);a=a+"</codTipoServicio>";a=a+"<codProv>";a=a+c.escapeXmlEntities(b[2]);a=a+"</codProv>";a=a+"<cantidadRegistros>";a=a+c.escapeXmlEntities(b[3]);a=a+"</cantidadRegistros>";a=a+"<pagina>";a=a+c.escapeXmlEntities(b[4]);a=a+"</pagina>";a=a+"<total>";a=a+c.escapeXmlEntities(b[5]);a=a+"</total>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[6]);a=a+"</srs>";a=a+"</jns0:localizarServiciosSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.localizarServiciosSrsRequest_serializeInput=IMPL_localizarServiciosSrsRequest_serializeInput;function IMPL_localizarServiciosSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getGeosearchCores_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getGeosearchCores_onsuccess=IMPL_getGeosearchCores_op_onsuccess;function IMPL_getGeosearchCores_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getGeosearchCores_onerror=IMPL_getGeosearchCores_op_onerror;function IMPL_getGeosearchCores_op(b,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(0);e=this.getGeosearchCoresRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(g,h){a.getGeosearchCores_onsuccess(g,h)};this.client.onerror=function(g){a.getGeosearchCores_onerror(g)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getGeosearchCores=IMPL_getGeosearchCores_op;function IMPL_getGeosearchCoresRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getGeosearchCores>";a=a+"</jns0:getGeosearchCores>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getGeosearchCoresRequest_serializeInput=IMPL_getGeosearchCoresRequest_serializeInput;function IMPL_getGeosearchCoresResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getCentralOfficeSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getCentralOfficeSrs_onsuccess=IMPL_getCentralOfficeSrs_op_onsuccess;function IMPL_getCentralOfficeSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getCentralOfficeSrs_onerror=IMPL_getCentralOfficeSrs_op_onerror;function IMPL_getCentralOfficeSrs_op(b,c,g,f){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(2);d[0]=g;d[1]=f;e=this.getCentralOfficeSrsRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(j,k){a.getCentralOfficeSrs_onsuccess(j,k)};this.client.onerror=function(j){a.getCentralOfficeSrs_onerror(j)};var h=[];h.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,h)}IMPL_CallejeroService.prototype.getCentralOfficeSrs=IMPL_getCentralOfficeSrs_op;function IMPL_getCentralOfficeSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getCentralOfficeSrs>";a=a+"<id_CentralOffice>";a=a+c.escapeXmlEntities(b[0]);a=a+"</id_CentralOffice>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[1]);a=a+"</srs>";a=a+"</jns0:getCentralOfficeSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getCentralOfficeSrsRequest_serializeInput=IMPL_getCentralOfficeSrsRequest_serializeInput;function IMPL_getCentralOfficeSrsResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var a=TNS1_CentralOfficeModelWS_deserialize(c,b);return a}function IMPL_comprobarTipoVia_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.comprobarTipoVia_onsuccess=IMPL_comprobarTipoVia_op_onsuccess;function IMPL_comprobarTipoVia_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.comprobarTipoVia_onerror=IMPL_comprobarTipoVia_op_onerror;function IMPL_comprobarTipoVia_op(b,d,c){this.client=new CxfApacheOrgClient(this.jsutils);var f=null;var e=new Array(1);e[0]=c;f=this.comprobarTipoViaRequest_serializeInput(this.jsutils,e);this.client.user_onsuccess=b;this.client.user_onerror=d;var a=this;this.client.onsuccess=function(h,j){a.comprobarTipoVia_onsuccess(h,j)};this.client.onerror=function(h){a.comprobarTipoVia_onerror(h)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,f,null,this.synchronous,g)}IMPL_CallejeroService.prototype.comprobarTipoVia=IMPL_comprobarTipoVia_op;function IMPL_comprobarTipoViaRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:comprobarTipoVia>";a=a+"<tipoVia>";a=a+c.escapeXmlEntities(b[0]);a=a+"</tipoVia>";a=a+"</jns0:comprobarTipoVia>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.comprobarTipoViaRequest_serializeInput=IMPL_comprobarTipoViaRequest_serializeInput;function IMPL_comprobarTipoViaResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_obtenerTiposServicios_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.obtenerTiposServicios_onsuccess=IMPL_obtenerTiposServicios_op_onsuccess;function IMPL_obtenerTiposServicios_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.obtenerTiposServicios_onerror=IMPL_obtenerTiposServicios_op_onerror;function IMPL_obtenerTiposServicios_op(b,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(0);e=this.obtenerTiposServiciosRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(g,h){a.obtenerTiposServicios_onsuccess(g,h)};this.client.onerror=function(g){a.obtenerTiposServicios_onerror(g)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.obtenerTiposServicios=IMPL_obtenerTiposServicios_op;function IMPL_obtenerTiposServiciosRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:obtenerTiposServicios>";a=a+"</jns0:obtenerTiposServicios>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.obtenerTiposServiciosRequest_serializeInput=IMPL_obtenerTiposServiciosRequest_serializeInput;function IMPL_obtenerTiposServiciosResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getParentsLevel1_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getParentsLevel1_onsuccess=IMPL_getParentsLevel1_op_onsuccess;function IMPL_getParentsLevel1_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getParentsLevel1_onerror=IMPL_getParentsLevel1_op_onerror;function IMPL_getParentsLevel1_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.getParentsLevel1Request_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.getParentsLevel1_onsuccess(h,j)};this.client.onerror=function(h){a.getParentsLevel1_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getParentsLevel1=IMPL_getParentsLevel1_op;function IMPL_getParentsLevel1Request_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getParentsLevel1>";a=a+"<orderAsc>";a=a+c.escapeXmlEntities(b[0]);a=a+"</orderAsc>";a=a+"</jns0:getParentsLevel1>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getParentsLevel1Request_serializeInput=IMPL_getParentsLevel1Request_serializeInput;function IMPL_getParentsLevel1Response_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_autocompletarDireccionMunicipio_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.autocompletarDireccionMunicipio_onsuccess=IMPL_autocompletarDireccionMunicipio_op_onsuccess;function IMPL_autocompletarDireccionMunicipio_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.autocompletarDireccionMunicipio_onerror=IMPL_autocompletarDireccionMunicipio_op_onerror;function IMPL_autocompletarDireccionMunicipio_op(a,d,g,b,j){this.client=new CxfApacheOrgClient(this.jsutils);var c=null;var f=new Array(3);f[0]=g;f[1]=b;f[2]=j;c=this.autocompletarDireccionMunicipioRequest_serializeInput(this.jsutils,f);this.client.user_onsuccess=a;this.client.user_onerror=d;var h=this;this.client.onsuccess=function(k,l){h.autocompletarDireccionMunicipio_onsuccess(k,l)};this.client.onerror=function(k){h.autocompletarDireccionMunicipio_onerror(k)};var e=[];e.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,c,null,this.synchronous,e)}IMPL_CallejeroService.prototype.autocompletarDireccionMunicipio=IMPL_autocompletarDireccionMunicipio_op;function IMPL_autocompletarDireccionMunicipioRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:autocompletarDireccionMunicipio>";a=a+"<input>";a=a+c.escapeXmlEntities(b[0]);a=a+"</input>";a=a+"<limit>";a=a+c.escapeXmlEntities(b[1]);a=a+"</limit>";a=a+"<codine>";a=a+c.escapeXmlEntities(b[2]);a=a+"</codine>";a=a+"</jns0:autocompletarDireccionMunicipio>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.autocompletarDireccionMunicipioRequest_serializeInput=IMPL_autocompletarDireccionMunicipioRequest_serializeInput;function IMPL_autocompletarDireccionMunicipioResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_localizarNucleosSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.localizarNucleosSrs_onsuccess=IMPL_localizarNucleosSrs_op_onsuccess;function IMPL_localizarNucleosSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.localizarNucleosSrs_onerror=IMPL_localizarNucleosSrs_op_onerror;function IMPL_localizarNucleosSrs_op(b,f,a,h,d,k,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var j=new Array(5);j[0]=a;j[1]=h;j[2]=d;j[3]=k;j[4]=c;e=this.localizarNucleosSrsRequest_serializeInput(this.jsutils,j);this.client.user_onsuccess=b;this.client.user_onerror=f;var l=this;this.client.onsuccess=function(m,n){l.localizarNucleosSrs_onsuccess(m,n)};this.client.onerror=function(m){l.localizarNucleosSrs_onerror(m)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,g)}IMPL_CallejeroService.prototype.localizarNucleosSrs=IMPL_localizarNucleosSrs_op;function IMPL_localizarNucleosSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:localizarNucleosSrs>";a=a+"<cadenaBusqueda>";a=a+c.escapeXmlEntities(b[0]);a=a+"</cadenaBusqueda>";a=a+"<cantidadRegistros>";a=a+c.escapeXmlEntities(b[1]);a=a+"</cantidadRegistros>";a=a+"<pagina>";a=a+c.escapeXmlEntities(b[2]);a=a+"</pagina>";a=a+"<total>";a=a+c.escapeXmlEntities(b[3]);a=a+"</total>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[4]);a=a+"</srs>";a=a+"</jns0:localizarNucleosSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.localizarNucleosSrsRequest_serializeInput=IMPL_localizarNucleosSrsRequest_serializeInput;function IMPL_localizarNucleosSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getChildrenOrganitazionalUnit_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getChildrenOrganitazionalUnit_onsuccess=IMPL_getChildrenOrganitazionalUnit_op_onsuccess;function IMPL_getChildrenOrganitazionalUnit_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getChildrenOrganitazionalUnit_onerror=IMPL_getChildrenOrganitazionalUnit_op_onerror;function IMPL_getChildrenOrganitazionalUnit_op(b,c,g){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(1);d[0]=g;e=this.getChildrenOrganitazionalUnitRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(h,j){a.getChildrenOrganitazionalUnit_onsuccess(h,j)};this.client.onerror=function(h){a.getChildrenOrganitazionalUnit_onerror(h)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getChildrenOrganitazionalUnit=IMPL_getChildrenOrganitazionalUnit_op;function IMPL_getChildrenOrganitazionalUnitRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getChildrenOrganitazionalUnit>";a=a+"<id_uo>";a=a+c.escapeXmlEntities(b[0]);a=a+"</id_uo>";a=a+"</jns0:getChildrenOrganitazionalUnit>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getChildrenOrganitazionalUnitRequest_serializeInput=IMPL_getChildrenOrganitazionalUnitRequest_serializeInput;function IMPL_getChildrenOrganitazionalUnitResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_obtenerCodINE_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.obtenerCodINE_onsuccess=IMPL_obtenerCodINE_op_onsuccess;function IMPL_obtenerCodINE_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.obtenerCodINE_onerror=IMPL_obtenerCodINE_op_onerror;function IMPL_obtenerCodINE_op(b,c,g,h){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(2);d[0]=g;d[1]=h;e=this.obtenerCodINERequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(j,k){a.obtenerCodINE_onsuccess(j,k)};this.client.onerror=function(j){a.obtenerCodINE_onerror(j)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.obtenerCodINE=IMPL_obtenerCodINE_op;function IMPL_obtenerCodINERequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:obtenerCodINE>";a=a+"<provincia>";a=a+c.escapeXmlEntities(b[0]);a=a+"</provincia>";a=a+"<municipio>";a=a+c.escapeXmlEntities(b[1]);a=a+"</municipio>";a=a+"</jns0:obtenerCodINE>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.obtenerCodINERequest_serializeInput=IMPL_obtenerCodINERequest_serializeInput;function IMPL_obtenerCodINEResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var d=c.getNodeText(b);var a=d;return a}function IMPL_geocoderSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.geocoderSrs_onsuccess=IMPL_geocoderSrs_op_onsuccess;function IMPL_geocoderSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.geocoderSrs_onerror=IMPL_geocoderSrs_op_onerror;function IMPL_geocoderSrs_op(b,f,k,a,d,j,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var h=new Array(5);h[0]=k;h[1]=a;h[2]=d;h[3]=j;h[4]=c;e=this.geocoderSrsRequest_serializeInput(this.jsutils,h);this.client.user_onsuccess=b;this.client.user_onerror=f;var l=this;this.client.onsuccess=function(m,n){l.geocoderSrs_onsuccess(m,n)};this.client.onerror=function(m){l.geocoderSrs_onerror(m)};var g=[];g.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,g)}IMPL_CallejeroService.prototype.geocoderSrs=IMPL_geocoderSrs_op;function IMPL_geocoderSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:geocoderSrs>";a=a+"<streetname>";a=a+c.escapeXmlEntities(b[0]);a=a+"</streetname>";a=a+"<streetnumber>";a=a+c.escapeXmlEntities(b[1]);a=a+"</streetnumber>";a=a+"<streettype>";a=a+c.escapeXmlEntities(b[2]);a=a+"</streettype>";a=a+"<locality>";a=a+c.escapeXmlEntities(b[3]);a=a+"</locality>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[4]);a=a+"</srs>";a=a+"</jns0:geocoderSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.geocoderSrsRequest_serializeInput=IMPL_geocoderSrsRequest_serializeInput;function IMPL_geocoderSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_geocoderMunProvSrs_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.geocoderMunProvSrs_onsuccess=IMPL_geocoderMunProvSrs_op_onsuccess;function IMPL_geocoderMunProvSrs_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.geocoderMunProvSrs_onerror=IMPL_geocoderMunProvSrs_op_onerror;function IMPL_geocoderMunProvSrs_op(c,h,l,a,f,b,d,e){this.client=new CxfApacheOrgClient(this.jsutils);var g=null;var k=new Array(6);k[0]=l;k[1]=a;k[2]=f;k[3]=b;k[4]=d;k[5]=e;g=this.geocoderMunProvSrsRequest_serializeInput(this.jsutils,k);this.client.user_onsuccess=c;this.client.user_onerror=h;var m=this;this.client.onsuccess=function(n,o){m.geocoderMunProvSrs_onsuccess(n,o)};this.client.onerror=function(n){m.geocoderMunProvSrs_onerror(n)};var j=[];j.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,g,null,this.synchronous,j)}IMPL_CallejeroService.prototype.geocoderMunProvSrs=IMPL_geocoderMunProvSrs_op;function IMPL_geocoderMunProvSrsRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:geocoderMunProvSrs>";a=a+"<streetname>";a=a+c.escapeXmlEntities(b[0]);a=a+"</streetname>";a=a+"<streetnumber>";a=a+c.escapeXmlEntities(b[1]);a=a+"</streetnumber>";a=a+"<streettype>";a=a+c.escapeXmlEntities(b[2]);a=a+"</streettype>";a=a+"<municipio>";a=a+c.escapeXmlEntities(b[3]);a=a+"</municipio>";a=a+"<provincia>";a=a+c.escapeXmlEntities(b[4]);a=a+"</provincia>";a=a+"<srs>";a=a+c.escapeXmlEntities(b[5]);a=a+"</srs>";a=a+"</jns0:geocoderMunProvSrs>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.geocoderMunProvSrsRequest_serializeInput=IMPL_geocoderMunProvSrsRequest_serializeInput;function IMPL_geocoderMunProvSrsResponse_deserializeResponse(b,a){b.trace("rpc element: "+b.traceElementName(a));a=b.getFirstElementChild(a);b.trace("rpc element: "+b.traceElementName(a))}function IMPL_getVersion_op_onsuccess(a,b){(a.user_onsuccess&&a.user_onsuccess(b))}IMPL_CallejeroService.prototype.getVersion_onsuccess=IMPL_getVersion_op_onsuccess;function IMPL_getVersion_op_onerror(b){if(b.user_onerror){var c;var a;try{c=b.req.status;a=b.req.statusText}catch(d){c=-1;a="Error opening connection to server"}b.user_onerror(c,a)}}IMPL_CallejeroService.prototype.getVersion_onerror=IMPL_getVersion_op_onerror;function IMPL_getVersion_op(b,c){this.client=new CxfApacheOrgClient(this.jsutils);var e=null;var d=new Array(0);e=this.getVersionRequest_serializeInput(this.jsutils,d);this.client.user_onsuccess=b;this.client.user_onerror=c;var a=this;this.client.onsuccess=function(g,h){a.getVersion_onsuccess(g,h)};this.client.onerror=function(g){a.getVersion_onerror(g)};var f=[];f.SOAPAction="";this.jsutils.trace("synchronous = "+this.synchronous);this.client.request(this.url,e,null,this.synchronous,f)}IMPL_CallejeroService.prototype.getVersion=IMPL_getVersion_op;function IMPL_getVersionRequest_serializeInput(c,b){var a;a=c.beginSoap11Message("xmlns:jns0='http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero' ");a=a+"<jns0:getVersion>";a=a+"</jns0:getVersion>";a=a+c.endSoap11Message();return a}IMPL_CallejeroService.prototype.getVersionRequest_serializeInput=IMPL_getVersionRequest_serializeInput;function IMPL_getVersionResponse_deserializeResponse(c,b){c.trace("rpc element: "+c.traceElementName(b));b=c.getFirstElementChild(b);c.trace("rpc element: "+c.traceElementName(b));var a=TNS1_Version_deserialize(c,b);return a}function IMPL_CallejeroService_IMPL_callejero(){this.url="http://clientes.guadaltel.es/desarrollo/CallejeroWS/services/callejero"}IMPL_CallejeroService_IMPL_callejero.prototype=new IMPL_CallejeroService;LetterPairSimilarity={calculaParecido:function(e,g,a,d,c,b){var f=LetterPairSimilarity.compareStrings(e,g);f=f*0.85;if(a.toUpperCase()==d.toUpperCase()||a==""){f=f+0.1}if(c.toUpperCase()==b.toUpperCase()||c==""){f=f+0.05}else{if(c.toUpperCase()=="S/N"&&b=="999999"){f=f+0.05}}return f},compareStrings:function(g,e){if(g==null||e==null){return 0}var c=LetterPairSimilarity.wordLetterPairs(g.toUpperCase());var b=LetterPairSimilarity.wordLetterPairs(e.toUpperCase());var a=0;var k=c.length+b.length;for(var h=0,l=c.length;h<l;h++){var n=c[h];for(var d=0,f=b.length;d<f;d++){var m=b[d];if(n==m){a++;b.splice(d,1);break}}}return 2*a/k},wordLetterPairs:function(g){var h=new Array();var e=g.split(" ");for(var c=0,a=e.length;c<a;c++){var b=LetterPairSimilarity.letterPairs(e[c]);for(var f=0,d=b.length;f<d;f++){h.push(b[f])}}return h},letterPairs:function(d){var c=d.length-1;var b=new Array();for(var a=0;a<c;a++){b.push(d.substring(a,a+2))}return b},calculaParecidoContenido:function(h,g){h=h.toLowerCase();g=g.toLowerCase();var d=0;var c=0;var f=g.split(" ");for(var b=0,a=f.length;b<a;b++){var e=f[b];e=e.trim();if(h.indexOf(e)!=-1){if(c==0){d+=0.2}else{if(c>0&&c<3){d+=0.1}else{d+=0.05}}c++}}return d}};function filterNumeric(a){var b="0123456789.";var c=a.value;var d=b.indexOf(c.charAt(c.length-1));while(d==-1&&c.length>0){c=c.substring(0,c.length-1);d=b.indexOf(c.charAt(c.length-1))}a.value=c}function filterCharacter(b){var c="abcdefghyjklmnñopqrstuvwxyz-";var a=b.value;a=a.toLowerCase();for(i=0;i<a.length;i++){if(c.indexOf(a.charAt(i),0)!=-1){return 1}}return 0}function filterSymbols(b){var c='ºª|!"@#·~$½%¬&{/[]()}=?¿*+';var a=b.value;a=a.toLowerCase();for(i=0;i<a.length;i++){if(c.indexOf(a.charAt(i),0)!=-1){return 1}}return 0}function filterSymbolsCallejero(b){var c='ºª|!"@#·~$½%¬&{/[]}=?¿*+<>';var a=b.value;a=a.toLowerCase();for(i=0;i<a.length;i++){if(c.indexOf(a.charAt(i),0)!=-1){return 1}}return 0}function loadTiposServicios(){obtenerTiposServicios();if(document.getElementById("idSelectServicios")){loadTiposServiciosAux()}}function loadTiposServiciosAux(){if(arrayTiposServicios==null){setTimeout("loadTiposServiciosAux()",100)}else{var b=document.getElementById("idSelectServicios");for(var c=0;c<arrayTiposServicios.length;c++){var a=arrayTiposServicios[c];b.options[c+1]=new Option(a.codigo,a.nombre)}arrayTiposServicios=null}}function loadTiposVia(){obtenerTiposVia();var a=document.getElementById("idSelectTipoVia");if(a){a.options[0]=new Option("..."," ");loadTiposViaAux()}}function loadTiposViaAux(){if(arrayVias==null){setTimeout("loadTiposViaAux()",100)}else{var b=document.getElementById("idSelectTipoVia");for(var a=0;a<arrayVias.length;a++){b.options[a+1]=new Option(arrayVias[a],arrayVias[a])}arrayVias=null}}function loadMunicipios(a){obtenerMunicipios(a);loadMunicipiosAux()}function loadMunicipiosSede(a){obtenerMunicipios(a);loadMunicipiosAuxSede()}function loadMunicipiosServicio(a){obtenerMunicipios(a);loadMunicipiosAuxServicio()}function loadMunicipiosAux(){if(arrayMun==null){setTimeout("loadMunicipiosAux()",100)}else{var c=document.getElementById("idSelectMunicipio");for(var b=0;b<arrayMun.length;b++){var a=arrayMun[b];c.options[b+1]=new Option(a.name,a.codINE)}arrayMun=null}}function loadMunicipiosAuxSede(){if(arrayMun==null){setTimeout("loadMunicipiosAuxSede()",100)}else{var c=document.getElementById("idSelectMunicipioSede");for(var b=0;b<arrayMun.length;b++){var a=arrayMun[b];c.options[b+1]=new Option(a.name,a.codINE)}arrayMun=null}}function loadMunicipiosAuxServicio(){if(arrayMun==null){setTimeout("loadMunicipiosAuxServicio()",100)}else{var c=document.getElementById("idSelectMunicipioServicio");for(var b=0;b<arrayMun.length;b++){var a=arrayMun[b];c.options[b+1]=new Option(a.name,a.codINE)}arrayMun=null}}function onBtnBuscarCallejero(){if(tipoViaSelected!=null){if(municipioSelected!=""&&municipioSelected!=null&&provinciaSelected!="00"&&provinciaSelected!=null){nombreCalle=document.getElementById("idInputTextVia").value;if(nombreCalle!=""){numeroCalle=document.getElementById("idInputTextNumero").value;var a=Mapea.Util.getMapProjection();var b=function(c){muestraDirecciones("callejero",c)};obtenerDirecciones(nombreCalle,numeroCalle,tipoViaSelected,municipioSelected,a,b)}else{Mapea.Util.showInfoMessage("Debe introducir un nombre de calle.")}}else{Mapea.Util.showInfoMessage("Debe seleccionar provincia y municipio del desplegable.")}}else{Mapea.Util.showInfoMessage("Debe seleccionar un tipo de v\xEDa del desplegable.")}}function onBtnBuscarSedes(){if(municipioSedeSelected!=""&&municipioSedeSelected!=null&&provinciaSedeSelected!="00"&&provinciaSedeSelected!=null){nombreSede=document.getElementById("idInputTextSede").value;if(nombreSede!=""){var a=Mapea.Util.getMapProjection();var b=function(c){muestraDirecciones("sedes",c)};localizarSedes(municipioSedeSelected,nombreSede,provinciaSedeSelected,a,b)}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de b\xFAsqueda.")}}else{Mapea.Util.showInfoMessage("Debe seleccionar provincia y municipio del desplegable.")}}function onBtnBuscarServicios(){if(typeof municipioServicioSelected!="undefined"&&municipioServicioSelected!=""&&municipioServicioSelected!=null&&typeof provinciaServicioSelected!="undefined"&&provinciaServicioSelected!="00"&&provinciaServicioSelected!=null){if(typeof tipoServicioSelected!="undefined"&&tipoServicioSelected!=""){var a=Mapea.Util.getMapProjection();var b=function(c){muestraDirecciones("servicios",c)};localizarServicios(municipioServicioSelected,tipoServicioSelected,provinciaServicioSelected,a,b)}else{Mapea.Util.showInfoMessage("Debe selecccionar un tipo de servicio.")}}else{Mapea.Util.showInfoMessage("Debe seleccionar provincia y municipio del desplegable.")}}function onBtnBuscarNucleos(){nombreNucleo=document.getElementById("idInputPoblacion").value;if(nombreNucleo!=""){var a=Mapea.Util.getMapProjection();var b=function(c){muestraDirecciones("nucleos",c)};localizarNucleos(nombreNucleo,a,b)}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de b\xFAsqueda.")}}function onBtnBuscarCarreteras(){nombreCarretera=document.getElementById("idInputCarreteras").value;pk=document.getElementById("idInputpk").value;if(nombreCarretera!=""){var a=Mapea.Util.getMapProjection();var b=function(c){muestraDirecciones("carreteras",c)};localizarCarreteras(nombreCarretera,pk,a,b)}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de b\xFAsqueda.")}}function onBtnBuscarGeneral(l,m,e,k){if((window.callejeroProxy!=null)&&(window.callejeroProxy.client!=null)&&(window.callejeroProxy.client.req!=null)){$("#searchquery").css("background","");window.callejeroProxy.client.req.abort()}Autocomplete.close();var n=Autocomplete.field[0];if(filterSymbolsCallejero(n)==1){alert("Debe introducir una cadena de búsqueda válida.")}else{Autocomplete.millisecEnter=(new Date()).getTime();var g=Autocomplete.field.val();if(g!=""){g=g.trim();if(Autocomplete.searchString==g){Autocomplete.streetNumber=Autocomplete.getNumberFromInput(g);if(Autocomplete.selectedIndex!=-1){var h=Autocomplete.arrayResultNorm[Autocomplete.selectedIndex];h=h.split(",");var f="";if(h.length==6){f=h[5]}var b=h[3];var d=h[4];var c;if(m){c=(function(p,o){m(p,o,b,d)})}var a=function(){$("#idBtnSearchMobile").css("display","");$("#searching").css("display","none");var o=l||(function(p){procesaBusquedaGeneral(p,b,d);Autocomplete.searching=0});o.apply(window,arguments)};$("#idBtnSearchMobile").css("display","none");$("#searching").css("display","");locateSelectedStreet(h[0],h[1],f,h[2],a,c)}}else{var j=Mapea.Util.getMapProjection();var a=function(){$("#idBtnSearchMobile").css("display","");$("#searching").css("display","none");var o=e||procesaBusquedaGeneral;o.apply(window,arguments)};$("#idBtnSearchMobile").css("display","none");$("#searching").css("display","");busquedaGeneral(g,a,k,Mapea.Util.filterLocality,j)}}else{window.Mapea.Util.showInfoMessage("Debe introducir una cadena de b\xFAsqueda.")}}}function procesaBusquedaGeneral(w,h,D){$("#searchResult2").dialog("destroy");if($.browser.msie){$("#searchResult2").dialog({open:function(){$(this).parent().css("left","0px");$(".ui-dialog :button").blur()},autoOpen:false,width:670,height:"auto",modal:false,resizable:true,draggable:true,position:"top"})}else{$("#searchResult2").dialog({autoOpen:false,width:650,height:"auto",modal:false,resizable:true,draggable:true,position:"top",open:function(x,y){$(".ui-dialog :button").blur()}})}var I=w.length;var G=10;var s=Math.ceil(I/G);if(s==0){s=1}var A='<div id="mapeaSearchPages">';A+='<table id="mapeaResultsTable" class="contenido_tabla" cellpadding="2" cellspacing="0" style="width: 100%;">';A+='<thead><tr><td><b>Tipo</b></td><td><b>Descripci&oacute;n 1</b></td><td><b>Descripci&oacute;n 2</b></td><td width="30">&nbsp;</td></tr></thead><tbody>';for(var C=0;C<I;C++){var r=w[C];if(r instanceof address){var b=new Array(r.streetType,r.streetName,r.streetNumber,r.coordX,r.coordY,r.codINE,r.municipio,r.provincia);var g=b[0];var o=b[1];var z=b[2];if(z=="777777"||z=="999999"||z=="0"){z=r.rotulo;if(r.rotulo==""){z="-"}}var B=b[3]+","+b[4];var e=b[5];var k=b[6];if(k==null||k==""){k=h}var a=b[7];if(a==null||a==""){a=D}A+="<tr><td>Vía</td><td>"+g+" "+o+" "+z+"</td><td>"+k+"("+a+')</td><td align="center"><a href="javascript:localizarConInformacion(\''+B+"','"+o+"','"+e+"','"+g+"','"+z+'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(r instanceof servicio){var t=r.alias;var h=r.municipio;var q=r.x;var p=r.y;var B=q+","+p;A+="<tr><td>Servicio</td><td>"+t+"</td><td>"+h+'</td><td align="center"><a href="javascript:localizarConInformacionServicios(\''+B+"','"+t+"','"+h+'\',\'\',\'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(r instanceof sede){var m=r.direccion;var h=r.municipio;var d=r.nombre;var j=r.numero;if(j=="777777"||j=="999999"||j=="0"){j="-"}var F=r.organismo;var c=r.unidadorganizativa;var q=r.x;var p=r.y;var B=q+","+p;A+="<tr><td>Sede</td><td>"+d+" "+m+" "+j+" ("+h+")</td><td>"+c+"("+F+')</td><td align="center"><a href="javascript:localizarConInformacionSede(\''+B+"','"+m+"','"+c+"','"+d+"','"+j+'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(r instanceof nucleo){var n=r.extent;var u=r.idnucleo;var h=r.municipio;var d=r.nombre;var a=r.provincia;var H=r.tipo;if(H==""){H="-"}A+="<tr><td>N&uacute;cleo</td><td>"+d+"("+H+")</td><td>"+h+"("+a+')</td><td align="center"><a href="javascript:centrarNucleo(\''+n+'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(r instanceof road){var l=r.carretera;var E=r.pk;var D=r.provincia;var q=r.x;var p=r.y;var B=q+","+p;var d=l+",km "+E;A+="<tr><td>Carretera</td><td>"+d+"</td><td>"+D+'</td><td align="center"><a href="javascript:localizarConInformacionServicios(\''+B+"','"+d+"','"+D+'\',\'\',\'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}}}}}}A+="</tbody></table>";A+="</div>";$("#searchResult2").html(A);$(".mapeaCloseModal").click(function(){});var f=$("#mapeaIdSearch").find("a.lastQueryTrigger");if(f.length==0){$("#mapeaSearchToggle").after('<a href="javascript:void(0);" class="lastQueryTrigger" title="Mostrar &uacute;ltima consulta"><img src="'+Mapea.global.THEME_IMG_PATH+'list.jpg" alt="Mostrar &uacute;ltima consulta" /></a>');$("a.lastQueryTrigger").click(function(){$("#searchResult2").dialog("destroy");if($.browser.msie){$("#searchResult2").dialog({open:function(){$(this).parent().css("left","0px");$(".ui-dialog :button").blur()},autoOpen:false,width:670,height:"auto",modal:false,resizable:true,draggable:true,position:"top"})}else{$("#searchResult2").dialog({autoOpen:false,width:650,height:"auto",modal:false,resizable:true,draggable:true,position:"top",open:function(y,J){$(".ui-dialog :button").blur()}})}$("#searchResult2").dialog("open");var x=$("#mapeaSearchToggle").hasClass("mapeaSearchToggle-open");if(x===true){$("#mapeaSearchToggle").click()}})}$("#searchResult2").dialog("open");$("#mapeaResultsTable").dataTable({bSort:false,aLengthMenu:[[10]]});$("#mapeaResultsTable").css("width","");if($.browser.msie){$("#searchResult2").css("height","auto");$("#mapeaSearchPages div[class*='dataTables_']").css("height","auto").css("width","auto")}else{$("#searchResult2").css("height","")}}function locateSelectedStreet(c,d,f,g,e,b){if((window.callejeroProxy!=null)&&(window.callejeroProxy.client!=null)&&(window.callejeroProxy.client.req!=null)){Autocomplete.field.css("background","");window.callejeroProxy.client.req.abort()}var h=function(k){var j=b||obtenerDireccionesResponseAsync;j(k,e)};var a=Mapea.Util.getMapProjection();g=Mapea.Util.filterLocality||g;callejeroProxy.geocoderListSrs(h,errorCallback,d,f,c,g,a)}function muestraDirecciones(f,a){$("#searchResult2").dialog("destroy");if($.browser.msie){$("#searchResult2").dialog({autoOpen:false,width:470,height:470,modal:false,resizable:true,draggable:true,position:"top",open:function(x,y){$(".ui-dialog :button").blur()}})}else{$("#searchResult2").dialog({autoOpen:false,width:450,height:350,modal:false,resizable:true,draggable:true,position:[350,250],open:function(x,y){$(".ui-dialog :button").blur()}})}$("#mapeaSearchToggle").click();var J=a.length;var H=10;var t=Math.ceil(J/H);if(t==0){t=1}var B='<div id="mapeaSearchPages">';B+='<table id="mapeaResultsTable" class="contenido_tabla" cellpadding="2" cellspacing="0">';if(f=="callejero"){B+='<thead><tr><td><b>Tipo v&iacute;a</b></td><td><b>Nombre v&iacute;a</b></td><td><b>Nº</b></td><td width="30">&nbsp;</td></tr></thead><tbody>'}else{if(f=="nucleos"){B+='<thead><tr><td><b>Nombre n&uacute;cleo</b></td><td><b>Municipio</b></td><td><b>Tipo n&uacute;cleo</b></td><td width="30">&nbsp;</td></tr></thead><tbody>'}else{if(f=="sedes"){B+='<thead><tr><td><b>Nombre</b></td><td><b>Nombre v&iacute;a</b></td><td><b>Nº</b></td><td width="30">&nbsp;</td></tr></thead><tbody>'}else{if(f=="servicios"){B+='<thead><tr><td><b>Nombre</b></td><td><b>Municipio</b></td><td width="30">&nbsp;</td></tr></thead><tbody>'}else{if(f=="carreteras"){B+='<thead><tr><td><b>Carretera</b></td><td><b>Provincia</b></td><td><b>Punto kilom&eacute;trico</b></td><td width="30">&nbsp;</td></tr></thead><tbody>'}}}}}if(f=="callejero"&&J>0){var o=a[0];var b=new Array(o.streetType,o.streetName,o.streetNumber,o.coordX,o.coordY,o.codINE);var j=b[0];var q=b[1];var A=b[2];if(A=="777777"||A=="999999"||A=="0"){A=o.rotulo;if(o.rotulo==""){A="-"}}var D=b[3]+","+b[4];var e=b[5];localizarConInformacion(D,q,e,j,A)}for(var E=0;E<J;E++){if(f=="callejero"){var o=a[E];var b=new Array(o.streetType,o.streetName,o.streetNumber,o.coordX,o.coordY,o.codINE);var j=b[0];var q=b[1];var A=b[2];if(A=="777777"||A=="999999"||A=="0"){A=o.rotulo;if(o.rotulo==""){A="-"}}var D=b[3]+","+b[4];var e=b[5];B+="<tr><td>"+j+"</td><td>"+q+"</td><td>"+A+'</td><td align="center"><a href="javascript:localizarConInformacion(\''+D+"','"+q+"','"+e+"','"+j+"','"+A+'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(f=="nucleos"){var k=a[E];var p=k.extent;var z=k.idnucleo;var h=k.municipio;var d=k.nombre;var I=k.tipo;if(I==""){I="-"}B+="<tr><td>"+d+"</td><td>"+h+"</td><td>"+I+'</td><td align="center"><a href="javascript:centrarNucleo(\''+p+'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(f=="sedes"){var u=a[E];var o=u.direccion;var h=u.municipio;var d=u.nombre;var l=u.numero;if(l=="0"){l="-"}var G=u.organismo;var c=u.unidadorganizativa;var s=u.x;var r=u.y;var D=s+","+r;B+="<tr><td>"+d+"</td><td>"+o+"</td><td>"+l+'</td><td align="center"><a href="javascript:localizarConInformacionSede(\''+D+"','"+o+"','"+c+"','"+d+"','"+l+'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(f=="servicios"){var m=a[E];var w=m.alias;var h=m.municipio;var s=m.x;var r=m.y;var D=s+","+r;B+="<tr><td>"+w+"</td><td>"+h+'</td><td align="center"><a href="javascript:localizarConInformacionServicios(\''+D+"','"+w+"','"+h+'\',\'\',\'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}else{if(f=="carreteras"){var m=a[E];var n=m.carretera;var F=m.pk;var C=m.provincia;var s=m.x;var r=m.y;var D=s+","+r;var d=n+",km "+F;B+="<tr><td>"+n+"</td><td>"+C+"</td><td>"+F+'</td><td align="center"><a href="javascript:localizarConInformacionServicios(\''+D+"','"+d+"','"+C+'\',\'\',\'\')" class="mapeaCloseModal" title="Situar en el mapa"><img src="'+Mapea.global.THEME_IMG_PATH+'search/ping.png" alt="Situar en el mapa" /></a></td></tr>'}}}}}}B+="</tbody></table></div>";$("#searchResult2").html(B);var g=$("#mapeaIdSearch").find("a.lastQueryTrigger");if(g.length==0){$("#mapeaSearchToggle").after('<a href="javascript:void(0);" class="lastQueryTrigger" title="Mostrar &uacute;ltima consulta"><img src="'+Mapea.global.THEME_IMG_PATH+'list.jpg" alt="Mostrar &uacute;ltima consulta" /></a>');$("a.lastQueryTrigger").click(function(){$("#searchResult2").dialog("destroy");if($.browser.msie){$("#searchResult2").dialog({autoOpen:false,width:470,height:"auto",modal:false,resizable:true,draggable:true,position:"top",open:function(y,K){$(".ui-dialog :button").blur()}})}else{$("#searchResult2").dialog({autoOpen:false,width:450,height:"auto",modal:false,resizable:true,draggable:true,position:[350,250],open:function(y,K){$(".ui-dialog :button").blur()}})}$("#searchResult2").dialog("open");var x=$("#mapeaSearchToggle").hasClass("mapeaSearchToggle-open");if(x===true){$("#mapeaSearchToggle").click()}})}$("#searchResult2").dialog("open");$("#mapeaResultsTable").dataTable({bSort:false,aLengthMenu:[[10]]});$("#searchResult2").dialog("widget").css("top","5%").css("left","32%")}function onChangeTipoVia(a){var b=a.selectedIndex;tipoViaSelected=a.options[b].value}function onChangeServicio(a){var b=a.selectedIndex;tipoServicioSelected=a.options[b].value}function onChangeProvincia(b){var c=b.selectedIndex;provinciaSelected=b.options[c].value;var a=getBrowserName();if(provinciaSelected=="00"){document.getElementById("idSelectMunicipio").selectedIndex="0";document.getElementById("idSelectMunicipio").options.length=1;municipioSelected=""}else{loadMunicipios(provinciaSelected)}}function onChangeProvinciaSede(b){var c=b.selectedIndex;provinciaSedeSelected=b.options[c].value;var a=getBrowserName();if(provinciaSedeSelected=="00"){document.getElementById("idSelectMunicipioSede").selectedIndex="0";document.getElementById("idSelectMunicipioSede").options.length=1;municipioSedeSelected=""}else{loadMunicipiosSede(provinciaSedeSelected)}}function onChangeProvinciaServicio(b){var c=b.selectedIndex;provinciaServicioSelected=b.options[c].value;var a=getBrowserName();if(provinciaServicioSelected=="00"){document.getElementById("idSelectMunicipioServicio").selectedIndex="0";document.getElementById("idSelectMunicipioServicio").options.length=1;municipioServicioSelected=""}else{loadMunicipiosServicio(provinciaServicioSelected)}}function onChangeMunicipio(a){var b=a.selectedIndex;municipioSelected=a.options[b].value}function onChangeMunicipioSede(a){var b=a.selectedIndex;municipioSedeSelected=a.options[b].value}function onChangeMunicipioServicio(a){var b=a.selectedIndex;municipioServicioSelected=a.options[b].value}function ocultaPopup(){document.getElementById("ventana_popup").style.display="none";var a=document.getElementById("idTable");if(a!=null){document.getElementById("idTable").style.display="none"}}function localizarConInformacion(h,k,a,d,f){document.getElementById("ventana_popup").style.display="none";if(h==","||h=="0.0,0.0"){Mapea.Util.showErrorMessage("Calle sin referencia geom\xE9trica")}else{var e=h.split(",");var j=parseFloat(e[0]);var g=parseFloat(e[1]);var c=e[0];var b=e[1];initolvars();drawmultipoint(h,k,a,d,f);map.setCenter(new OpenLayers.LonLat(c,b),14)}}function localizarConInformacionSede(h,b,d,k,f){document.getElementById("ventana_popup").style.display="none";if(h==","){Mapea.Util.showErrorMessage("Calle sin referencia geom\xE9trica")}else{var e=h.split(",");var j=parseFloat(e[0]);var g=parseFloat(e[1]);var c=e[0];var a=e[1];initolvars();drawmultipointSede(h,b,d,k,f);map.setCenter(new OpenLayers.LonLat(c,a),14)}}function localizarConInformacionServicios(j,d,a,g,e){document.getElementById("ventana_popup").style.display="none";if(j==","){Mapea.Util.showErrorMessage("Calle sin referencia geom\xE9trica")}else{var f=j.split(",");var k=parseFloat(f[0]);var h=parseFloat(f[1]);var c=f[0];var b=f[1];initolvars();drawmultipointServicio(j,d,a);map.setCenter(new OpenLayers.LonLat(c,b),14)}}function centrarNucleo(g){document.getElementById("ventana_popup").style.display="none";if(g==""||g==null){Mapea.Util.showErrorMessage("No existe referencia geom\xE9trica")}else{var c=g.split(",");var b=c[1];var f=c[0];var a=c[3];var e=c[2];var d=new OpenLayers.Bounds(b,a,f,e);map.zoomToExtent(d)}}function initolvars(b){var a=b||window.map;if(!Mapea.global.CDALayer){Mapea.global.CDALayer=new Mapea.Layer.Vector("Resultados",{displayInLayerSwitcher:false,ratio:2});a.addLayer(Mapea.global.CDALayer,true);Mapea.global.CDALayer.events.register("featureunselected",this,Mapea.Util.closePopup);Mapea.global.CDALayer.events.register("featureselected",this,onFeatureSelectCalle);a.uniqueSelectFeatureCtrl.addLayers(Mapea.global.CDALayer)}else{eraselayer(a)}}function drawmultipoint(j,l,b,e,g){var h=[];var c=j.split(" ");var f=null;var d=null;var m=null;var k=null;initolvars();for(var a=0;a<c.length;a++){f=c[a].split(",");d=new OpenLayers.Geometry.Point(f[0],f[1]);h.push(d)}m=new OpenLayers.Geometry.MultiPoint(h);k=Mapea.Util.drawStyledMPoint(m,{tipoVia:e,nombreCalle:l,numero:g});Mapea.global.CDALayer.addFeatures([k])}function drawmultipointSede(j,b,c,l,g){var h=[];var d=j.split(" ");var f=null;var e=null;var m=null;var k=null;initolvars();for(var a=0;a<d.length;a++){f=d[a].split(",");e=new OpenLayers.Geometry.Point(f[0],f[1]);h.push(e)}m=new OpenLayers.Geometry.MultiPoint(h);k=Mapea.Util.drawStyledMPoint(m,{nombre:l,direccion:b,numero:g,unidadorganizativa:c});Mapea.global.CDALayer.addFeatures([k])}function drawmultipointServicio(h,e,b){var g=[];var c=h.split(" ");var f=null;var d=null;var k=null;var j=null;initolvars();for(var a=0;a<c.length;a++){f=c[a].split(",");d=new OpenLayers.Geometry.Point(f[0],f[1]);g.push(d)}k=new OpenLayers.Geometry.MultiPoint(g);j=Mapea.Util.drawStyledMPoint(k,{alias:e,municipio:b});Mapea.global.CDALayer.addFeatures([j])}function eraselayer(a){if(Mapea.global.CDALayer){Mapea.Util.closePopup();Mapea.global.CDALayer.destroyFeatures();puntoX="undefined";puntoY="undefined"}}function onFeatureSelectCalle(b,a){var j=a||window.map;var k=b.feature;selectedFeature=k;var f=null;var h={};for(var d in k.attributes){if(d=="tipoVia"){h["Tipo de V&iacute;a"]=k.attributes[d]}else{if(d=="nombreCalle"){h["Nombre de la V&iacute;a"]=k.attributes[d]}else{if(d=="nombre"){h.Nombre=k.attributes[d]}else{if(d=="direccion"){h["Nombre de la V&iacute;a"]=k.attributes[d]}else{if(d=="numero"){h["N&uacute;mero"]=k.attributes[d]}else{if(d=="unidadorganizativa"){h["Unidad Organizativa"]=k.attributes[d]}else{if(d=="alias"){h.Nombre=k.attributes[d]}else{if(d=="municipio"){h.Localidad=k.attributes[d]}else{if(d=="html"){f=k.attributes[d]}}}}}}}}}}if(f==null){f=Mapea.Util.objectToTable(h)}var e=Mapea.Util.getClickedPixelFromEvent(window.event);var c=Mapea.Util.getPopupInPixel(j,e);if(c){var g=c.contentHTML;g+='<div class="popup-info-separator">Dirección</div>';g+=f;c.setContentHTML(g);c.show()}else{c=new Mapea.Popup.FramedCloud("popup_feature",k.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(400,300),f,null,true,function(l){l.feature=k;Mapea.Util.unselectFeature(l)});c.pixelX=e.x;c.pixelY=e.y;k.popup=c;j.addPopup(c)}}function onFeatureUnselectCalle(a){map.removePopup(a.popup)}function cleanStreetForm(){eraselayer(map);document.getElementById("idSelectTipoVia").selectedIndex="0";document.getElementById("idSelectMunicipio").selectedIndex="0";document.getElementById("idSelectProvincia").selectedIndex="0";document.getElementById("idInputTextVia").value="";document.getElementById("idInputTextNumero").value=""}function cleanOuForm(){eraselayer(map);document.getElementById("idSelectMunicipioSede").selectedIndex="0";document.getElementById("idSelectProvinciaSede").selectedIndex="0";document.getElementById("idInputTextSede").value=""}function cleanLocalityForm(){document.getElementById("idInputPoblacion").value=""}function cleanServiceForm(){eraselayer(map);document.getElementById("idSelectServicios").selectedIndex="0";document.getElementById("idSelectMunicipioServicio").selectedIndex="0";document.getElementById("idSelectProvinciaServicio").selectedIndex="0"}function cleanRoadForm(){eraselayer(map);document.getElementById("idInputCarreteras").value="";document.getElementById("idInputpk").value=""}function cleanSearchGeneralForm(){if((($.browser.msie)&&(Autocomplete.field.css("background")!="")||!($.browser.msie))){eraselayer(map);document.getElementById("idInputSearchCallejero").value=""}}function localizarConInformacionSigc(h,k,a,d,f){if(h==","||h=="0.0,0.0"){Mapea.Util.showErrorMessage("Calle sin referencia geométrica")}else{var e=h.split(",");var j=parseFloat(e[0]);var g=parseFloat(e[1]);var c=e[0];var b=e[1];initolvars(sigcMap.map);drawmultipointSigc(h,k,a,d,f);sigcMap.map.setCenter(new OpenLayers.LonLat(c,b),14)}}function localizarConInformacionSedeSigc(h,b,d,k,f){if(h==","){Mapea.Util.showErrorMessage("Calle sin referencia geométrica")}else{var e=h.split(",");var j=parseFloat(e[0]);var g=parseFloat(e[1]);var c=e[0];var a=e[1];initolvars(sigcMap.map);drawmultipointSedeSigc(h,b,d,k,f);sigcMap.map.setCenter(new OpenLayers.LonLat(c,a),14)}}function localizarConInformacionServiciosSigc(j,d,a,g,e){if(j==","){Mapea.Util.showErrorMessage("Calle sin referencia geométrica")}else{var f=j.split(",");var k=parseFloat(f[0]);var h=parseFloat(f[1]);var c=f[0];var b=f[1];initolvars(sigcMap.map);drawmultipointServicioSigc(j,d,a);sigcMap.map.setCenter(new OpenLayers.LonLat(c,b),14)}}function centrarNucleoSigc(g){if(g==""||g==null){Mapea.Util.showErrorMessage("No existe referencia geométrica")}else{var c=g.split(",");var b=c[1];var f=c[0];var a=c[3];var e=c[2];var d=new OpenLayers.Bounds(b,a,f,e);sigcMap.map.zoomToExtent(d)}}function drawmultipointSigc(j,l,b,e,g){var h=[];var c=j.split(" ");var f=null;var d=null;var m=null;var k=null;initolvars(sigcMap.map);for(var a=0;a<c.length;a++){f=c[a].split(",");d=new OpenLayers.Geometry.Point(f[0],f[1]);h.push(d)}m=new OpenLayers.Geometry.MultiPoint(h);k=Mapea.Util.drawStyledMPoint(m,{tipoVia:e,nombreCalle:l,numero:g});Mapea.global.CDALayer.addFeatures([k])}function drawmultipointSedeSigc(j,b,c,l,g){var h=[];var d=j.split(" ");var f=null;var e=null;var m=null;var k=null;initolvars(sigcMap.map);for(var a=0;a<d.length;a++){f=d[a].split(",");e=new OpenLayers.Geometry.Point(f[0],f[1]);h.push(e)}m=new OpenLayers.Geometry.MultiPoint(h);k=Mapea.Util.drawStyledMPoint(m,{nombre:l,direccion:b,numero:g,unidadorganizativa:c});Mapea.global.CDALayer.addFeatures([k])}function drawmultipointServicioSigc(h,e,b){var g=[];var c=h.split(" ");var f=null;var d=null;var k=null;var j=null;initolvars(sigcMap.map);for(var a=0;a<c.length;a++){f=c[a].split(",");d=new OpenLayers.Geometry.Point(f[0],f[1]);g.push(d)}k=new OpenLayers.Geometry.MultiPoint(g);j=Mapea.Util.drawStyledMPoint(k,{alias:e,municipio:b});Mapea.global.CDALayer.addFeatures([j])}function onFeatureSelectCalleSigc(a){onFeatureSelectCalle(a,sigcMap.map)}function onFeatureUnselectCalleSigc(a){sigcMap.map.removePopup(a.popup)}var drawRestSearchControls=function(d){$("#mapeaIdSearch li").hide();$('#mapeaIdSearch div[id*="tabs-"]').hide();var b=d.split(",");var f=false;var g=false;var h=false;for(var c=0,e=b.length;c<e;c++){var a=b[c].toLowerCase();if(a=="searchstreet"){addTab("searchstreet");g=true}else{if(a=="searchlocality"){addTab("searchlocality");h=true}else{if(a=="searchorganizationalunit"){addTab("searchou");h=true}else{if(a.indexOf("searchservice")!=-1){addTab("searchservices");h=true}else{if(a=="searchroad"){addTab("searchroad");h=true}else{if(a=="searchcallejero"){addTab("searchcallejero");f=true}else{Mapea.Util.showErrorMessage("El valor del parámetro options no coincide con ninguno de los disponibles. Consulte el parámetro getOperationsAvailable")}}}}}}}if(Mapea.Util.isMobile){if(f){Mapea.Util.buildMobileSearch()}else{if(g){Mapea.SearchStreet.build()}}}else{if(f&&!h){Mapea.Util.buildMobileSearch()}else{if(g&&!h){Mapea.SearchStreet.build()}else{if(h){if(f){Autocomplete.init("idInputSearchCallejero");$("#btn_help").click(function(j){j.preventDefault();if(animatingCallejeroHelp){return false}animatingCallejeroHelp=true;if(!helpDisplayed){showHelpCallejero()}else{hideHelpCallejero()}})}$("#searchResult2").dialog({autoOpen:false,width:(jQuery.browser.msie)?670:650,height:"auto",modal:false,resizable:true,draggable:true,position:"top",open:function(j,k){$(".ui-dialog :button").blur()}});$("#mapeaIdSearch").tabs({active:window.firstActiveTab});$("#mapeaIdSearch").on("tabsactivate",function(j,k){$("#mapeaSearchToggle").removeClass("mapeaSearchToggle-closed");$("#mapeaSearchToggle").addClass("mapeaSearchToggle-open");window.lastSelectedTab=k.newPanel});$("#mapeaIdSearch").draggable({containment:"window",start:function(j,k){Autocomplete.close();$("#helpdiv").css("display","none");helpDisplayed=false}});$("#mapeaSearchToggle").click(function(){var j=$(this).hasClass("mapeaSearchToggle-open");if(!window.lastSelectedTab){window.lastSelectedTab=$("#mapeaIdSearch>.tab-content[aria-hidden='false']")}if(j===true){$(window.lastSelectedTab).hide();$(this).removeClass("mapeaSearchToggle-open");$(this).addClass("mapeaSearchToggle-closed")}else{$(window.lastSelectedTab).show();$(this).removeClass("mapeaSearchToggle-closed");$(this).addClass("mapeaSearchToggle-open")}});$("#mapeaIdSearch").css("display","");$("#mapeaIdSearch").css("position","absolute");loadTiposVia();loadTiposServicios();Mapea.Util.hasSearchPanel=true}}}}};function htmlMobileSearchCallback(b){if(b&&OpenLayers.Util.isArray(b)){b=b.join("");OpenLayers.String.trim(b)}var c=jQuery(".search-results");if(!b||(b.length==0)){var a='<div class="no-result"><div class="geosearch-value">';a+="No se han encontrado resultados.</div></div>";c.html(a)}else{c.html(b);$(".search-result").click(function(d){var h=$(this);var g=h.html();var k,j;try{k=parseFloat(h.find("#x").val());j=parseFloat(h.find("#y").val())}catch(e){}if(!k||!j){var m=h.find("#bbox").val();if(m&&m.length>0){initolvars();m=m.replace(/#/g,",");centrarNucleo(m)}else{window.Mapea.Util.showErrorMessage("Este resultado no posee referencia geom\xE9trica")}}else{var f=new OpenLayers.Geometry.Point(k,j);initolvars();var n=new OpenLayers.Geometry.MultiPoint([f]);var l=Mapea.Util.drawStyledMPoint(n,{html:g});Mapea.global.CDALayer.addFeatures([l]);map.setCenter(new OpenLayers.LonLat(k,j),14)}})}c.css("display","block");jQuery(".search-results-wrapper").css("display","")}function htmlGeocoderMobileProcessor(h,k,a,c){var f="";var b=h.getElementsByTagName("multiRef");var d='<ul><li class="divider"></li></ul>';if($.browser.msie){for(var e=0;e<b.length;e++){var g=b[e].childNodes;var j={similarity:g[8].text,streetName:g[9].text,streetNumber:g[10].text,streetType:g[11].text,coordX:g[0].text,coordY:g[1].text,rotulo:g[7].text,codINE:g[3].text,matchLevel:g[6].text,municipio:a,provincia:c};f+=d+address2Html(j)}}else{for(var e=0;e<b.length;e++){var g=b[e].childNodes;var j={similarity:g[8].textContent,streetName:g[9].textContent,streetNumber:g[10].textContent,streetType:g[11].textContent,coordX:g[0].textContent,coordY:g[1].textContent,rotulo:g[7].textContent,codINE:g[3].textContent,matchLevel:g[6].textContent,municipio:a,provincia:c};f+=d+address2Html(j)}}k(f)}function htmlSearchCallejeroMobileProcessor(Q,j,H){var t='<ul><li class="divider"></li></ul>';var K=function(x,y){var V="";$(x).find(y).each(function(){var W=$(this).children();V=$(W[0]).text()+"#"+$(W[1]).text()+"#"+$(W[2]).text()+"#"+$(W[3]).text()});return V};var p=[];var n=[];var A=j.getElementsByTagName("multiRef");var M=0;if(Q.indexOf(",")!=-1){Q=Q.split(",")[0]}for(var O=0,S=A.length;O<S;O++){var f;var P="";var C="";var U=A[O].getAttribute("xsi:type");if(U==null){U=A[O].getAttribute("type")}if(U!=null){var N=A[O].childNodes;var m=U.indexOf(":");U=U.substring(m+1,U.length);var b=null;switch(U){case"GeocoderCallejero":f=$(N[10]).text();P=$(N[11]).text();var a=$(N[11]).text();var T=$(N[12]).text();var D=$(N[13]).text();var w=$(N[1]).text();var u=$(N[2]).text();var e=$(N[9]).text();var g=$(N[4]).text();var r=$(N[0]).text();var B=$(N[5]).text();var c="";if(D){c+=D+" "}if(a){c+=a}if(T&&(T!="0")){c+=", "+T}c=$.trim(c);var F="";if(B){F=B}if(r){F+=" ("+r+")"}f=LetterPairSimilarity.calculaParecido(Q,P,"","","","");var G=LetterPairSimilarity.calculaParecidoContenido(P,Q);f=parseFloat(f)+G;C=t+'<div class="search-result address">';C+='<div class="result-title"><span>'+c+"</span></div>";C+='<div class="result-subtitle"><span>'+g+"</span></div>";C+='<div class="result-subtitle important"><span>'+F+"</span></div>";C+='<input id="similarity" type="hidden" value="'+f+'" />';C+='<input id="x" type="hidden" value="'+w+'" />';C+='<input id="y" type="hidden" value="'+u+'" />';C+="</div></div>";break;case"NucleoCallejero":if(N.length==6){var d=K(j,$(N[0].attributes[0]).val());var k=$(N[1]).text();var B=$(N[2]).text();var z=$(N[3]).text();var r=$(N[4]).text();var J=$(N[5]).text();P=$(N[3]).text();f=LetterPairSimilarity.calculaParecido(Q,P,"","","","");var G=LetterPairSimilarity.calculaParecidoContenido(P,Q);f=parseFloat(f)+G;C=t+'<div class="search-result locality">';C+='<div class="result-title"><span>'+B+"</span></div>";C+='<div class="result-subtitle"><span>'+r+"</span></div>";C+='<div class="result-subtitle"><span>'+J+"</span></div>";C+='<input id="similarity" type="hidden" value="'+f+'" />';C+='<input id="bbox" type="hidden" value="'+d+'" />';C+="</div></div>"}break;case"PuntoKilometrico":var R=$(N[0]).text();var l=$(N[1]).text();var r=$(N[2]).text();var I=$(N[3]).text();var E=$(N[4]).text();P=$(N[0]).text();f=LetterPairSimilarity.calculaParecido(Q,P,"","","","");var G=LetterPairSimilarity.calculaParecidoContenido(P,Q);f=parseFloat(f)+G;C=t+'<div class="search-result road">';C+='<div class="result-title"><span>'+R+"</span></div>";C+='<div class="result-subtitle important"><span>Km '+l+"</span></div>";C+='<div class="result-subtitle"><span>'+r+"</span></div>";C+='<input id="similarity" type="hidden" value="'+f+'" />';C+='<input id="x" type="hidden" value="'+I+'" />';C+='<input id="y" type="hidden" value="'+E+'" />';C+="</div></div>";break;case"Servicio":var L=$(N[0]).text();var B=$(N[1]).text();var I=$(N[2]).text();var E=$(N[3]).text();f=1;C=t+'<div class="search-result service">';C+='<div class="result-title"><span>'+L+"</span></div>";C+='<div class="result-subtitle"><span>'+B+"</span></div>";C+='<input id="similarity" type="hidden" value="'+f+'" />';C+='<input id="x" type="hidden" value="'+I+'" />';C+='<input id="y" type="hidden" value="'+E+'" />';C+="</div></div>";break;case"Sede":var h=$(N[0]).text();var B=$(N[1]).text();var z=$(N[2]).text();var q=$(N[3]).text();var s=$(N[4]).text();var o=$(N[5]).text();var I=$(N[6]).text();var E=$(N[7]).text();P=$(N[2]).text();f=LetterPairSimilarity.calculaParecido(Q,P,"","","","");var G=LetterPairSimilarity.calculaParecidoContenido(P,Q);f=parseFloat(f)+G;var c=h;if(q&&(q!="0")){c+=", "+q}c=$.trim(c);C=t+'<div class="search-result orgunit">';C+='<div class="result-title"><span>'+z+"</span></div>";C+='<div class="result-subtitle important"><span>'+s+"</span></div>";C+='<div class="result-subtitle"><span>'+c+"</span></div>";C+='<div class="result-subtitle"><span>'+o+"</span></div>";C+='<div class="result-subtitle"><span>'+B+"</span></div>";C+='<input id="similarity" type="hidden" value="'+f+'" />';C+='<input id="x" type="hidden" value="'+I+'" />';C+='<input id="y" type="hidden" value="'+E+'" />';C+="</div></div>";break}if(C&&(C.length>0)){if(f>=M){p.push(C)}else{n.push(C)}}}}if(p.length==0){p=new Array().concat(n)}p.sort(function(y,x){var W=-1;var Y=$(y).find("#similarity").val();if(Y){W=parseFloat(Y)}var V=-1;var X=$(x).find("#similarity").val();if(X){V=parseFloat(X)}if(W<V){return 1}if(W>V){return -1}return 0});if(H!=null){H(p)}}function address2Html(a){var d="";if(a.streetType){d+=a.streetType+" "}if(a.streetName){d+=a.streetName}if(a.streetNumber&&(a.streetNumber!="0")){d+=", "+a.streetNumber}d=$.trim(d);var c="";if(a.municipio){c+=a.municipio+" "}if(a.provincia){c+="("+a.provincia+")"}c=$.trim(c);var b='<div class="search-result address">';b+='<div class="result-icon"></div>';b+='<div class="result-title"><span>'+d+"</span></div>";b+='<div class="result-subtitle"><span>'+a.codINE+"</span></div>";b+='<div class="result-subtitle"><span>'+c+"</span></div>";b+='<input id="x" type="hidden" value="'+a.coordX+'" />';b+='<input id="y" type="hidden" value="'+a.coordY+'" />';b+="</div></div>";return b}function createPlaceHolderIE(c){var b=$("#"+c);var a=b.attr("placeholder");b.css("color","#999");b.val(a);b.focus(function(e){var d=$(this).val();if(d==a){$(this).css("color","#000");$(this).val("")}});b.blur(function(d){if($(this).val().length<=0){$(this).css("color","#999");$(this).val(a)}})}function showHelpCallejero(){Mapea.Util.relocateHelpCallejero();$("#helpdiv").show("blind",null,500,function(){animatingCallejeroHelp=false});helpDisplayed=true}function hideHelpCallejero(){$("#helpdiv").hide("blind",null,500,function(){animatingCallejeroHelp=false});helpDisplayed=false}function addTab(c){activeTabsClassName.push(c);$('#mapeaIdSearch li[class*="control-'+c+'"]').show();$('#mapeaIdSearch div[class*="control-'+c+'"]').show();var b=$("#mapeaIdSearch").find("li");for(var a=0;a<b.length;a++){if($(b[a]).hasClass("control-"+c)){if(window.firstActiveTab==null){window.firstActiveTab=a}}}}Mapea.CDA={};Mapea.CDA.geosearch=function(l,j,b,c,g,d,f){var k=l;if(b!=null){k+="/"+b}if(c!=null){k+=c}var e=OpenLayers.Util.getParameterString(j);var h=OpenLayers.Util.urlAppend(k,e)+"&mapeaop=geosearch";var a={url:h,success:function(m){var p=new OpenLayers.Format.JSON();var o;try{o=p.read(m.responseText);OpenLayers.Function.bind(g,f)(o)}catch(n){d(n)}},failure:d,scope:f,requestHeaders:{"Cache-Control":"no-cache",Pragma:"no-cache"}};OpenLayers.Request.GET(a)};Mapea.CDA.getLocalityFromCodINE=function(a,c,b){callejeroProxy.comprobarCodIne(function(g){var j=g.getElementsByTagName("multiRef");if(j.length>0){var e=j[0];var d=e.getElementsByTagName("nombreMunicipio")[0];var h=e.getElementsByTagName("nombreProvincia")[0];var f=jQuery(d).text();var k=jQuery(h).text();c(f,k)}else{headForm=jQuery(".search-form-locality").css("display","none");b('El código "'+a+'" no pertenece a ningún municipio.')}},b,a)};Autocomplete=(function(){var _autoSelectedFlag=false;var _searchString="";var _arrayResultNorm=new Array();var _millisecEnter=0;var _field=null;var _similarityUmbral=0.7;var _isCreated=false;var _selectedOptionValue;var _init=function(id,callbacks){Autocomplete.field=$("#"+id);Autocomplete.parsedValues={};var autocompleteSelectCallback;var enterpressCallback;if(callbacks){autocompleteSelectCallback=callbacks.onselect;enterpressCallback=callbacks.onenterpress}Autocomplete.field.keypress(function(event){if(helpDisplayed){hideHelpCallejero()}if(Autocomplete.autoSelectedFlag){Autocomplete.autoSelectedFlag=false}else{if(event.which==13){Autocomplete.millisecEnter=(new Date()).getTime();if(enterpressCallback){enterpressCallback(event)}else{if(Mapea.Util.hasMobileSearchPanel){$("#idBtnSearchMobile").click()}else{onBtnBuscarGeneral()}}}}});Autocomplete.field.autocomplete({minLength:3,delay:500,position:{at:"left-7 top+26"},source:function(request,response){var currentInstant=(new Date()).getTime();var instantDifference=currentInstant-Autocomplete.millisecEnter;if((instantDifference>600)&&navigator.userAgent.toLocaleLowerCase().indexOf("chrome")!=-1){_waitSourceAutocomplete(request,response)}else{if(instantDifference>1000){_waitSourceAutocomplete(request,response)}}},select:function(event,ui){var fullSearch=false;Autocomplete.selectedOption=true;var selectedItemId=$("ul.ui-autocomplete li.ui-menu-item a.ui-corner-all.ui-state-focus").attr("id");var items=$("ul.ui-autocomplete li.ui-menu-item a.ui-corner-all");Autocomplete.selectedIndex=-1;for(var i=0,l=items.length;i<l&&Autocomplete.selectedIndex==-1;i++){var itemId=$(items[i]).attr("id");if(itemId==selectedItemId){Autocomplete.selectedIndex=i}}var selectedText=ui.item.value;var number=(Autocomplete.streetNumber!=null)?" "+Autocomplete.streetNumber:"";if(selectedText.indexOf(",")==-1){}else{var nameLocality=selectedText.split(",");selectedText=nameLocality[0].trim()+number+", "+nameLocality[1].trim();Autocomplete.searchString=selectedText;fullSearch=true}if(event.which==13){Autocomplete.autoSelectedFlag=true}if(autocompleteSelectCallback){var parsedValue=Autocomplete.parsedValues[ui.item.value];if(parsedValue){autocompleteSelectCallback(parsedValue,fullSearch)}}},open:function(event,ui){$(".ui-autocomplete").css("z-index","2000");var inputText=Autocomplete.field.val();Autocomplete.streetNumber=_getNumberFromInput(inputText)},close:function(ev,ui){if(Autocomplete.selectedOption==true){var number=(Autocomplete.streetNumber!=null)?" "+Autocomplete.streetNumber:"";if(Autocomplete.field.val().indexOf(",")==-1){Autocomplete.field.val(Autocomplete.field.val()+number+", ");Autocomplete.streetNumber=null;Autocomplete.field.autocomplete("search",Autocomplete.field.val())}else{var nameLocality=Autocomplete.field.val().split(",");Autocomplete.field.val(nameLocality[0].trim()+number+", "+nameLocality[1].trim());Autocomplete.streetNumber=null;Autocomplete.field.click()}}}});Autocomplete.isCreated=true};var _close=function(){if(Autocomplete.isCreated){Autocomplete.field.autocomplete("close");$(".ui-autocomplete").hide()}};_waitSourceAutocomplete=function(request,response){if((window.callejeroProxy!=null)&&(window.callejeroProxy.client!=null)&&(window.callejeroProxy.client.req!=null)){window.callejeroProxy.client.req.abort()}Autocomplete.selectedOption=false;Autocomplete.field.css("background","url('"+Mapea.global.THEME_IMG_PATH+"ui-anim_basic_16x16.gif') right center no-repeat");Autocomplete.searching=2;_autocompletarDireccion(request.term.trim(),10,function(res){Autocomplete.field.css("background","");var arrayRes=new Array();Autocomplete.arrayResultNorm=new Array();Autocomplete.parsedValues={};for(var i=0,l=res.length;i<l;i++){if(res[i]!=null){var parsedValue={};Autocomplete.arrayResultNorm.push(res[i]);var street=res[i].split(",");var streetDecorator=street[0]+" "+street[1];if(street.length>3){streetDecorator+=", "+street[3]+" ("+street[4]+")";parsedValue.tipoVia=street[0];parsedValue.nombreVia=street[1];parsedValue.numeroPortal=street[5];parsedValue.municipio=street[3];parsedValue.provincia=street[4];parsedValue.complementos=""}arrayRes.push(streetDecorator);Autocomplete.parsedValues[streetDecorator]=parsedValue}}response(arrayRes);Autocomplete.searching=0})};var _getNumberFromInput=function(inputString){inputString=inputString.trim();inputString=inputString.replace(",","");var words=inputString.split(" ");var streetNumber=null;for(var i=0,l=words.length;i<l;i++){var word=words[i].trim();if(word!=""&&!isNaN(word)){return word}}};var _autocompletarDireccion=function(cadena,limit,callback){window.callejeroProxy.autocompletarDireccionMunicipio(function(response){var tags=response.getElementsByTagName("autocompletarDireccionMunicipioReturn");var results=new Array();for(var i=0,nl=tags.length;i<nl;i++){var type=tags[i].getAttribute("xsi:type");if(type==null){type=tags[i].getAttribute("type")}if(type!=null){var ipuntos=type.indexOf(":");type=type.substring(ipuntos+1,type.length);if(type!=null&&type=="string"){var street="";if($.browser.msie){street=tags[i].text}else{street=tags[i].textContent}if(street!=null){results.push(street)}}}}if(callback!=null){eval(callback)(results)}},errorCallback,cadena,limit,Mapea.Util.filterLocality)};return{autoSelectedFlag:_autoSelectedFlag,searchString:_searchString,arrayResultNorm:_arrayResultNorm,millisecEnter:_millisecEnter,field:_field,similarityUmbral:_similarityUmbral,isCreated:_isCreated,init:_init,close:_close,getNumberFromInput:_getNumberFromInput}}());Mapea.Geosearch={};Mapea.Geosearch.CURRENT_PAGE=0;Mapea.Geosearch.ROWS=20;Mapea.Geosearch.MAX_RESULTS=999;Mapea.Geosearch.GEOSEARCH_SEARCHING=false;Mapea.Geosearch.STREET_SEARCHING=false;Mapea.Geosearch.SHOW_RESULTS=false;Mapea.Geosearch.USER_PARAMETERS={};Mapea.Geosearch.FILTER_LOCALITY=null;Mapea.Geosearch.FILTER_CITY=null;Mapea.Geosearch.GEOCODER_RESPONSE=null;Mapea.Geosearch.GEOSEARCH_RESPONSE=null;Mapea.Geosearch.build=function(f,d){Mapea.Geosearch.URL=f;var e=f.indexOf("?");if(e!=-1){Mapea.Geosearch.URL=f.substring(0,e);var b=f.substring(e);Mapea.Geosearch.USER_PARAMETERS=OpenLayers.Util.getParameters(b)}Mapea.Geosearch.LAYER=new Mapea.Layer.Geosearch({geosearchUrl:Mapea.Geosearch.URL,hiddenFields:["_version_","solrid","keywords","geom","score"]},{name:"Resultados"});Mapea.Geosearch.LAYER._onSuccess=OpenLayers.Function.bind(function(g){var h=this.geosearchParams;this.clear();OpenLayers.Util.extend(this.geosearchParams,h);this._getResultsFromResponse(g);this._drawResults();this.refresh();this.redraw()},Mapea.Geosearch.LAYER);map.addLayer(Mapea.Geosearch.LAYER,true);var c=/.*\,?searchstreet\,?.*/i;Mapea.Geosearch.SEARCHSTREET=c.test(d);if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.LAYER.geocoderFeatures=[];jQuery(".search-results").css("display","none")}else{jQuery(".geosearchstreet-results").css("display","none")}Mapea.Geosearch.GEOCODER_STYLE=OpenLayers.Util.applyDefaults({externalGraphic:Mapea.global.THEME_IMG_PATH+"search/pointerRed.png"},Mapea.Util.featureIconStyle);if(Mapea.Util.filterLocality&&Mapea.Geosearch.SEARCHSTREET){var a=jQuery(".search-form-locality").css("display","block");Mapea.CDA.getLocalityFromCodINE(Mapea.Util.filterLocality,function(g,l){Mapea.Geosearch.FILTER_LOCALITY=g;Mapea.Geosearch.FILTER_CITY=l;var j=Mapea.Util.beautifyString(g);var h=Mapea.Util.beautifyString(l);var k="";if(!Mapea.Util.isMobile){k+="Búsquedas en "}k+=j+" ("+h+")";a.html(k)},function(){Mapea.Util.showErrorMessage("El código del municipio '"+Mapea.Util.filterLocality+"' no es válido")})}if(Mapea.Util.isMobile){Mapea.Geosearch.buildMobile();Mapea.Util.hasMobileGeosearchPanel=true}else{Mapea.Geosearch.buildREST();Mapea.Util.hasGeosearchPanel=true}};Mapea.Geosearch.buildREST=function(){$(".help-btn").css("display","none");$("#mapea-search-mobile").css("display","");Mapea.Geosearch.RESULTS_BUTTON=$(".results-btn");Mapea.Geosearch.SEARCH_INPUT=$("#idInputSearchMobile");Mapea.Geosearch.SEARCH_BUTTON=$("#idBtnSearchMobile");Mapea.Geosearch.CLEAR_BUTTON=$(".clear-btn");Mapea.Geosearch.GEOSEARCH_CONTAINER=$(".search-results");Mapea.Geosearch.SEARCHING_IMAGE=$("#searching");Mapea.Geosearch.RESULTS_WRAPPER=$(".search-results-wrapper");$(".search-mobile-maximize").click(function(c){c.preventDefault();var b=$(this).attr("open");if(b){var a=$("#mapea-search-mobile").attr("desplace");a=parseInt(a);$("#mapea-search-mobile").css("margin-left",a);$(this).attr("open",false)}else{$("#mapea-search-mobile").css("margin-left","0px");$(this).attr("open",true);(!Mapea.Util.isMobile&&Mapea.Geosearch.SEARCH_INPUT.focus())}});if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.GEOSEARCH_CONTAINER=$("#geosearch-results");Mapea.Geosearch.STREET_CONTAINER=$("#searchstreet-results")}Mapea.Geosearch.SEARCH_BUTTON.click(function(a){a.preventDefault();var b=Mapea.Geosearch.SEARCH_INPUT.val();Mapea.Geosearch.execute(b)});Mapea.Geosearch.CLEAR_BUTTON.click(Mapea.Geosearch.clearButtonFn);Mapea.Geosearch.RESULTS_BUTTON.click(Mapea.Geosearch.showHideResults);if(Mapea.Geosearch.SEARCHSTREET){Autocomplete.init("idInputSearchMobile",{onselect:Mapea.Geosearch.selectValue,onenterpress:function(a){Mapea.Geosearch.SEARCH_BUTTON.click()}});$(".geosearchstreet-results").tabs()}else{Mapea.Geosearch.SEARCH_INPUT.keypress(function(a){if(a.which==13){Mapea.Geosearch.SEARCH_BUTTON.click()}})}jQuery(".search-results-header").css("display","none")};Mapea.Geosearch.execute=function(a){Mapea.Geosearch.QUERY=OpenLayers.String.trim(a||"");if(Mapea.Geosearch.QUERY.length>0){Mapea.Geosearch.initSearch();Mapea.Geosearch.executeGeosearch(Mapea.Geosearch.callback);if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.executeGeocoder(Mapea.Geosearch.initalizeGeocoder)}}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de búsqueda")}};Mapea.Geosearch.callback=function(a){Mapea.Geosearch.GEOSEARCH_RESPONSE=a;Mapea.Geosearch.GEOSEARCH_SEARCHING=false;if(!Mapea.Geosearch.SEARCHSTREET||(Mapea.Geosearch.SEARCHSTREET&&!Mapea.Geosearch.STREET_SEARCHING)){Mapea.Geosearch.ManageResponses()}};Mapea.Geosearch.ManageResponses=function(a){if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.ManageGeocoderResponse(Mapea.Geosearch.GEOCODER_RESPONSE.response,Mapea.Geosearch.GEOCODER_RESPONSE.municipio,Mapea.Geosearch.GEOCODER_RESPONSE.provincia)}if(!a){Mapea.Geosearch.ManageGeosearchResponse(Mapea.Geosearch.GEOSEARCH_RESPONSE)}else{Mapea.Geosearch.GEOSEARCH_CONTAINER.html("")}};Mapea.Geosearch.ManageGeosearchResponse=function(a){Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.Geosearch.GEOSEARCH_CONTAINER.html("");Mapea.Geosearch.drawResultsFeature(false);Mapea.Geosearch.CURRENT_PAGE+=Mapea.Geosearch.ROWS;Mapea.Geosearch.enablePagination(OpenLayers.Function.Void,Mapea.Geosearch.callbackMoreResults,Mapea.Geosearch.geosearchErrorCallback);Mapea.Geosearch.checkEmptyResults();Mapea.Geosearch.hideSearchingImages();Mapea.Geosearch.RESULTS_BUTTON.css("display","");if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.SEARCH_INPUT.autocomplete("close")}Mapea.Geosearch.showResults();Mapea.Geosearch.zoomResultBbox()};Mapea.Geosearch.ManageGeocoderResponse=function(a,c,b){Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.Geosearch.STREET_CONTAINER.html("");Mapea.Geosearch.handleGeocoderMunProvResponse(a,c,b,function(e){Mapea.Geosearch.drawGeocoderResults(e);Mapea.Geosearch.hideSearchingImages();if(Mapea.Geosearch.STREET_CONTAINER.children().length>0){Mapea.Geosearch.attachEventsToGeocoderResults();Mapea.Geosearch.SEARCH_INPUT.autocomplete("close");Mapea.Geosearch.RESULTS_BUTTON.css("display","");Mapea.Geosearch.showResults()}else{var d='<div class="no-result"><div class="geosearch-value">';d+="No se han encontrado direcciones para la búsqueda ";d+='"'+Mapea.Geosearch.QUERY+'"';d+="</div></div>";Mapea.Geosearch.STREET_CONTAINER.append(d)}Mapea.Geosearch.zoomResultBbox()})};Mapea.Geosearch.drawGeocoderResults=function(a){Mapea.Geosearch.LAYER.geocoderFeatures.length=0;for(var f=0,e=a.length;f<e;f++){var g=a[f];var d=Mapea.Geosearch.geocoderResult2Feature(g);var b=d.clone();b.fromGeocoder=true;d.cloneId=b.id;var c=Mapea.Geosearch.geocoderFeature2Html(d);Mapea.Geosearch.STREET_CONTAINER.append(c);Mapea.Geosearch.LAYER.geocoderFeatures.push(b);Mapea.Geosearch.LAYER.addFeatures([d])}};Mapea.Geosearch.drawResultsFeature=function(b){if(!Mapea.Geosearch.hasResults()){var c='<div class="no-result"><div class="geosearch-value">';c+="No se han encontrado resultados para la búsqueda ";c+='"'+Mapea.Geosearch.QUERY+'"';c+="</div></div>";Mapea.Geosearch.GEOSEARCH_CONTAINER.append(c)}else{var a;if(Mapea.Geosearch.LAYER.hasSpatialResults()){a=Mapea.Geosearch.LAYER.spatialFeatures}else{a=Mapea.Geosearch.LAYER.textFeatures}Mapea.Geosearch.drawFeaturesHtml(a,b);Mapea.Geosearch.attachEventsToGeosearchResults();Mapea.Geosearch.GEOSEARCH_CONTAINER.scrollTop(0);Mapea.Geosearch.zoomResultBbox()}};Mapea.Geosearch.feature2Html=function(f,m,a){var e;if(a){e='<div class="new-result">'}else{e='<div class="search-result">'}e+='<div class="asterisk" title="Nuevo resultado obtenido tras la paginación"></div>';var g=false;for(var h in m.attributes){var d=true;for(var c=0,b=f.hiddenFields.length;c<b;c++){var l=f.hiddenFields[c];if(h==l){d=false;break}}if(d){if(g){e+='<ul class="divider"><li></li></ul>'}var k=f._beautifyName(h);var j=m.attributes[h];e+=Mapea.Geosearch.keyValue2Html(k,j);g=true}}if(!g){e+=Mapea.Geosearch.keyValue2Html("Informaci&oacute;n","Punto de inter&eacute;s con informaci&oacute;n espacial pero sin informaci&oacute;n alfanum&eacute;rica")}e+='<input id="featureId" type="hidden" value="'+m.id+'"></input>';e+="</div>";return e};Mapea.Geosearch.geocoderResult2Feature=function(a,p,g){var l=a.coordX;var k=a.coordY;var c=a.streetName;var f=a.streetNumber;var m=a.codINE;var j=a.streetType;var d=a.municipio;if(d==null||d==""){d=p}var e=a.provincia;if(e==null||e==""){e=g}var b=j+" "+(f==0?c:c+", "+f);var h=Mapea.Geosearch.GEOCODER_STYLE;var o=new OpenLayers.Geometry.MultiPoint([new OpenLayers.Geometry.Point(l,k)]);var n=new OpenLayers.Feature.Vector(o,{"Tipo de v&iacute;a":Mapea.Geosearch.LAYER._beautifyName(j),"Nombre de v&iacute;a":Mapea.Geosearch.LAYER._beautifyName(c),"N&uacute;mero":Mapea.Geosearch.LAYER._beautifyName(f)},h);n.attributes.keywords=[b];n.fromGeocoder=true;n.attributes.municipio=Mapea.Geosearch.LAYER._beautifyName(d);n.attributes.provincia=Mapea.Geosearch.LAYER._beautifyName(e);return n};Mapea.Geosearch.geocoderFeature2Html=function(j){var a=j.attributes["Nombre de v&iacute;a"];var e=j.attributes["N&uacute;mero"];var h=j.attributes["Tipo de v&iacute;a"];var c=j.attributes.municipio;var d=j.attributes.provincia;var b=h+" "+(e==0?a:a+", "+e);var f='<div class="search-result street">';f+=Mapea.Geosearch.keyValue2Html(null,b);var g=c+" ("+d+")";f+=Mapea.Geosearch.keyValue2Html(null,g);f+='<input id="featureId" type="hidden" value="'+j.id+'" />';f+='<input id="cloneId" type="hidden" value="'+j.cloneId+'" />';f+="</div>";return f};Mapea.Geosearch.keyValue2Html=function(b,c){var a='<table class="result-table"><tr>';if(b){a+='<td class="key">';a+=b;a+="</td>"}a+='<td class="value">';a+=c;a+="</td>";a+="</tr></table>";return a};Mapea.Geosearch.attachEventsToGeosearchResults=function(){Mapea.Geosearch.GEOSEARCH_CONTAINER.children().each(function(){var a=$(this);if(a.attr("evtAdded")==null){a.attr("evtAdded",true);a.click(function(d){d.preventDefault();var f=$(this).children("#featureId").val();var c=Mapea.Geosearch.LAYER.getFeatureById(f);c.layer=Mapea.Geosearch.LAYER;Mapea.Util.unselectAllFeatures(map);Mapea.Geosearch.LAYER.map.uniqueSelectFeatureCtrl.clickFeature(c);if(c.geomFeatureId){var b=Mapea.Geosearch.LAYER.getFeatureById(c.geomFeatureId);map.zoomToExtent(b.geometry.bounds)}if(Mapea.Util.isMobile){Mapea.Geosearch.hideResults()}})}})};Mapea.Geosearch.attachEventsToGeocoderResults=function(){Mapea.Geosearch.STREET_CONTAINER.children(".search-result").each(function(){var a=$(this);if(a.attr("evtAdded")==null){a.attr("evtAdded",true);a.click(function(f){f.preventDefault();var g=$(this).children("#featureId").val();var j=$(this).children("#cloneId").val();var d=Mapea.Geosearch.LAYER.getFeatureById(g);if(!d){d=Mapea.Geosearch.LAYER.getFeatureById(j)}d.layer=Mapea.Geosearch.LAYER;Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.Geosearch.LAYER.map.uniqueSelectFeatureCtrl.clickFeature(d);var c=d.geometry.getCentroid().x;var h=d.geometry.getCentroid().y;var b=new OpenLayers.LonLat(c,h);map.setCenter(b,14);if(Mapea.Util.isMobile){Mapea.Geosearch.hideResults()}})}})};Mapea.Geosearch.callbackMoreResults=function(a){Mapea.Geosearch.drawFeaturesHtml(Mapea.Geosearch.LAYER.responseFeatures,true);Mapea.Geosearch.attachEventsToGeosearchResults();Mapea.Geosearch.CURRENT_PAGE+=Mapea.Geosearch.ROWS;Mapea.Geosearch.checkEmptyResults();Mapea.Geosearch.GEOSEARCH_SEARCHING=false;Mapea.Geosearch.hideSearchingImages();Mapea.Geosearch.zoomResultBbox()};Mapea.Geosearch.checkEmptyResults=function(){var b=Mapea.Geosearch.GEOSEARCH_CONTAINER.children().length;var a=0;if(Mapea.Geosearch.LAYER.hasSpatialResults()&&(Mapea.Geosearch.LAYER.spatialResults.numFound<=0)){a=Mapea.Geosearch.LAYER.textResults.numFound}else{if(Mapea.Geosearch.LAYER.hasSpatialResults()){a=Mapea.Geosearch.LAYER.spatialResults.numFound}else{if(Mapea.Geosearch.LAYER.textResults&&(Mapea.Geosearch.LAYER.textResults.numFound>0)){a=Mapea.Geosearch.LAYER.textResults.numFound}}}if(a>Mapea.Geosearch.MAX_RESULTS){a=Mapea.Geosearch.MAX_RESULTS}if(b>=a){Mapea.Geosearch.disableScrollPagination()}};Mapea.Geosearch.hasResults=function(){var c=false;var b=((Mapea.Geosearch.LAYER.textResults!=null)&&(Mapea.Geosearch.LAYER.textResults.numFound>0));var a=Mapea.Geosearch.LAYER.hasSpatialResults();c=(b||a);return c};Mapea.Geosearch.zoomResultBbox=function(){if(!Mapea.Geosearch.GEOSEARCH_SEARCHING&&!Mapea.Geosearch.STREET_SEARCHING){var c=[];var g=[];var m=[];var f=[];var d;if(Mapea.Geosearch.LAYER.hasSpatialResults()){d=Mapea.Geosearch.LAYER.spatialFeatures}else{d=Mapea.Geosearch.LAYER.textFeatures}if(Mapea.Geosearch.SEARCHSTREET){d=d.concat(Mapea.Geosearch.LAYER.geocoderFeatures)}if(d.length>0){for(var j=0,e=d.length;j<e;j++){var o=d[j];if(o&&o.geometry){var a=o.geometry.getBounds();if(a){c.push(a.left);g.push(a.right);m.push(a.top);f.push(a.bottom)}}}var b=Math.min.apply(null,c);var l=Math.max.apply(null,g);var k=Math.max.apply(null,m);var n=Math.min.apply(null,f);var h=new OpenLayers.Bounds(b,n,l,k);if(h&&(h!=null)){map.zoomToExtent(h)}}}};Mapea.Geosearch.drawFeaturesHtml=function(f,a){for(var e=0,d=f.length;e<d;e++){var c=f[e];if(c.centerIcon){var b=Mapea.Geosearch.feature2Html(Mapea.Geosearch.LAYER,c,a);Mapea.Geosearch.GEOSEARCH_CONTAINER.append(b)}}};Mapea.Geosearch.disableScrollPagination=function(){Mapea.Geosearch.GEOSEARCH_CONTAINER.stopScrollPagination();Mapea.Geosearch.MORE_RESULTS=false};Mapea.Geosearch.handleNormalizeResponse=function(k){var b={};var e=k.getElementsByTagName("multiRef");if(e.length>0){var c=e[0];var m=c.getElementsByTagName("codigoPostal")[0];var a=c.getElementsByTagName("complementos")[0];var g=c.getElementsByTagName("direccionNormalizada")[0];var l=c.getElementsByTagName("direccionSinNormalizar")[0];var j=c.getElementsByTagName("municipio")[0];var n=c.getElementsByTagName("nombreVia")[0];var h=c.getElementsByTagName("numeroPortal")[0];var d=c.getElementsByTagName("provincia")[0];var f=c.getElementsByTagName("tipoVia")[0];b.codigoPostal=$(m).text();b.complementos=$(a).text();b.direccionNormalizada=$(g).text();b.direccionSinNormalizar=$(l).text();b.municipio=$(j).text();b.nombreVia=$(n).text();b.numeroPortal=$(h).text();b.provincia=$(d).text();b.tipoVia=$(f).text()}return b};Mapea.Geosearch.initalizeGeocoder=function(e,m){var f=e.tipoVia;var g=e.nombreVia;var n=e.numeroPortal;var a=Mapea.Geosearch.FILTER_LOCALITY||e.municipio;var d=Mapea.Geosearch.FILTER_CITY||e.provincia;var l=e.complementos;var c=function(){return((a==null)||(a.length<=0))};var b=function(){return((d!=null)&&(d.length<=0))};if(c()&&b()){if((l!=null)&&(l.length>0)){var h=l.replace(/\-/g," ");h=OpenLayers.String.trim(h);a=h}else{var k=/(.*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(.*)/i;var j=/(\s*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(\s*)/i;d=g.replace(k,"$2");g=g.replace(j,"")}}if(c()){a=d}if(b()){Mapea.Geosearch.geocoderMunSrs(function(o){Mapea.Geosearch.finishGeocoder(o,a,d,m)},Mapea.Geosearch.geocoderErrorCallback,g,n,f,a,Mapea.Util.getMapProjection(map));return}callejeroProxy.geocoderMunProvSrs(function(o){Mapea.Geosearch.finishGeocoder(o,a,d,m)},Mapea.Geosearch.geocoderErrorCallback,g,n,f,a,d,Mapea.Util.getMapProjection(map))};Mapea.Geosearch.geocoderMunSrs=function(a,d,g,c,b,f,e){Mapea.Geosearch.geocoderMunArray(0,[],{streetname:g,streetnumber:c,municipio:f,srs:e,callbackFn:a})};Mapea.Geosearch.geocoderMunArray=function(c,d,e){var b=["HUELVA","SEVILLA","CADIZ","CORDOBA","MALAGA","JAEN","GRANADA","ALMERIA"];var a=b[c];callejeroProxy.geocoderMunProvSrs(function(f){Mapea.Geosearch.handleGeocoderMunProvResponse(f,e.municipio,a,function(g){d=d.concat(g);c++;if(c<b.length){Mapea.Geosearch.geocoderMunArray(c,d,e)}else{e.callbackFn(d)}})},errorCallback,e.streetname,e.streetnumber,e.streettype,e.municipio,a,e.srs)};Mapea.Geosearch.handleGeocoderMunProvResponse=function(h,q,b,f){var d=[];if(!OpenLayers.Util.isArray(h)){var m=h.getElementsByTagName("multiRef");for(var r=0,s=m.length;r<s;r++){var o=m[r];var c=o.getElementsByTagName("resultType");var j=$(c).text();if(!(/NOMATCH/i.test(j))){var g=o.getElementsByTagName("similarity");var e=o.getElementsByTagName("streetName");var n=o.getElementsByTagName("streetNumber");var a=o.getElementsByTagName("streetType");var p=o.getElementsByTagName("coordinateX");var t=o.getElementsByTagName("coordinateY");var l=o.getElementsByTagName("rotulo");var u=o.getElementsByTagName("locality");var k=new address();k.similarity=$(g).text();k.streetName=$(e).text();k.streetNumber=$(n).text();k.streetType=$(a).text();k.coordX=$(p).text();k.coordY=$(t).text();k.rotulo=$(l).text();k.codINE=$(u).text();k.municipio=q;k.provincia=b;d.push(k)}}d.sort(compareSimil)}else{d=h}f(d)};Mapea.Geosearch.finishGeocoder=function(a,d,c,b){Mapea.Geosearch.GEOCODER_RESPONSE={response:a,municipio:d,provincia:c};Mapea.Geosearch.STREET_SEARCHING=false;if(!Mapea.Geosearch.GEOSEARCH_SEARCHING){Mapea.Geosearch.ManageResponses(b)}};Mapea.Geosearch.showResults=function(){if(!Mapea.Geosearch.SHOW_RESULTS){Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);var a="hide";Mapea.Geosearch.RESULTS_WRAPPER.removeClass(a);Mapea.Geosearch.SHOW_RESULTS=true;Mapea.Util.centerSearchDialog()}};Mapea.Geosearch.hideResults=function(){var a="hide";Mapea.Geosearch.RESULTS_WRAPPER.addClass(a);Mapea.Geosearch.SHOW_RESULTS=false};Mapea.Geosearch.hideSearchingImages=function(){if(!Mapea.Geosearch.STREET_SEARCHING&&!Mapea.Geosearch.GEOSEARCH_SEARCHING){Mapea.Geosearch.SEARCHING_IMAGE.css("display","none");Mapea.Geosearch.SEARCH_BUTTON.css("display","");Mapea.Geosearch.SEARCH_INPUT.css("background","")}};Mapea.Geosearch.showSearchingImages=function(){Mapea.Geosearch.SEARCHING_IMAGE.css("display","");Mapea.Geosearch.SEARCH_BUTTON.css("display","none")};Mapea.Geosearch.executeGeosearch=function(a){var b={start:Mapea.Geosearch.CURRENT_PAGE,rows:Mapea.Geosearch.ROWS,q:Mapea.Geosearch.QUERY};b=OpenLayers.Util.applyDefaults(b,Mapea.Geosearch.USER_PARAMETERS);Mapea.Geosearch.GEOSEARCH_SEARCHING=true;Mapea.Geosearch.LAYER.search(b,a,Mapea.Geosearch.geosearchErrorCallback)};Mapea.Geosearch.executeGeocoder=function(a){Mapea.Geosearch.STREET_SEARCHING=true;callejeroProxy.normalizar(function(b){var c=Mapea.Geosearch.handleNormalizeResponse(b);a(c)},Mapea.Geosearch.geocoderErrorCallback,Mapea.Geosearch.QUERY)};Mapea.Geosearch.initSearch=function(){Mapea.Geosearch.showSearchingImages();Mapea.Geosearch.disableScrollPagination();Mapea.Geosearch.CURRENT_PAGE=0;Mapea.Geosearch.SHOW_RESULTS=false;var a=map.getControlsByClass("Mapea.Control.GeosearchByLocation")[0];if(a&&a.active){a.deactivate()}};Mapea.Geosearch.selectValue=function(a,b){if(b){Mapea.Geosearch.initSearch();Mapea.Geosearch.initalizeGeocoder(a,true);Mapea.Geosearch.LAYER.clear()}};Mapea.Geosearch.buildMobile=function(){var a=document.getElementById("mapea-search-mobile");OpenLayers.Element.addClass(a,"mobile");$(".help-btn").css("display","none");$("#mapea-search-mobile").css("display","");Mapea.Geosearch.RESULTS_HEADER_BUTTON=$(".search-results-header");Mapea.Geosearch.RESULTS_BUTTON=$(".results-btn");Mapea.Geosearch.SEARCH_INPUT=$("#idInputSearchMobile");Mapea.Geosearch.SEARCH_BUTTON=$("#idBtnSearchMobile");Mapea.Geosearch.CLEAR_BUTTON=$(".clear-btn");Mapea.Geosearch.GEOSEARCH_CONTAINER=$(".search-results");Mapea.Geosearch.SEARCHING_IMAGE=$("#searching");Mapea.Geosearch.RESULTS_WRAPPER=$(".search-results-wrapper");if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.GEOSEARCH_CONTAINER=$("#geosearch-results");Mapea.Geosearch.STREET_CONTAINER=$("#searchstreet-results")}Mapea.Geosearch.SEARCH_BUTTON.click(function(b){b.preventDefault();var c=Mapea.Geosearch.SEARCH_INPUT.val();Mapea.Geosearch.executeMobile(c)});Mapea.Geosearch.CLEAR_BUTTON.click(Mapea.Geosearch.clearButtonFn);Mapea.Geosearch.RESULTS_BUTTON.click(Mapea.Geosearch.showHideResults);Mapea.Geosearch.RESULTS_HEADER_BUTTON.click(function(b){b.preventDefault();Mapea.Geosearch.hideResults()});if(Mapea.Geosearch.SEARCHSTREET){Autocomplete.init("idInputSearchMobile",{onselect:Mapea.Geosearch.selectValue,onenterpress:function(b){Mapea.Geosearch.SEARCH_BUTTON.click()}});$(".geosearchstreet-results").tabs()}else{Mapea.Geosearch.SEARCH_INPUT.keypress(function(b){if(b.which==13){b.preventDefault();Mapea.Geosearch.SEARCH_BUTTON.click()}})}OpenLayers.Event.observe(map.div,"touchstart",function(b){Mapea.Geosearch.SEARCH_INPUT.blur()})};Mapea.Geosearch.executeMobile=function(a){Mapea.Geosearch.QUERY=OpenLayers.String.trim(a||"");if(Mapea.Geosearch.QUERY.length>0){Mapea.Geosearch.initSearch();Mapea.Geosearch.executeGeosearch(Mapea.Geosearch.callbackMobile);if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.executeGeocoder(Mapea.Geosearch.initalizeGeocoderMobile)}}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de búsqueda")}};Mapea.Geosearch.callbackMobile=function(a){Mapea.Geosearch.GEOSEARCH_RESPONSE=a;Mapea.Geosearch.GEOSEARCH_SEARCHING=false;if(!Mapea.Geosearch.SEARCHSTREET||(Mapea.Geosearch.SEARCHSTREET&&!Mapea.Geosearch.STREET_SEARCHING)){Mapea.Geosearch.ManageResponsesMobile()}};Mapea.Geosearch.ManageResponsesMobile=function(a){if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.ManageGeocoderResponseMobile(Mapea.Geosearch.GEOCODER_RESPONSE.response,Mapea.Geosearch.GEOCODER_RESPONSE.municipio,Mapea.Geosearch.GEOCODER_RESPONSE.provincia)}if(!a){Mapea.Geosearch.ManageGeosearchResponseMobile(Mapea.Geosearch.GEOSEARCH_RESPONSE)}else{Mapea.Geosearch.GEOSEARCH_CONTAINER.html("")}};Mapea.Geosearch.ManageGeosearchResponseMobile=function(a){Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.Geosearch.GEOSEARCH_CONTAINER.html("");Mapea.Geosearch.drawResultsFeature(false);Mapea.Geosearch.CURRENT_PAGE+=Mapea.Geosearch.ROWS;Mapea.Geosearch.enablePagination(function(){if(!Mapea.Geosearch.GEOSEARCH_SEARCHING){Mapea.Geosearch.showLoadingAsResult()}},function(b){Mapea.Geosearch.hideLoadingAsResult();Mapea.Geosearch.callbackMoreResults(b)},Mapea.Geosearch.geosearchErrorCallback);Mapea.Geosearch.checkEmptyResults();Mapea.Geosearch.hideSearchingImages();if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.SEARCH_INPUT.autocomplete("close")}Mapea.Geosearch.RESULTS_BUTTON.css("display","");Mapea.Geosearch.showFirstMobileResult()};Mapea.Geosearch.ManageGeocoderResponseMobile=function(a,c,b){Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.Geosearch.STREET_CONTAINER.html("");Mapea.Geosearch.handleGeocoderMunProvResponse(a,c,b,function(e){Mapea.Geosearch.drawGeocoderResults(e);Mapea.Geosearch.hideSearchingImages();if(Mapea.Geosearch.STREET_CONTAINER.children().length>0){Mapea.Geosearch.attachEventsToGeocoderResults();Mapea.Geosearch.SEARCH_INPUT.autocomplete("close");Mapea.Geosearch.RESULTS_BUTTON.css("display","");Mapea.Geosearch.showResults();Mapea.Geosearch.showFirstMobileResult()}else{var d='<div class="no-result"><div class="geosearch-value">';d+="No se han encontrado direcciones para la búsqueda ";d+='"'+Mapea.Geosearch.QUERY+'"';d+="</div></div>";Mapea.Geosearch.STREET_CONTAINER.append(d)}})};Mapea.Geosearch.showFirstMobileResult=function(){if(!Mapea.Geosearch.GEOSEARCH_SEARCHING&&!Mapea.Geosearch.STREET_SEARCHING){var a=(Mapea.Geosearch.LAYER.spatialFeatures.length>1);var c=(Mapea.Geosearch.LAYER.textFeatures.length>1);var b=(Mapea.Geosearch.SEARCHSTREET&&(Mapea.Geosearch.STREET_CONTAINER.children().length<=0));if(a||c||b){Mapea.Geosearch.zoomResultBbox()}else{Mapea.Geosearch.showResults()}}};Mapea.Geosearch.showHideResults=function(a){a.preventDefault();if(!Mapea.Geosearch.GEOSEARCH_SEARCHING&&!Mapea.Geosearch.STREET_SEARCHING){if(Mapea.Geosearch.SHOW_RESULTS){Mapea.Geosearch.hideResults()}else{Mapea.Geosearch.showResults()}}};Mapea.Geosearch.showLoadingAsResult=function(){var a=jQuery('<div class="loading-result">');Mapea.Geosearch.GEOSEARCH_CONTAINER.append(a)};Mapea.Geosearch.hideLoadingAsResult=function(){jQuery(".loading-result").remove()};Mapea.Geosearch.enablePagination=function(b,a,c){Mapea.Geosearch.MORE_RESULTS=true;Mapea.Geosearch.GEOSEARCH_CONTAINER.scrollPagination({heightOffset:10,beforeLoad:b,loadFn:function(){Mapea.Geosearch.showSearchingImages();if(!Mapea.Geosearch.GEOSEARCH_SEARCHING){Mapea.Geosearch.GEOSEARCH_SEARCHING=true;Mapea.Geosearch.LAYER.search({q:Mapea.Geosearch.LAYER.geosearchParams.q,start:Mapea.Geosearch.CURRENT_PAGE,rows:Mapea.Geosearch.LAYER.geosearchParams.rows,threshold:Mapea.Geosearch.LAYER.geosearchParams.threshold},function(d){a(d)},function(d){c(d)},true)}}})};Mapea.Geosearch.initalizeGeocoderMobile=function(e,m){var f=e.tipoVia;var g=e.nombreVia;var n=e.numeroPortal;var a=Mapea.Geosearch.FILTER_LOCALITY||e.municipio;var d=Mapea.Geosearch.FILTER_CITY||e.provincia;var l=e.complementos;var c=function(){return((a==null)||(a.length<=0))};var b=function(){return((d!=null)&&(d.length<=0))};if(c()&&b()){if((l!=null)&&(l.length>0)){var h=l.replace(/\-/g," ");h=OpenLayers.String.trim(h);a=h}else{var k=/(.*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(.*)/i;var j=/(\s*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(\s*)/i;d=g.replace(k,"$2");g=g.replace(j,"")}}if(c()){a=d}if(b()){Mapea.Geosearch.geocoderMunSrs(function(o){Mapea.Geosearch.finishGeocoderMobile(o,a,d,m)},Mapea.Geosearch.geocoderErrorCallback,g,n,f,a,Mapea.Util.getMapProjection(map));return}callejeroProxy.geocoderMunProvSrs(function(o){Mapea.Geosearch.finishGeocoderMobile(o,a,d,m)},Mapea.Geosearch.geocoderErrorCallback,g,n,f,a,d,Mapea.Util.getMapProjection(map))};Mapea.Geosearch.finishGeocoderMobile=function(a,d,c,b){Mapea.Geosearch.GEOCODER_RESPONSE={response:a,municipio:d,provincia:c};Mapea.Geosearch.STREET_SEARCHING=false;if(!Mapea.Geosearch.GEOSEARCH_SEARCHING){Mapea.Geosearch.ManageResponsesMobile(b)}};Mapea.Geosearch.geosearchErrorCallback=function(a){Mapea.Geosearch.GEOSEARCH_SEARCHING=false;Mapea.Util.showErrorMessage(a);Mapea.Geosearch.hideSearchingImages();Mapea.Geosearch.hideLoadingAsResult()};Mapea.Geosearch.geocoderErrorCallback=function(a){Mapea.Geosearch.STREET_SEARCHING=false;Mapea.Util.showErrorMessage(a);Mapea.Geosearch.hideSearchingImages()};Mapea.Geosearch.clearButtonFn=function(a){a.preventDefault();Mapea.Geosearch.SEARCH_INPUT.val("");Mapea.Geosearch.GEOSEARCH_CONTAINER.html("");if(Mapea.Geosearch.SEARCHSTREET){Mapea.Geosearch.STREET_CONTAINER.html("")}Mapea.Geosearch.disableScrollPagination();var b=map.getControlsByClass("Mapea.Control.GeosearchByLocation")[0];if(!b||!b.active){Mapea.Geosearch.LAYER.clear();Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map)}Mapea.Geosearch.hideResults();Mapea.Geosearch.RESULTS_BUTTON.css("display","none")};Mapea.SearchStreet={};Mapea.SearchStreet.SEARCHING=false;Mapea.SearchStreet.SHOW_RESULTS=false;Mapea.SearchStreet.LAYER_NAME="Direcciones";Mapea.SearchStreet.FILTER_LOCALITY=null;Mapea.SearchStreet.FILTER_CITY=null;Mapea.SearchStreet.build=function(){jQuery(".search-results").css("display","none");Mapea.SearchStreet.GEOCODER_STYLE=OpenLayers.Util.applyDefaults({externalGraphic:Mapea.global.THEME_IMG_PATH+"search/pointerRed.png"},Mapea.Util.featureIconStyle);Mapea.SearchStreet.LAYER=new Mapea.Layer.Vector(Mapea.SearchStreet.LAYER_NAME,{displayInLayerSwitcher:false,ratio:2});map.addLayer(Mapea.SearchStreet.LAYER,true);Mapea.SearchStreet.LAYER.events.register("featureselected",this,Mapea.SearchStreet.onFeatureSelect);Mapea.SearchStreet.LAYER.events.register("featureunselected",this,Mapea.Util.closePopup);map.uniqueSelectFeatureCtrl.addLayers(Mapea.SearchStreet.LAYER);if(Mapea.Util.filterLocality){var a=jQuery(".search-form-locality").css("display","block");if(Mapea.Util.isMobile){a.addClass("mobile")}Mapea.CDA.getLocalityFromCodINE(Mapea.Util.filterLocality,function(b,f){Mapea.SearchStreet.FILTER_LOCALITY=b;Mapea.SearchStreet.FILTER_CITY=f;var d=Mapea.Util.beautifyString(b);var c=Mapea.Util.beautifyString(f);var e="";if(!Mapea.Util.isMobile){e+="Búsquedas en "}e+=d+" ("+c+")";a.html(e)},function(){Mapea.Util.showErrorMessage("El código del municipio '"+Mapea.Util.filterLocality+"' no es válido")})}if(Mapea.Util.isMobile){Mapea.SearchStreet.buildMobile();Mapea.Util.hasMobileSearchStreetPanel=true}else{Mapea.SearchStreet.buildREST();Mapea.Util.hasSearchStreetPanel=true}};Mapea.SearchStreet.buildREST=function(){$(".help-btn").css("display","none");$("#mapea-search-mobile").css("display","");Mapea.SearchStreet.RESULTS_BUTTON=$(".results-btn");Mapea.SearchStreet.SEARCH_INPUT=$("#idInputSearchMobile");Mapea.SearchStreet.SEARCH_BUTTON=$("#idBtnSearchMobile");Mapea.SearchStreet.STREET_CONTAINER=$("#searchstreet-results");Mapea.SearchStreet.CLEAR_BUTTON=$(".clear-btn");Mapea.SearchStreet.SEARCHING_IMAGE=$("#searching");Mapea.SearchStreet.RESULTS_WRAPPER=$(".search-results-wrapper");$(".search-mobile-maximize").click(function(c){c.preventDefault();var b=$(this).attr("open");if(b){var a=$("#mapea-search-mobile").attr("desplace");a=parseInt(a);$("#mapea-search-mobile").css("margin-left",a);$(this).attr("open",false)}else{$("#mapea-search-mobile").css("margin-left","0px");$(this).attr("open",true);(!Mapea.Util.isMobile&&Mapea.SearchStreet.SEARCH_INPUT.focus())}});Mapea.SearchStreet.SEARCH_BUTTON.click(function(a){a.preventDefault();var b=Mapea.SearchStreet.SEARCH_INPUT.val();Mapea.SearchStreet.execute(b)});Mapea.SearchStreet.CLEAR_BUTTON.click(Mapea.SearchStreet.clearButtonFn);Mapea.SearchStreet.RESULTS_BUTTON.click(Mapea.SearchStreet.showHideResults);Autocomplete.init("idInputSearchMobile",{onselect:Mapea.SearchStreet.selectValue,onenterpress:function(a){Mapea.SearchStreet.SEARCH_BUTTON.click()}});jQuery("#geosearchtab").css("display","none");$(".geosearchstreet-results").tabs();jQuery(".search-results-header").css("display","none")};Mapea.SearchStreet.execute=function(a){Mapea.SearchStreet.QUERY=OpenLayers.String.trim(a||"");if(Mapea.SearchStreet.QUERY.length>0){Mapea.SearchStreet.showSearchingImages();Mapea.SearchStreet.executeGeocoder(Mapea.SearchStreet.initalizeGeocoder)}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de búsqueda")}};Mapea.SearchStreet.drawGeocoderResults=function(a){for(var f=0,e=a.length;f<e;f++){var g=a[f];var d=Mapea.SearchStreet.geocoderResult2Feature(g);var b=d.clone();b.fromGeocoder=true;d.cloneId=b.id;var c=Mapea.SearchStreet.geocoderFeature2Html(d);Mapea.SearchStreet.STREET_CONTAINER.append(c);Mapea.SearchStreet.LAYER.addFeatures([d])}};Mapea.SearchStreet.geocoderResult2Feature=function(a,p,g){var l=a.coordX;var k=a.coordY;var c=a.streetName;var f=a.streetNumber;var m=a.codINE;var j=a.streetType;var d=a.municipio;if(d==null||d==""){d=p}var e=a.provincia;if(e==null||e==""){e=g}var b=j+" "+(f==0?c:c+", "+f);var h=Mapea.SearchStreet.GEOCODER_STYLE;var o=new OpenLayers.Geometry.MultiPoint([new OpenLayers.Geometry.Point(l,k)]);var n=new OpenLayers.Feature.Vector(o,{"Tipo de v&iacute;a":Mapea.Util.beautifyString(j),"Nombre de v&iacute;a":Mapea.Util.beautifyString(c),"N&uacute;mero":Mapea.Util.beautifyString(f)},h);n.attributes.keywords=[b];n.fromGeocoder=true;n.attributes.municipio=Mapea.Util.beautifyString(d);n.attributes.provincia=Mapea.Util.beautifyString(e);return n};Mapea.SearchStreet.geocoderFeature2Html=function(j){var a=j.attributes["Nombre de v&iacute;a"];var e=j.attributes["N&uacute;mero"];var h=j.attributes["Tipo de v&iacute;a"];var c=j.attributes.municipio;var d=j.attributes.provincia;var b=h+" "+(e==0?a:a+", "+e);var f='<div class="search-result street">';f+=Mapea.SearchStreet.keyValue2Html(null,b);var g=c+" ("+d+")";f+=Mapea.SearchStreet.keyValue2Html(null,g);f+='<input id="featureId" type="hidden" value="'+j.id+'" />';f+='<input id="cloneId" type="hidden" value="'+j.cloneId+'" />';f+="</div>";return f};Mapea.SearchStreet.keyValue2Html=function(b,c){var a='<table class="result-table"><tr>';if(b){a+='<td class="key">';a+=b;a+="</td>"}a+='<td class="value">';a+=c;a+="</td>";a+="</tr></table>";return a};Mapea.SearchStreet.attachEventsToGeocoderResults=function(){Mapea.SearchStreet.STREET_CONTAINER.children(".search-result").each(function(){var a=$(this);if(a.attr("evtAdded")==null){a.attr("evtAdded",true);a.click(function(f){f.preventDefault();var g=$(this).children("#featureId").val();var j=$(this).children("#cloneId").val();var d=Mapea.SearchStreet.LAYER.getFeatureById(g);if(!d){d=Mapea.SearchStreet.LAYER.getFeatureById(j)}d.layer=Mapea.SearchStreet.LAYER;Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);map.uniqueSelectFeatureCtrl.clickFeature(d);var c=d.geometry.getCentroid().x;var h=d.geometry.getCentroid().y;var b=new OpenLayers.LonLat(c,h);map.setCenter(b,14);if(Mapea.Util.isMobile){Mapea.SearchStreet.hideResults()}})}})};Mapea.SearchStreet.zoomResultBbox=function(){if(!Mapea.SearchStreet.GEOSEARCH_SEARCHING&&!Mapea.SearchStreet.STREET_SEARCHING){var c=[];var g=[];var m=[];var f=[];var d=Mapea.SearchStreet.LAYER.features;for(var j=0,e=d.length;j<e;j++){var o=d[j];if(o&&o.geometry){var a=o.geometry.getBounds();if(a){c.push(a.left);g.push(a.right);m.push(a.top);f.push(a.bottom)}}}var b=Math.min.apply(null,c);var l=Math.max.apply(null,g);var k=Math.max.apply(null,m);var n=Math.min.apply(null,f);var h=new OpenLayers.Bounds(b,n,l,k);if(h&&(h!=null)){map.zoomToExtent(h)}}};Mapea.SearchStreet.handleNormalizeResponse=function(k){var b={};var e=k.getElementsByTagName("multiRef");if(e.length>0){var c=e[0];var m=c.getElementsByTagName("codigoPostal")[0];var a=c.getElementsByTagName("complementos")[0];var g=c.getElementsByTagName("direccionNormalizada")[0];var l=c.getElementsByTagName("direccionSinNormalizar")[0];var j=c.getElementsByTagName("municipio")[0];var n=c.getElementsByTagName("nombreVia")[0];var h=c.getElementsByTagName("numeroPortal")[0];var d=c.getElementsByTagName("provincia")[0];var f=c.getElementsByTagName("tipoVia")[0];b.codigoPostal=$(m).text();b.complementos=$(a).text();b.direccionNormalizada=$(g).text();b.direccionSinNormalizar=$(l).text();b.municipio=$(j).text();b.nombreVia=$(n).text();b.numeroPortal=$(h).text();b.provincia=$(d).text();b.tipoVia=$(f).text()}return b};Mapea.SearchStreet.initalizeGeocoder=function(e,m){var f=e.tipoVia;var g=e.nombreVia;var n=e.numeroPortal;var a=Mapea.SearchStreet.FILTER_LOCALITY||e.municipio;var d=Mapea.SearchStreet.FILTER_CITY||e.provincia;var l=e.complementos;var c=function(){return((a==null)||(a.length<=0))};var b=function(){return((d!=null)&&(d.length<=0))};if(c()&&b()){if((l!=null)&&(l.length>0)){var h=l.replace(/\-/g," ");h=OpenLayers.String.trim(h);a=h}else{var k=/(.*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(.*)/i;var j=/(\s*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(\s*)/i;d=g.replace(k,"$2");g=g.replace(j,"")}}if(c()){a=d}if(b()){Mapea.SearchStreet.geocoderMunSrs(function(o){Mapea.SearchStreet.finishGeocoder(o,a,d)},Mapea.SearchStreet.geocoderErrorCallback,g,n,f,a,Mapea.Util.getMapProjection(map));return}callejeroProxy.geocoderMunProvSrs(function(o){Mapea.SearchStreet.finishGeocoder(o,a,d)},Mapea.SearchStreet.geocoderErrorCallback,g,n,f,a,d,Mapea.Util.getMapProjection(map))};Mapea.SearchStreet.geocoderMunSrs=function(a,d,g,c,b,f,e){Mapea.SearchStreet.geocoderMunArray(0,[],{streetname:g,streetnumber:c,municipio:f,srs:e,callbackFn:a})};Mapea.SearchStreet.geocoderMunArray=function(c,d,e){var b=["HUELVA","SEVILLA","CADIZ","CORDOBA","MALAGA","JAEN","GRANADA","ALMERIA"];var a=b[c];callejeroProxy.geocoderMunProvSrs(function(f){Mapea.SearchStreet.handleGeocoderMunProvResponse(f,e.municipio,a,function(g){d=d.concat(g);c++;if(c<b.length){Mapea.SearchStreet.geocoderMunArray(c,d,e)}else{e.callbackFn(d)}})},errorCallback,e.streetname,e.streetnumber,e.streettype,e.municipio,a,e.srs)};Mapea.SearchStreet.handleGeocoderMunProvResponse=function(h,q,b,f){var d=[];if(!OpenLayers.Util.isArray(h)){var m=h.getElementsByTagName("multiRef");for(var r=0,s=m.length;r<s;r++){var o=m[r];var c=o.getElementsByTagName("resultType");var j=$(c).text();if(!(/NOMATCH/i.test(j))){var g=o.getElementsByTagName("similarity");var e=o.getElementsByTagName("streetName");var n=o.getElementsByTagName("streetNumber");var a=o.getElementsByTagName("streetType");var p=o.getElementsByTagName("coordinateX");var t=o.getElementsByTagName("coordinateY");var l=o.getElementsByTagName("rotulo");var u=o.getElementsByTagName("locality");var k=new address();k.similarity=$(g).text();k.streetName=$(e).text();k.streetNumber=$(n).text();k.streetType=$(a).text();k.coordX=$(p).text();k.coordY=$(t).text();k.rotulo=$(l).text();k.codINE=$(u).text();k.municipio=q;k.provincia=b;d.push(k)}}d.sort(compareSimil)}else{d=h}f(d)};Mapea.SearchStreet.finishGeocoder=function(a,c,b){Mapea.SearchStreet.LAYER.destroyFeatures();Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.SearchStreet.STREET_CONTAINER.html("");Mapea.SearchStreet.handleGeocoderMunProvResponse(a,c,b,function(e){Mapea.SearchStreet.drawGeocoderResults(e);Mapea.SearchStreet.STREET_SEARCHING=false;Mapea.SearchStreet.hideSearchingImages();if(Mapea.SearchStreet.STREET_CONTAINER.children().length>0){Mapea.SearchStreet.attachEventsToGeocoderResults();Mapea.SearchStreet.RESULTS_BUTTON.css("display","");Mapea.SearchStreet.zoomResultBbox()}else{var d='<div class="no-result"><div class="geosearch-value">';d+="No se han encontrado direcciones para la búsqueda ";d+='"'+Mapea.SearchStreet.QUERY+'"';d+="</div></div>";Mapea.SearchStreet.STREET_CONTAINER.append(d)}Mapea.SearchStreet.SEARCH_INPUT.autocomplete("close");Mapea.SearchStreet.showResults()})};Mapea.SearchStreet.showResults=function(){if(!Mapea.SearchStreet.SHOW_RESULTS){Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);var a="hide";Mapea.SearchStreet.RESULTS_WRAPPER.removeClass(a);Mapea.Util.centerSearchDialog();Mapea.SearchStreet.SHOW_RESULTS=true}};Mapea.SearchStreet.hideResults=function(){var a="hide";Mapea.SearchStreet.RESULTS_WRAPPER.addClass(a);Mapea.SearchStreet.SHOW_RESULTS=false};Mapea.SearchStreet.hideSearchingImages=function(){if(!Mapea.SearchStreet.STREET_SEARCHING&&!Mapea.SearchStreet.GEOSEARCH_SEARCHING){Mapea.SearchStreet.SEARCHING_IMAGE.css("display","none");Mapea.SearchStreet.SEARCH_BUTTON.css("display","");Mapea.SearchStreet.SEARCH_INPUT.css("background","")}};Mapea.SearchStreet.showSearchingImages=function(){Mapea.SearchStreet.SEARCHING_IMAGE.css("display","");Mapea.SearchStreet.SEARCH_BUTTON.css("display","none")};Mapea.SearchStreet.executeGeocoder=function(a){Mapea.SearchStreet.STREET_SEARCHING=true;callejeroProxy.normalizar(function(b){var c=Mapea.SearchStreet.handleNormalizeResponse(b);a(c)},Mapea.SearchStreet.geocoderErrorCallback,Mapea.SearchStreet.QUERY)};Mapea.SearchStreet.selectValue=function(a,b){if(b){Mapea.SearchStreet.showSearchingImages();Mapea.SearchStreet.initalizeGeocoder(a)}};Mapea.SearchStreet.buildMobile=function(){var a=document.getElementById("mapea-search-mobile");OpenLayers.Element.addClass(a,"mobile");$(".help-btn").css("display","none");$("#mapea-search-mobile").css("display","");Mapea.SearchStreet.RESULTS_HEADER_BUTTON=$(".search-results-header");Mapea.SearchStreet.RESULTS_BUTTON=$(".results-btn");Mapea.SearchStreet.SEARCH_INPUT=$("#idInputSearchMobile");Mapea.SearchStreet.SEARCH_BUTTON=$("#idBtnSearchMobile");Mapea.SearchStreet.CLEAR_BUTTON=$(".clear-btn");Mapea.SearchStreet.STREET_CONTAINER=$("#searchstreet-results");Mapea.SearchStreet.SEARCHING_IMAGE=$("#searching");Mapea.SearchStreet.RESULTS_WRAPPER=$(".search-results-wrapper");Mapea.SearchStreet.SEARCH_BUTTON.click(function(b){b.preventDefault();var c=Mapea.SearchStreet.SEARCH_INPUT.val();Mapea.SearchStreet.executeMobile(c)});Mapea.SearchStreet.CLEAR_BUTTON.click(Mapea.SearchStreet.clearButtonFn);Mapea.SearchStreet.RESULTS_BUTTON.click(Mapea.SearchStreet.showHideResults);Mapea.SearchStreet.RESULTS_HEADER_BUTTON.click(function(b){b.preventDefault();Mapea.SearchStreet.hideResults()});Autocomplete.init("idInputSearchMobile",{onselect:Mapea.SearchStreet.selectValue,onenterpress:function(b){Mapea.SearchStreet.SEARCH_BUTTON.click()}});jQuery("#geosearchtab").css("display","none");$(".geosearchstreet-results").tabs();OpenLayers.Event.observe(map.div,"touchstart",function(b){Mapea.SearchStreet.SEARCH_INPUT.blur()})};Mapea.SearchStreet.executeMobile=function(a){Mapea.SearchStreet.QUERY=OpenLayers.String.trim(a||"");if(Mapea.SearchStreet.QUERY.length>0){Mapea.SearchStreet.showSearchingImages();Mapea.SearchStreet.executeGeocoder(Mapea.SearchStreet.initalizeGeocoderMobile)}else{Mapea.Util.showInfoMessage("Debe introducir una cadena de búsqueda")}};Mapea.SearchStreet.showFirstMobileResult=function(){if(!Mapea.SearchStreet.STREET_SEARCHING){if(Mapea.SearchStreet.STREET_CONTAINER.children().length<=0){Mapea.SearchStreet.zoomResultBbox()}else{Mapea.SearchStreet.showResults()}}};Mapea.SearchStreet.showHideResults=function(a){a.preventDefault();if(!Mapea.SearchStreet.STREET_SEARCHING){if(Mapea.SearchStreet.SHOW_RESULTS){Mapea.SearchStreet.hideResults()}else{Mapea.SearchStreet.showResults()}}};Mapea.SearchStreet.initalizeGeocoderMobile=function(e,m){var f=e.tipoVia;var g=e.nombreVia;var n=e.numeroPortal;var a=Mapea.SearchStreet.FILTER_LOCALITY||e.municipio;var d=Mapea.SearchStreet.FILTER_CITY||e.provincia;var l=e.complementos;var c=function(){return((a==null)||(a.length<=0))};var b=function(){return((d!=null)&&(d.length<=0))};if(c()&&b()){if((l!=null)&&(l.length>0)){var h=l.replace(/\-/g," ");h=OpenLayers.String.trim(h);a=h}else{var k=/(.*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(.*)/i;var j=/(\s*)(SEVILLA|HUELVA|C[AÁ]DIZ|M[AÁ]LAGA|C[OÓ]RDOBA|GRANADA|JA[EÉ]N|ALMER[IÍ]A)(\s*)/i;d=g.replace(k,"$2");g=g.replace(j,"")}}if(c()){a=d}if(b()){Mapea.SearchStreet.geocoderMunSrs(function(o){if(m){window.alert("from autocompleter!!!")}Mapea.SearchStreet.finishGeocoderMobile(o,a,d)},Mapea.SearchStreet.geocoderErrorCallback,g,n,f,a,Mapea.Util.getMapProjection(map));return}callejeroProxy.geocoderMunProvSrs(function(o){Mapea.SearchStreet.finishGeocoderMobile(o,a,d)},Mapea.SearchStreet.geocoderErrorCallback,g,n,f,a,d,Mapea.Util.getMapProjection(map))};Mapea.SearchStreet.finishGeocoderMobile=function(a,c,b){Mapea.SearchStreet.LAYER.destroyFeatures();Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map);Mapea.SearchStreet.STREET_CONTAINER.html("");Mapea.SearchStreet.handleGeocoderMunProvResponse(a,c,b,function(e){Mapea.SearchStreet.drawGeocoderResults(e);Mapea.SearchStreet.STREET_SEARCHING=false;Mapea.SearchStreet.hideSearchingImages();if(Mapea.SearchStreet.STREET_CONTAINER.children().length>0){Mapea.SearchStreet.attachEventsToGeocoderResults();Mapea.SearchStreet.SEARCH_INPUT.autocomplete("close");Mapea.SearchStreet.RESULTS_BUTTON.css("display","");Mapea.SearchStreet.showFirstMobileResult()}else{var d='<div class="no-result"><div class="geosearch-value">';d+="No se han encontrado direcciones para la búsqueda ";d+='"'+Mapea.SearchStreet.QUERY+'"';d+="</div></div>";Mapea.SearchStreet.STREET_CONTAINER.append(d)}Mapea.SearchStreet.showResults()})};Mapea.SearchStreet.geocoderErrorCallback=function(a){Mapea.SearchStreet.STREET_SEARCHING=false;Mapea.Util.showErrorMessage(a);Mapea.SearchStreet.hideSearchingImages()};Mapea.SearchStreet.clearButtonFn=function(a){a.preventDefault();Mapea.SearchStreet.SEARCH_INPUT.val("");Mapea.SearchStreet.STREET_CONTAINER.html("");Mapea.SearchStreet.LAYER.destroyFeatures();Mapea.SearchStreet.hideResults();Mapea.SearchStreet.RESULTS_BUTTON.css("display","none");Mapea.Util.removeAllPopups(map);Mapea.Util.unselectAllFeatures(map)};Mapea.SearchStreet.onFeatureSelect=function(a){var k=a.feature;var b='<table class="mapea-table"><tbody>';for(var h in k.attributes){if(h!="keywords"){b+="<tr><td><b>";b+=Mapea.Util.beautifyString(h);b+="</b></td><td>";b+=k.attributes[h];b+="</td></tr>"}}b+="</tbody></table>";if(k.geometry){var g;var e=k.attributes.keywords;if(e&&(e.length>0)){g='<div class="geosearch-header">'+e[0]+"</div>"}else{g='<div class="geosearch-header">Punto de interés</div>'}var j=k.geometry.getBounds().getCenterLonLat();var d=Mapea.Util.getClickedPixelFromEvent(window.event);var c=Mapea.Util.getPopupInPixel(map,d);if(c){var f=c.contentHTML;f+='<div class="popup-info-separator">Dirección</div>';f+=b;c.setContentHTML(f);c.show()}else{c=new Mapea.Popup.FramedCloud("popup_feature",j,new OpenLayers.Size(400,300),b,null,true,function(l){l.feature=k;Mapea.Util.unselectFeature(l)},g);c.pixelX=d.x;c.pixelY=d.y;if(c.size==null){c.setSize(c.contentSize)}k.popup=c;map.addPopup(c)}if(Mapea.Util.isMobile){map.panTo(j)}}};Mapea.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control.SelectFeature,{clickTolerance:100,disableMouseDown:!Mapea.Util.isMobile,initialize:function(c,a){a=a||{};OpenLayers.Control.SelectFeature.prototype.initialize.apply(this,[c,a]);OpenLayers.Util.extend(this,a);if(this.scope===null){this.scope=this}this.initLayer(c);var b={click:this.clickFeature,clickout:this.clickoutFeature};if(this.hover){b.over=this.overFeature;b.out=this.outFeature}this.callbacks=OpenLayers.Util.extend(b,this.callbacks);this.handlers={feature:new Mapea.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes,clickTolerance:this.clickTolerance})};if(this.disableMouseDown){this.handlers.feature.mousedown=OpenLayers.Function.Void}if(this.box){this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"})}},activate:function(){if(!this.active){if(this.layers){this.map.addLayer(this.layer)}this.handlers.feature.register=function(a,b){if(a&&(a!="click")){this.map.events.registerPriority(a,this,b);this.map.events.registerPriority(a,this,this.setEvent)}else{this.map.events.register(a,this,b);this.map.events.register(a,this,this.setEvent)}};this.handlers.feature.activate();if(this.box&&this.handlers.box){this.handlers.box.activate()}}return OpenLayers.Control.prototype.activate.apply(this,arguments)},CLASS_NAME:"Mapea.Control.SelectFeature"});Mapea.Control.UniqueSelectFeature=OpenLayers.Class(Mapea.Control.SelectFeature,{ratio:1,initialize:function(b,a){OpenLayers.Util.extend(this,a);Mapea.Control.SelectFeature.prototype.initialize.apply(this,arguments);this.handlers.feature.stopDown=false},addLayers:function(j){if(!OpenLayers.Util.isArray(j)){j=[j]}if(j.length>0){var g=[];for(var d=0,c=j.length;d<c;d++){var b=j[d];var a=false;for(var h=0,f=this.layers.length;(h<f)&&!a;h++){a=(b.id==this.layers[h].id)}if(!a){g.push(b)}if(!this.map&&b.map){this.map=controlLayer.map}}g=g.concat(this.layers);this.setLayer(g);if(!this.active){this.activate()}}},initLayer:function(a){if(OpenLayers.Util.isArray(a)){this.layers=a;this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:a,ratio:this.ratio})}else{this.layer=a}},CLASS_NAME:"Mapea.Control.UniqueSelectFeature"});OpenLayers.Request.makeSameOrigin=function(a,b){if(b){if(typeof b=="function"){a=b(a)}else{a=b+encodeURIComponent(a)}}else{OpenLayers.Console.warn(OpenLayers.i18n("proxyNeeded"),{url:a})}return a};OpenLayers.Handler.Drag.prototype.dragstart=function(b){if(!Mapea.Util.allowDragPropagation(b)){OpenLayers.Event.stop(b,false);return false}var a=true;this.dragging=false;if(this.checkModifiers(b)&&(OpenLayers.Event.isLeftClick(b)||OpenLayers.Event.isSingleTouch(b))){this.started=true;this.start=b.xy;this.last=b.xy;OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown");this.down(b);this.callback("down",[b.xy]);OpenLayers.Event.stop(b);if(!this.oldOnselectstart){this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True}document.onselectstart=OpenLayers.Function.False;a=(!this.stopDown||Mapea.Util.isMobile)}else{this.started=false;this.start=null;this.last=null}return a};OpenLayers.Layer.prototype.setZIndex=function(a){this.div.style.zIndex=a;if(this.map){this.map.recalculateMaxZIndex()}};OpenLayers.Request.issue=function(b){var d=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});b=OpenLayers.Util.applyDefaults(b,d);var g=false,e;for(e in b.headers){if(b.headers.hasOwnProperty(e)){if(e.toLowerCase()==="x-requested-with"){g=true}}}if(g===false){b.headers["X-Requested-With"]="XMLHttpRequest"}var c=new OpenLayers.Request.XMLHttpRequest();var a=OpenLayers.Util.urlAppend(b.url,OpenLayers.Util.getParameterString(b.params||{}));a=OpenLayers.Request.makeSameOrigin(a,b.proxy);c.open(b.method,a,b.async,b.user,b.password);for(var f in b.headers){c.setRequestHeader(f,b.headers[f])}var j=this.events;var h=this;c.onreadystatechange=function(){if(c.readyState==OpenLayers.Request.XMLHttpRequest.DONE){var k=j.triggerEvent("complete",{request:c,config:b,requestUrl:a});if(k!==false){h.runCallbacks({request:c,config:b,requestUrl:a})}}};j.triggerEvent("onstart",{request:c,config:b,requestUrl:a});if(b.async===false){c.send(b.data)}else{window.setTimeout(function(){if(c.readyState!==0){c.send(b.data)}},0)}return c};OpenLayers.Events.prototype.handleBrowserEvent=function(j){var e=j.type,f=this.listeners[e];if(!f||f.length==0){return}var c=j.touches;if(!c||c.length==0){c=j.changedTouches}if(c&&c[0]){var h=0;var g=0;var d=c.length;var b;for(var a=0;a<d;++a){b=c[a];h+=b.clientX;g+=b.clientY}j.clientX=h/d;j.clientY=g/d}if(this.includeXY){j.xy=this.getMousePosition(j)}this.triggerEvent(e,j)};Mapea.Parameter=OpenLayers.Class({parameter:null,map:null,defined:false,isDefault:true,initialize:function(a){this.parameter=a;this.isDefault=Mapea.Util.isNullOrEmpty(a)},setMap:function(a){this.map=a;this.isDefault?this.applyDefault():this.applyParameter()},CLASS_NAME:"Mapea.Parameter"});Mapea.Parameter.Projection=OpenLayers.Class(Mapea.Parameter,{srs:null,units:null,isDefault:false,initialize:function(a){Mapea.Parameter.prototype.initialize.apply(this,[a]);this.setMap()},applyDefault:function(){this.buildProjection("EPSG:23030*m")},applyParameter:function(){this.buildProjection(this.parameter)},buildProjection:function(a){var d=a.split("*");if(d.length==2){var c=false;var b=d[0];if(b){b=OpenLayers.String.trim(b);(b.length>0)?this.srs=b:c=true}else{c=true}if(c){Mapea.Util.showErrorMessage("El código SRS del parámetro <b><i>projection</i></b> no es válido")}var e=d[1];if(e){e=OpenLayers.String.trim(e);if(/m|d|degrees/i.test(e)){e=e.toLowerCase();if(e=="d"){e="degrees"}this.units=e}else{throw"La unidad del parámetro <b><i>projection</i></b> no es válida"}}else{throw"No ha especificado la unidad en el parámetro <b><i>projection</i></b>"}}else{throw"El formato del parámetro <b><i>projection</i></b> es erróneo"}},CLASS_NAME:"Mapea.Parameter.Projection"});Mapea.Parameter.WMCFile=OpenLayers.Class(Mapea.Parameter,{divId:null,projection:null,wmcFormat:null,buildInitialContext:false,initialize:function(c,a,b){Mapea.Parameter.prototype.initialize.apply(this,[c]);this.divId=a;this.projection=b;this.wmcFormat=new Mapea.Format.WMC({layerOptions:{buffer:0,numZoomLevels:16}})},applyDefault:function(){this.buildContexts("callejerocacheado")},applyParameter:function(){this.buildContexts(this.parameter)},buildContexts:function(n){var j=[];var l;if(OpenLayers.Util.isArray(n)){l=n}else{if((typeof n)=="string"){l=n.split(",")}}var f=l.length;if(this.map&&(this.map.initialContext||this.map.baseLayer)){f++}var k=(f>1);for(var r=0,s=l.length;r<s;r++){var o=l[r];if(!Mapea.Util.isNullOrEmpty(o)){var a=o.split("*");if(a.length==1){var h=a[0];if(!Mapea.Util.isNullOrEmpty(h)){h=OpenLayers.String.trim(h)}var b=window.strDefinedContexts.split(",");var m=window.strDefinedContextsUrl.split(",");var c=window.srtDefinedContextsTile.split(",");var t=false;for(var w=0,u=b.length;(w<u)&&!t;w++){var x=b[w];if(!Mapea.Util.isNullOrEmpty(x)){x=OpenLayers.String.trim(x);if(h==x){try{var p=OpenLayers.String.trim(m[w]);var q=OpenLayers.String.trim(c[w]);var d={url:p,title:q};j.push(d)}catch(g){Mapea.Util.showErrorMessage('La url y/o el título del context "'+h+'" no está bien definido en el fichero de properties.')}t=true}}}if(!t){Mapea.Util.showErrorMessage('El context "'+h+'" no está predefinido')}}else{if(a.length==2){var d={url:a[0],title:a[1]};j.push(d)}else{Mapea.Util.showErrorMessage('El formato del context "'+o+'") no se reconoce.')}}}}if(!this.map){this.buildMap(j[0])}if(Mapea.Util.hasContextsButton||k){this.buildButtons(j)}},buildMap:function(e){if(e){this.map=Mapea.Util.loadContext(this.wmcFormat,e.url+"&mapeaop=wmc",this.divId);this.map.units=this.map.baseLayer.units;this.map.initialContext=e;if(!this.projection.isDefault&&(this.projection.units=="degrees")){var c=this.map.projection;var m=this.projection.srs;if(c!=m){var l=new OpenLayers.Projection(c);var a=new OpenLayers.Projection(m);var o=this.map.getExtent();this.map.setOptions({projection:new OpenLayers.Projection(m)});this.map.setOptions({displayProjection:new OpenLayers.Projection(m)});this.map.units=this.projection.units;var d=this.map.maxExtent;var n=d.transform(l,a);this.map.maxExtent=n;this.map.restrictedExtent=n;var b=o.transform(l,a);var f=this.map.getCenter().transform(l,a);var j=this.map.getZoomForExtent(b,true);this.map.setCenter(f,j,false,true);for(var g=0,k=this.map.getNumLayers();g<k;g++){var h=this.map.layers[g];h.projection=new OpenLayers.Projection(m);h.maxExtent=n;h.units=this.projection.units;h.options.units=this.projection.units;h.initResolutions()}}}Mapea.Util.hasBaseLayer=true;Mapea.Util.hasContextLoaded=true}},buildButtons:function(e){var d=$(".mapea-contexts-wrapper")[0];var b=$(".mapea-contexts")[0];if(!Mapea.Util.hasContextsButton){d=document.createElement("div");d.id=OpenLayers.Util.createUniqueID()+"_contextsWrapperDiv";OpenLayers.Element.addClass(d,"mapea-contexts-wrapper");b=document.createElement("ul");OpenLayers.Element.addClass(b,"mapea-contexts")}var k=this._contextToLIElement(e[0],!Mapea.Util.hasContextsButton);b.appendChild(k);for(var f=1,h=e.length;f<h;f++){var a=e[f];var g=this._contextToLIElement(a);b.appendChild(g)}if(this.map.initialContext&&!Mapea.Util.hasInitalContextBtn&&this.buildInitialContext){var j=this._contextToLIElement(this.map.initialContext);b.appendChild(j);Mapea.Util.hasInitalContextBtn=true}if(!Mapea.Util.hasContextsButton){d.appendChild(b);this.map.viewPortDiv.appendChild(d);var c=function(n){OpenLayers.Element.addClass(b,"expanded");var m=($(".mapea-context-btn").length*31);b.style.height=m+"px";OpenLayers.Event.stop(n)};var l=function(m){OpenLayers.Element.removeClass(b,"expanded");b.style.height="";OpenLayers.Event.stop(m)};OpenLayers.Event.observe(d,"mouseover",OpenLayers.Function.bindAsEventListener(c,this));OpenLayers.Event.observe(d,"mouseout",OpenLayers.Function.bindAsEventListener(l,this));if(Mapea.Util.isMobile){OpenLayers.Event.observe(d,"touchend",OpenLayers.Function.bindAsEventListener(c,this));OpenLayers.Event.observe(this.map.div,"touchend",OpenLayers.Function.bindAsEventListener(l,this))}}Mapea.Util.hasContextsButton=true},_contextToLIElement:function(c,d){var a=document.createElement("li");a.id=OpenLayers.Util.createUniqueID()+"_contextBtn";OpenLayers.Element.addClass(a,"mapea-context-btn");if(d){OpenLayers.Element.addClass(a,"selected")}$(a).attr("name",c.url+"&mapeaop=wmc");$(a).text(c.title);var b=function(h){if($(".mapea-context-btn.selected").attr("id")!=$(a).attr("id")){Mapea.Util.changeContext(this.wmcFormat,$(a).attr("name"),this.divId,this.map);Mapea.Util.resizeAllPanels(this.map);var g=$(".mapea-context-btn.selected")[0];OpenLayers.Element.removeClass(g,"selected");OpenLayers.Element.addClass(a,"selected");if(Mapea.Util.isMobile){var f=$(".mapea-contexts").get(0);OpenLayers.Element.removeClass(f,"expanded");f.style.height=""}OpenLayers.Event.stop(h)}};OpenLayers.Event.observe(a,"click",OpenLayers.Function.bindAsEventListener(b,this));if(Mapea.Util.isMobile){OpenLayers.Event.observe(a,"touchend",OpenLayers.Function.bindAsEventListener(b,this))}return a},CLASS_NAME:"Mapea.Parameter.WMCFile"});Mapea.Parameter.Controls=OpenLayers.Class(Mapea.Parameter,{initialize:function(a){Mapea.Parameter.prototype.initialize.apply(this,[a])},applyDefault:function(){this.buildControls("panzoom")},applyParameter:function(){this.buildControls(this.parameter)},buildControls:function(f){var c=[];var b;if(OpenLayers.Util.isArray(f)){b=f}else{if((typeof f)=="string"){b=f.split(",")}}for(var d=0,a=b.length;d<a;d++){var e=b[d];e=(e||"").trim().toLowerCase();this.processControl(e,c)}if(Mapea.Util.isMobile&&(this.map.getControlsByClass("Mapea.Control.NavToolbar").length==0)){this.map.addControl(new Mapea.Control.TouchNavigation({dragPanOptions:{enableKinetic:true}}));this.map.addControl(new OpenLayers.Control.Zoom())}this.buildEditionPanel(c);if(!this.map.baseLayer){Mapea.Util.showErrorMessage("No se ha especificado ninguna capa como baselayer")}else{if(!this.isJSAPI){this.map.zoomToMaxExtent()}}},processControl:function(d,c){if(d=="panzoombar"){if(!Mapea.Util.isMobile){this.map.addControl(new Mapea.Control.PanZoomBar())}var g=this.map.getControlsByClass("Mapea.Control.PanZoom");if(g.length>0){var a=g[0];a.deactivate();a.destroy();this.map.removeControl(a)}}else{if(d=="panzoom"){if(!Mapea.Util.isMobile){var g=this.map.getControlsByClass("Mapea.Control.PanZoom");if(g.length==0){this.map.addControl(new Mapea.Control.PanZoom())}}var h=this.map.getControlsByClass("Mapea.Control.PanZoomBar");if(h.length>0){var f=h[0];f.deactivate();f.destroy();this.map.removeControl(f)}}else{if(d=="mouse"){if(!Mapea.Util.isMobile){this.map.addControl(new OpenLayers.Control.MousePosition())}}else{if(d=="overviewmap"){if(!Mapea.Util.isMobile){this.map.addControl(new Mapea.Control.OverviewMap({mapOptions:{projection:this.map.getProjection(),units:this.map.getUnits(),singleTile:true,maxExtent:this.map.getMaxExtent()}}))}}else{if(d=="layerswitcher"){this.map.addControl(new Mapea.Control.LayerSwitcher())}else{if(d=="navtoolbar"){this.map.addControl(new Mapea.Control.NavToolbar({displayClass:"olControlNavToolbar"}))}else{if(d=="measurebar"){if(this.isJSAPI){createMeasurePanel_sigc(this.measureDiv,this.map)}else{createMeasurePanel()}}else{if(d=="scale"){this.map.addControl(new Mapea.Control.Scale())}else{if(d=="scaleline"){this.map.addControl(new OpenLayers.Control.ScaleLine())}else{if(d=="location"){var b=this.map.getControlsByClass("Mapea.Control.Geolocate");if(b.length==0){var e=new Mapea.Control.Geolocate({id:"locate-control",geolocationOptions:{enableHighAccuracy:true,maximumAge:0,timeout:15000},centerZoom:12,successCallback:function(){},errorCallback:function(){},uncapableCallback:function(){}});this.map.addControl(e)}}else{if(d=="drawfeature"){if(Mapea.global.wfsLayer&&(Mapea.global.wfsLayer!=null)){c.push(new Mapea.Control.DrawFeature(Mapea.global.wfsLayer,Mapea.global.wfsLayer.handlerType,{title:"Dibujar elemento",displayclass:"MapeaControlDrawFeature",handlerOptions:{multi:Mapea.global.wfsLayer.multipleType}}))}else{Mapea.Util.showErrorMessage('El control "'+d+'" no se puede añadir al mapa porque no existe una capa WFS cargada.')}}else{if(d=="modifyfeature"){if(Mapea.global.wfsLayer&&(Mapea.global.wfsLayer!=null)){c.push(new Mapea.Control.ModifyFeature(Mapea.global.wfsLayer,{title:"Modificar elemento",displayClass:"olControlModifyFeature"}))}else{Mapea.Util.showErrorMessage('El control "'+d+'" no se puede añadir al mapa porque no existe una capa WFS cargada.')}}else{if(d=="deletefeature"){if(Mapea.global.wfsLayer&&(Mapea.global.wfsLayer!=null)){c.push(new Mapea.Control.DeleteFeature(Mapea.global.wfsLayer,{title:"Eliminar elemento",displayClass:"MapeaControlDeleteFeature"}))}else{Mapea.Util.showErrorMessage('El control "'+d+'" no se puede añadir al mapa porque no existe una capa WFS cargada.')}}else{if(d=="editattribute"){if(Mapea.global.wfsLayer&&(Mapea.global.wfsLayer!=null)){var j={title:"Editar atributos del elemento",displayClass:"MapeaControlEditAttributeFeature"};if(this.isJSAPI){j.savingFunctionName="saveEditFeature_sigc"}c.push(new Mapea.Control.EditAttributeFeature(Mapea.global.wfsLayer,j))}else{Mapea.Util.showErrorMessage('El control "'+d+'" no se puede añadir al mapa porque no existe una capa WFS cargada.')}}else{Mapea.Util.showErrorMessage('El control "'+d+'" no está definido. Consulte los controles disponibles con action=getControlsAvailable.')}}}}}}}}}}}}}}},buildEditionPanel:function(b){if(Mapea.global.wfsLayer&&(Mapea.global.wfsLayer!=null)&&(b.length>0)){Mapea.global.wfsLayer.editable=true;var a=new OpenLayers.Control.Button({title:"Deshacer los cambios no salvados",trigger:clearUnsavedOperation,displayClass:"MapeaControlClearUnsavedOperations"});b.push(a);var d=/Mapea\.Control\.EditAttributeFeature/i;if((b.length>2)||(!d.test(b[0].CLASS_NAME))){var c=new OpenLayers.Control.Button({title:"Guardar elementos",trigger:OpenLayers.Function.bind(Mapea.global.wfsLayer.commit,Mapea.global.wfsLayer),displayClass:"olControlSaveFeatures"});b.push(c)}var e=this.createEditPanel(b);this.map.addControl(e)}},createEditPanel:function(b){var a=new OpenLayers.Control.Panel({displayClass:"customEditingToolbar",id:"editPanelId"});a.addControls(b);a.onButtonClick=function(o){var g=(o.buttonElement)?((o.buttonElement.className)?o.buttonElement.className:""):"";g=g.toLowerCase();var z=[];var y=[];var t=this.map.getControlsByClass("Mapea.Control.DrawFeature");if(g.indexOf("drawfeature")!=-1){y=y.concat(t)}else{z=z.concat(t)}var h=this.map.getControlsByClass("Mapea.Control.DeleteFeature");if(g.indexOf("deletefeature")!=-1){y=y.concat(h)}else{z=z.concat(h)}var f=this.map.getControlsByClass("Mapea.Control.ModifyFeature");if(g.indexOf("modifyfeature")!=-1){y=y.concat(f)}else{z=z.concat(f)}var l=this.map.getControlsByClass("Mapea.Control.EditAttributeFeature");if(g.indexOf("editattribute")!=-1){y=y.concat(l)}else{z=z.concat(l)}if(g.indexOf("clearunsavedoperation")!=-1){clearUnsavedOperation()}else{if(g.indexOf("savefeatures")!=-1){OpenLayers.Function.bind(Mapea.global.wfsLayer.commit,Mapea.global.wfsLayer)()}else{if(y.length==0){return true}}}for(var r=0,k=z.length;r<k;r++){var p=z[r];if(p&&p.active){p.deactivate()}}for(var r=0,k=y.length;r<k;r++){var d=y[r];if(d&&!d.active){d.activate()}else{if(d){d.deactivate()}}}var q=this.map.getControlsBy("id","measurePanelId");if(q.length>0){for(var r=0;r<q[0].controls.length;r++){q[0].controls[r].deactivate()}executeDelete()}var m=this.map.getControlsByClass("Mapea.Control.NavToolbar");if(m.length>0){m[0].controls[0].deactivate();m[0].controls[1].deactivate()}var e=this.map.getControlsBy("id","infoPanelId");if(e.length>0){e[0].controls[0].deactivate()}var s=this.map.getControlsByClass("Mapea.Control.PanZoom");var x=this.map.getControlsByClass("Mapea.Control.PanZoomBar");if(s!=null&&x!=null&&s.length>0&&x.length>0){s[0].buttons=s[0].buttons.concat(x[0].buttons)}var w=this.map.getControlsByClass("Mapea.Control.LayerSwitcher");OpenLayers.Event.stop(o?o:window.event);var u=[];if(m!=null&&m.length>0){u=u.concat(m[0].controls)}if(e!=null&&e.length>0){u=u.concat(e[0].controls)}if(q!=null&&q.length>0){u=u.concat(q[0].controls)}var j;var n=this.controls.concat(u),c=o.buttonElement;for(var r=n.length-1;r>=0;--r){if(n[r].panel_div===c){j=n[r];break}}};return a},CLASS_NAME:"Mapea.Parameter.Controls"});Mapea.Parameter.Theme=OpenLayers.Class(Mapea.Parameter,{isLoaded:false,callback:OpenLayers.Function.Void,initialize:function(b,a){Mapea.Parameter.prototype.initialize.apply(this,[b]);if(a!=null){this.callback=a}},applyDefault:function(){this.buildTheme("default")},applyParameter:function(){this.buildTheme(this.parameter)},buildTheme:function(a){Mapea.Util.removeMapeaCSSFiles();Mapea.Util.setThemePaths(a);if(!Mapea.global.jQueryCssLoaded){Mapea.Util.loadCSSFile(Mapea.global.THEME_JQUERY_PATH,OpenLayers.Function.bind(function(){Mapea.global.jQueryCssLoaded=true;this.themeLoaded()},this))}Mapea.Util.loadCSSFile(Mapea.global.THEME_CSS_PATH,OpenLayers.Function.bind(function(){Mapea.global.mapeaCssLoaded=true;this.themeLoaded()},this))},themeLoaded:function(){this.isLoaded=(Mapea.global.jQueryCssLoaded&&Mapea.global.mapeaCssLoaded);if(this.isLoaded){Mapea.Util.resizeAllPanels(this.map);var a=this.map.getControlsByClass("OpenLayers.Control.Measure");if(a.length>0){var f=Mapea.Util.getMeasurePathAreaColor(this.map);var d=new OpenLayers.Rule({symbolizer:{Point:{pointRadius:6,graphicName:"circle",fillColor:f,fillOpacity:0.3,strokeWidth:3,strokeOpacity:1,strokeColor:f},Line:{strokeWidth:3,strokeOpacity:1,strokeColor:f,strokeDashstyle:"none"},Polygon:{strokeWidth:3,strokeOpacity:1,strokeColor:f,fillColor:f,fillOpacity:0.5}}});var e=new OpenLayers.Style();e.addRules([d]);for(var c=0,b=a.length;c<b;c++){a[c].handler.layerOptions.styleMap.styles["default"]=e}}this.callback()}},CLASS_NAME:"Mapea.Parameter.Theme"});
/*! jQuery UI - v1.10.3 - 2013-06-18
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.tabs.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-slide.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(g,d){function c(k,j){var e,p,l,m=k.nodeName.toLowerCase();return"area"===m?(e=k.parentNode,p=e.name,k.href&&p&&"map"===e.nodeName.toLowerCase()?(l=g("img[usemap=#"+p+"]")[0],!!l&&f(l)):!1):(/input|select|textarea|button|object/.test(m)?!k.disabled:"a"===m?k.href||j:j)&&f(k)}function f(a){return g.expr.filters.visible(a)&&!g(a).parents().addBack().filter(function(){return"hidden"===g.css(this,"visibility")}).length}var b=0,h=/^ui-id-\d+$/;g.ui=g.ui||{},g.extend(g.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),g.fn.extend({focus:function(a){return function(e,j){return"number"==typeof e?this.each(function(){var k=this;setTimeout(function(){g(k).focus(),j&&j.call(k)},e)}):a.apply(this,arguments)}}(g.fn.focus),scrollParent:function(){var a;return a=g.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(g.css(this,"position"))&&/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?g(document):a},zIndex:function(j){if(j!==d){return this.css("zIndex",j)}if(this.length){for(var k,e,l=g(this[0]);l.length&&l[0]!==document;){if(k=l.css("position"),("absolute"===k||"relative"===k||"fixed"===k)&&(e=parseInt(l.css("zIndex"),10),!isNaN(e)&&0!==e)){return e}l=l.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})},removeUniqueId:function(){return this.each(function(){h.test(this.id)&&g(this).removeAttr("id")})}}),g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(a){return function(e){return !!g.data(e,a)}}):function(e,a,j){return !!g.data(e,j[3])},focusable:function(a){return c(a,!isNaN(g.attr(a,"tabindex")))},tabbable:function(j){var k=g.attr(j,"tabindex"),e=isNaN(k);return(e||k>=0)&&c(j,!e)}}),g("<a>").outerWidth(1).jquery||g.each(["Width","Height"],function(j,k){function e(q,o,r,n){return g.each(p,function(){o-=parseFloat(g.css(q,"padding"+this))||0,r&&(o-=parseFloat(g.css(q,"border"+this+"Width"))||0),n&&(o-=parseFloat(g.css(q,"margin"+this))||0)}),o}var p="Width"===k?["Left","Right"]:["Top","Bottom"],l=k.toLowerCase(),m={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};g.fn["inner"+k]=function(a){return a===d?m["inner"+k].call(this):this.each(function(){g(this).css(l,e(this,a)+"px")})},g.fn["outer"+k]=function(n,a){return"number"!=typeof n?m["outer"+k].call(this,n):this.each(function(){g(this).css(l,e(this,n,!0,a)+"px")})}}),g.fn.addBack||(g.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),g("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(g.fn.removeData=function(a){return function(e){return arguments.length?a.call(this,g.camelCase(e)):a.call(this)}}(g.fn.removeData)),g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),g.support.selectstart="onselectstart" in document.createElement("div"),g.fn.extend({disableSelection:function(){return this.bind((g.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),g.extend(g.ui,{plugin:{add:function(k,j,l){var e,m=g.ui[k].prototype;for(e in l){m.plugins[e]=m.plugins[e]||[],m.plugins[e].push([j,l[e]])}},call:function(n,l,k){var m,j=n.plugins[l];if(j&&n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType){for(m=0;j.length>m;m++){n.options[j[m][0]]&&j[m][1].apply(n.element,k)}}}},hasScroll:function(k,j){if("hidden"===g(k).css("overflow")){return !1}var l=j&&"left"===j?"scrollLeft":"scrollTop",e=!1;return k[l]>0?!0:(k[l]=1,e=k[l]>0,k[l]=0,e)}})})(jQuery);(function(d,b){var a=0,c=Array.prototype.slice,f=d.cleanData;d.cleanData=function(h){for(var g,j=0;null!=(g=h[j]);j++){try{d(g).triggerHandler("remove")}catch(e){}}f(h)},d.widget=function(m,w,j){var q,e,g,p,k={},t=m.split(".")[0];m=m.split(".")[1],q=t+"-"+m,j||(j=w,w=d.Widget),d.expr[":"][q.toLowerCase()]=function(h){return !!d.data(h,q)},d[t]=d[t]||{},e=d[t][m],g=d[t][m]=function(l,h){return this._createWidget?(arguments.length&&this._createWidget(l,h),b):new g(l,h)},d.extend(g,e,{version:j.version,_proto:d.extend({},j),_childConstructors:[]}),p=new w,p.options=d.widget.extend({},p.options),d.each(j,function(h,l){return d.isFunction(l)?(k[h]=function(){var o=function(){return w.prototype[h].apply(this,arguments)},n=function(r){return w.prototype[h].apply(this,r)};return function(){var u,x=this._super,r=this._superApply;return this._super=o,this._superApply=n,u=l.apply(this,arguments),this._super=x,this._superApply=r,u}}(),b):(k[h]=l,b)}),g.prototype=d.widget.extend(p,{widgetEventPrefix:e?p.widgetEventPrefix:m},k,{constructor:g,namespace:t,widgetName:m,widgetFullName:q}),e?(d.each(e._childConstructors,function(l,h){var n=h.prototype;d.widget(n.namespace+"."+n.widgetName,g,h._proto)}),delete e._childConstructors):w._childConstructors.push(g),d.widget.bridge(m,g)},d.widget.extend=function(g){for(var m,e,k=c.call(arguments,1),l=0,j=k.length;j>l;l++){for(m in k[l]){e=k[l][m],k[l].hasOwnProperty(m)&&e!==b&&(g[m]=d.isPlainObject(e)?d.isPlainObject(g[m])?d.widget.extend({},g[m],e):d.widget.extend({},e):e)}}return g},d.widget.bridge=function(g,h){var e=h.prototype.widgetFullName||g;d.fn[g]=function(m){var n="string"==typeof m,k=c.call(arguments,1),j=this;return m=!n&&k.length?d.widget.extend.apply(null,[m].concat(k)):m,n?this.each(function(){var l,o=d.data(this,e);return o?d.isFunction(o[m])&&"_"!==m.charAt(0)?(l=o[m].apply(o,k),l!==o&&l!==b?(j=l&&l.jquery?j.pushStack(l.get()):l,!1):b):d.error("no such method '"+m+"' for "+g+" widget instance"):d.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+m+"'")}):this.each(function(){var l=d.data(this,e);l?l.option(m||{})._init():d.data(this,e,new h(m,this))}),j}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,g){g=d(g||this.defaultElement||this)[0],this.element=d(g),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=d.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=d(),this.hoverable=d(),this.focusable=d(),g!==this&&(d.data(g,this.widgetFullName,this),this._on(!0,this.element,{remove:function(h){h.target===g&&this.destroy()}}),this.document=d(g.style?g.ownerDocument:g.document||g),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(g,h){var l,e,j,k=g;if(0===arguments.length){return d.widget.extend({},this.options)}if("string"==typeof g){if(k={},l=g.split("."),g=l.shift(),l.length){for(e=k[g]=d.widget.extend({},this.options[g]),j=0;l.length-1>j;j++){e[l[j]]=e[l[j]]||{},e=e[l[j]]}if(g=l.pop(),h===b){return e[g]===b?null:e[g]}e[g]=h}else{if(h===b){return this.options[g]===b?null:this.options[g]}k[g]=h}}return this._setOptions(k),this},_setOptions:function(h){var g;for(g in h){this._setOption(g,h[g])}return this},_setOption:function(h,g){return this.options[h]=g,"disabled"===h&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(g,h,k){var e,j=this;"boolean"!=typeof g&&(k=h,h=g,g=!1),k?(h=e=d(h),this.bindings=this.bindings.add(h)):(k=h,h=this.element,e=this.widget()),d.each(k,function(t,r){function q(){return g||j.options.disabled!==!0&&!d(this).hasClass("ui-state-disabled")?("string"==typeof r?j[r]:r).apply(j,arguments):b}"string"!=typeof r&&(q.guid=r.guid=r.guid||q.guid||d.guid++);var m=t.match(/^(\w+)\s*(.*)$/),p=m[1]+j.eventNamespace,s=m[2];s?e.delegate(s,p,q):h.bind(p,q)})},_off:function(h,g){g=(g||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,h.unbind(g).undelegate(g)},_delay:function(k,h){function g(){return("string"==typeof k?j[k]:k).apply(j,arguments)}var j=this;return setTimeout(g,h||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(g){d(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){d(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(g){d(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){d(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(h,g,j){var l,e,k=this.options[h];if(j=j||{},g=d.Event(g),g.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase(),g.target=this.element[0],e=g.originalEvent){for(l in e){l in g||(g[l]=e[l])}}return this.element.trigger(g,j),!(d.isFunction(k)&&k.apply(this.element[0],[g].concat(j))===!1||g.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(g,e){d.Widget.prototype["_"+g]=function(j,m,h){"string"==typeof m&&(m={effect:m});var k,l=m?m===!0||"number"==typeof m?e:m.effect||e:g;m=m||{},"number"==typeof m&&(m={duration:m}),k=!d.isEmptyObject(m),m.complete=h,m.delay&&j.delay(m.delay),k&&d.effects&&d.effects.effect[l]?j[g](m):l!==g&&j[l]?j[l](m.duration,m.easing,h):j.queue(function(n){d(this)[g](),h&&h.call(j[0]),n()})}})})(jQuery);(function(b){var a=!1;b(document).mouseup(function(){a=!1}),b.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(d){return c._mouseDown(d)}).bind("click."+this.widgetName,function(d){return !0===b.data(d.target,c.widgetName+".preventClickEvent")?(b.removeData(d.target,c.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!a){this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var e=this,f=1===d.which,c="string"==typeof this.options.cancel&&d.target.nodeName?b(d.target).closest(this.options.cancel).length:!1;return f&&!c&&this._mouseCapture(d)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(!0===b.data(d.target,this.widgetName+".preventClickEvent")&&b.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(g){return e._mouseMove(g)},this._mouseUpDelegate=function(g){return e._mouseUp(g)},b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),a=!0,!0)):!0}},_mouseMove:function(c){return b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!c.button?this._mouseUp(c):this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1,this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted)},_mouseUp:function(c){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}})})(jQuery);(function(D,y){function q(c,d,a){return[parseFloat(c[0])*(g.test(c[0])?d/100:1),parseFloat(c[1])*(g.test(c[1])?a/100:1)]}function E(c,a){return parseInt(D.css(c,a),10)||0}function k(c){var a=c[0];return 9===a.nodeType?{width:c.width(),height:c.height(),offset:{top:0,left:0}}:D.isWindow(a)?{width:c.width(),height:c.height(),offset:{top:c.scrollTop(),left:c.scrollLeft()}}:a.preventDefault?{width:0,height:0,offset:{top:a.pageY,left:a.pageX}}:{width:c.outerWidth(),height:c.outerHeight(),offset:c.offset()}}D.ui=D.ui||{};var B,j=Math.max,b=Math.abs,w=Math.round,m=/left|center|right/,A=/top|center|bottom/,C=/[\+\-]\d+(\.[\d]+)?%?/,z=/^\w+/,g=/%$/,x=D.fn.position;D.position={scrollbarWidth:function(){if(B!==y){return B}var a,c,e=D("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),d=e.children()[0];return D("body").append(e),a=d.offsetWidth,e.css("overflow","scroll"),c=d.offsetWidth,a===c&&(c=e[0].clientWidth),e.remove(),B=a-c},getScrollInfo:function(h){var d=h.isWindow?"":h.element.css("overflow-x"),f=h.isWindow?"":h.element.css("overflow-y"),l="scroll"===d||"auto"===d&&h.width<h.element[0].scrollWidth,c="scroll"===f||"auto"===f&&h.height<h.element[0].scrollHeight;return{width:c?D.position.scrollbarWidth():0,height:l?D.position.scrollbarWidth():0}},getWithinInfo:function(d){var a=D(d||window),c=D.isWindow(a[0]);return{element:a,isWindow:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}},D.fn.position=function(l){if(!l||!l.of){return x.apply(this,arguments)}l=D.extend({},l);var s,c,d,h,F,o,u=D(l.of),n=D.position.getWithinInfo(l.within),t=D.position.getScrollInfo(n),r=(l.collision||"flip").split(" "),f={};return o=k(u),u[0].preventDefault&&(l.at="left top"),c=o.width,d=o.height,h=o.offset,F=D.extend({},h),D.each(["my","at"],function(){var e,a,p=(l[this]||"").split(" ");1===p.length&&(p=m.test(p[0])?p.concat(["center"]):A.test(p[0])?["center"].concat(p):["center","center"]),p[0]=m.test(p[0])?p[0]:"center",p[1]=A.test(p[1])?p[1]:"center",e=C.exec(p[0]),a=C.exec(p[1]),f[this]=[e?e[0]:0,a?a[0]:0],l[this]=[z.exec(p[0])[0],z.exec(p[1])[0]]}),1===r.length&&(r[1]=r[0]),"right"===l.at[0]?F.left+=c:"center"===l.at[0]&&(F.left+=c/2),"bottom"===l.at[1]?F.top+=d:"center"===l.at[1]&&(F.top+=d/2),s=q(f.at,c,d),F.left+=s[0],F.top+=s[1],this.each(function(){var p,G,L=D(this),O=L.outerWidth(),K=L.outerHeight(),I=E(this,"marginLeft"),N=E(this,"marginTop"),a=O+I+E(this,"marginRight")+t.width,H=K+N+E(this,"marginBottom")+t.height,e=D.extend({},F),J=q(f.my,L.outerWidth(),L.outerHeight());"right"===l.my[0]?e.left-=O:"center"===l.my[0]&&(e.left-=O/2),"bottom"===l.my[1]?e.top-=K:"center"===l.my[1]&&(e.top-=K/2),e.left+=J[0],e.top+=J[1],D.support.offsetFractions||(e.left=w(e.left),e.top=w(e.top)),p={marginLeft:I,marginTop:N},D.each(["left","top"],function(M,P){D.ui.position[r[M]]&&D.ui.position[r[M]][P](e,{targetWidth:c,targetHeight:d,elemWidth:O,elemHeight:K,collisionPosition:p,collisionWidth:a,collisionHeight:H,offset:[s[0]+J[0],s[1]+J[1]],my:l.my,at:l.at,within:n,elem:L})}),l.using&&(G=function(Q){var P=h.left-e.left,S=P+c-O,T=h.top-e.top,M=T+d-K,R={target:{element:u,left:h.left,top:h.top,width:c,height:d},element:{element:L,left:e.left,top:e.top,width:O,height:K},horizontal:0>S?"left":P>0?"right":"center",vertical:0>M?"top":T>0?"bottom":"middle"};O>c&&c>b(P+S)&&(R.horizontal="center"),K>d&&d>b(T+M)&&(R.vertical="middle"),R.important=j(b(P),b(S))>j(b(T),b(M))?"horizontal":"vertical",l.using.call(this,Q,R)}),L.offset(D.extend(e,{using:G}))})},D.ui.position={fit:{left:function(G,u){var o,H=u.within,d=H.isWindow?H.scrollLeft:H.offset.left,F=H.width,c=G.left-u.collisionPosition.marginLeft,p=d-c,f=c+u.collisionWidth-F-d;u.collisionWidth>F?p>0&&0>=f?(o=G.left+p+u.collisionWidth-F-d,G.left+=p-o):G.left=f>0&&0>=p?d:p>f?d+F-u.collisionWidth:d:p>0?G.left+=p:f>0?G.left-=f:G.left=j(G.left-c,G.left)},top:function(G,u){var o,H=u.within,d=H.isWindow?H.scrollTop:H.offset.top,F=u.within.height,c=G.top-u.collisionPosition.marginTop,p=d-c,f=c+u.collisionHeight-F-d;u.collisionHeight>F?p>0&&0>=f?(o=G.top+p+u.collisionHeight-F-d,G.top+=p-o):G.top=f>0&&0>=p?d:p>f?d+F-u.collisionHeight:d:p>0?G.top+=p:f>0?G.top-=f:G.top=j(G.top-c,G.top)}},flip:{left:function(Q,L){var I,R,G=L.within,O=G.offset.left+G.scrollLeft,F=G.width,J=G.isWindow?G.scrollLeft:G.offset.left,H=Q.left-L.collisionPosition.marginLeft,N=H-J,P=H+L.collisionWidth-F-J,M="left"===L.my[0]?-L.elemWidth:"right"===L.my[0]?L.elemWidth:0,r="left"===L.at[0]?L.targetWidth:"right"===L.at[0]?-L.targetWidth:0,K=-2*L.offset[0];0>N?(I=Q.left+M+r+K+L.collisionWidth-F-O,(0>I||b(N)>I)&&(Q.left+=M+r+K)):P>0&&(R=Q.left-L.collisionPosition.marginLeft+M+r+K-J,(R>0||P>b(R))&&(Q.left+=M+r+K))},top:function(R,M){var J,S,G=M.within,P=G.offset.top+G.scrollTop,F=G.height,K=G.isWindow?G.scrollTop:G.offset.top,I=R.top-M.collisionPosition.marginTop,O=I-K,Q=I+M.collisionHeight-F-K,N="top"===M.my[1],r=N?-M.elemHeight:"bottom"===M.my[1]?M.elemHeight:0,L="top"===M.at[1]?M.targetHeight:"bottom"===M.at[1]?-M.targetHeight:0,H=-2*M.offset[1];0>O?(S=R.top+r+L+H+M.collisionHeight-F-P,R.top+r+L+H>O&&(0>S||b(O)>S)&&(R.top+=r+L+H)):Q>0&&(J=R.top-M.collisionPosition.marginTop+r+L+H-K,R.top+r+L+H>Q&&(J>0||Q>b(J))&&(R.top+=r+L+H))}},flipfit:{left:function(){D.ui.position.flip.left.apply(this,arguments),D.ui.position.fit.left.apply(this,arguments)},top:function(){D.ui.position.flip.top.apply(this,arguments),D.ui.position.fit.top.apply(this,arguments)}}},function(){var l,d,f,t,c,p=document.getElementsByTagName("body")[0],h=document.createElement("div");l=document.createElement(p?"div":"body"),f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},p&&D.extend(f,{position:"absolute",left:"-1000px",top:"-1000px"});for(c in f){l.style[c]=f[c]}l.appendChild(h),d=p||document.documentElement,d.insertBefore(l,d.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",t=D(h).offset().left,D.support.offsetFractions=t>10&&11>t,l.innerHTML="",d.removeChild(l)}()})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(c){var b=this.options;return this.helper||b.disabled||a(c.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(c),this.handle?(a(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(c){var b=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(c,b){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(c),this.positionAbs=this._convertPositionTo("absolute"),!b){var d=this._uiHash();if(this._trigger("drag",c,d)===!1){return this._mouseUp({}),!1}this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,c),!1},_mouseStop:function(c){var b=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,c)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){b._trigger("stop",c)!==!1&&b._clear()}):this._trigger("stop",c)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(c){var b=this.options,d=a.isFunction(b.helper)?a(b.helper.apply(this.element[0],[c])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left" in b&&(this.offset.click.left=b.left+this.margins.left),"right" in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top" in b&&(this.offset.click.top=b.top+this.margins.top),"bottom" in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,b,d,e=this.options;return e.containment?"window"===e.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===e.containment?(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):e.containment.constructor===Array?(this.containment=e.containment,undefined):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),b=a(e.containment),d=b[0],d&&(c="hidden"!==b.css("overflow"),this.containment=[(parseInt(b.css("borderLeftWidth"),10)||0)+(parseInt(b.css("paddingLeft"),10)||0),(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("paddingTop"),10)||0),(c?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b.css("borderRightWidth"),10)||0)-(parseInt(b.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b.css("borderBottomWidth"),10)||0)-(parseInt(b.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b),undefined):(this.containment=null,undefined)},_convertPositionTo:function(c,b){b||(b=this.position);var d="absolute"===c?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:b.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:b.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(k){var f,m,d,j,c=this.options,b="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=k.pageX,e=k.pageY;return this.offset.scroll||(this.offset.scroll={top:b.scrollTop(),left:b.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(m=this.relative_container.offset(),f=[this.containment[0]+m.left,this.containment[1]+m.top,this.containment[2]+m.left,this.containment[3]+m.top]):f=this.containment,k.pageX-this.offset.click.left<f[0]&&(g=f[0]+this.offset.click.left),k.pageY-this.offset.click.top<f[1]&&(e=f[1]+this.offset.click.top),k.pageX-this.offset.click.left>f[2]&&(g=f[2]+this.offset.click.left),k.pageY-this.offset.click.top>f[3]&&(e=f[3]+this.offset.click.top)),c.grid&&(d=c.grid[1]?this.originalPageY+Math.round((e-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,e=f?d-this.offset.click.top>=f[1]||d-this.offset.click.top>f[3]?d:d-this.offset.click.top>=f[1]?d-c.grid[1]:d+c.grid[1]:d,j=c.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,g=f?j-this.offset.click.left>=f[0]||j-this.offset.click.left>f[2]?j:j-this.offset.click.left>=f[0]?j-c.grid[0]:j+c.grid[0]:j)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(c,b,d){return d=d||this._uiHash(),a.ui.plugin.call(this,c,[b,d]),"drag"===c&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,c,b,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(d,c){var e=a(this).data("ui-draggable"),f=e.options,b=a.extend({},c,{item:e.element});e.sortables=[],a(f.connectToSortable).each(function(){var g=a.data(this,"ui-sortable");g&&!g.options.disabled&&(e.sortables.push({instance:g,shouldRevert:g.options.revert}),g.refreshPositions(),g._trigger("activate",d,b))})},stop:function(c,b){var d=a(this).data("ui-draggable"),e=a.extend({},b,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,e))})},drag:function(c,b){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",c),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",c),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var c=a("body"),b=a(this).data("ui-draggable").options;c.css("cursor")&&(b._cursor=c.css("cursor")),c.css("cursor",b.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(c,b){var d=a(b.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(c,b){var d=a(this).data("ui-draggable").options;d._opacity&&a(b.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(c){var b=a(this).data("ui-draggable"),d=b.options,e=!1;b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(b.overflowOffset.top+b.scrollParent[0].offsetHeight-c.pageY<d.scrollSensitivity?b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop+d.scrollSpeed:c.pageY-b.overflowOffset.top<d.scrollSensitivity&&(b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(b.overflowOffset.left+b.scrollParent[0].offsetWidth-c.pageX<d.scrollSensitivity?b.scrollParent[0].scrollLeft=e=b.scrollParent[0].scrollLeft+d.scrollSpeed:c.pageX-b.overflowOffset.left<d.scrollSensitivity&&(b.scrollParent[0].scrollLeft=e=b.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(c.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(c.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(c.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(c.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(b,c)}}),a.ui.plugin.add("draggable","snap",{start:function(){var c=a(this).data("ui-draggable"),b=c.options;c.snapElements=[],a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var d=a(this),e=d.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:e.top,left:e.left})})},drag:function(q,E){var w,B,L,A,x,F,D,k,J,I,z=a(this).data("ui-draggable"),H=z.options,C=H.snapTolerance,G=E.offset.left,j=G+z.helperProportions.width,K=E.offset.top,e=K+z.helperProportions.height;for(J=z.snapElements.length-1;J>=0;J--){x=z.snapElements[J].left,F=x+z.snapElements[J].width,D=z.snapElements[J].top,k=D+z.snapElements[J].height,x-C>j||G>F+C||D-C>e||K>k+C||!a.contains(z.snapElements[J].item.ownerDocument,z.snapElements[J].item)?(z.snapElements[J].snapping&&z.options.snap.release&&z.options.snap.release.call(z.element,q,a.extend(z._uiHash(),{snapItem:z.snapElements[J].item})),z.snapElements[J].snapping=!1):("inner"!==H.snapMode&&(w=C>=Math.abs(D-e),B=C>=Math.abs(k-K),L=C>=Math.abs(x-j),A=C>=Math.abs(F-G),w&&(E.position.top=z._convertPositionTo("relative",{top:D-z.helperProportions.height,left:0}).top-z.margins.top),B&&(E.position.top=z._convertPositionTo("relative",{top:k,left:0}).top-z.margins.top),L&&(E.position.left=z._convertPositionTo("relative",{top:0,left:x-z.helperProportions.width}).left-z.margins.left),A&&(E.position.left=z._convertPositionTo("relative",{top:0,left:F}).left-z.margins.left)),I=w||B||L||A,"outer"!==H.snapMode&&(w=C>=Math.abs(D-K),B=C>=Math.abs(k-e),L=C>=Math.abs(x-G),A=C>=Math.abs(F-j),w&&(E.position.top=z._convertPositionTo("relative",{top:D,left:0}).top-z.margins.top),B&&(E.position.top=z._convertPositionTo("relative",{top:k-z.helperProportions.height,left:0}).top-z.margins.top),L&&(E.position.left=z._convertPositionTo("relative",{top:0,left:x}).left-z.margins.left),A&&(E.position.left=z._convertPositionTo("relative",{top:0,left:F-z.helperProportions.width}).left-z.margins.left)),!z.snapElements[J].snapping&&(w||B||L||A||I)&&z.options.snap.snap&&z.options.snap.snap.call(z.element,q,a.extend(z._uiHash(),{snapItem:z.snapElements[J].item})),z.snapElements[J].snapping=w||B||L||A||I)}}}),a.ui.plugin.add("draggable","stack",{start:function(){var c,b=this.data("ui-draggable").options,d=a.makeArray(a(b.stack)).sort(function(f,e){return(parseInt(a(f).css("zIndex"),10)||0)-(parseInt(a(e).css("zIndex"),10)||0)});d.length&&(c=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(e){a(this).css("zIndex",c+e)}),this.css("zIndex",c+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(c,b){var d=a(b.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(c,b){var d=a(this).data("ui-draggable").options;d._zIndex&&a(b.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(c){function b(d){return parseInt(d,10)||0}function a(d){return !isNaN(parseInt(d,10))}c.widget("ui.resizable",c.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var f,e,g,k,d,j=this,h=this.options;if(this.element.addClass("ui-resizable"),c.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String){for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),f=this.handles.split(","),this.handles={},e=0;f.length>e;e++){g=c.trim(f[e]),d="ui-resizable-"+g,k=c("<div class='ui-resizable-handle "+d+"'></div>"),k.css({zIndex:h.zIndex}),"se"===g&&k.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[g]=".ui-resizable-"+g,this.element.append(k)}}this._renderAxis=function(o){var m,p,q,l;o=o||this.element;for(m in this.handles){this.handles[m].constructor===String&&(this.handles[m]=c(this.handles[m],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(p=c(this.handles[m],this.element),l=/sw|ne|nw|se|n|s/.test(m)?p.outerHeight():p.outerWidth(),q=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join(""),o.css(q,l),this._proportionallyResize()),c(this.handles[m]).length}},this._renderAxis(this.element),this._handles=c(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){j.resizing||(this.className&&(k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),j.axis=k&&k[1]?k[1]:"se")}),h.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(c(this).removeClass("ui-resizable-autohide"),j._handles.show())}).mouseleave(function(){h.disabled||j.resizing||(c(this).addClass("ui-resizable-autohide"),j._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(d(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),this},_mouseCapture:function(e){var d,f,g=!1;for(d in this.handles){f=c(this.handles[d])[0],(f===e.target||c.contains(f,e.target))&&(g=!0)}return !this.options.disabled&&g},_mouseStart:function(e){var g,l,d,k=this.options,j=this.element.position(),f=this.element;return this.resizing=!0,/absolute/.test(f.css("position"))?f.css({position:"absolute",top:f.css("top"),left:f.css("left")}):f.is(".ui-draggable")&&f.css({position:"absolute",top:j.top,left:j.left}),this._renderProxy(),g=b(this.helper.css("left")),l=b(this.helper.css("top")),k.containment&&(g+=c(k.containment).scrollLeft()||0,l+=c(k.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:l},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:l},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1,d=c(".ui-resizable-"+this.axis).css("cursor"),c("body").css("cursor","auto"===d?this.axis+"-resize":d),f.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(A){var m,B=this.helper,j={},y=this.originalMousePosition,g=this.axis,e=this.position.top,q=this.position.left,k=this.size.width,z=this.size.height,x=A.pageX-y.left||0,w=A.pageY-y.top||0,f=this._change[g];return f?(m=f.apply(this,[A,x,w]),this._updateVirtualBoundaries(A.shiftKey),(this._aspectRatio||A.shiftKey)&&(m=this._updateRatio(m,A)),m=this._respectSize(m,A),this._updateCache(m),this._propagate("resize",A),this.position.top!==e&&(j.top=this.position.top+"px"),this.position.left!==q&&(j.left=this.position.left+"px"),this.size.width!==k&&(j.width=this.size.width+"px"),this.size.height!==z&&(j.height=this.size.height+"px"),B.css(j),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),c.isEmptyObject(j)||this._trigger("resize",A,this.ui()),!1):!1},_mouseStop:function(q){this.resizing=!1;var j,w,f,m,e,d,k,g=this.options,p=this;return this._helper&&(j=this._proportionallyResizeElements,w=j.length&&/textarea/i.test(j[0].nodeName),f=w&&c.ui.hasScroll(j[0],"left")?0:p.sizeDiff.height,m=w?0:p.sizeDiff.width,e={width:p.helper.width()-m,height:p.helper.height()-f},d=parseInt(p.element.css("left"),10)+(p.position.left-p.originalPosition.left)||null,k=parseInt(p.element.css("top"),10)+(p.position.top-p.originalPosition.top)||null,g.animate||this.element.css(c.extend(e,{top:k,left:d})),p.helper.height(p.size.height),p.helper.width(p.size.width),this._helper&&!g.animate&&this._proportionallyResize()),c("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",q),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(j){var f,g,l,d,k,h=this.options;k={minWidth:a(h.minWidth)?h.minWidth:0,maxWidth:a(h.maxWidth)?h.maxWidth:1/0,minHeight:a(h.minHeight)?h.minHeight:0,maxHeight:a(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||j)&&(f=k.minHeight*this.aspectRatio,l=k.minWidth/this.aspectRatio,g=k.maxHeight*this.aspectRatio,d=k.maxWidth/this.aspectRatio,f>k.minWidth&&(k.minWidth=f),l>k.minHeight&&(k.minHeight=l),k.maxWidth>g&&(k.maxWidth=g),k.maxHeight>d&&(k.maxHeight=d)),this._vBoundaries=k},_updateCache:function(d){this.offset=this.helper.offset(),a(d.left)&&(this.position.left=d.left),a(d.top)&&(this.position.top=d.top),a(d.height)&&(this.size.height=d.height),a(d.width)&&(this.size.width=d.width)},_updateRatio:function(g){var d=this.position,f=this.size,h=this.axis;return a(g.height)?g.width=g.height*this.aspectRatio:a(g.width)&&(g.height=g.width/this.aspectRatio),"sw"===h&&(g.left=d.left+(f.width-g.width),g.top=null),"nw"===h&&(g.top=d.top+(f.height-g.height),g.left=d.left+(f.width-g.width)),g},_respectSize:function(m){var x=this._vBoundaries,y=this.axis,g=a(m.width)&&x.maxWidth&&x.maxWidth<m.width,q=a(m.height)&&x.maxHeight&&x.maxHeight<m.height,f=a(m.width)&&x.minWidth&&x.minWidth>m.width,d=a(m.height)&&x.minHeight&&x.minHeight>m.height,k=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,w=/sw|nw|w/.test(y),p=/nw|ne|n/.test(y);return f&&(m.width=x.minWidth),d&&(m.height=x.minHeight),g&&(m.width=x.maxWidth),q&&(m.height=x.maxHeight),f&&w&&(m.left=k-x.minWidth),g&&w&&(m.left=k-x.maxWidth),d&&p&&(m.top=j-x.minHeight),q&&p&&(m.top=j-x.maxHeight),m.width||m.height||m.left||!m.top?m.width||m.height||m.top||!m.left||(m.left=null):m.top=null,m},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var j,g,f,h,k,d=this.helper||this.element;for(j=0;this._proportionallyResizeElements.length>j;j++){if(k=this._proportionallyResizeElements[j],!this.borderDif){for(this.borderDif=[],f=[k.css("borderTopWidth"),k.css("borderRightWidth"),k.css("borderBottomWidth"),k.css("borderLeftWidth")],h=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")],g=0;f.length>g;g++){this.borderDif[g]=(parseInt(f[g],10)||0)+(parseInt(h[g],10)||0)}}k.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,d=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||c("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(f,d){return{width:this.originalSize.width+d}},w:function(h,f){var d=this.originalSize,g=this.originalPosition;return{left:g.left+f,width:d.width-f}},n:function(h,f,d){var g=this.originalSize,j=this.originalPosition;return{top:j.top+d,height:g.height-d}},s:function(g,f,d){return{height:this.originalSize.height+d}},se:function(e,d,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,d,f]))},sw:function(e,d,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,d,f]))},ne:function(e,d,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,d,f]))},nw:function(e,d,f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,d,f]))}},_propagate:function(e,d){c.ui.plugin.call(this,e,[d,this.ui()]),"resize"!==e&&this._trigger(e,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),c.ui.plugin.add("resizable","animate",{stop:function(q){var j=c(this).data("ui-resizable"),w=j.options,f=j._proportionallyResizeElements,m=f.length&&/textarea/i.test(f[0].nodeName),e=m&&c.ui.hasScroll(f[0],"left")?0:j.sizeDiff.height,d=m?0:j.sizeDiff.width,k={width:j.size.width-d,height:j.size.height-e},g=parseInt(j.element.css("left"),10)+(j.position.left-j.originalPosition.left)||null,p=parseInt(j.element.css("top"),10)+(j.position.top-j.originalPosition.top)||null;j.element.animate(c.extend(k,p&&g?{top:p,left:g}:{}),{duration:w.animateDuration,easing:w.animateEasing,step:function(){var h={width:parseInt(j.element.css("width"),10),height:parseInt(j.element.css("height"),10),top:parseInt(j.element.css("top"),10),left:parseInt(j.element.css("left"),10)};f&&f.length&&c(f[0]).css({width:h.width,height:h.height}),j._updateCache(h),j._propagate("resize",q)}})}}),c.ui.plugin.add("resizable","containment",{start:function(){var m,z,j,x,g,e,q,k=c(this).data("ui-resizable"),y=k.options,w=k.element,t=y.containment,f=t instanceof c?t.get(0):/parent/.test(t)?w.parent().get(0):t;f&&(k.containerElement=c(f),/document/.test(t)||t===document?(k.containerOffset={left:0,top:0},k.containerPosition={left:0,top:0},k.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}):(m=c(f),z=[],c(["Top","Right","Left","Bottom"]).each(function(d,h){z[d]=b(m.css("padding"+h))}),k.containerOffset=m.offset(),k.containerPosition=m.position(),k.containerSize={height:m.innerHeight()-z[3],width:m.innerWidth()-z[1]},j=k.containerOffset,x=k.containerSize.height,g=k.containerSize.width,e=c.ui.hasScroll(f,"left")?f.scrollWidth:g,q=c.ui.hasScroll(f)?f.scrollHeight:x,k.parentData={element:f,left:j.left,top:j.top,width:e,height:q}))},resize:function(y){var k,z,g,w,f=c(this).data("ui-resizable"),e=f.options,m=f.containerOffset,j=f.position,x=f._aspectRatio||y.shiftKey,q={top:0,left:0},p=f.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(q=m),j.left<(f._helper?m.left:0)&&(f.size.width=f.size.width+(f._helper?f.position.left-m.left:f.position.left-q.left),x&&(f.size.height=f.size.width/f.aspectRatio),f.position.left=e.helper?m.left:0),j.top<(f._helper?m.top:0)&&(f.size.height=f.size.height+(f._helper?f.position.top-m.top:f.position.top),x&&(f.size.width=f.size.height*f.aspectRatio),f.position.top=f._helper?m.top:0),f.offset.left=f.parentData.left+f.position.left,f.offset.top=f.parentData.top+f.position.top,k=Math.abs((f._helper?f.offset.left-q.left:f.offset.left-q.left)+f.sizeDiff.width),z=Math.abs((f._helper?f.offset.top-q.top:f.offset.top-m.top)+f.sizeDiff.height),g=f.containerElement.get(0)===f.element.parent().get(0),w=/relative|absolute/.test(f.containerElement.css("position")),g&&w&&(k-=f.parentData.left),k+f.size.width>=f.parentData.width&&(f.size.width=f.parentData.width-k,x&&(f.size.height=f.size.width/f.aspectRatio)),z+f.size.height>=f.parentData.height&&(f.size.height=f.parentData.height-z,x&&(f.size.width=f.size.height*f.aspectRatio))},stop:function(){var p=c(this).data("ui-resizable"),j=p.options,q=p.containerOffset,f=p.containerPosition,m=p.containerElement,e=c(p.helper),d=e.offset(),k=e.outerWidth()-p.sizeDiff.width,g=e.outerHeight()-p.sizeDiff.height;p._helper&&!j.animate&&/relative/.test(m.css("position"))&&c(this).css({left:d.left-f.left-q.left,width:k,height:g}),p._helper&&!j.animate&&/static/.test(m.css("position"))&&c(this).css({left:d.left-f.left-q.left,width:k,height:g})}}),c.ui.plugin.add("resizable","alsoResize",{start:function(){var e=c(this).data("ui-resizable"),d=e.options,f=function(g){c(g).each(function(){var h=c(this);h.data("ui-resizable-alsoresize",{width:parseInt(h.width(),10),height:parseInt(h.height(),10),left:parseInt(h.css("left"),10),top:parseInt(h.css("top"),10)})})};"object"!=typeof d.alsoResize||d.alsoResize.parentNode?f(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],f(d.alsoResize)):c.each(d.alsoResize,function(g){f(g)})},resize:function(f,e){var j=c(this).data("ui-resizable"),m=j.options,d=j.originalSize,l=j.originalPosition,k={height:j.size.height-d.height||0,width:j.size.width-d.width||0,top:j.position.top-l.top||0,left:j.position.left-l.left||0},g=function(h,n){c(h).each(function(){var q=c(this),s=c(this).data("ui-resizable-alsoresize"),p={},r=n&&n.length?n:q.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(r,function(w,u){var o=(s[u]||0)+(k[u]||0);o&&o>=0&&(p[u]=o||null)}),q.css(p)})};"object"!=typeof m.alsoResize||m.alsoResize.nodeType?g(m.alsoResize):c.each(m.alsoResize,function(n,h){g(n,h)})},stop:function(){c(this).removeData("resizable-alsoresize")}}),c.ui.plugin.add("resizable","ghost",{start:function(){var e=c(this).data("ui-resizable"),d=e.options,f=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof d.ghost?d.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var d=c(this).data("ui-resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=c(this).data("ui-resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),c.ui.plugin.add("resizable","grid",{resize:function(){var H=c(this).data("ui-resizable"),y=H.options,I=H.size,q=H.originalSize,E=H.originalPosition,k=H.axis,e="number"==typeof y.grid?[y.grid,y.grid]:y.grid,z=e[0]||1,x=e[1]||1,G=Math.round((I.width-q.width)/z)*z,D=Math.round((I.height-q.height)/x)*x,C=q.width+G,j=q.height+D,B=y.maxWidth&&C>y.maxWidth,w=y.maxHeight&&j>y.maxHeight,A=y.minWidth&&y.minWidth>C,F=y.minHeight&&y.minHeight>j;y.grid=e,A&&(C+=z),F&&(j+=x),B&&(C-=z),w&&(j-=x),/^(se|s|e)$/.test(k)?(H.size.width=C,H.size.height=j):/^(ne)$/.test(k)?(H.size.width=C,H.size.height=j,H.position.top=E.top-D):/^(sw)$/.test(k)?(H.size.width=C,H.size.height=j,H.position.left=E.left-G):(H.size.width=C,H.size.height=j,H.position.top=E.top-D,H.position.left=E.left-G)}})})(jQuery);(function(a){var b=0;a.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var g,d,f,j=this.element[0].nodeName.toLowerCase(),c="textarea"===j,h="input"===j;this.isMultiLine=c?!0:h?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[c||h?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(k){if(this.element.prop("readOnly")){return g=!0,f=!0,d=!0,undefined}g=!1,f=!1,d=!1;var e=a.ui.keyCode;switch(k.keyCode){case e.PAGE_UP:g=!0,this._move("previousPage",k);break;case e.PAGE_DOWN:g=!0,this._move("nextPage",k);break;case e.UP:g=!0,this._keyEvent("previous",k);break;case e.DOWN:g=!0,this._keyEvent("next",k);break;case e.ENTER:case e.NUMPAD_ENTER:this.menu.active&&(g=!0,k.preventDefault(),this.menu.select(k));break;case e.TAB:this.menu.active&&this.menu.select(k);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(k),k.preventDefault());break;default:d=!0,this._searchTimeout(k)}},keypress:function(e){if(g){return g=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&e.preventDefault(),undefined}if(!d){var k=a.ui.keyCode;switch(e.keyCode){case k.PAGE_UP:this._move("previousPage",e);break;case k.PAGE_DOWN:this._move("nextPage",e);break;case k.UP:this._keyEvent("previous",e);break;case k.DOWN:this._keyEvent("next",e)}}},input:function(e){return f?(f=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(l){l.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var k=this.menu.element[0];a(l.target).closest(".ui-menu-item").length||this._delay(function(){var m=this;this.document.one("mousedown",function(e){e.target===m.element[0]||e.target===k||a.contains(k,e.target)||m.close()})})},menufocus:function(m,k){if(this.isNewMenu&&(this.isNewMenu=!1,m.originalEvent&&/^mouse/.test(m.originalEvent.type))){return this.menu.blur(),this.document.one("mousemove",function(){a(m.target).trigger(m.originalEvent)}),undefined}var l=k.item.data("ui-autocomplete-item");!1!==this._trigger("focus",m,{item:l})?m.originalEvent&&/^key/.test(m.originalEvent.type)&&this._value(l.value):this.liveRegion.text(l.value)},menuselect:function(l,n){var k=n.item.data("ui-autocomplete-item"),m=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=m,this._delay(function(){this.previous=m,this.selectedItem=k})),!1!==this._trigger("select",l,{item:k})&&this._value(k.value),this.term=this._value(),this.close(l),this.selectedItem=k}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(c,d){this._super(c,d),"source"===c&&this._initSource(),"appendTo"===c&&this.menu.element.appendTo(this._appendTo()),"disabled"===c&&d&&this.xhr&&this.xhr.abort()},_appendTo:function(){var c=this.options.appendTo;return c&&(c=c.jquery||c.nodeType?a(c):this.document.find(c).eq(0)),c||(c=this.element.closest(".ui-front")),c.length||(c=this.document[0].body),c},_initSource:function(){var f,c,d=this;a.isArray(this.options.source)?(f=this.options.source,this.source=function(e,g){g(a.ui.autocomplete.filter(f,e.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(g,h){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:g,dataType:"json",success:function(e){h(e)},error:function(){h([])}})}):this.source=this.options.source},_searchTimeout:function(c){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,c))},this.options.delay)},search:function(c,d){return c=null!=c?c:this._value(),this.term=this._value(),c.length<this.options.minLength?this.close(d):this._trigger("search",d)!==!1?this._search(c):undefined},_search:function(c){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:c},this._response())},_response:function(){var d=this,c=++b;return function(e){c===b&&d.__response(e),d.pending--,d.pending||d.element.removeClass("ui-autocomplete-loading")}},__response:function(c){c&&(c=this._normalize(c)),this._trigger("response",null,{content:c}),!this.options.disabled&&c&&c.length&&!this.cancelSearch?(this._suggest(c),this._trigger("open")):this._close()},close:function(c){this.cancelSearch=!0,this._close(c)},_close:function(c){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",c))},_change:function(c){this.previous!==this._value()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){return c.length&&c[0].label&&c[0].value?c:a.map(c,function(d){return"string"==typeof d?{label:d,value:d}:a.extend({label:d.label||d.value,value:d.value||d.label},d)})},_suggest:function(d){var c=this.menu.element.empty();this._renderMenu(c,d),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(f,c){var d=this;a.each(c,function(g,e){d._renderItemData(f,e)})},_renderItemData:function(c,d){return this._renderItem(c,d).data("ui-autocomplete-item",d)},_renderItem:function(d,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(d)},_move:function(c,d){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(c)||this.menu.isLastItem()&&/^next/.test(c)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[c](d),undefined):(this.search(null,d),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(c,d){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(c,d),d.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(f,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(f,function(e){return d.test(e.label||e.value||e)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(c){return c+(c>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(c){var d;this._superApply(arguments),this.options.disabled||this.cancelSearch||(d=c&&c.length?this.options.messages.results(c.length):this.options.messages.noResults,this.liveRegion.text(d))}})})(jQuery);(function(p){var k,g,q,d,m="ui-button ui-widget ui-state-default ui-corner-all",c="ui-state-hover ui-state-active ",b="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var a=p(this);setTimeout(function(){a.find(":ui-button").button("refresh")},1)},f=function(l){var a=l.name,h=l.form,o=p([]);return a&&(a=a.replace(/'/g,"\\'"),o=h?p(h).find("[name='"+a+"']"):p("[name='"+a+"']",l.ownerDocument).filter(function(){return !this.form})),o};p.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,j),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var l=this,e=this.options,n="checkbox"===this.type||"radio"===this.type,a=n?"":"ui-state-active",h="ui-state-focus";null===e.label&&(e.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(m).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){e.disabled||this===k&&p(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){e.disabled||p(this).removeClass(a)}).bind("click"+this.eventNamespace,function(o){e.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){l.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){l.buttonElement.removeClass(h)}),n&&(this.element.bind("change"+this.eventNamespace,function(){d||l.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(o){e.disabled||(d=!1,g=o.pageX,q=o.pageY)}).bind("mouseup"+this.eventNamespace,function(o){e.disabled||(g!==o.pageX||q!==o.pageY)&&(d=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return e.disabled||d?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(e.disabled||d){return !1}p(this).addClass("ui-state-active"),l.buttonElement.attr("aria-pressed","true");var o=l.element[0];f(o).not(o).map(function(){return p(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return e.disabled?!1:(p(this).addClass("ui-state-active"),k=this,l.document.one("mouseup",function(){k=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return e.disabled?!1:(p(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(o){return e.disabled?!1:((o.keyCode===p.ui.keyCode.SPACE||o.keyCode===p.ui.keyCode.ENTER)&&p(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){p(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(o){o.keyCode===p.ui.keyCode.SPACE&&p(this).click()})),this._setOption("disabled",e.disabled),this._resetButton()},_determineButtonType:function(){var h,l,a;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(h=this.element.parents().last(),l="label[for='"+this.element.attr("id")+"']",this.buttonElement=h.find(l),this.buttonElement.length||(h=h.length?h.siblings():this.element.siblings(),this.buttonElement=h.filter(l),this.buttonElement.length||(this.buttonElement=h.find(l))),this.element.addClass("ui-helper-hidden-accessible"),a=this.element.is(":checked"),a&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(m+" "+c+" "+b).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,h){return this._super(a,h),"disabled"===a?(h?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOption("disabled",a),"radio"===this.type?f(this.element[0]).each(function(){p(this).is(":checked")?p(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):p(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type){return this.options.label&&this.element.val(this.options.label),undefined}var r=this.buttonElement.removeClass(b),l=p("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(r.empty()).text(),o=this.options.icons,t=o.primary&&o.secondary,h=[];o.primary||o.secondary?(this.options.text&&h.push("ui-button-text-icon"+(t?"s":o.primary?"-primary":"-secondary")),o.primary&&r.prepend("<span class='ui-button-icon-primary ui-icon "+o.primary+"'></span>"),o.secondary&&r.append("<span class='ui-button-icon-secondary ui-icon "+o.secondary+"'></span>"),this.options.text||(h.push(t?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||r.attr("title",p.trim(l)))):h.push("ui-button-text-only"),r.addClass(h.join(" "))}}),p.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,h){"disabled"===a&&this.buttons.button("option",a,h),this._super(a,h)},refresh:function(){var a="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return p(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return p(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(b){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};b.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(f){var d=b(this).css(f).offset().top;0>d&&b(this).css("top",f.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&b.fn.draggable&&this._makeDraggable(),this.options.resizable&&b.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?b(d):this.document.find(d||"body").eq(0)},_destroy:function(){var d,f=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),d=f.parent.children().eq(f.index),d.length&&d[0]!==this.element[0]?d.before(this.element):f.parent.append(this.element)},widget:function(){return this.uiDialog},disable:b.noop,enable:b.noop,close:function(f){var d=this;this._isOpen&&this._trigger("beforeClose",f)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||b(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",f)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(f,g){var d=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return d&&!g&&this._trigger("focus",f),d},open:function(){var d=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=b(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable(),d._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var d=this.element.find("[autofocus]");d.length||(d=this.element.find(":tabbable")),d.length||(d=this.uiDialogButtonPane.find(":tabbable")),d.length||(d=this.uiDialogTitlebarClose.filter(":tabbable")),d.length||(d=this.uiDialog),d.eq(0).focus()},_keepFocus:function(f){function d(){var h=this.document[0].activeElement,g=this.uiDialog[0]===h||b.contains(this.uiDialog[0],h);g||this._focusTabbable()}f.preventDefault(),d.call(this),this._delay(d)},_createWrapper:function(){this.uiDialog=b("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(g){if(this.options.closeOnEscape&&!g.isDefaultPrevented()&&g.keyCode&&g.keyCode===b.ui.keyCode.ESCAPE){return g.preventDefault(),this.close(g),undefined}if(g.keyCode===b.ui.keyCode.TAB){var d=this.uiDialog.find(":tabbable"),f=d.filter(":first"),h=d.filter(":last");g.target!==h[0]&&g.target!==this.uiDialog[0]||g.shiftKey?g.target!==f[0]&&g.target!==this.uiDialog[0]||!g.shiftKey||(h.focus(1),g.preventDefault()):(f.focus(1),g.preventDefault())}},mousedown:function(d){this._moveToTop(d)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=b("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(f){b(f.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=b("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),d=b("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(d),this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(d){this.options.title||d.html("&#160;"),d.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=b("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=b("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var f=this,d=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),b.isEmptyObject(d)||b.isArray(d)&&!d.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(b.each(d,function(g,h){var j,e;h=b.isFunction(h)?{click:h,text:g}:h,h=b.extend({type:"button"},h),j=h.click,h.click=function(){j.apply(f.element[0],arguments)},e={icons:h.icons,text:h.showText},delete h.icons,delete h.showText,b("<button></button>",h).button(e).appendTo(f.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function g(e){return{position:e.position,offset:e.offset}}var d=this,f=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,h){b(this).addClass("ui-dialog-dragging"),d._blockFrames(),d._trigger("dragStart",e,g(h))},drag:function(e,h){d._trigger("drag",e,g(h))},stop:function(h,e){f.position=[e.position.left-d.document.scrollLeft(),e.position.top-d.document.scrollTop()],b(this).removeClass("ui-dialog-dragging"),d._unblockFrames(),d._trigger("dragStop",h,g(e))}})},_makeResizable:function(){function h(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var f=this,g=this.options,k=g.resizable,d=this.uiDialog.css("position"),j="string"==typeof k?k:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:this._minHeight(),handles:j,start:function(e,l){b(this).addClass("ui-dialog-resizing"),f._blockFrames(),f._trigger("resizeStart",e,h(l))},resize:function(e,l){f._trigger("resize",e,h(l))},stop:function(l,e){g.height=b(this).height(),g.width=b(this).width(),b(this).removeClass("ui-dialog-resizing"),f._unblockFrames(),f._trigger("resizeStop",l,h(e))}}).css("position",d)},_minHeight:function(){var d=this.options;return"auto"===d.height?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(){var d=this.uiDialog.is(":visible");d||this.uiDialog.show(),this.uiDialog.position(this.options.position),d||this.uiDialog.hide()},_setOptions:function(e){var g=this,d=!1,f={};b.each(e,function(h,j){g._setOption(h,j),h in c&&(d=!0),h in a&&(f[h]=j)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(f,h){var d,g,j=this.uiDialog;"dialogClass"===f&&j.removeClass(this.options.dialogClass).addClass(h),"disabled"!==f&&(this._super(f,h),"appendTo"===f&&this.uiDialog.appendTo(this._appendTo()),"buttons"===f&&this._createButtons(),"closeText"===f&&this.uiDialogTitlebarClose.button({label:""+h}),"draggable"===f&&(d=j.is(":data(ui-draggable)"),d&&!h&&j.draggable("destroy"),!d&&h&&this._makeDraggable()),"position"===f&&this._position(),"resizable"===f&&(g=j.is(":data(ui-resizable)"),g&&!h&&j.resizable("destroy"),g&&"string"==typeof h&&j.resizable("option","handles",h),g||h===!1||this._makeResizable()),"title"===f&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var f,h,d,g=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),g.minWidth>g.width&&(g.width=g.minWidth),f=this.uiDialog.css({height:"auto",width:g.width}).outerHeight(),h=Math.max(0,g.minHeight-f),d="number"==typeof g.maxHeight?Math.max(0,g.maxHeight-f):"none","auto"===g.height?this.element.css({minHeight:h,maxHeight:d,height:"auto"}):this.element.height(Math.max(0,g.height-f)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=b(this);return b("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return b(d.target).closest(".ui-dialog").length?!0:!!b(d.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var f=this,d=this.widgetFullName;b.ui.dialog.overlayInstances||this._delay(function(){b.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(e){f._allowInteraction(e)||(e.preventDefault(),b(".ui-dialog:visible:last .ui-dialog-content").data(d)._focusTabbable())})}),this.overlay=b("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),b.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(b.ui.dialog.overlayInstances--,b.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),b.ui.dialog.overlayInstances=0,b.uiBackCompat!==!1&&b.widget("ui.dialog",b.ui.dialog,{_position:function(){var g,d=this.options.position,f=[],h=[0,0];d?(("string"==typeof d||"object"==typeof d&&"0" in d)&&(f=d.split?d.split(" "):[d[0],d[1]],1===f.length&&(f[1]=f[0]),b.each(["left","top"],function(j,k){+f[j]===f[j]&&(h[j]=f[j],f[j]=k)}),d={my:f[0]+(0>h[0]?h[0]:"+"+h[0])+" "+f[1]+(0>h[1]?h[1]:"+"+h[1]),at:f.join(" ")}),d=b.extend({},b.ui.dialog.prototype.options.position,d)):d=b.ui.dialog.prototype.options.position,g=this.uiDialog.is(":visible"),g||this.uiDialog.show(),this.uiDialog.position(d),g||this.uiDialog.hide()}})})(jQuery);(function(a){a.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(b){this.options.disabled&&b.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(b){b.preventDefault()},"click .ui-state-disabled > a":function(b){b.preventDefault()},"click .ui-menu-item:has(a)":function(c){var b=a(c.target).closest(".ui-menu-item");!this.mouseHandled&&b.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(c),b.has(".ui-menu").length?this.expand(c):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(c){var b=a(c.currentTarget);b.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(c,b)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(c,d){var b=this.active||this.element.children(".ui-menu-item").eq(0);d||this.focus(c,b)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(j){function c(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var f,l,b,k,g,d=!0;switch(j.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(j);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(j);break;case a.ui.keyCode.HOME:this._move("first","first",j);break;case a.ui.keyCode.END:this._move("last","last",j);break;case a.ui.keyCode.UP:this.previous(j);break;case a.ui.keyCode.DOWN:this.next(j);break;case a.ui.keyCode.LEFT:this.collapse(j);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(j);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(j);break;case a.ui.keyCode.ESCAPE:this.collapse(j);break;default:d=!1,l=this.previousFilter||"",b=String.fromCharCode(j.keyCode),k=!1,clearTimeout(this.filterTimer),b===l?k=!0:b=l+b,g=RegExp("^"+c(b),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())}),f=k&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f,f.length||(b=String.fromCharCode(j.keyCode),g=RegExp("^"+c(b),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())})),f.length?(this.focus(j,f),f.length>1?(this.previousFilter=b,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter):delete this.previousFilter}d&&j.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var d,b=this.options.icons.submenu,c=this.element.find(this.options.menus);c.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var g=a(this),f=g.prev("a"),h=a("<span>").addClass("ui-menu-icon ui-icon "+b).data("ui-menu-submenu-carat",!0);f.attr("aria-haspopup","true").prepend(h),g.attr("aria-labelledby",f.attr("id"))}),d=c.add(this.element),d.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),d.children(":not(.ui-menu-item)").each(function(){var f=a(this);/[^\-\u2014\u2013\s]/.test(f.text())||f.addClass("ui-widget-content ui-menu-divider")}),d.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,c){"icons"===b&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(c.submenu),this._super(b,c)},focus:function(c,f){var b,d;this.blur(c,c&&"focus"===c.type),this._scrollIntoView(f),this.active=f.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),c&&"keydown"===c.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),b=f.children(".ui-menu"),b.length&&/^mouse/.test(c.type)&&this._startOpening(b),this.activeMenu=f.parent(),this._trigger("focus",c,{item:f})},_scrollIntoView:function(g){var c,d,j,b,h,f;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,j=g.offset().top-this.activeMenu.offset().top-c-d,b=this.activeMenu.scrollTop(),h=this.activeMenu.height(),f=g.height(),0>j?this.activeMenu.scrollTop(b+j):j+f>h&&this.activeMenu.scrollTop(b+j-h+f))},blur:function(b,c){c||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer),"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(b)},this.delay))},_open:function(c){var b=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(c.parents(".ui-menu")).hide().attr("aria-hidden","true"),c.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(b)},collapseAll:function(c,b){clearTimeout(this.timer),this.timer=this._delay(function(){var d=b?this.element:a(c&&c.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(c),this.activeMenu=d},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element),b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(b){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(b,c))},expand:function(b){var c=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(b,c)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(c,f,b){var d;this.active&&(d="first"===c||"last"===c?this.active["first"===c?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[c+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[f]()),this.focus(b,d)},nextPage:function(d){var b,c,f;return this.active?(this.isLastItem()||(this._hasScroll()?(c=this.active.offset().top,f=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return b=a(this),0>b.offset().top-c-f}),this.focus(d,b)):this.focus(d,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(d),undefined)},previousPage:function(d){var b,c,f;return this.active?(this.isFirstItem()||(this._hasScroll()?(c=this.active.offset().top,f=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return b=a(this),b.offset().top-c+f>0}),this.focus(d,b)):this.focus(d,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(d),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(c){this.active=this.active||a(c.target).closest(".ui-menu-item");var b={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(c,!0),this._trigger("select",c,b)}})})(jQuery);(function(d,g){function c(){return ++h}function f(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(b,""))===decodeURIComponent(location.href.replace(b,""))}var h=0,b=/#.*$/;d.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var j=this,a=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",a.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(k){d(this).is(".ui-state-disabled")&&k.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){d(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),a.active=this._initialActive(),d.isArray(a.disabled)&&(a.disabled=d.unique(a.disabled.concat(d.map(this.tabs.filter(".ui-state-disabled"),function(e){return j.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(a.active):d(),this._refresh(),this.active.length&&this.load(a.active)},_initialActive:function(){var a=this.options.active,e=this.options.collapsible,j=location.hash.substring(1);return null===a&&(j&&this.tabs.each(function(l,k){return d(k).attr("aria-controls")===j?(a=l,!1):g}),null===a&&(a=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===a||-1===a)&&(a=this.tabs.length?0:!1)),a!==!1&&(a=this.tabs.index(this.tabs.eq(a)),-1===a&&(a=e?!1:0)),!e&&a===!1&&this.anchors.length&&(a=0),a},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):d()}},_tabKeydown:function(j){var k=d(this.document[0].activeElement).closest("li"),l=this.tabs.index(k),e=!0;if(!this._handlePageNav(j)){switch(j.keyCode){case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:l++;break;case d.ui.keyCode.UP:case d.ui.keyCode.LEFT:e=!1,l--;break;case d.ui.keyCode.END:l=this.anchors.length-1;break;case d.ui.keyCode.HOME:l=0;break;case d.ui.keyCode.SPACE:return j.preventDefault(),clearTimeout(this.activating),this._activate(l),g;case d.ui.keyCode.ENTER:return j.preventDefault(),clearTimeout(this.activating),this._activate(l===this.options.active?!1:l),g;default:return}j.preventDefault(),clearTimeout(this.activating),l=this._focusNextTab(l,e),j.ctrlKey||(k.attr("aria-selected","false"),this.tabs.eq(l).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",l)},this.delay))}},_panelKeydown:function(a){this._handlePageNav(a)||a.ctrlKey&&a.keyCode===d.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){return a.altKey&&a.keyCode===d.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):a.altKey&&a.keyCode===d.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):g},_findNextTab:function(k,a){function j(){return k>l&&(k=0),0>k&&(k=l),k}for(var l=this.tabs.length-1;-1!==d.inArray(j(),this.options.disabled);){k=a?k+1:k-1}return k},_focusNextTab:function(a,j){return a=this._findNextTab(a,j),this.tabs.eq(a).focus(),a},_setOption:function(e,a){return"active"===e?(this._activate(a),g):"disabled"===e?(this._setupDisabled(a),g):(this._super(e,a),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",a),a||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(a),"heightStyle"===e&&this._setupHeightStyle(a),g)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var j=this.options,a=this.tablist.children(":has(a[href])");j.disabled=d.map(a.filter(".ui-state-disabled"),function(e){return a.index(e)}),this._processTabs(),j.active!==!1&&this.anchors.length?this.active.length&&!d.contains(this.tablist[0],this.active[0])?this.tabs.length===j.disabled.length?(j.active=!1,this.active=d()):this._activate(this._findNextTab(Math.max(0,j.active-1),!1)):j.active=this.tabs.index(this.active):(j.active=!1,this.active=d()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return d("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=d(),this.anchors.each(function(m,t){var j,s,q,p=d(t).uniqueId().attr("id"),e=d(t).closest("li"),k=e.attr("aria-controls");f(t)?(j=t.hash,s=a.element.find(a._sanitizeSelector(j))):(q=a._tabId(e),j="#"+q,s=a.element.find(j),s.length||(s=a._createPanel(q),s.insertAfter(a.panels[m-1]||a.tablist)),s.attr("aria-live","polite")),s.length&&(a.panels=a.panels.add(s)),k&&e.data("ui-tabs-aria-controls",k),e.attr({"aria-controls":j.substring(1),"aria-labelledby":p}),s.attr("aria-labelledby",p)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(a){return d("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(k){d.isArray(k)&&(k.length?k.length===this.anchors.length&&(k=!0):k=!1);for(var a,j=0;a=this.tabs[j];j++){k===!0||-1!==d.inArray(j,k)?d(a).addClass("ui-state-disabled").attr("aria-disabled","true"):d(a).removeClass("ui-state-disabled").removeAttr("aria-disabled")}this.options.disabled=k},_setupEvents:function(j){var a={click:function(e){e.preventDefault()}};j&&d.each(j.split(" "),function(k,l){a[l]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,a),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(k){var a,j=this.element.parent();"fill"===k?(a=j.height(),a-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var m=d(this),l=m.css("position");"absolute"!==l&&"fixed"!==l&&(a-=m.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){a-=d(this).outerHeight(!0)}),this.panels.each(function(){d(this).height(Math.max(0,a-d(this).innerHeight()+d(this).height()))}).css("overflow","auto")):"auto"===k&&(a=0,this.panels.each(function(){a=Math.max(a,d(this).height("").height())}).height(a))},_eventHandler:function(w){var q=this.options,z=this.active,m=d(w.currentTarget),x=m.closest("li"),k=x[0]===z[0],j=k&&q.collapsible,t=j?d():this._getPanelForTab(x),p=z.length?this._getPanelForTab(z):d(),y={oldTab:z,oldPanel:p,newTab:j?d():x,newPanel:t};w.preventDefault(),x.hasClass("ui-state-disabled")||x.hasClass("ui-tabs-loading")||this.running||k&&!q.collapsible||this._trigger("beforeActivate",w,y)===!1||(q.active=j?!1:this.tabs.index(x),this.active=k?d():x,this.xhr&&this.xhr.abort(),p.length||t.length||d.error("jQuery UI Tabs: Mismatching fragment identifier."),t.length&&this.load(this.tabs.index(x),w),this._toggle(w,y))},_toggle:function(p,k){function l(){j.running=!1,j._trigger("activate",p,k)}function t(){k.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),q.length&&j.options.show?j._show(q,j.options.show,l):(q.show(),l())}var j=this,q=k.newPanel,m=k.oldPanel;this.running=!0,m.length&&this.options.hide?this._hide(m,this.options.hide,function(){k.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),t()}):(k.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),m.hide(),t()),m.attr({"aria-expanded":"false","aria-hidden":"true"}),k.oldTab.attr("aria-selected","false"),q.length&&m.length?k.oldTab.attr("tabIndex",-1):q.length&&this.tabs.filter(function(){return 0===d(this).attr("tabIndex")}).attr("tabIndex",-1),q.attr({"aria-expanded":"true","aria-hidden":"false"}),k.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(k){var a,j=this._findActive(k);j[0]!==this.active[0]&&(j.length||(j=this.active),a=j.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,currentTarget:a,preventDefault:d.noop}))},_findActive:function(a){return a===!1?d():this.tabs.eq(a)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){d.data(this,"ui-tabs-destroy")?d(this).remove():d(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var j=d(this),a=j.data("ui-tabs-aria-controls");a?j.attr("aria-controls",a).removeData("ui-tabs-aria-controls"):j.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var e=this.options.disabled;e!==!1&&(a===g?e=!1:(a=this._getIndex(a),e=d.isArray(e)?d.map(e,function(j){return j!==a?j:null}):d.map(this.tabs,function(j,k){return k!==a?k:null})),this._setupDisabled(e))},disable:function(a){var e=this.options.disabled;if(e!==!0){if(a===g){e=!0}else{if(a=this._getIndex(a),-1!==d.inArray(a,e)){return}e=d.isArray(e)?d.merge([a],e).sort():[a]}this._setupDisabled(e)}},load:function(p,k){p=this._getIndex(p);var s=this,j=this.tabs.eq(p),q=j.find(".ui-tabs-anchor"),m=this._getPanelForTab(j),l={tab:j,panel:m};f(q[0])||(this.xhr=d.ajax(this._ajaxSettings(q,k,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(j.addClass("ui-tabs-loading"),m.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){m.html(a),s._trigger("load",k,l)},1)}).complete(function(a,n){setTimeout(function(){"abort"===n&&s.panels.stop(!1,!0),j.removeClass("ui-tabs-loading"),m.removeAttr("aria-busy"),a===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(k,a,j){var l=this;return{url:k.attr("href"),beforeSend:function(n,m){return l._trigger("beforeLoad",a,d.extend({jqXHR:n,ajaxSettings:m},j))}}},_getPanelForTab:function(j){var a=d(j).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}})})(jQuery);(function(b,c){var a="ui-effects-";b.effects={effect:{}},function(E,z){function w(f,l,d){var h=D[l.type]||{};return null==f?d||!l.def?null:l.def:(f=h.floor?~~f:parseFloat(f),isNaN(f)?l.def:h.mod?(f+h.mod)%h.mod:0>f?0:f>h.max?h.max:f)}function F(d){var e=q(),f=e._rgba=[];return d=d.toLowerCase(),y(x,function(s,p){var H,G=p.re.exec(d),u=G&&p.parse(G),n=p.space||"rgba";return u?(H=e[n](u),e[B[n].cache]=H[B[n].cache],f=e._rgba=H._rgba,!1):z}),f.length?("0,0,0,0"===f.join()&&E.extend(f,C.transparent),e):C[d]}function m(f,h,d){return d=(d+1)%1,1>6*d?f+6*(h-f)*d:1>2*d?h:2>3*d?f+6*(h-f)*(2/3-d):f}var C,k="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",g=/^([\-+])=\s*(\d+\.?\d*)/,x=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[d[1],d[2],d[3],d[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(d){return[2.55*d[1],2.55*d[2],2.55*d[3],d[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(d){return[d[1],d[2]/100,d[3]/100,d[4]]}}],q=E.Color=function(h,d,f,l){return new E.Color.fn.parse(h,d,f,l)},B={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},D={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},A=q.support={},j=E("<p>")[0],y=E.each;j.style.cssText="background-color:rgba(1,1,1,.5)",A.rgba=j.style.backgroundColor.indexOf("rgba")>-1,y(B,function(d,f){f.cache="_"+d,f.props.alpha={idx:3,type:"percent",def:1}}),q.fn=E.extend(q.prototype,{parse:function(H,G,l,f){if(H===z){return this._rgba=[null,null,null,null],this}(H.jquery||H.nodeType)&&(H=E(H).css(G),G=z);var e=this,t=E.type(H),s=this._rgba=[];return G!==z&&(H=[H,G,l,f],t="array"),"string"===t?this.parse(F(H)||C._default):"array"===t?(y(B.rgba.props,function(d,h){s[h.idx]=w(H[h.idx],h)}),this):"object"===t?(H instanceof q?y(B,function(d,h){H[h.cache]&&(e[h.cache]=H[h.cache].slice())}):y(B,function(n,h){var d=h.cache;y(h.props,function(o,p){if(!e[d]&&h.to){if("alpha"===o||null==H[o]){return}e[d]=h.to(e._rgba)}e[d][p.idx]=w(H[o],p,!0)}),e[d]&&0>E.inArray(null,e[d].slice(0,3))&&(e[d][3]=1,h.from&&(e._rgba=h.from(e[d])))}),this):z},is:function(e){var d=q(e),f=!0,h=this;return y(B,function(n,l){var s,p=d[l.cache];return p&&(s=h[l.cache]||l.to&&l.to(h._rgba)||[],y(l.props,function(r,o){return null!=p[o.idx]?f=p[o.idx]===s[o.idx]:z})),f}),f},_space:function(){var d=[],f=this;return y(B,function(e,h){f[h.cache]&&d.push(e)}),d.pop()},transition:function(f,G){var p=q(f),I=p._space(),d=B[I],H=0===this.alpha()?q("transparent"):this,u=H[d.cache]||d.to(H._rgba),l=u.slice();return p=p[d.cache],y(d.props,function(r,K){var h=K.idx,s=u[h],e=p[h],J=D[K.type]||{};null!==e&&(null===s?l[h]=e:(J.mod&&(e-s>J.mod/2?s+=J.mod:s-e>J.mod/2&&(s-=J.mod)),l[h]=w((e-s)*G+s,K)))}),this[I](l)},blend:function(h){if(1===this._rgba[3]){return this}var d=this._rgba.slice(),f=d.pop(),l=q(h)._rgba;return q(E.map(d,function(n,o){return(1-f)*l[o]+f*n}))},toRgbaString:function(){var f="rgba(",d=E.map(this._rgba,function(h,l){return null==h?l>2?1:0:h});return 1===d[3]&&(d.pop(),f="rgb("),f+d.join()+")"},toHslaString:function(){var f="hsla(",d=E.map(this.hsla(),function(h,l){return null==h&&(h=l>2?1:0),l&&3>l&&(h=Math.round(100*h)+"%"),h});return 1===d[3]&&(d.pop(),f="hsl("),f+d.join()+")"},toHexString:function(h){var d=this._rgba.slice(),f=d.pop();return h&&d.push(~~(255*f)),"#"+E.map(d,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),q.fn.parse.prototype=q.fn,B.hsla.to=function(N){if(null==N[0]||null==N[1]||null==N[2]){return[null,null,null,N[3]]}var J,H,O=N[0]/255,p=N[1]/255,L=N[2]/255,f=N[3],d=Math.max(O,p,L),I=Math.min(O,p,L),G=d-I,K=d+I,M=0.5*K;return J=I===d?0:O===d?60*(p-L)/G+360:p===d?60*(L-O)/G+120:60*(O-p)/G+240,H=0===G?0:0.5>=M?G/K:G/(2-K),[Math.round(J)%360,H,M,null==f?1:f]},B.hsla.from=function(h){if(null==h[0]||null==h[1]||null==h[2]){return[null,null,null,h[3]]}var p=h[0]/360,f=h[1],l=h[2],d=h[3],u=0.5>=l?l*(1+f):l+f-l*f,n=2*l-u;return[Math.round(255*m(n,u,p+1/3)),Math.round(255*m(n,u,p)),Math.round(255*m(n,u,p-1/3)),d]},y(B,function(f,r){var d=r.props,l=r.cache,e=r.to,p=r.from;q.fn[f]=function(o){if(e&&!this[l]&&(this[l]=e(this._rgba)),o===z){return this[l].slice()}var H,t=E.type(o),h="array"===t||"object"===t?o:arguments,G=this[l].slice();return y(d,function(n,I){var u=h["object"===t?n:I.idx];null==u&&(u=G[I.idx]),G[I.idx]=w(u,I)}),p?(H=q(p(G)),H[l]=G,H):q(G)},y(d,function(n,h){q.fn[n]||(q.fn[n]=function(I){var t,G=E.type(I),u="alpha"===n?this._hsla?"hsla":"rgba":f,s=this[u](),H=s[h.idx];return"undefined"===G?H:("function"===G&&(I=I.call(this,H),G=E.type(I)),null==I&&h.empty?this:("string"===G&&(t=g.exec(I),t&&(I=H+parseFloat(t[2])*("+"===t[1]?1:-1))),s[h.idx]=I,this[u](s)))})})}),q.hook=function(f){var d=f.split(" ");y(d,function(l,h){E.cssHooks[h]={set:function(u,H){var p,G,t="";if("transparent"!==H&&("string"!==E.type(H)||(p=F(H)))){if(H=q(p||H),!A.rgba&&1!==H._rgba[3]){for(G="backgroundColor"===h?u.parentNode:u;(""===t||"transparent"===t)&&G&&G.style;){try{t=E.css(G,"backgroundColor"),G=G.parentNode}catch(s){}}H=H.blend(t&&"transparent"!==t?t:"_default")}H=H.toRgbaString()}try{u.style[h]=H}catch(s){}}},E.fx.step[h]=function(n){n.colorInit||(n.start=q(n.elem,h),n.end=q(n.end),n.colorInit=!0),E.cssHooks[h].set(n.elem,n.start.transition(n.end,n.pos))}})},q.hook(k),E.cssHooks.borderColor={expand:function(d){var f={};return y(["Top","Right","Bottom","Left"],function(e,h){f["border"+h+"Color"]=d}),f}},C=E.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function e(l){var j,k,m=l.ownerDocument.defaultView?l.ownerDocument.defaultView.getComputedStyle(l,null):l.currentStyle,h={};if(m&&m.length&&m[0]&&m[m[0]]){for(k=m.length;k--;){j=m[k],"string"==typeof m[j]&&(h[b.camelCase(j)]=m[j])}}else{for(j in m){"string"==typeof m[j]&&(h[j]=m[j])}}return h}function f(k,h){var j,m,l={};for(j in h){m=h[j],k[j]!==m&&(d[j]||(b.fx.step[j]||!isNaN(parseFloat(m)))&&(l[j]=m))}return l}var g=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(j,h){b.fx.step[h]=function(k){("none"!==k.end&&!k.setAttr||1===k.pos&&!k.setAttr)&&(jQuery.style(k.elem,h,k.end),k.setAttr=!0)}}),b.fn.addBack||(b.fn.addBack=function(h){return this.add(null==h?this.prevObject:this.prevObject.filter(h))}),b.effects.animateClass=function(m,j,n,l){var k=b.speed(j,n,l);return this.queue(function(){var p,s=b(this),q=s.attr("class")||"",h=k.children?s.find("*").addBack():s;h=h.map(function(){var o=b(this);return{el:o,start:e(this)}}),p=function(){b.each(g,function(r,o){m[o]&&s[o+"Class"](m[o])})},p(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=f(this.start,this.end),this}),s.attr("class",q),h=h.map(function(){var t=this,o=b.Deferred(),r=b.extend({},k,{queue:!1,complete:function(){o.resolve(t)}});return this.el.animate(this.diff,r),o.promise()}),b.when.apply(b,h.get()).done(function(){p(),b.each(arguments,function(){var o=this.el;b.each(this.diff,function(r){o.css(r,"")})}),k.complete.call(s[0])})})},b.fn.extend({addClass:function(h){return function(k,l,m,j){return l?b.effects.animateClass.call(this,{add:k},l,m,j):h.apply(this,arguments)}}(b.fn.addClass),removeClass:function(h){return function(k,l,m,j){return arguments.length>1?b.effects.animateClass.call(this,{remove:k},l,m,j):h.apply(this,arguments)}}(b.fn.removeClass),toggleClass:function(h){return function(k,p,j,m,l){return"boolean"==typeof p||p===c?j?b.effects.animateClass.call(this,p?{add:k}:{remove:k},j,m,l):h.apply(this,arguments):b.effects.animateClass.call(this,{toggle:k},p,j,m)}}(b.fn.toggleClass),switchClass:function(l,j,k,m,h){return b.effects.animateClass.call(this,{add:j,remove:l},k,m,h)}})}(),function(){function d(h,f,g,j){return b.isPlainObject(h)&&(f=h,h=h.effect),h={effect:h},null==f&&(f={}),b.isFunction(f)&&(j=f,g=null,f={}),("number"==typeof f||b.fx.speeds[f])&&(j=g,g=f,f={}),b.isFunction(g)&&(j=g,g=null),f&&b.extend(h,f),g=g||f.duration,h.duration=b.fx.off?0:"number"==typeof g?g:g in b.fx.speeds?b.fx.speeds[g]:b.fx.speeds._default,h.complete=j||f.complete,h}function e(f){return !f||"number"==typeof f||b.fx.speeds[f]?!0:"string"!=typeof f||b.effects.effect[f]?b.isFunction(f)?!0:"object"!=typeof f||f.effect?!1:!0:!0}b.extend(b.effects,{version:"1.10.3",save:function(f,h){for(var g=0;h.length>g;g++){null!==h[g]&&f.data(a+h[g],f[0].style[h[g]])}},restore:function(g,h){var j,f;for(f=0;h.length>f;f++){null!==h[f]&&(j=g.data(a+h[f]),j===c&&(j=""),g.css(h[f],j))}},setMode:function(f,g){return"toggle"===g&&(g=f.is(":hidden")?"show":"hide"),g},getBaseline:function(g,j){var f,h;switch(g[0]){case"top":f=0;break;case"middle":f=0.5;break;case"bottom":f=1;break;default:f=g[0]/j.height}switch(g[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=g[1]/j.width}return{x:h,y:f}},createWrapper:function(j){if(j.parent().is(".ui-effects-wrapper")){return j.parent()}var g={width:j.outerWidth(!0),height:j.outerHeight(!0),"float":j.css("float")},h=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),l={width:j.width(),height:j.height()},f=document.activeElement;try{f.id}catch(k){f=document.body}return j.wrap(h),(j[0]===f||b.contains(j[0],f))&&b(f).focus(),h=j.parent(),"static"===j.css("position")?(h.css({position:"relative"}),j.css({position:"relative"})):(b.extend(g,{position:j.css("position"),zIndex:j.css("z-index")}),b.each(["top","left","bottom","right"],function(m,n){g[n]=j.css(n),isNaN(parseInt(g[n],10))&&(g[n]="auto")}),j.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),j.css(l),h.css(g).show()},removeWrapper:function(g){var f=document.activeElement;return g.parent().is(".ui-effects-wrapper")&&(g.parent().replaceWith(g),(g[0]===f||b.contains(g[0],f))&&b(f).focus()),g},setTransition:function(h,f,g,j){return j=j||{},b.each(f,function(m,l){var k=h.cssUnit(l);k[0]>0&&(j[l]=k[0]*g+k[1])}),j}}),b.fn.extend({effect:function(){function h(p){function m(){b.isFunction(l)&&l.call(q[0]),b.isFunction(p)&&p()}var q=b(this),l=g.complete,o=g.mode;(q.is(":hidden")?"hide"===o:"show"===o)?(q[o](),m()):j.call(q[0],g,m)}var g=d.apply(this,arguments),k=g.mode,f=g.queue,j=b.effects.effect[g.effect];return b.fx.off||!j?k?this[k](g.duration,g.complete):this.each(function(){g.complete&&g.complete.call(this)}):f===!1?this.each(h):this.queue(f||"fx",h)},show:function(f){return function(h){if(e(h)){return f.apply(this,arguments)}var g=d.apply(this,arguments);return g.mode="show",this.effect.call(this,g)}}(b.fn.show),hide:function(f){return function(h){if(e(h)){return f.apply(this,arguments)}var g=d.apply(this,arguments);return g.mode="hide",this.effect.call(this,g)}}(b.fn.hide),toggle:function(f){return function(h){if(e(h)||"boolean"==typeof h){return f.apply(this,arguments)}var g=d.apply(this,arguments);return g.mode="toggle",this.effect.call(this,g)}}(b.fn.toggle),cssUnit:function(h){var f=this.css(h),g=[];return b.each(["em","px","%","pt"],function(j,k){f.indexOf(k)>0&&(g=[parseFloat(f),k])}),g}})}(),function(){var d={};b.each(["Quad","Cubic","Quart","Quint","Expo"],function(f,e){d[e]=function(g){return Math.pow(g,f+2)}}),b.extend(d,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(g){for(var h,f=4;((h=Math.pow(2,--f))-1)/11>g;){}return 1/Math.pow(4,3-f)-7.5625*Math.pow((3*h-2)/22-g,2)}}),b.each(d,function(g,f){b.easing["easeIn"+g]=f,b.easing["easeOut"+g]=function(e){return 1-f(1-e)},b.easing["easeInOut"+g]=function(e){return 0.5>e?f(2*e)/2:1-f(-2*e+2)/2}})}()})(jQuery);(function(b){var c=/up|down|vertical/,a=/up|left|vertical|horizontal/;b.effects.effect.blind=function(F,q){var C,k,e,x=b(this),w=["position","top","bottom","left","right","height","width"],B=b.effects.setMode(x,F.mode||"hide"),E=F.direction||"up",A=c.test(E),j=A?"height":"width",z=A?"top":"left",t=a.test(E),y={},D="show"===B;x.parent().is(".ui-effects-wrapper")?b.effects.save(x.parent(),w):b.effects.save(x,w),x.show(),C=b.effects.createWrapper(x).css({overflow:"hidden"}),k=C[j](),e=parseFloat(C.css(z))||0,y[j]=D?k:0,t||(x.css(A?"bottom":"right",0).css(A?"top":"left","auto").css({position:"absolute"}),y[z]=D?e:k+e),D&&(C.css(j,0),t||C.css(z,e+k)),C.animate(y,{duration:F.duration,easing:F.easing,queue:!1,complete:function(){"hide"===B&&x.hide(),b.effects.restore(x,w),b.effects.removeWrapper(x),q()}})}})(jQuery);(function(a){a.effects.effect.slide=function(m,j){var w,f=a(this),q=["position","top","bottom","left","right","width","height"],d=a.effects.setMode(f,m.mode||"show"),b="show"===d,k=m.direction||"left",g="up"===k||"down"===k?"top":"left",p="up"===k||"left"===k,t={};a.effects.save(f,q),f.show(),w=m.distance||f["top"===g?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(f).css({overflow:"hidden"}),b&&f.css(g,p?isNaN(w)?"-"+w:-w:w),t[g]=(b?p?"+=":"-=":p?"-=":"+=")+w,f.animate(t,{queue:!1,duration:m.duration,easing:m.easing,complete:function(){"hide"===d&&f.hide(),a.effects.restore(f,q),a.effects.removeWrapper(f),j()}})}})(jQuery);var onlySearchCallejero=true;var map=null;var wmc=null;var strName=null;var measureControls=null;var wfsreq=null;var schema=null;var noStrAttributes=null;var geomColumn=null;var geomColumnDef=null;var featureT=null;var measureControls=null;var query=null;var wfsLoad=false;var wmsFullArray=[];var index=0;var kmlLayers=[];var listExtentLayers=[];var errorLayer=[];var callejeroProxy=null;var arrayVias=null;var arrayTiposServicios=null;var arrayServicios=null;var arrayMun=null;var arrayDir=null;var arrayNuc=null;var arraySedes=null;var arrayRoads=null;var tipoViaSelected=null;var tipoServicioSelected=null;var provinciaSelected=null;var provinciaSedeSelected=null;var municipioSelected=null;var municipioSedeSelected=null;var nombreCalle=null;var nombreSede=null;var numeroCalle=null;var nombreNucleo=null;var nombreCarretera=null;var pk=null;var layer_style=null;var style_blue=null;var style_green=null;var style_mark=null;var selectControlCalle=null;var animatingCallejeroHelp=false;var helpDisplayed=false;var firstActiveTab=null;var activeTabsClassName=[];var onlySearchCallejero=true;var callejeroProxy=new IMPL_CallejeroService();if(!Array.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]==c){return b}}return -1}}function onFeatureSelect(r){var e=r.feature;var q='<div class="kml-info"><table class="mapea-table"><tbody>';var d="";var p="</tbody></table></div>";var l=e.attributes.name;if((typeof l)=="string"){l=OpenLayers.String.trim(l)}if(!l||(l.length==0)){l="-"}var c=e.attributes.description;if((typeof c)=="string"){c=OpenLayers.String.trim(c)}if(!c||(c.length==0)){c="-"}var o;if(Mapea.Util.isMobile){o='<div class="kml-header">'+l+"</div>";d+="<tr><td>"+c+"</td></tr>"}else{d+='<tr><td class="header">'+l+"</td></tr>";d+="<tr><td>"+c+"</td></tr>"}if(d){var k=-Mapea.Control.GetLayersInfo.SHOW_INFO_BUFFER;var h=-Mapea.Control.GetLayersInfo.SHOW_INFO_BUFFER;var g=q+d+p;var n;var j=Mapea.Util.getClickedPixelFromEvent(window.event);var f=Mapea.Util.getPopupInPixel(this.map,j);if(f&&f.id&&(f.id=="popup_info")){n=f}if(n){var m=n.contentHTML;m+='<div class="popup-info-separator">KML</div>';m+=g;n.setContentHTML(m);n.show()}else{var b=function(s){s.feature=e;Mapea.Util.unselectFeature(s);Mapea.Util.removeAllPopups(this.map)};var a=new Mapea.Popup.FramedCloud("popup_kml",e.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(400,300),g,null,true,OpenLayers.Function.bind(b,this),o);a.pixelX=j.x;a.pixelY=j.y;e.popup=a;this.map.addPopup(a)}}}function onFeatureUnselect(a){Mapea.Util.removeAllPopups(this.map)}function getQueryable(e,d){var c=false;var f=new Mapea.Util.ReadMaxExtent(e);f.loadCapabilities(e);var a=f.returnCapabilities();if(a!=null){var b=new Mapea.Util.WMSGetCapabilities(a);c=b.isQueryable(d)}return c}function extendEventButtonFunction(){if(map!=null){var a=map.getControlsByClass("OpenLayers.Control.NavToolbar");if(a.length>0){OpenLayers.Util.extend(a[0].controls[0],{activate:function(){executeAction("no");if(this.active){return false}if(this.handler){this.handler.activate()}this.active=true;this.events.triggerEvent("activate");return true}});OpenLayers.Util.extend(a[0].controls[1],{activate:function(){executeAction("no");if(this.active){return false}if(this.handler){this.handler.activate()}this.active=true;this.events.triggerEvent("activate");return true}})}}}function createMeasurePanel(){var h=new Mapea.Control.DelMeasure({id:"deleteMeasures",title:"Eliminar medidas",displayClass:"olControlDeleteMeasure"});var c=new OpenLayers.Control.Panel({displayClass:"MapeaMeasurePanel",id:"measurePanelId"});c.onButtonClick=function(s){var r=(s.buttonElement.className&&(s.buttonElement.className.toLowerCase().indexOf("controlmeasuredist")>-1));var p=(s.buttonElement.className&&(s.buttonElement.className.toLowerCase().indexOf("controlmeasureper")>-1));var n=(s.buttonElement.className&&/olcontroldelete(feature|measure)/i.test(s.buttonElement.className));if(!r&&!p&&!n){return true}var l=map.getControlsByClass("Mapea.Control.NavToolbar");if(l.length>0){l[0].controls[0].deactivate();l[0].controls[1].deactivate()}var q=map.getControlsBy("id","infoPanelId");if(q.length>0){q[0].controls[0].deactivate()}var k=map.getControlsBy("id","editPanelId");if(k.length>0){for(var o=0,m=k[0].controls.length;o<m;o++){k[0].controls[o].deactivate()}}OpenLayers.Event.stop(s?s:window.event);if(n){executeDelete()}else{var j=(r)?map.getControlsBy("id","measureDist")[0]:map.getControlsBy("id","measurePer")[0];if(j){if(j.active){j.deactivate()}else{j.activate();if(j.id=="measureDist"){executeAction("line")}else{if(j.id=="measurePer"){executeAction("polygon")}}}}}};var g="#5092f4";var b={Point:{pointRadius:6,graphicName:"circle",fillColor:g,fillOpacity:0.3,strokeWidth:3,strokeOpacity:1,strokeColor:g},Line:{strokeWidth:3,strokeOpacity:1,strokeColor:g,strokeDashstyle:"none"},Polygon:{strokeWidth:3,strokeOpacity:1,strokeColor:g,fillColor:g,fillOpacity:0.5}};var e=new OpenLayers.Style();e.addRules([new OpenLayers.Rule({symbolizer:b})]);var f=new OpenLayers.StyleMap({"default":e});measureControls={line:new OpenLayers.Control.Measure(OpenLayers.Handler.Path,{id:"measureDist",displayClass:"olControlMeasureDist",persist:true,handlerOptions:{layerOptions:{styleMap:f,zIndex:map.maxZIndex+1}},title:"Medir distancia (doble click para finalizar medición)"}),polygon:new OpenLayers.Control.Measure(OpenLayers.Handler.Polygon,{id:"measurePer",displayClass:"olControlMeasurePer",persist:true,handlerOptions:{layerOptions:{styleMap:f,zIndex:map.maxZIndex+1}},title:"Medir área (doble click para finalizar medición)"})};var a;for(var d in measureControls){a=measureControls[d];a.events.on({measure:handleMeasurements,measurepartial:handleMeasurements});c.addControls(a)}c.addControls(h);map.addControl(c)}function createGetInfoButton(){var a=new OpenLayers.Control.Button({title:"Información de las capas",trigger:OpenLayers.Function.bind(function(){var b=map.getControlsByClass("Mapea.Control.GetLayersInfo");if(b.lengt>0){if(b[0].active){b[0].deactivate();OpenLayers.Element.removeClass(b[0].div,"MapeaControlGetLayersInfoItemActive");OpenLayers.Element.addClass(b[0].div,"MapeaControlGetLayersInfoItemInactive")}else{b[0].activate();OpenLayers.Element.removeClass(b[0].div,"MapeaControlGetLayersInfoItemInactive");OpenLayers.Element.addClass(b[0].div,"MapeaControlGetLayersInfoItemActive")}}},this),displayClass:"MapeaControlGetLayersInfoItemInactive olButton"});map.addControl(a)}function createInfoPanel(a){var b=new OpenLayers.Control.Panel({displayClass:"MapeaGetFeatureInfo",id:"infoPanelId"});b.onButtonClick=function(c){var g=(c.buttonElement.className&&(c.buttonElement.className.toLowerCase().indexOf("getlayersinfo")>-1));if(g){var d=map.getControlsByClass("Mapea.Control.GetLayersInfo")[0];if(d.active){d.deactivate()}else{d.activate()}var j=map.getControlsByClass("Mapea.Control.NavToolbar");if(j.length>0){j[0].controls[0].deactivate();j[0].controls[1].deactivate()}var k=map.getControlsBy("id","measurePanelId");if(k.length>0){k[0].controls[0].deactivate();k[0].controls[1].deactivate();executeDelete()}var h=map.getControlsBy("id","editPanelId");if(h.length>0){for(var f=0,e=h[0].controls.length;f<e;f++){h[0].controls[f].deactivate()}}}OpenLayers.Event.stop(c?c:window.event)};b.addControls([a]);map.addControl(b)}function executeAction(a){for(key in measureControls){var b=measureControls[key];if(a==key){b.activate()}else{b.deactivate()}}var a=document.getElementById("idMeasure");a.innerHTML=""}function executeDelete(){var b=map||sigcMap.map;var c=b.getControlsBy("id","measurePanelId");if(c.length>0){c[0].controls[0].deactivate();c[0].controls[1].deactivate()}var a=document.getElementById("idMeasure");$(a).css("display","none");a.innerHTML="";c[0].controls[2].deactivate()}function handleMeasurements(f){var g=f.geometry;var b=f.units;var a=f.order;var e=f.measure;var d=document.getElementById("idMeasure");$(d).css("display","");var c="";if(a==1){c+="Longitud: "+e.toFixed(3)+" "+b}else{c+="Superficie: "+e.toFixed(3)+" "+b+"<sup>2</sup>"}d.innerHTML=c}function saveEditFeature(){var b=map.getControlsByClass("Mapea.Control.EditAttributeFeature")[0];var f=b.feature;for(var d=0,a=b.layer.attributes.length;d<a;++d){var g=b.layer.attributes[d].name;try{var e=document.getElementById("idInputText_"+g).value;f.attributes[g]=e}catch(c){}}f.state=OpenLayers.State.UPDATE;b.layer.commit();map.removePopup(f.popup);f.popup.destroy();f.popup=null}function getBoundingBoxFromCapabilitiesWFS(d,m,f){var n=new Mapea.Util.WFSGetCapabilities();n.loadCapabilities(d);var e=n.returnCapabilities();if(e==null){return -1}else{var j=e.featureTypeList.featureTypes.length;m=m.toUpperCase();var k=e.featureTypeList;for(var g=0;g<j;g++){var c=(k.featureTypes[g].name&&k.featureTypes[g].name!=null);if(c&&(k.featureTypes[g].name.toUpperCase()==m)){if(k.featureTypes[g].bbox){var h=new OpenLayers.Projection("EPSG:4326");var a=new OpenLayers.Projection(f);var l=k.featureTypes[g].bbox;var b=l.transform(h,a);return b}else{return -1}}}}}function getBoundingBoxFromCapabilities(d,c,e){var f=-1;var g=new Mapea.Util.ReadMaxExtent(d);g.loadCapabilities(d);var a=g.returnCapabilities();if(a!=null){var b=new Mapea.Util.WMSGetCapabilities(a);f=b.getBBoxLayerName(c,e)}return f}function getBoundingDataset(g,y){var q=g.length;var f=new Array();for(var s=0;s<q;s++){if(typeof(g.layers[s].layers)!="undefined"){var o=false;if(g.layers[s].srsArray){var u=g.layers[s].srsArray.length;for(var r=0;s<u;r++){if(g.layers[s].srsArray[r]==y){o=true;f.push(g.layers[s].bboxArray[r])}}}if(o==false){var l=g.layers[s].layers.length;for(var t=0;t<l;t++){var x=new Array();var n=g.layers[s].layers[t].srsArray;if(n==undefined){n=g.srsArray}var w=n.indexOf(y);if(w>-1){var a=g.layers[s].layers[t].bboxArray;if(a==undefined){a=g.bboxArray}var m=a[w];x.push(m)}else{var b=new OpenLayers.Projection(n[0]);var e=new OpenLayers.Projection(y);var d=g.layers[s].layers[t].bboxArray;if(d==undefined){d=g.bboxArray}var m=d[0];var p=m.transform(b,e);x.push(m)}}var c=getMaxExtentEnvolved(x);f.push(c)}}else{var n=g.layers[s].srsArray;if(n==undefined){n=g.srsArray}var w=n.indexOf(y);if(w>-1){var a=g.layers[s].bboxArray;if(a==undefined){a=g.bboxArray}var m=a[w];f.push(m)}else{var b=new OpenLayers.Projection(n[0]);var e=new OpenLayers.Projection(y);var d=g.layers[s].bboxArray;if(d==undefined){d=g.bboxArray}var m=d[0];var p=m.transform(b,e);f.push(p)}}}var j=getMaxExtentEnvolved(f);return j}function sortNumber(d,c){return d-c}function getMaxExtentEnvolved(j){var b=new Array();var g=new Array();var n=new Array();var f=new Array();for(var h=0;h<j.length;h++){b.push(j[h].left);g.push(j[h].right);n.push(j[h].top);f.push(j[h].bottom)}var p=b.sort(sortNumber);var o=f.sort(sortNumber);var l=g.sort(sortNumber);var e=n.sort(sortNumber);var m=p[0];var d=o[0];var c=l[g.length-1];var k=e[n.length-1];var a=new OpenLayers.Bounds(m,d,c,k);return a}function setZindex(){$("#searchResult2").parent().css("z-index","2100")}function clearUnsavedOperation(){OpenLayers.Function.bind(Mapea.global.wfsLayer.refresh,Mapea.global.wfsLayer)()}function redirectToApkBuilder(){var j="android/buildapk.html?url=";var e=/(\/\w*mapea\w*\/)(.*)$/i;var d=/(.*)(&action=buildapk)(.*)/i;var c=/(.*)(action=buildapk)(.*)/i;var h=window.location.href;var b;if(d.test(h)){b=d}else{if(c.test(h)){b=c}}var g=h.replace(b,"$1$3");var f=h.replace(e,"$1");var a=f+j+g;window.location.href=a}(function(i,wa,p){i.fn.dataTableSettings=[];var D=i.fn.dataTableSettings;i.fn.dataTableExt={};var o=i.fn.dataTableExt;o.sVersion="1.8.1";o.sErrMode="alert";o.iApiIndex=0;o.oApi={};o.afnFiltering=[];o.aoFeatures=[];o.ofnSearch={};o.afnSortData=[];o.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};o.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};o.oPagination={two_button:{fnInit:function(g,l,r){var s,w,y;if(g.bJUI){s=p.createElement("a");w=p.createElement("a");y=p.createElement("span");y.className=g.oClasses.sPageJUINext;w.appendChild(y);y=p.createElement("span");y.className=g.oClasses.sPageJUIPrev;s.appendChild(y)}else{s=p.createElement("div");w=p.createElement("div")}s.className=g.oClasses.sPagePrevDisabled;w.className=g.oClasses.sPageNextDisabled;s.title=g.oLanguage.oPaginate.sPrevious;w.title=g.oLanguage.oPaginate.sNext;l.appendChild(s);l.appendChild(w);i(s).bind("click.DT",function(){g.oApi._fnPageChange(g,"previous")&&r(g)});i(w).bind("click.DT",function(){g.oApi._fnPageChange(g,"next")&&r(g)});i(s).bind("selectstart.DT",function(){return false});i(w).bind("selectstart.DT",function(){return false});if(g.sTableId!==""&&typeof g.aanFeatures.p=="undefined"){l.setAttribute("id",g.sTableId+"_paginate");s.setAttribute("id",g.sTableId+"_previous");w.setAttribute("id",g.sTableId+"_next")}},fnUpdate:function(g){if(g.aanFeatures.p){for(var l=g.aanFeatures.p,r=0,s=l.length;r<s;r++){if(l[r].childNodes.length!==0){l[r].childNodes[0].className=g._iDisplayStart===0?g.oClasses.sPagePrevDisabled:g.oClasses.sPagePrevEnabled;l[r].childNodes[1].className=g.fnDisplayEnd()==g.fnRecordsDisplay()?g.oClasses.sPageNextDisabled:g.oClasses.sPageNextEnabled}}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(g,l,r){var s=p.createElement("span"),w=p.createElement("span"),y=p.createElement("span"),G=p.createElement("span"),x=p.createElement("span");s.innerHTML=g.oLanguage.oPaginate.sFirst;w.innerHTML=g.oLanguage.oPaginate.sPrevious;G.innerHTML=g.oLanguage.oPaginate.sNext;x.innerHTML=g.oLanguage.oPaginate.sLast;var v=g.oClasses;s.className=v.sPageButton+" "+v.sPageFirst;w.className=v.sPageButton+" "+v.sPagePrevious;G.className=v.sPageButton+" "+v.sPageNext;x.className=v.sPageButton+" "+v.sPageLast;l.appendChild(s);l.appendChild(w);l.appendChild(y);l.appendChild(G);l.appendChild(x);i(s).bind("click.DT",function(){g.oApi._fnPageChange(g,"first")&&r(g)});i(w).bind("click.DT",function(){g.oApi._fnPageChange(g,"previous")&&r(g)});i(G).bind("click.DT",function(){g.oApi._fnPageChange(g,"next")&&r(g)});i(x).bind("click.DT",function(){g.oApi._fnPageChange(g,"last")&&r(g)});i("span",l).bind("mousedown.DT",function(){return false}).bind("selectstart.DT",function(){return false});if(g.sTableId!==""&&typeof g.aanFeatures.p=="undefined"){l.setAttribute("id",g.sTableId+"_paginate");s.setAttribute("id",g.sTableId+"_first");w.setAttribute("id",g.sTableId+"_previous");G.setAttribute("id",g.sTableId+"_next");x.setAttribute("id",g.sTableId+"_last")}},fnUpdate:function(g,l){if(g.aanFeatures.p){var r=o.oPagination.iFullNumbersShowPages,s=Math.floor(r/2),w=Math.ceil(g.fnRecordsDisplay()/g._iDisplayLength),y=Math.ceil(g._iDisplayStart/g._iDisplayLength)+1,G="",x,v=g.oClasses;if(w<r){s=1;x=w}else{if(y<=s){s=1;x=r}else{if(y>=w-s){s=w-r+1;x=w}else{s=y-Math.ceil(r/2)+1;x=s+r-1}}}for(r=s;r<=x;r++){G+=y!=r?'<span class="'+v.sPageButton+'">'+r+"</span>":'<span class="'+v.sPageButtonActive+'">'+r+"</span>"}x=g.aanFeatures.p;var z,Y=function(L){g._iDisplayStart=(this.innerHTML*1-1)*g._iDisplayLength;l(g);L.preventDefault()},V=function(){return false};r=0;for(s=x.length;r<s;r++){if(x[r].childNodes.length!==0){z=i("span:eq(2)",x[r]);z.html(G);i("span",z).bind("click.DT",Y).bind("mousedown.DT",V).bind("selectstart.DT",V);z=x[r].getElementsByTagName("span");z=[z[0],z[1],z[z.length-2],z[z.length-1]];i(z).removeClass(v.sPageButton+" "+v.sPageButtonActive+" "+v.sPageButtonStaticDisabled);if(y==1){z[0].className+=" "+v.sPageButtonStaticDisabled;z[1].className+=" "+v.sPageButtonStaticDisabled}else{z[0].className+=" "+v.sPageButton;z[1].className+=" "+v.sPageButton}if(w===0||y==w||g._iDisplayLength==-1){z[2].className+=" "+v.sPageButtonStaticDisabled;z[3].className+=" "+v.sPageButtonStaticDisabled}else{z[2].className+=" "+v.sPageButton;z[3].className+=" "+v.sPageButton}}}}}}};o.oSort={"string-asc":function(g,l){if(typeof g!="string"){g=""}if(typeof l!="string"){l=""}g=g.toLowerCase();l=l.toLowerCase();return g<l?-1:g>l?1:0},"string-desc":function(g,l){if(typeof g!="string"){g=""}if(typeof l!="string"){l=""}g=g.toLowerCase();l=l.toLowerCase();return g<l?1:g>l?-1:0},"html-asc":function(g,l){g=g.replace(/<.*?>/g,"").toLowerCase();l=l.replace(/<.*?>/g,"").toLowerCase();return g<l?-1:g>l?1:0},"html-desc":function(g,l){g=g.replace(/<.*?>/g,"").toLowerCase();l=l.replace(/<.*?>/g,"").toLowerCase();return g<l?1:g>l?-1:0},"date-asc":function(g,l){g=Date.parse(g);l=Date.parse(l);if(isNaN(g)||g===""){g=Date.parse("01/01/1970 00:00:00")}if(isNaN(l)||l===""){l=Date.parse("01/01/1970 00:00:00")}return g-l},"date-desc":function(g,l){g=Date.parse(g);l=Date.parse(l);if(isNaN(g)||g===""){g=Date.parse("01/01/1970 00:00:00")}if(isNaN(l)||l===""){l=Date.parse("01/01/1970 00:00:00")}return l-g},"numeric-asc":function(g,l){return(g=="-"||g===""?0:g*1)-(l=="-"||l===""?0:l*1)},"numeric-desc":function(g,l){return(l=="-"||l===""?0:l*1)-(g=="-"||g===""?0:g*1)}};o.aTypes=[function(g){if(typeof g=="number"){return"numeric"}else{if(typeof g!="string"){return null}}var l,r=false;l=g.charAt(0);if("0123456789-".indexOf(l)==-1){return null}for(var s=1;s<g.length;s++){l=g.charAt(s);if("0123456789.".indexOf(l)==-1){return null}if(l=="."){if(r){return null}r=true}}return"numeric"},function(g){var l=Date.parse(g);if(l!==null&&!isNaN(l)||typeof g=="string"&&g.length===0){return"date"}return null},function(g){if(typeof g=="string"&&g.indexOf("<")!=-1&&g.indexOf(">")!=-1){return"html"}return null}];o.fnVersionCheck=function(g){var l=function(x,v){for(;x.length<v;){x+="0"}return x},r=o.sVersion.split(".");g=g.split(".");for(var s="",w="",y=0,G=g.length;y<G;y++){s+=l(r[y],3);w+=l(g[y],3)}return parseInt(s,10)>=parseInt(w,10)};o._oExternConfig={iNextUnique:0};i.fn.dataTable=function(g){function l(){this.fnRecordsTotal=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length};this.fnRecordsDisplay=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length};this.fnDisplayEnd=function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===false||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd};this.sInstance=this.oInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false,bDeferRender:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0,bAutoCss:true};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No hay resultados",sEmptyTable:"No hay datos disponibles",sLoadingRecords:"Loading...",sInfo:"Mostrando _START_ a _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando 0 a 0 de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Filtrar resultados:",sUrl:"",oPaginate:{sFirst:"Primera",sPrevious:"Anterior",sNext:"Siguiente",sLast:"&Uacute;ltima"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.aoHeader=[];this.aoFooter=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnFooterCallback=this.fnHeaderCallback=this.fnRowCallback=null;this.aoDrawCallback=[];this.fnInitComplete=this.fnPreDrawCallback=null;this.sTableId="";this.nTableWrapper=this.nTBody=this.nTFoot=this.nTHead=this.nTable=null;this.bInitialised=this.bDeferLoading=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=7200;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.sAjaxSource=this.oLoadedState=null;this.sAjaxDataProp="aaData";this.bAjaxDataGet=true;this.jqXHR=null;this.fnServerData=function(a,b,c,d){d.jqXHR=i.ajax({url:a,data:b,success:c,dataType:"json",cache:false,error:function(f,e){e=="parsererror"&&alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})};this.fnFormatNumber=function(a){if(a<1000){return a}else{var b=a+"";a=b.split("");var c="";b=b.length;for(var d=0;d<b;d++){if(d%3===0&&d!==0){c=","+c}c=a[b-d-1]+c}}return c};this.aLengthMenu=[10,25,50,100];this.bDrawing=this.iDraw=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsDisplay=this._iRecordsTotal=0;this.bJUI=false;this.oClasses=o.oStdClasses;this.bSortCellsTop=this.bSorted=this.bFiltered=false;this.oInit=null}function r(a){return function(){var b=[A(this[o.iApiIndex])].concat(Array.prototype.slice.call(arguments));return o.oApi[a].apply(this,b)}}function s(a){var b,c,d=a.iInitDisplayStart;if(a.bInitialised===false){setTimeout(function(){s(a)},200)}else{xa(a);V(a);L(a,a.aoHeader);a.nTFoot&&L(a,a.aoFooter);K(a,true);a.oFeatures.bAutoWidth&&ea(a);b=0;for(c=a.aoColumns.length;b<c;b++){if(a.aoColumns[b].sWidth!==null){a.aoColumns[b].nTh.style.width=u(a.aoColumns[b].sWidth)}}if(a.oFeatures.bSort){R(a)}else{if(a.oFeatures.bFilter){M(a,a.oPreviousSearch)}else{a.aiDisplay=a.aiDisplayMaster.slice();E(a);C(a)}}if(a.sAjaxSource!==null&&!a.oFeatures.bServerSide){a.fnServerData.call(a.oInstance,a.sAjaxSource,[],function(f){var e=f;if(a.sAjaxDataProp!==""){e=Z(a.sAjaxDataProp)(f)}for(b=0;b<e.length;b++){v(a,e[b])}a.iInitDisplayStart=d;if(a.oFeatures.bSort){R(a)}else{a.aiDisplay=a.aiDisplayMaster.slice();E(a);C(a)}K(a,false);w(a,f)},a)}else{if(!a.oFeatures.bServerSide){K(a,false);w(a)}}}}function w(a,b){a._bInitComplete=true;if(typeof a.fnInitComplete=="function"){typeof b!="undefined"?a.fnInitComplete.call(a.oInstance,a,b):a.fnInitComplete.call(a.oInstance,a)}}function y(a,b,c){n(a.oLanguage,b,"sProcessing");n(a.oLanguage,b,"sLengthMenu");n(a.oLanguage,b,"sEmptyTable");n(a.oLanguage,b,"sLoadingRecords");n(a.oLanguage,b,"sZeroRecords");n(a.oLanguage,b,"sInfo");n(a.oLanguage,b,"sInfoEmpty");n(a.oLanguage,b,"sInfoFiltered");n(a.oLanguage,b,"sInfoPostFix");n(a.oLanguage,b,"sSearch");if(typeof b.oPaginate!="undefined"){n(a.oLanguage.oPaginate,b.oPaginate,"sFirst");n(a.oLanguage.oPaginate,b.oPaginate,"sPrevious");n(a.oLanguage.oPaginate,b.oPaginate,"sNext");n(a.oLanguage.oPaginate,b.oPaginate,"sLast")}typeof b.sEmptyTable=="undefined"&&typeof b.sZeroRecords!="undefined"&&n(a.oLanguage,b,"sZeroRecords","sEmptyTable");typeof b.sLoadingRecords=="undefined"&&typeof b.sZeroRecords!="undefined"&&n(a.oLanguage,b,"sZeroRecords","sLoadingRecords");c&&s(a)}function G(a,b){var c=a.aoColumns.length;b={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,sTitle:b?b.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:c,mDataProp:c,fnGetData:null,fnSetData:null,sSortDataType:"std",sDefaultContent:null,sContentPadding:"",nTh:b?b:p.createElement("th"),nTf:null};a.aoColumns.push(b);if(typeof a.aoPreSearchCols[c]=="undefined"||a.aoPreSearchCols[c]===null){a.aoPreSearchCols[c]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof a.aoPreSearchCols[c].bRegex=="undefined"){a.aoPreSearchCols[c].bRegex=true}if(typeof a.aoPreSearchCols[c].bSmart=="undefined"){a.aoPreSearchCols[c].bSmart=true}}x(a,c,null)}function x(a,b,c){b=a.aoColumns[b];if(typeof c!="undefined"&&c!==null){if(typeof c.sType!="undefined"){b.sType=c.sType;b._bAutoType=false}n(b,c,"bVisible");n(b,c,"bSearchable");n(b,c,"bSortable");n(b,c,"sTitle");n(b,c,"sName");n(b,c,"sWidth");n(b,c,"sWidth","sWidthOrig");n(b,c,"sClass");n(b,c,"fnRender");n(b,c,"bUseRendered");n(b,c,"iDataSort");n(b,c,"mDataProp");n(b,c,"asSorting");n(b,c,"sSortDataType");n(b,c,"sDefaultContent");n(b,c,"sContentPadding")}b.fnGetData=Z(b.mDataProp);b.fnSetData=ya(b.mDataProp);if(!a.oFeatures.bSort){b.bSortable=false}if(!b.bSortable||i.inArray("asc",b.asSorting)==-1&&i.inArray("desc",b.asSorting)==-1){b.sSortingClass=a.oClasses.sSortableNone;b.sSortingClassJUI=""}else{if(b.bSortable||i.inArray("asc",b.asSorting)==-1&&i.inArray("desc",b.asSorting)==-1){b.sSortingClass=a.oClasses.sSortable;b.sSortingClassJUI=a.oClasses.sSortJUI}else{if(i.inArray("asc",b.asSorting)!=-1&&i.inArray("desc",b.asSorting)==-1){b.sSortingClass=a.oClasses.sSortableAsc;b.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed}else{if(i.inArray("asc",b.asSorting)==-1&&i.inArray("desc",b.asSorting)!=-1){b.sSortingClass=a.oClasses.sSortableDesc;b.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed}}}}}function v(a,b){var c;c=typeof b.length=="number"?b.slice():i.extend(true,{},b);b=a.aoData.length;var d={nTr:null,_iId:a.iNextId++,_aData:c,_anHidden:[],_sRowStripe:""};a.aoData.push(d);for(var f,e=0,h=a.aoColumns.length;e<h;e++){c=a.aoColumns[e];typeof c.fnRender=="function"&&c.bUseRendered&&c.mDataProp!==null&&N(a,b,e,c.fnRender({iDataRow:b,iDataColumn:e,aData:d._aData,oSettings:a}));if(c._bAutoType&&c.sType!="string"){f=H(a,b,e,"type");if(f!==null&&f!==""){f=fa(f);if(c.sType===null){c.sType=f}else{if(c.sType!=f){c.sType="string"}}}}}a.aiDisplayMaster.push(b);a.oFeatures.bDeferRender||z(a,b);return b}function z(a,b){var c=a.aoData[b],d;if(c.nTr===null){c.nTr=p.createElement("tr");typeof c._aData.DT_RowId!="undefined"&&c.nTr.setAttribute("id",c._aData.DT_RowId);typeof c._aData.DT_RowClass!="undefined"&&i(c.nTr).addClass(c._aData.DT_RowClass);for(var f=0,e=a.aoColumns.length;f<e;f++){var h=a.aoColumns[f];d=p.createElement("td");d.innerHTML=typeof h.fnRender=="function"&&(!h.bUseRendered||h.mDataProp===null)?h.fnRender({iDataRow:b,iDataColumn:f,aData:c._aData,oSettings:a}):H(a,b,f,"display");if(h.sClass!==null){d.className=h.sClass}if(h.bVisible){c.nTr.appendChild(d);c._anHidden[f]=null}else{c._anHidden[f]=d}}}}function Y(a){var b,c,d,f,e,h,j,k,m;if(a.bDeferLoading||a.sAjaxSource===null){j=a.nTBody.childNodes;b=0;for(c=j.length;b<c;b++){if(j[b].nodeName.toUpperCase()=="TR"){k=a.aoData.length;a.aoData.push({nTr:j[b],_iId:a.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});a.aiDisplayMaster.push(k);h=j[b].childNodes;d=e=0;for(f=h.length;d<f;d++){m=h[d].nodeName.toUpperCase();if(m=="TD"||m=="TH"){N(a,k,e,i.trim(h[d].innerHTML));e++}}}}}j=$(a);h=[];b=0;for(c=j.length;b<c;b++){d=0;for(f=j[b].childNodes.length;d<f;d++){e=j[b].childNodes[d];m=e.nodeName.toUpperCase();if(m=="TD"||m=="TH"){h.push(e)}}}h.length!=j.length*a.aoColumns.length&&J(a,1,"Unexpected number of TD elements. Expected "+j.length*a.aoColumns.length+" and got "+h.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.");d=0;for(f=a.aoColumns.length;d<f;d++){if(a.aoColumns[d].sTitle===null){a.aoColumns[d].sTitle=a.aoColumns[d].nTh.innerHTML}j=a.aoColumns[d]._bAutoType;m=typeof a.aoColumns[d].fnRender=="function";e=a.aoColumns[d].sClass!==null;k=a.aoColumns[d].bVisible;var t,q;if(j||m||e||!k){b=0;for(c=a.aoData.length;b<c;b++){t=h[b*f+d];if(j&&a.aoColumns[d].sType!="string"){q=H(a,b,d,"type");if(q!==""){q=fa(q);if(a.aoColumns[d].sType===null){a.aoColumns[d].sType=q}else{if(a.aoColumns[d].sType!=q){a.aoColumns[d].sType="string"}}}}if(m){q=a.aoColumns[d].fnRender({iDataRow:b,iDataColumn:d,aData:a.aoData[b]._aData,oSettings:a});t.innerHTML=q;a.aoColumns[d].bUseRendered&&N(a,b,d,q)}if(e){t.className+=" "+a.aoColumns[d].sClass}if(k){a.aoData[b]._anHidden[d]=null}else{a.aoData[b]._anHidden[d]=t;t.parentNode.removeChild(t)}}}}}function V(a){var b,c,d;a.nTHead.getElementsByTagName("tr");if(a.nTHead.getElementsByTagName("th").length!==0){b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh;a.aoColumns[b].sClass!==null&&i(c).addClass(a.aoColumns[b].sClass);if(a.aoColumns[b].sTitle!=c.innerHTML){c.innerHTML=a.aoColumns[b].sTitle}}}else{var f=p.createElement("tr");b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh;c.innerHTML=a.aoColumns[b].sTitle;a.aoColumns[b].sClass!==null&&i(c).addClass(a.aoColumns[b].sClass);f.appendChild(c)}i(a.nTHead).html("")[0].appendChild(f);W(a.aoHeader,a.nTHead)}if(a.bJUI){b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh;f=p.createElement("div");f.className=a.oClasses.sSortJUIWrapper;i(c).contents().appendTo(f);var e=p.createElement("span");e.className=a.oClasses.sSortIcon;f.appendChild(e);c.appendChild(f)}}d=function(){this.onselectstart=function(){return false};return false};if(a.oFeatures.bSort){for(b=0;b<a.aoColumns.length;b++){if(a.aoColumns[b].bSortable!==false){ga(a,a.aoColumns[b].nTh,b);i(a.aoColumns[b].nTh).bind("mousedown.DT",d)}else{i(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone)}}}a.oClasses.sFooterTH!==""&&i(">tr>th",a.nTFoot).addClass(a.oClasses.sFooterTH);if(a.nTFoot!==null){c=S(a,null,a.aoFooter);b=0;for(d=a.aoColumns.length;b<d;b++){if(typeof c[b]!="undefined"){a.aoColumns[b].nTf=c[b]}}}}function L(a,b,c){var d,f,e,h=[],j=[],k=a.aoColumns.length;if(typeof c=="undefined"){c=false}d=0;for(f=b.length;d<f;d++){h[d]=b[d].slice();h[d].nTr=b[d].nTr;for(e=k-1;e>=0;e--){!a.aoColumns[e].bVisible&&!c&&h[d].splice(e,1)}j.push([])}d=0;for(f=h.length;d<f;d++){if(h[d].nTr){a=0;for(e=h[d].nTr.childNodes.length;a<e;a++){h[d].nTr.removeChild(h[d].nTr.childNodes[0])}}e=0;for(b=h[d].length;e<b;e++){k=c=1;if(typeof j[d][e]=="undefined"){h[d].nTr.appendChild(h[d][e].cell);for(j[d][e]=1;typeof h[d+c]!="undefined"&&h[d][e].cell==h[d+c][e].cell;){j[d+c][e]=1;c++}for(;typeof h[d][e+k]!="undefined"&&h[d][e].cell==h[d][e+k].cell;){for(a=0;a<c;a++){j[d+a][e+k]=1}k++}h[d][e].cell.setAttribute("rowspan",c);h[d][e].cell.setAttribute("colspan",k)}}}}function C(a){var b,c,d=[],f=0,e=false;b=a.asStripClasses.length;c=a.aoOpenRows.length;if(!(a.fnPreDrawCallback!==null&&a.fnPreDrawCallback.call(a.oInstance,a)===false)){a.bDrawing=true;if(typeof a.iInitDisplayStart!="undefined"&&a.iInitDisplayStart!=-1){a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart;a.iInitDisplayStart=-1;E(a)}if(a.bDeferLoading){a.bDeferLoading=false;a.iDraw++}else{if(a.oFeatures.bServerSide){if(!a.bDestroying&&!za(a)){return}}else{a.iDraw++}}if(a.aiDisplay.length!==0){var h=a._iDisplayStart,j=a._iDisplayEnd;if(a.oFeatures.bServerSide){h=0;j=a.aoData.length}for(h=h;h<j;h++){var k=a.aoData[a.aiDisplay[h]];k.nTr===null&&z(a,a.aiDisplay[h]);var m=k.nTr;if(b!==0){var t=a.asStripClasses[f%b];if(k._sRowStripe!=t){i(m).removeClass(k._sRowStripe).addClass(t);k._sRowStripe=t}}if(typeof a.fnRowCallback=="function"){m=a.fnRowCallback.call(a.oInstance,m,a.aoData[a.aiDisplay[h]]._aData,f,h);if(!m&&!e){J(a,0,"A node was not returned by fnRowCallback");e=true}}d.push(m);f++;if(c!==0){for(k=0;k<c;k++){m==a.aoOpenRows[k].nParent&&d.push(a.aoOpenRows[k].nTr)}}}}else{d[0]=p.createElement("tr");if(typeof a.asStripClasses[0]!="undefined"){d[0].className=a.asStripClasses[0]}e=a.oLanguage.sZeroRecords.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()));if(a.iDraw==1&&a.sAjaxSource!==null&&!a.oFeatures.bServerSide){e=a.oLanguage.sLoadingRecords}else{if(typeof a.oLanguage.sEmptyTable!="undefined"&&a.fnRecordsTotal()===0){e=a.oLanguage.sEmptyTable}}b=p.createElement("td");b.setAttribute("valign","top");b.colSpan=X(a);b.className=a.oClasses.sRowEmpty;b.innerHTML=e;d[f].appendChild(b)}typeof a.fnHeaderCallback=="function"&&a.fnHeaderCallback.call(a.oInstance,i(">tr",a.nTHead)[0],aa(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay);typeof a.fnFooterCallback=="function"&&a.fnFooterCallback.call(a.oInstance,i(">tr",a.nTFoot)[0],aa(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay);f=p.createDocumentFragment();b=p.createDocumentFragment();if(a.nTBody){e=a.nTBody.parentNode;b.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){c=a.nTBody.childNodes;for(b=c.length-1;b>=0;b--){c[b].parentNode.removeChild(c[b])}}b=0;for(c=d.length;b<c;b++){f.appendChild(d[b])}a.nTBody.appendChild(f);e!==null&&e.appendChild(a.nTBody)}for(b=a.aoDrawCallback.length-1;b>=0;b--){a.aoDrawCallback[b].fn.call(a.oInstance,a)}a.bSorted=false;a.bFiltered=false;a.bDrawing=false;if(a.oFeatures.bServerSide){K(a,false);typeof a._bInitComplete=="undefined"&&w(a)}}}function ba(a){if(a.oFeatures.bSort){R(a,a.oPreviousSearch)}else{if(a.oFeatures.bFilter){M(a,a.oPreviousSearch)}else{E(a);C(a)}}}function za(a){if(a.bAjaxDataGet){K(a,true);var b=a.aoColumns.length,c=[],d,f;a.iDraw++;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:ha(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:a.oFeatures.bPaginate!==false?a._iDisplayLength:-1});for(f=0;f<b;f++){d=a.aoColumns[f].mDataProp;c.push({name:"mDataProp_"+f,value:typeof d=="function"?"function":d})}if(a.oFeatures.bFilter!==false){c.push({name:"sSearch",value:a.oPreviousSearch.sSearch});c.push({name:"bRegex",value:a.oPreviousSearch.bRegex});for(f=0;f<b;f++){c.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch});c.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex});c.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable})}}if(a.oFeatures.bSort!==false){d=a.aaSortingFixed!==null?a.aaSortingFixed.length:0;var e=a.aaSorting.length;c.push({name:"iSortingCols",value:d+e});for(f=0;f<d;f++){c.push({name:"iSortCol_"+f,value:a.aaSortingFixed[f][0]});c.push({name:"sSortDir_"+f,value:a.aaSortingFixed[f][1]})}for(f=0;f<e;f++){c.push({name:"iSortCol_"+(f+d),value:a.aaSorting[f][0]});c.push({name:"sSortDir_"+(f+d),value:a.aaSorting[f][1]})}for(f=0;f<b;f++){c.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}}a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(h){Aa(a,h)},a);return false}else{return true}}function Aa(a,b){if(typeof b.sEcho!="undefined"){if(b.sEcho*1<a.iDraw){return}else{a.iDraw=b.sEcho*1}}if(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered)){ia(a)}a._iRecordsTotal=b.iTotalRecords;a._iRecordsDisplay=b.iTotalDisplayRecords;var c=ha(a);if(c=typeof b.sColumns!="undefined"&&c!==""&&b.sColumns!=c){var d=Ba(a,b.sColumns)}b=Z(a.sAjaxDataProp)(b);for(var f=0,e=b.length;f<e;f++){if(c){for(var h=[],j=0,k=a.aoColumns.length;j<k;j++){h.push(b[f][d[j]])}v(a,h)}else{v(a,b[f])}}a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=false;C(a);a.bAjaxDataGet=true;K(a,false)}function xa(a){var b=p.createElement("div");a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=p.createElement("div");a.nTableWrapper.className=a.oClasses.sWrapper;a.sTableId!==""&&a.nTableWrapper.setAttribute("id",a.sTableId+"_wrapper");a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,d=a.sDom.split(""),f,e,h,j,k,m,t,q=0;q<d.length;q++){e=0;h=d[q];if(h=="<"){j=p.createElement("div");k=d[q+1];if(k=="'"||k=='"'){m="";for(t=2;d[q+t]!=k;){m+=d[q+t];t++}if(m=="H"){m="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(m=="F"){m="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(m.indexOf(".")!=-1){k=m.split(".");j.setAttribute("id",k[0].substr(1,k[0].length-1));j.className=k[1]}else{if(m.charAt(0)=="#"){j.setAttribute("id",m.substr(1,m.length-1))}else{j.className=m}}q+=t}c.appendChild(j);c=j}else{if(h==">"){c=c.parentNode}else{if(h=="l"&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange){f=Ca(a);e=1}else{if(h=="f"&&a.oFeatures.bFilter){f=Da(a);e=1}else{if(h=="r"&&a.oFeatures.bProcessing){f=Ea(a);e=1}else{if(h=="t"){f=Fa(a);e=1}else{if(h=="i"&&a.oFeatures.bInfo){f=Ga(a);e=1}else{if(h=="p"&&a.oFeatures.bPaginate){f=Ha(a);e=1}else{if(o.aoFeatures.length!==0){j=o.aoFeatures;t=0;for(k=j.length;t<k;t++){if(h==j[t].cFeature){if(f=j[t].fnInit(a)){e=1}break}}}}}}}}}}}if(e==1&&f!==null){if(typeof a.aanFeatures[h]!="object"){a.aanFeatures[h]=[]}a.aanFeatures[h].push(f);c.appendChild(f)}}b.parentNode.replaceChild(a.nTableWrapper,b)}function Fa(a){if(a.oScroll.sX===""&&a.oScroll.sY===""){return a.nTable}var b=p.createElement("div"),c=p.createElement("div"),d=p.createElement("div"),f=p.createElement("div"),e=p.createElement("div"),h=p.createElement("div"),j=a.nTable.cloneNode(false),k=a.nTable.cloneNode(false),m=a.nTable.getElementsByTagName("thead")[0],t=a.nTable.getElementsByTagName("tfoot").length===0?null:a.nTable.getElementsByTagName("tfoot")[0],q=typeof g.bJQueryUI!="undefined"&&g.bJQueryUI?o.oJUIClasses:o.oStdClasses;c.appendChild(d);e.appendChild(h);f.appendChild(a.nTable);b.appendChild(c);b.appendChild(f);d.appendChild(j);j.appendChild(m);if(t!==null){b.appendChild(e);h.appendChild(k);k.appendChild(t)}b.className=q.sScrollWrapper;c.className=q.sScrollHead;d.className=q.sScrollHeadInner;f.className=q.sScrollBody;e.className=q.sScrollFoot;h.className=q.sScrollFootInner;if(a.oScroll.bAutoCss){c.style.overflow="hidden";c.style.position="relative";e.style.overflow="hidden";f.style.overflow="auto"}c.style.border="0";c.style.width="100%";e.style.border="0";d.style.width="150%";j.removeAttribute("id");j.style.marginLeft="0";a.nTable.style.marginLeft="0";if(t!==null){k.removeAttribute("id");k.style.marginLeft="0"}d=i(">caption",a.nTable);h=0;for(k=d.length;h<k;h++){j.appendChild(d[h])}if(a.oScroll.sX!==""){c.style.width=u(a.oScroll.sX);f.style.width=u(a.oScroll.sX);if(t!==null){e.style.width=u(a.oScroll.sX)}i(f).scroll(function(){c.scrollLeft=this.scrollLeft;if(t!==null){e.scrollLeft=this.scrollLeft}})}if(a.oScroll.sY!==""){f.style.height=u(a.oScroll.sY)}a.aoDrawCallback.push({fn:Ia,sName:"scrolling"});a.oScroll.bInfinite&&i(f).scroll(function(){if(!a.bDrawing){if(i(this).scrollTop()+i(this).height()>i(a.nTable).height()-a.oScroll.iLoadGap){if(a.fnDisplayEnd()<a.fnRecordsDisplay()){ja(a,"next");E(a);C(a)}}}});a.nScrollHead=c;a.nScrollFoot=e;return b}function Ia(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],d=a.nTable.parentNode,f,e,h,j,k,m,t,q,I=[];h=a.nTable.getElementsByTagName("thead");h.length>0&&a.nTable.removeChild(h[0]);if(a.nTFoot!==null){k=a.nTable.getElementsByTagName("tfoot");k.length>0&&a.nTable.removeChild(k[0])}h=a.nTHead.cloneNode(true);a.nTable.insertBefore(h,a.nTable.childNodes[0]);if(a.nTFoot!==null){k=a.nTFoot.cloneNode(true);a.nTable.insertBefore(k,a.nTable.childNodes[1])}if(a.oScroll.sX===""){d.style.width="100%";b.parentNode.style.width="100%"}var O=S(a,h);f=0;for(e=O.length;f<e;f++){t=Ja(a,f);O[f].style.width=a.aoColumns[t].sWidth}a.nTFoot!==null&&P(function(B){B.style.width=""},k.getElementsByTagName("tr"));f=i(a.nTable).outerWidth();if(a.oScroll.sX===""){a.nTable.style.width="100%";if(i.browser.msie&&i.browser.version<=7){a.nTable.style.width=u(i(a.nTable).outerWidth()-a.oScroll.iBarWidth)}}else{if(a.oScroll.sXInner!==""){a.nTable.style.width=u(a.oScroll.sXInner)}else{if(f==i(d).width()&&i(d).height()<i(a.nTable).height()){a.nTable.style.width=u(f-a.oScroll.iBarWidth);if(i(a.nTable).outerWidth()>f-a.oScroll.iBarWidth){a.nTable.style.width=u(f)}}else{a.nTable.style.width=u(f)}}}f=i(a.nTable).outerWidth();if(a.oScroll.sX===""){d.style.width=u(f+a.oScroll.iBarWidth);b.parentNode.style.width=u(f+a.oScroll.iBarWidth)}e=a.nTHead.getElementsByTagName("tr");h=h.getElementsByTagName("tr");P(function(B,F){m=B.style;m.paddingTop="0";m.paddingBottom="0";m.borderTopWidth="0";m.borderBottomWidth="0";m.height=0;q=i(B).width();F.style.width=u(q);I.push(q)},h,e);i(h).height(0);if(a.nTFoot!==null){j=k.getElementsByTagName("tr");k=a.nTFoot.getElementsByTagName("tr");P(function(B,F){m=B.style;m.paddingTop="0";m.paddingBottom="0";m.borderTopWidth="0";m.borderBottomWidth="0";m.height=0;q=i(B).width();F.style.width=u(q);I.push(q)},j,k);i(j).height(0)}P(function(B){B.innerHTML="";B.style.width=u(I.shift())},h);a.nTFoot!==null&&P(function(B){B.innerHTML="";B.style.width=u(I.shift())},j);if(i(a.nTable).outerWidth()<f){if(a.oScroll.sX===""){J(a,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{a.oScroll.sXInner!==""&&J(a,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}if(a.oScroll.sY===""){if(i.browser.msie&&i.browser.version<=7){d.style.height=u(a.nTable.offsetHeight+a.oScroll.iBarWidth)}}if(a.oScroll.sY!==""&&a.oScroll.bCollapse){d.style.height=u(a.oScroll.sY);j=a.oScroll.sX!==""&&a.nTable.offsetWidth>d.offsetWidth?a.oScroll.iBarWidth:0;if(a.nTable.offsetHeight<d.offsetHeight){d.style.height=u(i(a.nTable).height()+j)}}j=i(a.nTable).outerWidth();c.style.width=u(j);b.style.width=u(j+a.oScroll.iBarWidth);if(a.nTFoot!==null){b=a.nScrollFoot.getElementsByTagName("div")[0];c=b.getElementsByTagName("table")[0];b.style.width=u(a.nTable.offsetWidth+a.oScroll.iBarWidth);c.style.width=u(a.nTable.offsetWidth)}if(a.bSorted||a.bFiltered){d.scrollTop=0}}function ca(a){if(a.oFeatures.bAutoWidth===false){return false}ea(a);for(var b=0,c=a.aoColumns.length;b<c;b++){a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}}function Da(a){var b=a.oLanguage.sSearch;b=b.indexOf("_INPUT_")!==-1?b.replace("_INPUT_",'<input type="text" />'):b===""?'<input type="text" />':b+' <input type="text" />';var c=p.createElement("div");c.className=a.oClasses.sFilter;c.innerHTML="<label>"+b+"</label>";a.sTableId!==""&&typeof a.aanFeatures.f=="undefined"&&c.setAttribute("id",a.sTableId+"_filter");b=i("input",c);b.val(a.oPreviousSearch.sSearch.replace('"',"&quot;"));b.bind("keyup.DT",function(){for(var d=a.aanFeatures.f,f=0,e=d.length;f<e;f++){d[f]!=this.parentNode&&i("input",d[f]).val(this.value)}this.value!=a.oPreviousSearch.sSearch&&M(a,{sSearch:this.value,bRegex:a.oPreviousSearch.bRegex,bSmart:a.oPreviousSearch.bSmart})});b.bind("keypress.DT",function(d){if(d.keyCode==13){return false}});return c}function M(a,b,c){Ka(a,b.sSearch,c,b.bRegex,b.bSmart);for(b=0;b<a.aoPreSearchCols.length;b++){La(a,a.aoPreSearchCols[b].sSearch,b,a.aoPreSearchCols[b].bRegex,a.aoPreSearchCols[b].bSmart)}o.afnFiltering.length!==0&&Ma(a);a.bFiltered=true;a._iDisplayStart=0;E(a);C(a);ka(a,0)}function Ma(a){for(var b=o.afnFiltering,c=0,d=b.length;c<d;c++){for(var f=0,e=0,h=a.aiDisplay.length;e<h;e++){var j=a.aiDisplay[e-f];if(!b[c](a,da(a,j,"filter"),j)){a.aiDisplay.splice(e-f,1);f++}}}}function La(a,b,c,d,f){if(b!==""){var e=0;b=la(b,d,f);for(d=a.aiDisplay.length-1;d>=0;d--){f=ma(H(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType);if(!b.test(f)){a.aiDisplay.splice(d,1);e++}}}}function Ka(a,b,c,d,f){var e=la(b,d,f);if(typeof c=="undefined"||c===null){c=0}if(o.afnFiltering.length!==0){c=1}if(b.length<=0){a.aiDisplay.splice(0,a.aiDisplay.length);a.aiDisplay=a.aiDisplayMaster.slice()}else{if(a.aiDisplay.length==a.aiDisplayMaster.length||a.oPreviousSearch.sSearch.length>b.length||c==1||b.indexOf(a.oPreviousSearch.sSearch)!==0){a.aiDisplay.splice(0,a.aiDisplay.length);ka(a,1);for(c=0;c<a.aiDisplayMaster.length;c++){e.test(a.asDataSearch[c])&&a.aiDisplay.push(a.aiDisplayMaster[c])}}else{var h=0;for(c=0;c<a.asDataSearch.length;c++){if(!e.test(a.asDataSearch[c])){a.aiDisplay.splice(c-h,1);h++}}}}a.oPreviousSearch.sSearch=b;a.oPreviousSearch.bRegex=d;a.oPreviousSearch.bSmart=f}function ka(a,b){a.asDataSearch.splice(0,a.asDataSearch.length);b=typeof b!="undefined"&&b==1?a.aiDisplayMaster:a.aiDisplay;for(var c=0,d=b.length;c<d;c++){a.asDataSearch[c]=na(a,da(a,b[c],"filter"))}}function na(a,b){var c="";if(typeof a.__nTmpFilter=="undefined"){a.__nTmpFilter=p.createElement("div")}for(var d=a.__nTmpFilter,f=0,e=a.aoColumns.length;f<e;f++){if(a.aoColumns[f].bSearchable){c+=ma(b[f],a.aoColumns[f].sType)+"  "}}if(c.indexOf("&")!==-1){d.innerHTML=c;c=d.textContent?d.textContent:d.innerText;c=c.replace(/\n/g," ").replace(/\r/g,"")}return c}function la(a,b,c){if(c){a=b?a.split(" "):oa(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$";return new RegExp(a,"i")}else{a=b?a:oa(a);return new RegExp(a,"i")}}function ma(a,b){if(typeof o.ofnSearch[b]=="function"){return o.ofnSearch[b](a)}else{if(b=="html"){return a.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof a=="string"){return a.replace(/\n/g," ")}else{if(a===null){return""}}}}return a}function R(a,b){var c,d,f,e,h=[],j=[],k=o.oSort;d=a.aoData;var m=a.aoColumns;if(!a.oFeatures.bServerSide&&(a.aaSorting.length!==0||a.aaSortingFixed!==null)){h=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(c=0;c<h.length;c++){var t=h[c][0];f=pa(a,t);e=a.aoColumns[t].sSortDataType;if(typeof o.afnSortData[e]!="undefined"){var q=o.afnSortData[e](a,t,f);f=0;for(e=d.length;f<e;f++){N(a,f,t,q[f])}}}c=0;for(d=a.aiDisplayMaster.length;c<d;c++){j[a.aiDisplayMaster[c]]=c}var I=h.length;a.aiDisplayMaster.sort(function(O,B){var F,qa;for(c=0;c<I;c++){F=m[h[c][0]].iDataSort;qa=m[F].sType;F=k[(qa?qa:"string")+"-"+h[c][1]](H(a,O,F,"sort"),H(a,B,F,"sort"));if(F!==0){return F}}return k["numeric-asc"](j[O],j[B])})}if((typeof b=="undefined"||b)&&!a.oFeatures.bDeferRender){T(a)}a.bSorted=true;if(a.oFeatures.bFilter){M(a,a.oPreviousSearch,1)}else{a.aiDisplay=a.aiDisplayMaster.slice();a._iDisplayStart=0;E(a);C(a)}}function ga(a,b,c,d){i(b).bind("click.DT",function(f){if(a.aoColumns[c].bSortable!==false){var e=function(){var h,j;if(f.shiftKey){for(var k=false,m=0;m<a.aaSorting.length;m++){if(a.aaSorting[m][0]==c){k=true;h=a.aaSorting[m][0];j=a.aaSorting[m][2]+1;if(typeof a.aoColumns[h].asSorting[j]=="undefined"){a.aaSorting.splice(m,1)}else{a.aaSorting[m][1]=a.aoColumns[h].asSorting[j];a.aaSorting[m][2]=j}break}}k===false&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else{if(a.aaSorting.length==1&&a.aaSorting[0][0]==c){h=a.aaSorting[0][0];j=a.aaSorting[0][2]+1;if(typeof a.aoColumns[h].asSorting[j]=="undefined"){j=0}a.aaSorting[0][1]=a.aoColumns[h].asSorting[j];a.aaSorting[0][2]=j}else{a.aaSorting.splice(0,a.aaSorting.length);a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}}R(a)};if(a.oFeatures.bProcessing){K(a,true);setTimeout(function(){e();a.oFeatures.bServerSide||K(a,false)},0)}else{e()}typeof d=="function"&&d(a)}})}function T(a){var b,c,d,f,e,h=a.aoColumns.length,j=a.oClasses;for(b=0;b<h;b++){a.aoColumns[b].bSortable&&i(a.aoColumns[b].nTh).removeClass(j.sSortAsc+" "+j.sSortDesc+" "+a.aoColumns[b].sSortingClass)}f=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++){if(a.aoColumns[b].bSortable){e=a.aoColumns[b].sSortingClass;d=-1;for(c=0;c<f.length;c++){if(f[c][0]==b){e=f[c][1]=="asc"?j.sSortAsc:j.sSortDesc;d=c;break}}i(a.aoColumns[b].nTh).addClass(e);if(a.bJUI){c=i("span",a.aoColumns[b].nTh);c.removeClass(j.sSortJUIAsc+" "+j.sSortJUIDesc+" "+j.sSortJUI+" "+j.sSortJUIAscAllowed+" "+j.sSortJUIDescAllowed);c.addClass(d==-1?a.aoColumns[b].sSortingClassJUI:f[d][1]=="asc"?j.sSortJUIAsc:j.sSortJUIDesc)}}else{i(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass)}}e=j.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){d=Q(a);if(a.oFeatures.bDeferRender){i(d).removeClass(e+"1 "+e+"2 "+e+"3")}else{if(d.length>=h){for(b=0;b<h;b++){if(d[b].className.indexOf(e+"1")!=-1){c=0;for(a=d.length/h;c<a;c++){d[h*c+b].className=i.trim(d[h*c+b].className.replace(e+"1",""))}}else{if(d[b].className.indexOf(e+"2")!=-1){c=0;for(a=d.length/h;c<a;c++){d[h*c+b].className=i.trim(d[h*c+b].className.replace(e+"2",""))}}else{if(d[b].className.indexOf(e+"3")!=-1){c=0;for(a=d.length/h;c<a;c++){d[h*c+b].className=i.trim(d[h*c+b].className.replace(" "+e+"3",""))}}}}}}}j=1;var k;for(b=0;b<f.length;b++){k=parseInt(f[b][0],10);c=0;for(a=d.length/h;c<a;c++){d[h*c+k].className+=" "+e+j}j<3&&j++}}}function Ha(a){if(a.oScroll.bInfinite){return null}var b=p.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;o.oPagination[a.sPaginationType].fnInit(a,b,function(c){E(c);C(c)});typeof a.aanFeatures.p=="undefined"&&a.aoDrawCallback.push({fn:function(c){o.oPagination[c.sPaginationType].fnUpdate(c,function(d){E(d);C(d)})},sName:"pagination"});return b}function ja(a,b){var c=a._iDisplayStart;if(b=="first"){a._iDisplayStart=0}else{if(b=="previous"){a._iDisplayStart=a._iDisplayLength>=0?a._iDisplayStart-a._iDisplayLength:0;if(a._iDisplayStart<0){a._iDisplayStart=0}}else{if(b=="next"){if(a._iDisplayLength>=0){if(a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()){a._iDisplayStart+=a._iDisplayLength}}else{a._iDisplayStart=0}}else{if(b=="last"){if(a._iDisplayLength>=0){b=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(b-1)*a._iDisplayLength}else{a._iDisplayStart=0}}else{J(a,0,"Unknown paging action: "+b)}}}}return c!=a._iDisplayStart}function Ga(a){var b=p.createElement("div");b.className=a.oClasses.sInfo;if(typeof a.aanFeatures.i=="undefined"){a.aoDrawCallback.push({fn:Na,sName:"information"});a.sTableId!==""&&b.setAttribute("id",a.sTableId+"_info")}return b}function Na(a){if(!(!a.oFeatures.bInfo||a.aanFeatures.i.length===0)){var b=a._iDisplayStart+1,c=a.fnDisplayEnd(),d=a.fnRecordsTotal(),f=a.fnRecordsDisplay(),e=a.fnFormatNumber(b),h=a.fnFormatNumber(c),j=a.fnFormatNumber(d),k=a.fnFormatNumber(f);if(a.oScroll.bInfinite){e=a.fnFormatNumber(1)}e=a.fnRecordsDisplay()===0&&a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfoEmpty+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()===0?a.oLanguage.sInfoEmpty+" "+a.oLanguage.sInfoFiltered.replace("_MAX_",j)+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfo.replace("_START_",e).replace("_END_",h).replace("_TOTAL_",k)+a.oLanguage.sInfoPostFix:a.oLanguage.sInfo.replace("_START_",e).replace("_END_",h).replace("_TOTAL_",k)+" "+a.oLanguage.sInfoFiltered.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()))+a.oLanguage.sInfoPostFix;if(a.oLanguage.fnInfoCallback!==null){e=a.oLanguage.fnInfoCallback(a,b,c,d,f,e)}a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++){i(a[b]).html(e)}}}function Ca(a){if(a.oScroll.bInfinite){return null}var b='<select size="1" '+(a.sTableId===""?"":'name="'+a.sTableId+'_length"')+">",c,d;if(a.aLengthMenu.length==2&&typeof a.aLengthMenu[0]=="object"&&typeof a.aLengthMenu[1]=="object"){c=0;for(d=a.aLengthMenu[0].length;c<d;c++){b+='<option value="'+a.aLengthMenu[0][c]+'">'+a.aLengthMenu[1][c]+"</option>"}}else{c=0;for(d=a.aLengthMenu.length;c<d;c++){b+='<option value="'+a.aLengthMenu[c]+'">'+a.aLengthMenu[c]+"</option>"}}b+="</select>";var f=p.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.l=="undefined"&&f.setAttribute("id",a.sTableId+"_length");f.className=a.oClasses.sLength;f.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";i('select option[value="'+a._iDisplayLength+'"]',f).attr("selected",true);i("select",f).bind("change.DT",function(){var e=i(this).val(),h=a.aanFeatures.l;c=0;for(d=h.length;c<d;c++){h[c]!=this.parentNode&&i("select",h[c]).val(e)}a._iDisplayLength=parseInt(e,10);E(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()){a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength;if(a._iDisplayStart<0){a._iDisplayStart=0}}if(a._iDisplayLength==-1){a._iDisplayStart=0}C(a)});return f}function Ea(a){var b=p.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.r=="undefined"&&b.setAttribute("id",a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function K(a,b){if(a.oFeatures.bProcessing){a=a.aanFeatures.r;for(var c=0,d=a.length;c<d;c++){a[c].style.visibility=b?"visible":"hidden"}}}function Ja(a,b){for(var c=-1,d=0;d<a.aoColumns.length;d++){a.aoColumns[d].bVisible===true&&c++;if(c==b){return d}}return null}function pa(a,b){for(var c=-1,d=0;d<a.aoColumns.length;d++){a.aoColumns[d].bVisible===true&&c++;if(d==b){return a.aoColumns[d].bVisible===true?c:null}}return null}function U(a,b){var c,d;c=a._iDisplayStart;for(d=a._iDisplayEnd;c<d;c++){if(a.aoData[a.aiDisplay[c]].nTr==b){return a.aiDisplay[c]}}c=0;for(d=a.aoData.length;c<d;c++){if(a.aoData[c].nTr==b){return c}}return null}function X(a){for(var b=0,c=0;c<a.aoColumns.length;c++){a.aoColumns[c].bVisible===true&&b++}return b}function E(a){a._iDisplayEnd=a.oFeatures.bPaginate===false?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||a._iDisplayLength==-1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Oa(a,b){if(!a||a===null||a===""){return 0}if(typeof b=="undefined"){b=p.getElementsByTagName("body")[0]}var c=p.createElement("div");c.style.width=u(a);b.appendChild(c);a=c.offsetWidth;b.removeChild(c);return a}function ea(a){var b=0,c,d=0,f=a.aoColumns.length,e,h=i("th",a.nTHead);for(e=0;e<f;e++){if(a.aoColumns[e].bVisible){d++;if(a.aoColumns[e].sWidth!==null){c=Oa(a.aoColumns[e].sWidthOrig,a.nTable.parentNode);if(c!==null){a.aoColumns[e].sWidth=u(c)}b++}}}if(f==h.length&&b===0&&d==f&&a.oScroll.sX===""&&a.oScroll.sY===""){for(e=0;e<a.aoColumns.length;e++){c=i(h[e]).width();if(c!==null){a.aoColumns[e].sWidth=u(c)}}}else{b=a.nTable.cloneNode(false);e=a.nTHead.cloneNode(true);d=p.createElement("tbody");c=p.createElement("tr");b.removeAttribute("id");b.appendChild(e);if(a.nTFoot!==null){b.appendChild(a.nTFoot.cloneNode(true));P(function(k){k.style.width=""},b.getElementsByTagName("tr"))}b.appendChild(d);d.appendChild(c);d=i("thead th",b);if(d.length===0){d=i("tbody tr:eq(0)>td",b)}h=S(a,e);for(e=d=0;e<f;e++){var j=a.aoColumns[e];if(j.bVisible&&j.sWidthOrig!==null&&j.sWidthOrig!==""){h[e-d].style.width=u(j.sWidthOrig)}else{if(j.bVisible){h[e-d].style.width=""}else{d++}}}for(e=0;e<f;e++){if(a.aoColumns[e].bVisible){d=Pa(a,e);if(d!==null){d=d.cloneNode(true);if(a.aoColumns[e].sContentPadding!==""){d.innerHTML+=a.aoColumns[e].sContentPadding}c.appendChild(d)}}}f=a.nTable.parentNode;f.appendChild(b);if(a.oScroll.sX!==""&&a.oScroll.sXInner!==""){b.style.width=u(a.oScroll.sXInner)}else{if(a.oScroll.sX!==""){b.style.width="";if(i(b).width()<f.offsetWidth){b.style.width=u(f.offsetWidth)}}else{if(a.oScroll.sY!==""){b.style.width=u(f.offsetWidth)}}}b.style.visibility="hidden";Qa(a,b);f=i("tbody tr:eq(0)",b).children();if(f.length===0){f=S(a,i("thead",b)[0])}if(a.oScroll.sX!==""){for(e=d=c=0;e<a.aoColumns.length;e++){if(a.aoColumns[e].bVisible){c+=a.aoColumns[e].sWidthOrig===null?i(f[d]).outerWidth():parseInt(a.aoColumns[e].sWidth.replace("px",""),10)+(i(f[d]).outerWidth()-i(f[d]).width());d++}}b.style.width=u(c);a.nTable.style.width=u(c)}for(e=d=0;e<a.aoColumns.length;e++){if(a.aoColumns[e].bVisible){c=i(f[d]).width();if(c!==null&&c>0){a.aoColumns[e].sWidth=u(c)}d++}}a.nTable.style.width=u(i(b).outerWidth());b.parentNode.removeChild(b)}}function Qa(a,b){if(a.oScroll.sX===""&&a.oScroll.sY!==""){i(b).width();b.style.width=u(i(b).outerWidth()-a.oScroll.iBarWidth)}else{if(a.oScroll.sX!==""){b.style.width=u(i(b).outerWidth())}}}function Pa(a,b){var c=Ra(a,b);if(c<0){return null}if(a.aoData[c].nTr===null){var d=p.createElement("td");d.innerHTML=H(a,c,b,"");return d}return Q(a,c)[b]}function Ra(a,b){for(var c=-1,d=-1,f=0;f<a.aoData.length;f++){var e=H(a,f,b,"display")+"";e=e.replace(/<.*?>/g,"");if(e.length>c){c=e.length;d=f}}return d}function u(a){if(a===null){return"0px"}if(typeof a=="number"){if(a<0){return"0px"}return a+"px"}var b=a.charCodeAt(a.length-1);if(b<48||b>57){return a}return a+"px"}function Va(a,b){if(a.length!=b.length){return 1}for(var c=0;c<a.length;c++){if(a[c]!=b[c]){return 2}}return 0}function fa(a){for(var b=o.aTypes,c=b.length,d=0;d<c;d++){var f=b[d](a);if(f!==null){return f}}return"string"}function A(a){for(var b=0;b<D.length;b++){if(D[b].nTable==a){return D[b]}}return null}function aa(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++){b.push(a.aoData[d]._aData)}return b}function $(a){for(var b=[],c=0,d=a.aoData.length;c<d;c++){a.aoData[c].nTr!==null&&b.push(a.aoData[c].nTr)}return b}function Q(a,b){var c=[],d,f,e,h,j;f=0;var k=a.aoData.length;if(typeof b!="undefined"){f=b;k=b+1}for(f=f;f<k;f++){j=a.aoData[f];if(j.nTr!==null){b=[];e=0;for(h=j.nTr.childNodes.length;e<h;e++){d=j.nTr.childNodes[e].nodeName.toLowerCase();if(d=="td"||d=="th"){b.push(j.nTr.childNodes[e])}}e=d=0;for(h=a.aoColumns.length;e<h;e++){if(a.aoColumns[e].bVisible){c.push(b[e-d])}else{c.push(j._anHidden[e]);d++}}}}return c}function oa(a){return a.replace(new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)","g"),"\\$1")}function ra(a,b){for(var c=-1,d=0,f=a.length;d<f;d++){if(a[d]==b){c=d}else{a[d]>b&&a[d]--}}c!=-1&&a.splice(c,1)}function Ba(a,b){b=b.split(",");for(var c=[],d=0,f=a.aoColumns.length;d<f;d++){for(var e=0;e<f;e++){if(a.aoColumns[d].sName==b[e]){c.push(e);break}}}return c}function ha(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++){b+=a.aoColumns[c].sName+","}if(b.length==d){return""}return b.slice(0,-1)}function J(a,b,c){a=a.sTableId===""?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(b===0){if(o.sErrMode=="alert"){alert(a)}else{throw a}}else{typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(a)}}function ia(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);E(a)}function sa(a){if(!(!a.oFeatures.bStateSave||typeof a.bDestroying!="undefined")){var b,c,d,f="{";f+='"iCreate":'+(new Date).getTime()+",";f+='"iStart":'+(a.oScroll.bInfinite?0:a._iDisplayStart)+",";f+='"iEnd":'+(a.oScroll.bInfinite?a._iDisplayLength:a._iDisplayEnd)+",";f+='"iLength":'+a._iDisplayLength+",";f+='"sFilter":"'+encodeURIComponent(a.oPreviousSearch.sSearch)+'",';f+='"sFilterEsc":'+!a.oPreviousSearch.bRegex+",";f+='"aaSorting":[ ';for(b=0;b<a.aaSorting.length;b++){f+="["+a.aaSorting[b][0]+',"'+a.aaSorting[b][1]+'"],'}f=f.substring(0,f.length-1);f+="],";f+='"aaSearchCols":[ ';for(b=0;b<a.aoPreSearchCols.length;b++){f+='["'+encodeURIComponent(a.aoPreSearchCols[b].sSearch)+'",'+!a.aoPreSearchCols[b].bRegex+"],"}f=f.substring(0,f.length-1);f+="],";f+='"abVisCols":[ ';for(b=0;b<a.aoColumns.length;b++){f+=a.aoColumns[b].bVisible+","}f=f.substring(0,f.length-1);f+="]";b=0;for(c=a.aoStateSave.length;b<c;b++){d=a.aoStateSave[b].fn(a,f);if(d!==""){f=d}}f+="}";Sa(a.sCookiePrefix+a.sInstance,f,a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)}}function Ta(a,b){if(a.oFeatures.bStateSave){var c,d,f;d=ta(a.sCookiePrefix+a.sInstance);if(d!==null&&d!==""){try{c=typeof i.parseJSON=="function"?i.parseJSON(d.replace(/'/g,'"')):eval("("+d+")")}catch(e){return}d=0;for(f=a.aoStateLoad.length;d<f;d++){if(!a.aoStateLoad[d].fn(a,c)){return}}a.oLoadedState=i.extend(true,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.oPreviousSearch.sSearch=decodeURIComponent(c.sFilter);a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();if(typeof c.sFilterEsc!="undefined"){a.oPreviousSearch.bRegex=!c.sFilterEsc}if(typeof c.aaSearchCols!="undefined"){for(d=0;d<c.aaSearchCols.length;d++){a.aoPreSearchCols[d]={sSearch:decodeURIComponent(c.aaSearchCols[d][0]),bRegex:!c.aaSearchCols[d][1]}}}if(typeof c.abVisCols!="undefined"){b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++){b.saved_aoColumns[d]={};b.saved_aoColumns[d].bVisible=c.abVisCols[d]}}}}}function Sa(a,b,c,d,f){var e=new Date;e.setTime(e.getTime()+c*1000);c=wa.location.pathname.split("/");a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase();var h;if(f!==null){h=typeof i.parseJSON=="function"?i.parseJSON(b):eval("("+b+")");b=f(a,h,e.toGMTString(),c.join("/")+"/")}else{b=a+"="+encodeURIComponent(b)+"; expires="+e.toGMTString()+"; path="+c.join("/")+"/"}f="";e=9999999999999;if((ta(a)!==null?p.cookie.length:b.length+p.cookie.length)+10>4096){a=p.cookie.split(";");for(var j=0,k=a.length;j<k;j++){if(a[j].indexOf(d)!=-1){var m=a[j].split("=");try{h=eval("("+decodeURIComponent(m[1])+")")}catch(t){continue}if(typeof h.iCreate!="undefined"&&h.iCreate<e){f=m[0];e=h.iCreate}}}if(f!==""){p.cookie=f+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}p.cookie=b}function ta(a){var b=wa.location.pathname.split("/");a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=";b=p.cookie.split(";");for(var c=0;c<b.length;c++){for(var d=b[c];d.charAt(0)==" ";){d=d.substring(1,d.length)}if(d.indexOf(a)===0){return decodeURIComponent(d.substring(a.length,d.length))}}return null}function W(a,b){b=b.getElementsByTagName("tr");var c,d,f,e,h,j,k,m,t=function(O,B,F){for(;typeof O[B][F]!="undefined";){F++}return F};a.splice(0,a.length);d=0;for(j=b.length;d<j;d++){a.push([])}d=0;for(j=b.length;d<j;d++){f=0;for(k=b[d].childNodes.length;f<k;f++){c=b[d].childNodes[f];if(c.nodeName.toUpperCase()=="TD"||c.nodeName.toUpperCase()=="TH"){var q=c.getAttribute("colspan")*1,I=c.getAttribute("rowspan")*1;q=!q||q===0||q===1?1:q;I=!I||I===0||I===1?1:I;m=t(a,d,0);for(h=0;h<q;h++){for(e=0;e<I;e++){a[d+e][m+h]={cell:c,unique:q==1?true:false};a[d+e].nTr=b[d]}}}}}}function S(a,b,c){var d=[];if(typeof c=="undefined"){c=a.aoHeader;if(typeof b!="undefined"){c=[];W(c,b)}}b=0;for(var f=c.length;b<f;b++){for(var e=0,h=c[b].length;e<h;e++){if(c[b][e].unique&&(typeof d[e]=="undefined"||!a.bSortCellsTop)){d[e]=c[b][e].cell}}}return d}function Ua(){var a=p.createElement("p"),b=a.style;b.width="100%";b.height="200px";var c=p.createElement("div");b=c.style;b.position="absolute";b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";b.overflow="hidden";c.appendChild(a);p.body.appendChild(c);b=a.offsetWidth;c.style.overflow="scroll";a=a.offsetWidth;if(b==a){a=c.clientWidth}p.body.removeChild(c);return b-a}function P(a,b,c){for(var d=0,f=b.length;d<f;d++){for(var e=0,h=b[d].childNodes.length;e<h;e++){if(b[d].childNodes[e].nodeType==1){typeof c!="undefined"?a(b[d].childNodes[e],c[d].childNodes[e]):a(b[d].childNodes[e])}}}}function n(a,b,c,d){if(typeof d=="undefined"){d=c}if(typeof b[c]!="undefined"){a[d]=b[c]}}function da(a,b,c){for(var d=[],f=0,e=a.aoColumns.length;f<e;f++){d.push(H(a,b,f,c))}return d}function H(a,b,c,d){var f=a.aoColumns[c];if((c=f.fnGetData(a.aoData[b]._aData))===undefined){if(a.iDrawError!=a.iDraw&&f.sDefaultContent===null){J(a,0,"Requested unknown parameter '"+f.mDataProp+"' from the data source for row "+b);a.iDrawError=a.iDraw}return f.sDefaultContent}if(c===null&&f.sDefaultContent!==null){c=f.sDefaultContent}if(d=="display"&&c===null){return""}return c}function N(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function Z(a){if(a===null){return function(){return null}}else{if(typeof a=="function"){return function(c){return a(c)}}else{if(typeof a=="string"&&a.indexOf(".")!=-1){var b=a.split(".");return b.length==2?function(c){return c[b[0]][b[1]]}:b.length==3?function(c){return c[b[0]][b[1]][b[2]]}:function(c){for(var d=0,f=b.length;d<f;d++){c=c[b[d]]}return c}}else{return function(c){return c[a]}}}}}function ya(a){if(a===null){return function(){}}else{if(typeof a=="function"){return function(c,d){return a(c,d)}}else{if(typeof a=="string"&&a.indexOf(".")!=-1){var b=a.split(".");return b.length==2?function(c,d){c[b[0]][b[1]]=d}:b.length==3?function(c,d){c[b[0]][b[1]][b[2]]=d}:function(c,d){for(var f=0,e=b.length-1;f<e;f++){c=c[b[f]]}c[b[b.length-1]]=d}}else{return function(c,d){c[a]=d}}}}}this.oApi={};this.fnDraw=function(a){var b=A(this[o.iApiIndex]);if(typeof a!="undefined"&&a===false){E(b);C(b)}else{ba(b)}};this.fnFilter=function(a,b,c,d,f){var e=A(this[o.iApiIndex]);if(e.oFeatures.bFilter){if(typeof c=="undefined"){c=false}if(typeof d=="undefined"){d=true}if(typeof f=="undefined"){f=true}if(typeof b=="undefined"||b===null){M(e,{sSearch:a,bRegex:c,bSmart:d},1);if(f&&typeof e.aanFeatures.f!="undefined"){b=e.aanFeatures.f;c=0;for(d=b.length;c<d;c++){i("input",b[c]).val(a)}}}else{e.aoPreSearchCols[b].sSearch=a;e.aoPreSearchCols[b].bRegex=c;e.aoPreSearchCols[b].bSmart=d;M(e,e.oPreviousSearch,1)}}};this.fnSettings=function(){return A(this[o.iApiIndex])};this.fnVersionCheck=o.fnVersionCheck;this.fnSort=function(a){var b=A(this[o.iApiIndex]);b.aaSorting=a;R(b)};this.fnSortListener=function(a,b,c){ga(A(this[o.iApiIndex]),a,b,c)};this.fnAddData=function(a,b){if(a.length===0){return[]}var c=[],d,f=A(this[o.iApiIndex]);if(typeof a[0]=="object"){for(var e=0;e<a.length;e++){d=v(f,a[e]);if(d==-1){return c}c.push(d)}}else{d=v(f,a);if(d==-1){return c}c.push(d)}f.aiDisplay=f.aiDisplayMaster.slice();if(typeof b=="undefined"||b){ba(f)}return c};this.fnDeleteRow=function(a,b,c){var d=A(this[o.iApiIndex]);a=typeof a=="object"?U(d,a):a;var f=d.aoData.splice(a,1),e=i.inArray(a,d.aiDisplay);d.asDataSearch.splice(e,1);ra(d.aiDisplayMaster,a);ra(d.aiDisplay,a);typeof b=="function"&&b.call(this,d,f);if(d._iDisplayStart>=d.aiDisplay.length){d._iDisplayStart-=d._iDisplayLength;if(d._iDisplayStart<0){d._iDisplayStart=0}}if(typeof c=="undefined"||c){E(d);C(d)}return f};this.fnClearTable=function(a){var b=A(this[o.iApiIndex]);ia(b);if(typeof a=="undefined"||a){C(b)}};this.fnOpen=function(a,b,c){var d=A(this[o.iApiIndex]);this.fnClose(a);var f=p.createElement("tr"),e=p.createElement("td");f.appendChild(e);e.className=c;e.colSpan=X(d);if(typeof b.jquery!="undefined"||typeof b=="object"){e.appendChild(b)}else{e.innerHTML=b}b=i("tr",d.nTBody);i.inArray(a,b)!=-1&&i(f).insertAfter(a);d.aoOpenRows.push({nTr:f,nParent:a});return f};this.fnClose=function(a){for(var b=A(this[o.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr);b.aoOpenRows.splice(c,1);return 0}}return 1};this.fnGetData=function(a,b){var c=A(this[o.iApiIndex]);if(typeof a!="undefined"){a=typeof a=="object"?U(c,a):a;if(typeof b!="undefined"){return H(c,a,b,"")}return typeof c.aoData[a]!="undefined"?c.aoData[a]._aData:null}return aa(c)};this.fnGetNodes=function(a){var b=A(this[o.iApiIndex]);if(typeof a!="undefined"){return typeof b.aoData[a]!="undefined"?b.aoData[a].nTr:null}return $(b)};this.fnGetPosition=function(a){var b=A(this[o.iApiIndex]),c=a.nodeName.toUpperCase();if(c=="TR"){return U(b,a)}else{if(c=="TD"||c=="TH"){c=U(b,a.parentNode);for(var d=Q(b,c),f=0;f<b.aoColumns.length;f++){if(d[f]==a){return[c,pa(b,f),f]}}}}return null};this.fnUpdate=function(a,b,c,d,f){var e=A(this[o.iApiIndex]);b=typeof b=="object"?U(e,b):b;if(i.isArray(a)&&typeof a=="object"){e.aoData[b]._aData=a.slice();for(c=0;c<e.aoColumns.length;c++){this.fnUpdate(H(e,b,c),b,c,false,false)}}else{if(typeof a=="object"){e.aoData[b]._aData=i.extend(true,{},a);for(c=0;c<e.aoColumns.length;c++){this.fnUpdate(H(e,b,c),b,c,false,false)}}else{a=a;N(e,b,c,a);if(e.aoColumns[c].fnRender!==null){a=e.aoColumns[c].fnRender({iDataRow:b,iDataColumn:c,aData:e.aoData[b]._aData,oSettings:e});e.aoColumns[c].bUseRendered&&N(e,b,c,a)}if(e.aoData[b].nTr!==null){Q(e,b)[c].innerHTML=a}}}c=i.inArray(b,e.aiDisplay);e.asDataSearch[c]=na(e,da(e,b,"filter"));if(typeof f=="undefined"||f){ca(e)}if(typeof d=="undefined"||d){ba(e)}return 0};this.fnSetColumnVis=function(a,b,c){var d=A(this[o.iApiIndex]),f,e;e=d.aoColumns.length;var h,j;if(d.aoColumns[a].bVisible!=b){if(b){for(f=j=0;f<a;f++){d.aoColumns[f].bVisible&&j++}j=j>=X(d);if(!j){for(f=a;f<e;f++){if(d.aoColumns[f].bVisible){h=f;break}}}f=0;for(e=d.aoData.length;f<e;f++){if(d.aoData[f].nTr!==null){j?d.aoData[f].nTr.appendChild(d.aoData[f]._anHidden[a]):d.aoData[f].nTr.insertBefore(d.aoData[f]._anHidden[a],Q(d,f)[h])}}}else{f=0;for(e=d.aoData.length;f<e;f++){if(d.aoData[f].nTr!==null){h=Q(d,f)[a];d.aoData[f]._anHidden[a]=h;h.parentNode.removeChild(h)}}}d.aoColumns[a].bVisible=b;L(d,d.aoHeader);d.nTFoot&&L(d,d.aoFooter);f=0;for(e=d.aoOpenRows.length;f<e;f++){d.aoOpenRows[f].nTr.colSpan=X(d)}if(typeof c=="undefined"||c){ca(d);C(d)}sa(d)}};this.fnPageChange=function(a,b){var c=A(this[o.iApiIndex]);ja(c,a);E(c);if(typeof b=="undefined"||b){C(c)}};this.fnDestroy=function(){var a=A(this[o.iApiIndex]),b=a.nTableWrapper.parentNode,c=a.nTBody,d,f;a.bDestroying=true;d=0;for(f=a.aoColumns.length;d<f;d++){a.aoColumns[d].bVisible===false&&this.fnSetColumnVis(d,true)}i(a.nTableWrapper).find("*").andSelf().unbind(".DT");i("tbody>tr>td."+a.oClasses.sRowEmpty,a.nTable).parent().remove();if(a.nTable!=a.nTHead.parentNode){i(">thead",a.nTable).remove();a.nTable.appendChild(a.nTHead)}if(a.nTFoot&&a.nTable!=a.nTFoot.parentNode){i(">tfoot",a.nTable).remove();a.nTable.appendChild(a.nTFoot)}a.nTable.parentNode.removeChild(a.nTable);i(a.nTableWrapper).remove();a.aaSorting=[];a.aaSortingFixed=[];T(a);i($(a)).removeClass(a.asStripClasses.join(" "));if(a.bJUI){i("th",a.nTHead).removeClass([o.oStdClasses.sSortable,o.oJUIClasses.sSortableAsc,o.oJUIClasses.sSortableDesc,o.oJUIClasses.sSortableNone].join(" "));i("th span."+o.oJUIClasses.sSortIcon,a.nTHead).remove();i("th",a.nTHead).each(function(){var e=i("div."+o.oJUIClasses.sSortJUIWrapper,this),h=e.contents();i(this).append(h);e.remove()})}else{i("th",a.nTHead).removeClass([o.oStdClasses.sSortable,o.oStdClasses.sSortableAsc,o.oStdClasses.sSortableDesc,o.oStdClasses.sSortableNone].join(" "))}a.nTableReinsertBefore?b.insertBefore(a.nTable,a.nTableReinsertBefore):b.appendChild(a.nTable);d=0;for(f=a.aoData.length;d<f;d++){a.aoData[d].nTr!==null&&c.appendChild(a.aoData[d].nTr)}if(a.oFeatures.bAutoWidth===true){a.nTable.style.width=u(a.sDestroyWidth)}i(">tr:even",c).addClass(a.asDestoryStrips[0]);i(">tr:odd",c).addClass(a.asDestoryStrips[1]);d=0;for(f=D.length;d<f;d++){D[d]==a&&D.splice(d,1)}a=null};this.fnAdjustColumnSizing=function(a){var b=A(this[o.iApiIndex]);ca(b);if(typeof a=="undefined"||a){this.fnDraw(false)}else{if(b.oScroll.sX!==""||b.oScroll.sY!==""){this.oApi._fnScrollDraw(b)}}};for(var ua in o.oApi){if(ua){this[ua]=r(ua)}}this.oApi._fnExternApiFunc=r;this.oApi._fnInitalise=s;this.oApi._fnInitComplete=w;this.oApi._fnLanguageProcess=y;this.oApi._fnAddColumn=G;this.oApi._fnColumnOptions=x;this.oApi._fnAddData=v;this.oApi._fnCreateTr=z;this.oApi._fnGatherData=Y;this.oApi._fnBuildHead=V;this.oApi._fnDrawHead=L;this.oApi._fnDraw=C;this.oApi._fnReDraw=ba;this.oApi._fnAjaxUpdate=za;this.oApi._fnAjaxUpdateDraw=Aa;this.oApi._fnAddOptionsHtml=xa;this.oApi._fnFeatureHtmlTable=Fa;this.oApi._fnScrollDraw=Ia;this.oApi._fnAjustColumnSizing=ca;this.oApi._fnFeatureHtmlFilter=Da;this.oApi._fnFilterComplete=M;this.oApi._fnFilterCustom=Ma;this.oApi._fnFilterColumn=La;this.oApi._fnFilter=Ka;this.oApi._fnBuildSearchArray=ka;this.oApi._fnBuildSearchRow=na;this.oApi._fnFilterCreateSearch=la;this.oApi._fnDataToSearch=ma;this.oApi._fnSort=R;this.oApi._fnSortAttachListener=ga;this.oApi._fnSortingClasses=T;this.oApi._fnFeatureHtmlPaginate=Ha;this.oApi._fnPageChange=ja;this.oApi._fnFeatureHtmlInfo=Ga;this.oApi._fnUpdateInfo=Na;this.oApi._fnFeatureHtmlLength=Ca;this.oApi._fnFeatureHtmlProcessing=Ea;this.oApi._fnProcessingDisplay=K;this.oApi._fnVisibleToColumnIndex=Ja;this.oApi._fnColumnIndexToVisible=pa;this.oApi._fnNodeToDataIndex=U;this.oApi._fnVisbleColumns=X;this.oApi._fnCalculateEnd=E;this.oApi._fnConvertToWidth=Oa;this.oApi._fnCalculateColumnWidths=ea;this.oApi._fnScrollingWidthAdjust=Qa;this.oApi._fnGetWidestNode=Pa;this.oApi._fnGetMaxLenString=Ra;this.oApi._fnStringToCss=u;this.oApi._fnArrayCmp=Va;this.oApi._fnDetectType=fa;this.oApi._fnSettingsFromNode=A;this.oApi._fnGetDataMaster=aa;this.oApi._fnGetTrNodes=$;this.oApi._fnGetTdNodes=Q;this.oApi._fnEscapeRegex=oa;this.oApi._fnDeleteIndex=ra;this.oApi._fnReOrderIndex=Ba;this.oApi._fnColumnOrdering=ha;this.oApi._fnLog=J;this.oApi._fnClearTable=ia;this.oApi._fnSaveState=sa;this.oApi._fnLoadState=Ta;this.oApi._fnCreateCookie=Sa;this.oApi._fnReadCookie=ta;this.oApi._fnDetectHeader=W;this.oApi._fnGetUniqueThs=S;this.oApi._fnScrollBarWidth=Ua;this.oApi._fnApplyToChildren=P;this.oApi._fnMap=n;this.oApi._fnGetRowData=da;this.oApi._fnGetCellData=H;this.oApi._fnSetCellData=N;this.oApi._fnGetObjectDataFn=Z;this.oApi._fnSetObjectDataFn=ya;var va=this;return this.each(function(){var a=0,b,c,d,f;a=0;for(b=D.length;a<b;a++){if(D[a].nTable==this){if(typeof g=="undefined"||typeof g.bRetrieve!="undefined"&&g.bRetrieve===true){return D[a].oInstance}else{if(typeof g.bDestroy!="undefined"&&g.bDestroy===true){D[a].oInstance.fnDestroy();break}else{J(D[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(D[a].sTableId!==""&&D[a].sTableId==this.getAttribute("id")){D.splice(a,1);break}}var e=new l;D.push(e);var h=false,j=false;a=this.getAttribute("id");if(a!==null){e.sTableId=a;e.sInstance=a}else{e.sInstance=o._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){J(e,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName)}else{e.nTable=this;e.oInstance=va.length==1?va:i(this).dataTable();e.oApi=va.oApi;e.sDestroyWidth=i(this).width();if(typeof g!="undefined"&&g!==null){e.oInit=g;n(e.oFeatures,g,"bPaginate");n(e.oFeatures,g,"bLengthChange");n(e.oFeatures,g,"bFilter");n(e.oFeatures,g,"bSort");n(e.oFeatures,g,"bInfo");n(e.oFeatures,g,"bProcessing");n(e.oFeatures,g,"bAutoWidth");n(e.oFeatures,g,"bSortClasses");n(e.oFeatures,g,"bServerSide");n(e.oFeatures,g,"bDeferRender");n(e.oScroll,g,"sScrollX","sX");n(e.oScroll,g,"sScrollXInner","sXInner");n(e.oScroll,g,"sScrollY","sY");n(e.oScroll,g,"bScrollCollapse","bCollapse");n(e.oScroll,g,"bScrollInfinite","bInfinite");n(e.oScroll,g,"iScrollLoadGap","iLoadGap");n(e.oScroll,g,"bScrollAutoCss","bAutoCss");n(e,g,"asStripClasses");n(e,g,"fnPreDrawCallback");n(e,g,"fnRowCallback");n(e,g,"fnHeaderCallback");n(e,g,"fnFooterCallback");n(e,g,"fnCookieCallback");n(e,g,"fnInitComplete");n(e,g,"fnServerData");n(e,g,"fnFormatNumber");n(e,g,"aaSorting");n(e,g,"aaSortingFixed");n(e,g,"aLengthMenu");n(e,g,"sPaginationType");n(e,g,"sAjaxSource");n(e,g,"sAjaxDataProp");n(e,g,"iCookieDuration");n(e,g,"sCookiePrefix");n(e,g,"sDom");n(e,g,"bSortCellsTop");n(e,g,"oSearch","oPreviousSearch");n(e,g,"aoSearchCols","aoPreSearchCols");n(e,g,"iDisplayLength","_iDisplayLength");n(e,g,"bJQueryUI","bJUI");n(e.oLanguage,g,"fnInfoCallback");typeof g.fnDrawCallback=="function"&&e.aoDrawCallback.push({fn:g.fnDrawCallback,sName:"user"});typeof g.fnStateSaveCallback=="function"&&e.aoStateSave.push({fn:g.fnStateSaveCallback,sName:"user"});typeof g.fnStateLoadCallback=="function"&&e.aoStateLoad.push({fn:g.fnStateLoadCallback,sName:"user"});if(e.oFeatures.bServerSide&&e.oFeatures.bSort&&e.oFeatures.bSortClasses){e.aoDrawCallback.push({fn:T,sName:"server_side_sort_classes"})}else{e.oFeatures.bDeferRender&&e.aoDrawCallback.push({fn:T,sName:"defer_sort_classes"})}if(typeof g.bJQueryUI!="undefined"&&g.bJQueryUI){e.oClasses=o.oJUIClasses;if(typeof g.sDom=="undefined"){e.sDom='<"H"lfr>t<"F"ip>'}}if(e.oScroll.sX!==""||e.oScroll.sY!==""){e.oScroll.iBarWidth=Ua()}if(typeof g.iDisplayStart!="undefined"&&typeof e.iInitDisplayStart=="undefined"){e.iInitDisplayStart=g.iDisplayStart;e._iDisplayStart=g.iDisplayStart}if(typeof g.bStateSave!="undefined"){e.oFeatures.bStateSave=g.bStateSave;Ta(e,g);e.aoDrawCallback.push({fn:sa,sName:"state_save"})}if(typeof g.iDeferLoading!="undefined"){e.bDeferLoading=true;e._iRecordsTotal=g.iDeferLoading;e._iRecordsDisplay=g.iDeferLoading}if(typeof g.aaData!="undefined"){j=true}if(typeof g!="undefined"&&typeof g.aoData!="undefined"){g.aoColumns=g.aoData}if(typeof g.oLanguage!="undefined"){if(typeof g.oLanguage.sUrl!="undefined"&&g.oLanguage.sUrl!==""){e.oLanguage.sUrl=g.oLanguage.sUrl;i.getJSON(e.oLanguage.sUrl,null,function(t){y(e,t,true)});h=true}else{y(e,g.oLanguage,false)}}}else{g={}}if(typeof g.asStripClasses=="undefined"){e.asStripClasses.push(e.oClasses.sStripOdd);e.asStripClasses.push(e.oClasses.sStripEven)}c=false;d=i(">tbody>tr",this);a=0;for(b=e.asStripClasses.length;a<b;a++){if(d.filter(":lt(2)").hasClass(e.asStripClasses[a])){c=true;break}}if(c){e.asDestoryStrips=["",""];if(i(d[0]).hasClass(e.oClasses.sStripOdd)){e.asDestoryStrips[0]+=e.oClasses.sStripOdd+" "}if(i(d[0]).hasClass(e.oClasses.sStripEven)){e.asDestoryStrips[0]+=e.oClasses.sStripEven}if(i(d[1]).hasClass(e.oClasses.sStripOdd)){e.asDestoryStrips[1]+=e.oClasses.sStripOdd+" "}if(i(d[1]).hasClass(e.oClasses.sStripEven)){e.asDestoryStrips[1]+=e.oClasses.sStripEven}d.removeClass(e.asStripClasses.join(" "))}c=[];var k;a=this.getElementsByTagName("thead");if(a.length!==0){W(e.aoHeader,a[0]);c=S(e)}if(typeof g.aoColumns=="undefined"){k=[];a=0;for(b=c.length;a<b;a++){k.push(null)}}else{k=g.aoColumns}a=0;for(b=k.length;a<b;a++){if(typeof g.saved_aoColumns!="undefined"&&g.saved_aoColumns.length==b){if(k[a]===null){k[a]={}}k[a].bVisible=g.saved_aoColumns[a].bVisible}G(e,c?c[a]:null)}if(typeof g.aoColumnDefs!="undefined"){for(a=g.aoColumnDefs.length-1;a>=0;a--){var m=g.aoColumnDefs[a].aTargets;i.isArray(m)||J(e,1,"aTargets must be an array of targets, not a "+typeof m);c=0;for(d=m.length;c<d;c++){if(typeof m[c]=="number"&&m[c]>=0){for(;e.aoColumns.length<=m[c];){G(e)}x(e,m[c],g.aoColumnDefs[a])}else{if(typeof m[c]=="number"&&m[c]<0){x(e,e.aoColumns.length+m[c],g.aoColumnDefs[a])}else{if(typeof m[c]=="string"){b=0;for(f=e.aoColumns.length;b<f;b++){if(m[c]=="_all"||i(e.aoColumns[b].nTh).hasClass(m[c])){x(e,b,g.aoColumnDefs[a])}}}}}}}}if(typeof k!="undefined"){a=0;for(b=k.length;a<b;a++){x(e,a,k[a])}}a=0;for(b=e.aaSorting.length;a<b;a++){if(e.aaSorting[a][0]>=e.aoColumns.length){e.aaSorting[a][0]=0}k=e.aoColumns[e.aaSorting[a][0]];if(typeof e.aaSorting[a][2]=="undefined"){e.aaSorting[a][2]=0}if(typeof g.aaSorting=="undefined"&&typeof e.saved_aaSorting=="undefined"){e.aaSorting[a][1]=k.asSorting[0]}c=0;for(d=k.asSorting.length;c<d;c++){if(e.aaSorting[a][1]==k.asSorting[c]){e.aaSorting[a][2]=c;break}}}T(e);a=i(">thead",this);if(a.length===0){a=[p.createElement("thead")];this.appendChild(a[0])}e.nTHead=a[0];a=i(">tbody",this);if(a.length===0){a=[p.createElement("tbody")];this.appendChild(a[0])}e.nTBody=a[0];a=i(">tfoot",this);if(a.length>0){e.nTFoot=a[0];W(e.aoFooter,e.nTFoot)}if(j){for(a=0;a<g.aaData.length;a++){v(e,g.aaData[a])}}else{Y(e)}e.aiDisplay=e.aiDisplayMaster.slice();e.bInitialised=true;h===false&&s(e)}})}})(jQuery,window,document);(function(a){a.fn.scrollPagination=function(b){var c=a.extend(a.fn.scrollPagination.defaults,b);return this.each(function(){a.fn.scrollPagination.init(a(this),c)})};a.fn.scrollPagination.init=function(d,b){var c=a(d);c.attr("scrollPagination","enabled");c.scroll(function(e){if(c.attr("scrollPagination")=="enabled"){a.fn.scrollPagination.loadContent(d,b)}else{e.stopPropagation()}});a.fn.scrollPagination.loadContent(d,b)};a.fn.scrollPagination.loadContent=function(e,c){var d=a(e);var f=Math.floor(((d[0].scrollHeight*c.heightOffset)/d.height()));var b=((d[0].offsetHeight+d.scrollTop()+f)>=d[0].scrollHeight);b=b&&(d.scrollTop()>0);if(b){if(c.beforeLoad!=null){c.beforeLoad()}d.children().attr("rel","loaded");if(c.loadFn!=null){c.loadFn()}if(c.afterLoad!=null){c.afterLoad()}}};a.fn.stopScrollPagination=function(){return this.each(function(){a(this).attr("scrollPagination","disabled")})};a.fn.scrollPagination.defaults={beforeLoad:null,loadFn:null,afterLoad:null,heightOffset:0}})(jQuery);